<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='ç›¸å…³ redis å‘½ä»¤ä¸­æ–‡æ‰‹å†Œ https://redis.com.cn/commands.html\nredis hash list set zset çš„å¯¹æ¯”å’Œä½¿ç”¨ https://dev.leiyanhui.com/web/redis-hash-set-list/ golang å¸¸ç”¨æ•°æ®ç±»å‹è½¬æ¢ https://dev.leiyanhui.com/c/golang-string-byte-int-float-map-json/\ngo rediså®¢æˆ·ç«¯æ‰‹å†Œã€æ²¡å•¥å¯çœ‹çš„ã€‘ https://redis.uptrace.dev/zh/guide/\ngoä¸­æ–‡æ‰‹å†Œ è¿˜ä¸é”™ http://c.biancheng.net/golang/intro/\nè‹±æ–‡æ‰‹å†Œ å®ä¾‹ä¸å…¨ï¼Œä½†æ˜¯ç»†èŠ‚éƒ½æœ‰ https://pkg.go.dev/github.com/redis/go-redis/v9@v9.0.2\næœ¬æ–‡ä¸»è¦å†…å®¹è½¬è½½è‡ª https://www.cnblogs.com/itbsl/p/14198111.htm æ„Ÿè°¢ itbslï¼Œå¦å¤–å¢åŠ äº†ä¸€éƒ¨åˆ†å†…å®¹\né¡¹ç›®åˆå§‹åŒ– è¿™é‡Œç”¨redis/go-redis/v9\n1 2 go mod init demo go get github.com/redis/go-redis/v9 è¿æ¥redis 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 package main import ( "context" "fmt" "github.com/go-redis/redis/v8" ) //Backgroundè¿”å›ä¸€ä¸ªéç©ºçš„Contextã€‚ å®ƒæ°¸è¿œä¸ä¼šè¢«å–æ¶ˆï¼Œæ²¡æœ‰å€¼ï¼Œä¹Ÿæ²¡æœ‰æœŸé™ã€‚ //å®ƒé€šå¸¸åœ¨mainå‡½æ•°ï¼Œåˆå§‹åŒ–å’Œæµ‹è¯•æ—¶ä½¿ç”¨ï¼Œå¹¶ç”¨ä½œä¼ å…¥è¯·æ±‚çš„é¡¶çº§ä¸Šä¸‹æ–‡ã€‚ var ctx = context.Background() func main() { rdb := redis.NewClient(&amp;redis.Options{ Addr: "172.16.147.128:6379", Password: "", DB: 0, }) pong, err := rdb.Ping(ctx).Result() if err != nil { fmt.Printf("è¿æ¥rediså‡ºé”™ï¼Œé”™è¯¯ä¿¡æ¯ï¼š%v", err) } fmt.Println("æˆåŠŸè¿æ¥redis") } åŸºæœ¬æŒ‡ä»¤ Keys():æ ¹æ®æ­£åˆ™è·å–keys 1 2 3 //*è¡¨ç¤ºè·å–æ‰€æœ‰çš„key keys, err := rdb.Keys(ctx, "*").Result() } Rename RenameNX é‡å‘½åkey Redis Renamenx å‘½ä»¤ç”¨äºåœ¨æ–°çš„ key ä¸å­˜åœ¨æ—¶ä¿®æ”¹ key çš„åç§° ã€‚è‹¥ key ä¸å­˜åœ¨è¿”å›é”™è¯¯ã€‚\nRedis RENAME å‘½ä»¤ç”¨äºä¿®æ”¹ key çš„åå­—ä¸º newkey ã€‚è‹¥key ä¸å­˜åœ¨è¿”å›é”™è¯¯ã€‚å¦‚æœnewkeyå­˜åœ¨ å°†ä¼šè¢«è¦†ç›–ã€‚\n'><title>golang æ“ä½œrediså¤§å…¨</title><link rel=canonical href=https://dev.leiyanhui.com/golang/redis/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="golang æ“ä½œrediså¤§å…¨"><meta property='og:description' content='ç›¸å…³ redis å‘½ä»¤ä¸­æ–‡æ‰‹å†Œ https://redis.com.cn/commands.html\nredis hash list set zset çš„å¯¹æ¯”å’Œä½¿ç”¨ https://dev.leiyanhui.com/web/redis-hash-set-list/ golang å¸¸ç”¨æ•°æ®ç±»å‹è½¬æ¢ https://dev.leiyanhui.com/c/golang-string-byte-int-float-map-json/\ngo rediså®¢æˆ·ç«¯æ‰‹å†Œã€æ²¡å•¥å¯çœ‹çš„ã€‘ https://redis.uptrace.dev/zh/guide/\ngoä¸­æ–‡æ‰‹å†Œ è¿˜ä¸é”™ http://c.biancheng.net/golang/intro/\nè‹±æ–‡æ‰‹å†Œ å®ä¾‹ä¸å…¨ï¼Œä½†æ˜¯ç»†èŠ‚éƒ½æœ‰ https://pkg.go.dev/github.com/redis/go-redis/v9@v9.0.2\næœ¬æ–‡ä¸»è¦å†…å®¹è½¬è½½è‡ª https://www.cnblogs.com/itbsl/p/14198111.htm æ„Ÿè°¢ itbslï¼Œå¦å¤–å¢åŠ äº†ä¸€éƒ¨åˆ†å†…å®¹\né¡¹ç›®åˆå§‹åŒ– è¿™é‡Œç”¨redis/go-redis/v9\n1 2 go mod init demo go get github.com/redis/go-redis/v9 è¿æ¥redis 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 package main import ( "context" "fmt" "github.com/go-redis/redis/v8" ) //Backgroundè¿”å›ä¸€ä¸ªéç©ºçš„Contextã€‚ å®ƒæ°¸è¿œä¸ä¼šè¢«å–æ¶ˆï¼Œæ²¡æœ‰å€¼ï¼Œä¹Ÿæ²¡æœ‰æœŸé™ã€‚ //å®ƒé€šå¸¸åœ¨mainå‡½æ•°ï¼Œåˆå§‹åŒ–å’Œæµ‹è¯•æ—¶ä½¿ç”¨ï¼Œå¹¶ç”¨ä½œä¼ å…¥è¯·æ±‚çš„é¡¶çº§ä¸Šä¸‹æ–‡ã€‚ var ctx = context.Background() func main() { rdb := redis.NewClient(&amp;redis.Options{ Addr: "172.16.147.128:6379", Password: "", DB: 0, }) pong, err := rdb.Ping(ctx).Result() if err != nil { fmt.Printf("è¿æ¥rediså‡ºé”™ï¼Œé”™è¯¯ä¿¡æ¯ï¼š%v", err) } fmt.Println("æˆåŠŸè¿æ¥redis") } åŸºæœ¬æŒ‡ä»¤ Keys():æ ¹æ®æ­£åˆ™è·å–keys 1 2 3 //*è¡¨ç¤ºè·å–æ‰€æœ‰çš„key keys, err := rdb.Keys(ctx, "*").Result() } Rename RenameNX é‡å‘½åkey Redis Renamenx å‘½ä»¤ç”¨äºåœ¨æ–°çš„ key ä¸å­˜åœ¨æ—¶ä¿®æ”¹ key çš„åç§° ã€‚è‹¥ key ä¸å­˜åœ¨è¿”å›é”™è¯¯ã€‚\nRedis RENAME å‘½ä»¤ç”¨äºä¿®æ”¹ key çš„åå­—ä¸º newkey ã€‚è‹¥key ä¸å­˜åœ¨è¿”å›é”™è¯¯ã€‚å¦‚æœnewkeyå­˜åœ¨ å°†ä¼šè¢«è¦†ç›–ã€‚\n'><meta property='og:url' content='https://dev.leiyanhui.com/golang/redis/'><meta property='og:site_name' content='å°ç±»éšæ‰‹è®°'><meta property='og:type' content='article'><meta property='article:section' content='Golang'><meta property='article:published_time' content='2022-03-24T08:14:20+08:00'><meta property='article:modified_time' content='2022-03-24T08:14:20+08:00'><meta name=twitter:title content="golang æ“ä½œrediså¤§å…¨"><meta name=twitter:description content='ç›¸å…³ redis å‘½ä»¤ä¸­æ–‡æ‰‹å†Œ https://redis.com.cn/commands.html\nredis hash list set zset çš„å¯¹æ¯”å’Œä½¿ç”¨ https://dev.leiyanhui.com/web/redis-hash-set-list/ golang å¸¸ç”¨æ•°æ®ç±»å‹è½¬æ¢ https://dev.leiyanhui.com/c/golang-string-byte-int-float-map-json/\ngo rediså®¢æˆ·ç«¯æ‰‹å†Œã€æ²¡å•¥å¯çœ‹çš„ã€‘ https://redis.uptrace.dev/zh/guide/\ngoä¸­æ–‡æ‰‹å†Œ è¿˜ä¸é”™ http://c.biancheng.net/golang/intro/\nè‹±æ–‡æ‰‹å†Œ å®ä¾‹ä¸å…¨ï¼Œä½†æ˜¯ç»†èŠ‚éƒ½æœ‰ https://pkg.go.dev/github.com/redis/go-redis/v9@v9.0.2\næœ¬æ–‡ä¸»è¦å†…å®¹è½¬è½½è‡ª https://www.cnblogs.com/itbsl/p/14198111.htm æ„Ÿè°¢ itbslï¼Œå¦å¤–å¢åŠ äº†ä¸€éƒ¨åˆ†å†…å®¹\né¡¹ç›®åˆå§‹åŒ– è¿™é‡Œç”¨redis/go-redis/v9\n1 2 go mod init demo go get github.com/redis/go-redis/v9 è¿æ¥redis 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 package main import ( "context" "fmt" "github.com/go-redis/redis/v8" ) //Backgroundè¿”å›ä¸€ä¸ªéç©ºçš„Contextã€‚ å®ƒæ°¸è¿œä¸ä¼šè¢«å–æ¶ˆï¼Œæ²¡æœ‰å€¼ï¼Œä¹Ÿæ²¡æœ‰æœŸé™ã€‚ //å®ƒé€šå¸¸åœ¨mainå‡½æ•°ï¼Œåˆå§‹åŒ–å’Œæµ‹è¯•æ—¶ä½¿ç”¨ï¼Œå¹¶ç”¨ä½œä¼ å…¥è¯·æ±‚çš„é¡¶çº§ä¸Šä¸‹æ–‡ã€‚ var ctx = context.Background() func main() { rdb := redis.NewClient(&amp;redis.Options{ Addr: "172.16.147.128:6379", Password: "", DB: 0, }) pong, err := rdb.Ping(ctx).Result() if err != nil { fmt.Printf("è¿æ¥rediså‡ºé”™ï¼Œé”™è¯¯ä¿¡æ¯ï¼š%v", err) } fmt.Println("æˆåŠŸè¿æ¥redis") } åŸºæœ¬æŒ‡ä»¤ Keys():æ ¹æ®æ­£åˆ™è·å–keys 1 2 3 //*è¡¨ç¤ºè·å–æ‰€æœ‰çš„key keys, err := rdb.Keys(ctx, "*").Result() } Rename RenameNX é‡å‘½åkey Redis Renamenx å‘½ä»¤ç”¨äºåœ¨æ–°çš„ key ä¸å­˜åœ¨æ—¶ä¿®æ”¹ key çš„åç§° ã€‚è‹¥ key ä¸å­˜åœ¨è¿”å›é”™è¯¯ã€‚\nRedis RENAME å‘½ä»¤ç”¨äºä¿®æ”¹ key çš„åå­—ä¸º newkey ã€‚è‹¥key ä¸å­˜åœ¨è¿”å›é”™è¯¯ã€‚å¦‚æœnewkeyå­˜åœ¨ å°†ä¼šè¢«è¦†ç›–ã€‚\n'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_6049d840d4e2d14.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸŸ</span></figure><div class=site-meta><h1 class=site-name><a href=/>å°ç±»éšæ‰‹è®°</a></h1><h2 class=site-description>just so so.</h2></div></header><ol class=menu-social><li><a href=https://github.com/joyanhui/dev.leiyanhui.com-src target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>åˆ—è¡¨</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>ç«™å†…æœç´¢</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>links</span></a></li><li><a href=/contact/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>contact</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ç›¸å…³>ç›¸å…³</a></li><li><a href=#é¡¹ç›®åˆå§‹åŒ–>é¡¹ç›®åˆå§‹åŒ–</a></li><li><a href=#è¿æ¥redis>è¿æ¥redis</a></li><li><a href=#åŸºæœ¬æŒ‡ä»¤>åŸºæœ¬æŒ‡ä»¤</a><ol><li><a href=#keysæ ¹æ®æ­£åˆ™è·å–keys>Keys():æ ¹æ®æ­£åˆ™è·å–keys</a></li><li><a href=#rename-renamenx--é‡å‘½åkey>Rename RenameNX é‡å‘½åkey</a></li><li><a href=#typeè·å–keyå¯¹åº”å€¼å¾—ç±»å‹>Type():è·å–keyå¯¹åº”å€¼å¾—ç±»å‹</a></li><li><a href=#del-åˆ é™¤key>del åˆ é™¤key</a></li><li><a href=#existsæ£€æµ‹ç¼“å­˜é¡¹æ˜¯å¦å­˜åœ¨>Exists():æ£€æµ‹ç¼“å­˜é¡¹æ˜¯å¦å­˜åœ¨</a></li><li><a href=#expireexpireatè®¾ç½®æœ‰æ•ˆæœŸ>Expire(),ExpireAt():è®¾ç½®æœ‰æ•ˆæœŸ</a></li><li><a href=#ttlpttlè·å–æœ‰æ•ˆæœŸ>TTL(),PTTL():è·å–æœ‰æ•ˆæœŸ</a></li><li><a href=#dbsizeæŸ¥çœ‹å½“å‰æ•°æ®åº“keyçš„æ•°é‡>DBSize():æŸ¥çœ‹å½“å‰æ•°æ®åº“keyçš„æ•°é‡</a></li><li><a href=#flushdbæ¸…ç©ºå½“å‰æ•°æ®>FlushDB():æ¸…ç©ºå½“å‰æ•°æ®</a></li><li><a href=#flushallæ¸…ç©ºæ‰€æœ‰æ•°æ®åº“>FlushAll():æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“</a></li></ol></li><li><a href=#å­—ç¬¦ä¸²stringç±»å‹>å­—ç¬¦ä¸²(string)ç±»å‹</a><ol><li><a href=#setè®¾ç½®>Set():è®¾ç½®</a></li><li><a href=#setexè®¾ç½®å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´>SetEX():è®¾ç½®å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´</a></li><li><a href=#setnxè®¾ç½®å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´>SetNX():è®¾ç½®å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´</a></li><li><a href=#get>get</a></li><li><a href=#getrangeå­—ç¬¦ä¸²æˆªå–>GetRange():å­—ç¬¦ä¸²æˆªå–</a></li><li><a href=#incrå¢åŠ 1>Incr():å¢åŠ +1</a></li><li><a href=#incrbyæŒ‰æŒ‡å®šæ­¥é•¿å¢åŠ >IncrBy():æŒ‰æŒ‡å®šæ­¥é•¿å¢åŠ </a></li><li><a href=#decrå‡å°‘-1>Decr():å‡å°‘-1</a></li><li><a href=#decrbyæŒ‰æŒ‡å®šæ­¥é•¿å‡å°‘>DecrBy():æŒ‰æŒ‡å®šæ­¥é•¿å‡å°‘</a></li><li><a href=#appendè¿½åŠ >Append():è¿½åŠ </a></li><li><a href=#strlenè·å–é•¿åº¦>StrLen():è·å–é•¿åº¦</a></li><li><a href=#æ›´å¤š>æ›´å¤š</a></li></ol></li><li><a href=#åˆ—è¡¨listç±»å‹>åˆ—è¡¨(list)ç±»å‹</a><ol><li><a href=#lpushå°†å…ƒç´ å‹å…¥é“¾è¡¨>LPush():å°†å…ƒç´ å‹å…¥é“¾è¡¨</a></li><li><a href=#linsertåœ¨æŸä¸ªä½ç½®æ’å…¥æ–°å…ƒç´ >LInsert():åœ¨æŸä¸ªä½ç½®æ’å…¥æ–°å…ƒç´ </a></li><li><a href=#lsetè®¾ç½®æŸä¸ªå…ƒç´ çš„å€¼>LSet():è®¾ç½®æŸä¸ªå…ƒç´ çš„å€¼</a></li><li><a href=#llenè·å–é“¾è¡¨å…ƒç´ ä¸ªæ•°>LLen():è·å–é“¾è¡¨å…ƒç´ ä¸ªæ•°</a></li><li><a href=#lindexè·å–é“¾è¡¨ä¸‹æ ‡å¯¹åº”çš„å…ƒç´ >LIndex():è·å–é“¾è¡¨ä¸‹æ ‡å¯¹åº”çš„å…ƒç´ </a></li><li><a href=#lrangeè·å–æŸä¸ªé€‰å®šèŒƒå›´çš„å…ƒç´ é›†>LRange():è·å–æŸä¸ªé€‰å®šèŒƒå›´çš„å…ƒç´ é›†</a></li><li><a href=#lpopä»é“¾è¡¨å·¦ä¾§å¼¹å‡ºæ•°æ®>LPopä»é“¾è¡¨å·¦ä¾§å¼¹å‡ºæ•°æ®</a></li><li><a href=#lremæ ¹æ®å€¼ç§»é™¤å…ƒç´ >LRem():æ ¹æ®å€¼ç§»é™¤å…ƒç´ </a></li></ol></li><li><a href=#é›†åˆsetç±»å‹>é›†åˆ(set)ç±»å‹</a><ol><li><a href=#saddæ·»åŠ å…ƒç´ >SAdd():æ·»åŠ å…ƒç´ </a></li><li><a href=#spopéšæœºè·å–ä¸€ä¸ªå…ƒç´ >SPop():éšæœºè·å–ä¸€ä¸ªå…ƒç´ </a></li><li><a href=#sremåˆ é™¤é›†åˆé‡ŒæŒ‡å®šçš„å€¼>SRem():åˆ é™¤é›†åˆé‡ŒæŒ‡å®šçš„å€¼</a></li><li><a href=#ssmembersè·å–æ‰€æœ‰æˆå‘˜>SSMembers():è·å–æ‰€æœ‰æˆå‘˜</a></li><li><a href=#sismemberåˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­>SIsMember():åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­</a></li><li><a href=#scardè·å–é›†åˆå…ƒç´ ä¸ªæ•°>SCard():è·å–é›†åˆå…ƒç´ ä¸ªæ•°</a></li><li><a href=#sunionå¹¶é›†sdiffå·®é›†sinteräº¤é›†>SUnion():å¹¶é›†,SDiff():å·®é›†,SInter():äº¤é›†</a></li></ol></li><li><a href=#æœ‰åºé›†åˆzsetç±»å‹>æœ‰åºé›†åˆ(zset)ç±»å‹</a><ol><li><a href=#zaddæ·»åŠ å…ƒç´ >ZAdd():æ·»åŠ å…ƒç´ </a></li><li><a href=#zincrbyå¢åŠ å…ƒç´ åˆ†å€¼>ZIncrBy():å¢åŠ å…ƒç´ åˆ†å€¼</a></li><li><a href=#zrangezrevrangeè·å–æ ¹æ®scoreæ’åºåçš„æ•°æ®æ®µ>ZRange()ã€ZRevRange():è·å–æ ¹æ®scoreæ’åºåçš„æ•°æ®æ®µ</a></li><li><a href=#zrangebyscorezrevrangebyscoreè·å–scoreè¿‡æ»¤åæ’åºçš„æ•°æ®æ®µ>ZRangeByScore()ã€ZRevRangeByScore():è·å–scoreè¿‡æ»¤åæ’åºçš„æ•°æ®æ®µ</a></li><li><a href=#zcardè·å–å…ƒç´ ä¸ªæ•°>ZCard():è·å–å…ƒç´ ä¸ªæ•°</a></li><li><a href=#zcountè·å–åŒºé—´å†…å…ƒç´ ä¸ªæ•°>ZCount():è·å–åŒºé—´å†…å…ƒç´ ä¸ªæ•°</a></li><li><a href=#zscoreè·å–å…ƒç´ çš„score>ZScore():è·å–å…ƒç´ çš„score</a></li><li><a href=#zrankzrevrankè·å–æŸä¸ªå…ƒç´ åœ¨é›†åˆä¸­çš„æ’å>ZRank()ã€ZRevRank():è·å–æŸä¸ªå…ƒç´ åœ¨é›†åˆä¸­çš„æ’å</a></li><li><a href=#zremåˆ é™¤å…ƒç´ >ZRem():åˆ é™¤å…ƒç´ </a></li><li><a href=#zremrangebyrankæ ¹æ®æ’åæ¥åˆ é™¤>ZRemRangeByRank():æ ¹æ®æ’åæ¥åˆ é™¤</a></li><li><a href=#zremrangebyscoreæ ¹æ®åˆ†å€¼åŒºé—´æ¥åˆ é™¤>ZRemRangeByScore():æ ¹æ®åˆ†å€¼åŒºé—´æ¥åˆ é™¤</a></li></ol></li><li><a href=#å“ˆå¸Œhashç±»å‹>å“ˆå¸Œ(hash)ç±»å‹</a><ol><li><a href=#hsetè®¾ç½®>HSet():è®¾ç½®</a></li><li><a href=#hmsetæ‰¹é‡è®¾ç½®>HMset():æ‰¹é‡è®¾ç½®</a></li><li><a href=#hgetè·å–æŸä¸ªå…ƒç´ >HGet():è·å–æŸä¸ªå…ƒç´ </a></li><li><a href=#hgetallè·å–å…¨éƒ¨å…ƒç´ >HGetAll():è·å–å…¨éƒ¨å…ƒç´ </a></li><li><a href=#hdelåˆ é™¤æŸä¸ªå…ƒç´ >HDel():åˆ é™¤æŸä¸ªå…ƒç´ </a></li><li><a href=#hexistsåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨>HExists():åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</a></li><li><a href=#hlenè·å–é•¿åº¦>HLen():è·å–é•¿åº¦</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/golang/>Golang
</a><a href=/categories/redis/>Redis</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/golang/redis/>golang æ“ä½œrediså¤§å…¨</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2022-03-24</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 6 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h2 id=ç›¸å…³>ç›¸å…³</h2><p>redis å‘½ä»¤ä¸­æ–‡æ‰‹å†Œ <a class=link href=https://redis.com.cn/commands.html target=_blank rel=noopener>https://redis.com.cn/commands.html</a><br>redis hash list set zset çš„å¯¹æ¯”å’Œä½¿ç”¨ <a class=link href=https://dev.leiyanhui.com/web/redis-hash-set-list/ target=_blank rel=noopener>https://dev.leiyanhui.com/web/redis-hash-set-list/</a><br>golang å¸¸ç”¨æ•°æ®ç±»å‹è½¬æ¢ <a class=link href=https://dev.leiyanhui.com/c/golang-string-byte-int-float-map-json/ target=_blank rel=noopener>https://dev.leiyanhui.com/c/golang-string-byte-int-float-map-json/</a><br>go rediså®¢æˆ·ç«¯æ‰‹å†Œã€æ²¡å•¥å¯çœ‹çš„ã€‘ <a class=link href=https://redis.uptrace.dev/zh/guide/ target=_blank rel=noopener>https://redis.uptrace.dev/zh/guide/</a><br>goä¸­æ–‡æ‰‹å†Œ è¿˜ä¸é”™ <a class=link href=http://c.biancheng.net/golang/intro/ target=_blank rel=noopener>http://c.biancheng.net/golang/intro/</a><br>è‹±æ–‡æ‰‹å†Œ å®ä¾‹ä¸å…¨ï¼Œä½†æ˜¯ç»†èŠ‚éƒ½æœ‰ <a class=link href=https://pkg.go.dev/github.com/redis/go-redis/v9@v9.0.2 target=_blank rel=noopener>https://pkg.go.dev/github.com/redis/go-redis/v9@v9.0.2</a><br>æœ¬æ–‡ä¸»è¦å†…å®¹è½¬è½½è‡ª <a class=link href=https://www.cnblogs.com/itbsl/p/14198111.htm target=_blank rel=noopener>https://www.cnblogs.com/itbsl/p/14198111.htm</a> æ„Ÿè°¢ itbslï¼Œå¦å¤–å¢åŠ äº†ä¸€éƒ¨åˆ†å†…å®¹</p><h2 id=é¡¹ç›®åˆå§‹åŒ–>é¡¹ç›®åˆå§‹åŒ–</h2><p>è¿™é‡Œç”¨redis/go-redis/v9</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>go mod init demo
</span></span><span class=line><span class=cl>go get github.com/redis/go-redis/v9
</span></span></code></pre></td></tr></table></div></div><h2 id=è¿æ¥redis>è¿æ¥redis</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>package</span> <span class=n>main</span>
</span></span><span class=line><span class=cl><span class=n>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;github.com/go-redis/redis/v8&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>//</span><span class=n>Backgroundè¿”å›ä¸€ä¸ªéç©ºçš„Context</span><span class=err>ã€‚</span> <span class=err>å®ƒæ°¸è¿œä¸ä¼šè¢«å–æ¶ˆï¼Œæ²¡æœ‰å€¼ï¼Œä¹Ÿæ²¡æœ‰æœŸé™ã€‚</span> 
</span></span><span class=line><span class=cl><span class=o>//</span><span class=err>å®ƒé€šå¸¸åœ¨</span><span class=n>mainå‡½æ•°</span><span class=err>ï¼Œåˆå§‹åŒ–å’Œæµ‹è¯•æ—¶ä½¿ç”¨ï¼Œå¹¶ç”¨ä½œä¼ å…¥è¯·æ±‚çš„é¡¶çº§ä¸Šä¸‹æ–‡ã€‚</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>ctx</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>Background</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>func</span> <span class=n>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>rdb</span> <span class=p>:</span><span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>NewClient</span><span class=p>(</span><span class=o>&amp;</span><span class=n>redis</span><span class=o>.</span><span class=n>Options</span><span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Addr</span><span class=p>:</span>     <span class=s2>&#34;172.16.147.128:6379&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=n>Password</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=n>DB</span><span class=p>:</span>       <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>pong</span><span class=p>,</span> <span class=n>err</span> <span class=p>:</span><span class=o>=</span> <span class=n>rdb</span><span class=o>.</span><span class=n>Ping</span><span class=p>(</span><span class=n>ctx</span><span class=p>)</span><span class=o>.</span><span class=n>Result</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>err</span> <span class=o>!=</span> <span class=n>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>fmt</span><span class=o>.</span><span class=n>Printf</span><span class=p>(</span><span class=s2>&#34;è¿æ¥rediså‡ºé”™ï¼Œé”™è¯¯ä¿¡æ¯ï¼š%v&#34;</span><span class=p>,</span> <span class=n>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>fmt</span><span class=o>.</span><span class=n>Println</span><span class=p>(</span><span class=s2>&#34;æˆåŠŸè¿æ¥redis&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=åŸºæœ¬æŒ‡ä»¤>åŸºæœ¬æŒ‡ä»¤</h2><h3 id=keysæ ¹æ®æ­£åˆ™è·å–keys>Keys():æ ¹æ®æ­£åˆ™è·å–keys</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>//*è¡¨ç¤ºè·å–æ‰€æœ‰çš„key
</span></span><span class=line><span class=cl>keys, err := rdb.Keys(ctx, &#34;*&#34;).Result()
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=rename-renamenx--é‡å‘½åkey>Rename RenameNX é‡å‘½åkey</h3><p>Redis Renamenx å‘½ä»¤ç”¨äºåœ¨æ–°çš„ key ä¸å­˜åœ¨æ—¶ä¿®æ”¹ key çš„åç§° ã€‚è‹¥ key ä¸å­˜åœ¨è¿”å›é”™è¯¯ã€‚<br>Redis RENAME å‘½ä»¤ç”¨äºä¿®æ”¹ key çš„åå­—ä¸º newkey ã€‚è‹¥key ä¸å­˜åœ¨è¿”å›é”™è¯¯ã€‚å¦‚æœnewkeyå­˜åœ¨ å°†ä¼šè¢«è¦†ç›–ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>func</span> <span class=p>(</span><span class=n>c</span> <span class=n>Client</span><span class=p>)</span> <span class=n>Rename</span><span class=p>(</span><span class=n>ctx</span> <span class=n>context</span><span class=o>.</span><span class=n>Context</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>newkey</span> <span class=n>string</span><span class=p>)</span> <span class=o>*</span><span class=n>StatusCmd</span>
</span></span><span class=line><span class=cl><span class=k>func</span> <span class=p>(</span><span class=n>c</span> <span class=n>Client</span><span class=p>)</span> <span class=n>RenameNX</span><span class=p>(</span><span class=n>ctx</span> <span class=n>context</span><span class=o>.</span><span class=n>Context</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>newkey</span> <span class=n>string</span><span class=p>)</span> <span class=o>*</span><span class=n>BoolCmd</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=typeè·å–keyå¯¹åº”å€¼å¾—ç±»å‹>Type():è·å–keyå¯¹åº”å€¼å¾—ç±»å‹</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vType, err := rdb.Type(ctx, &#34;key&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=del-åˆ é™¤key>del åˆ é™¤key</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>n, err := rdb.Del(ctx, &#34;key1&#34;, &#34;key2&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;æˆåŠŸåˆ é™¤äº† %v ä¸ª\n&#34;, n)
</span></span></code></pre></td></tr></table></div></div><h3 id=existsæ£€æµ‹ç¼“å­˜é¡¹æ˜¯å¦å­˜åœ¨>Exists():æ£€æµ‹ç¼“å­˜é¡¹æ˜¯å¦å­˜åœ¨</h3><p>æ³¨ï¼šExists()æ–¹æ³•å¯ä»¥ä¼ å…¥å¤šä¸ªkey,è¿”å›çš„ç¬¬ä¸€ä¸ªç»“æœè¡¨ç¤ºå­˜åœ¨çš„keyçš„æ•°é‡,ä¸è¿‡å·¥ä½œä¸­æˆ‘ä»¬ä¸€èˆ¬ä¸åŒæ—¶åˆ¤æ–­å¤šä¸ªkeyæ˜¯å¦å­˜åœ¨ï¼Œä¸€èˆ¬å°±åˆ¤æ–­ä¸€ä¸ªkey,æ‰€ä»¥åˆ¤æ–­æ˜¯å¦å¤§äº0å³å¯ï¼Œå¦‚æœåˆ¤æ–­åˆ¤æ–­ä¼ å…¥çš„å¤šä¸ªkeyæ˜¯å¦éƒ½å­˜åœ¨ï¼Œåˆ™è¿”å›çš„ç»“æœçš„å€¼è¦å’Œä¼ å…¥çš„keyçš„æ•°é‡ç›¸ç­‰</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>n, err := rdb.Exists(ctx, &#34;key1&#34;).Result()
</span></span><span class=line><span class=cl>if n &gt; 0 {
</span></span><span class=line><span class=cl>	fmt.Println(&#34;å­˜åœ¨&#34;)
</span></span><span class=line><span class=cl>} else {
</span></span><span class=line><span class=cl>    fmt.Println(&#34;ä¸å­˜åœ¨&#34;)
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=expireexpireatè®¾ç½®æœ‰æ•ˆæœŸ>Expire(),ExpireAt():è®¾ç½®æœ‰æ•ˆæœŸ</h3><p>éœ€è¦åœ¨è®¾ç½®å¥½äº†ç¼“å­˜é¡¹åï¼Œå†è®¾ç½®æœ‰æ•ˆæœŸ
Expire()æ–¹æ³•æ˜¯è®¾ç½®æŸä¸ªæ—¶é—´æ®µ(time.Duration)åè¿‡æœŸï¼ŒExpireAt()æ–¹æ³•æ˜¯åœ¨æŸä¸ªæ—¶é—´ç‚¹(time.Time)è¿‡æœŸå¤±æ•ˆ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>res, err := rdb.Expire(ctx, &#34;key&#34;, time.Minute * 2).Result()
</span></span><span class=line><span class=cl>if res {
</span></span><span class=line><span class=cl>	fmt.Println(&#34;è®¾ç½®æˆåŠŸ&#34;)
</span></span><span class=line><span class=cl>} else {
</span></span><span class=line><span class=cl>	fmt.Println(&#34;è®¾ç½®å¤±è´¥&#34;)
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>res, err = rdb.ExpireAt(ctx, &#34;key2&#34;, time.Now()).Result()
</span></span><span class=line><span class=cl>if res {
</span></span><span class=line><span class=cl>	fmt.Println(&#34;è®¾ç½®æˆåŠŸ&#34;)
</span></span><span class=line><span class=cl>} else {
</span></span><span class=line><span class=cl>	fmt.Println(&#34;è®¾ç½®å¤±è´¥&#34;)
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=ttlpttlè·å–æœ‰æ•ˆæœŸ>TTL(),PTTL():è·å–æœ‰æ•ˆæœŸ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>//è®¾ç½®ä¸€åˆ†é’Ÿçš„æœ‰æ•ˆæœŸ
</span></span><span class=line><span class=cl>rdb.Expire(ctx, &#34;key&#34;, time.Minute)
</span></span><span class=line><span class=cl>//è·å–å‰©ä½™æœ‰æ•ˆæœŸ,å•ä½:ç§’(s)
</span></span><span class=line><span class=cl>ttl, err := rdb.TTL(ctx, &#34;key&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Println(ttl)
</span></span><span class=line><span class=cl>//è·å–å‰©ä½™æœ‰æ•ˆæœŸ,å•ä½:æ¯«ç§’(ms)
</span></span><span class=line><span class=cl>pttl, err := rdb.PTTL(ctx, &#34;key&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Println(pttl)
</span></span></code></pre></td></tr></table></div></div><h3 id=dbsizeæŸ¥çœ‹å½“å‰æ•°æ®åº“keyçš„æ•°é‡>DBSize():æŸ¥çœ‹å½“å‰æ•°æ®åº“keyçš„æ•°é‡</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>num, err := rdb.DBSize(ctx).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;æ•°æ®åº“æœ‰ %v ä¸ªç¼“å­˜é¡¹\n&#34;, num)
</span></span></code></pre></td></tr></table></div></div><h3 id=flushdbæ¸…ç©ºå½“å‰æ•°æ®>FlushDB():æ¸…ç©ºå½“å‰æ•°æ®</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>//æ¸…ç©ºå½“å‰æ•°æ®åº“ï¼Œå› ä¸ºè¿æ¥çš„æ˜¯ç´¢å¼•ä¸º0çš„æ•°æ®åº“ï¼Œæ‰€ä»¥æ¸…ç©ºçš„å°±æ˜¯0å·æ•°æ®åº“
</span></span><span class=line><span class=cl>res, err := rdb.FlushDB(ctx).Result()
</span></span><span class=line><span class=cl>fmt.Println(res)//OK
</span></span></code></pre></td></tr></table></div></div><h3 id=flushallæ¸…ç©ºæ‰€æœ‰æ•°æ®åº“>FlushAll():æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>res, err := rdb.FlushAll(ctx).Result()
</span></span><span class=line><span class=cl>fmt.Println(res)//OK
</span></span></code></pre></td></tr></table></div></div><h2 id=å­—ç¬¦ä¸²stringç±»å‹>å­—ç¬¦ä¸²(string)ç±»å‹</h2><h3 id=setè®¾ç½®>Set():è®¾ç½®</h3><p>ä»…ä»…æ”¯æŒå­—ç¬¦ä¸²(åŒ…å«æ•°å­—)æ“ä½œï¼Œä¸æ”¯æŒå†…ç½®æ•°æ®ç¼–ç åŠŸèƒ½ã€‚å¦‚æœéœ€è¦å­˜å‚¨Goçš„éå­—ç¬¦ä¸²ç±»å‹ï¼Œéœ€è¦æå‰æ‰‹åŠ¨åºåˆ—åŒ–ï¼Œè·å–æ—¶å†ååºåˆ—åŒ–ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>_, err := rdb.Ping(ctx).Result()
</span></span><span class=line><span class=cl>//fmt.Println(pong, err)
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	fmt.Printf(&#34;è¿æ¥rediså‡ºé”™ï¼Œé”™è¯¯ä¿¡æ¯ï¼š%v&#34;, err)
</span></span><span class=line><span class=cl>	return
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>//Setæ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°è¡¨ç¤ºè¿‡æœŸæ—¶é—´ï¼Œ0è¡¨ç¤ºæ°¸ä¸è¿‡æœŸ
</span></span><span class=line><span class=cl>err = rdb.Set(ctx, &#34;key1&#34;, &#34;value1&#34;, 0).Err()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>//key2å°†ä¼šåœ¨ä¸¤åˆ†é’Ÿåè¿‡æœŸå¤±æ•ˆ
</span></span><span class=line><span class=cl>err = rdb.Set(ctx, &#34;key2&#34;, &#34;value2&#34;, time.Minute * 2).Err()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>    panic(err)
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=setexè®¾ç½®å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´>SetEX():è®¾ç½®å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´</h3><p>è®¾ç½®é”®çš„åŒæ—¶ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>err := rdb.SetEX(ctx, &#34;key&#34;, &#34;value&#34;, time.Hour * 2).Err()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=setnxè®¾ç½®å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´>SetNX():è®¾ç½®å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´</h3><p>æ³¨ï¼šSetNX()ä¸SetEX()çš„åŒºåˆ«æ˜¯ï¼ŒSexNX()ä»…å½“keyä¸å­˜åœ¨çš„æ—¶å€™æ‰è®¾ç½®ï¼Œå¦‚æœkeyå·²ç»å­˜åœ¨åˆ™ä¸åšä»»ä½•æ“ä½œï¼Œè€ŒSetEX()æ–¹æ³•ä¸ç®¡è¯¥keyæ˜¯å¦å·²ç»å­˜åœ¨ç¼“å­˜ä¸­ç›´æ¥è¦†ç›–</p><p>ä»‹ç»äº†SetNX()ä¸SetEX()çš„åŒºåˆ«åï¼Œè¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æƒ³çŸ¥é“æˆ‘ä»¬è°ƒç”¨SetNX()æ˜¯å¦è®¾ç½®æˆåŠŸäº†ï¼Œå¯ä»¥æ¥ç€è°ƒç”¨Result()æ–¹æ³•ï¼Œè¿”å›çš„ç¬¬ä¸€ä¸ªå€¼è¡¨ç¤ºæ˜¯å¦è®¾ç½®æˆåŠŸäº†ï¼Œå¦‚æœè¿”å›false,è¯´æ˜ç¼“å­˜Keyå·²ç»å­˜åœ¨ï¼Œæ­¤æ¬¡æ“ä½œè™½ç„¶æ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯æ˜¯æ²¡æœ‰èµ·ä»»ä½•æ•ˆæœçš„ã€‚å¦‚æœè¿”å›trueï¼Œè¡¨ç¤ºåœ¨æ­¤ä¹‹å‰keyæ˜¯ä¸å­˜åœ¨ç¼“å­˜ä¸­çš„ï¼Œæ“ä½œæ˜¯æˆåŠŸçš„</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>res, err := rdb.SetNX(ctx, &#34;key&#34;, &#34;value&#34;, time.Minute).Result()
</span></span><span class=line><span class=cl>if res {
</span></span><span class=line><span class=cl>	fmt.Println(&#34;è®¾ç½®æˆåŠŸ&#34;)
</span></span><span class=line><span class=cl>} else {
</span></span><span class=line><span class=cl>	fmt.Printf(&#34;keyå·²ç»å­˜åœ¨ç¼“å­˜ä¸­ï¼Œè®¾ç½®å¤±è´¥&#34;)
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=get>get</h3><p>å¦‚æœè¦è·å–çš„keyåœ¨ç¼“å­˜ä¸­å¹¶ä¸å­˜åœ¨ï¼ŒGet()æ–¹æ³•å°†ä¼šè¿”å›redis.Nil</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>err := rdb.Set(ctx, &#34;key&#34;, &#34;value&#34;, 0).Err()
</span></span><span class=line><span class=cl>val, err := rdb.Get(ctx, &#34;key&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;key: %v\n&#34;, val)
</span></span><span class=line><span class=cl>val2, err := rdb.Get(ctx, &#34;key-not-exist&#34;).Result()
</span></span><span class=line><span class=cl>if err == redis.Nil {
</span></span><span class=line><span class=cl>	fmt.Println(&#34;keyä¸å­˜åœ¨&#34;)
</span></span><span class=line><span class=cl>} else if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>} else {
</span></span><span class=line><span class=cl>	fmt.Printf(&#34;å€¼ä¸º: %v\n&#34;, val2)
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=getrangeå­—ç¬¦ä¸²æˆªå–>GetRange():å­—ç¬¦ä¸²æˆªå–</h3><p>GetRange()æ–¹æ³•å¯ä»¥ç”¨æ¥æˆªå–å­—ç¬¦ä¸²çš„éƒ¨åˆ†å†…å®¹,ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸‹æ ‡ç´¢å¼•çš„å¼€å§‹ä½ç½®ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸‹æ ‡ç´¢å¼•çš„ç»“æŸä½ç½®(ä¸æ˜¯è¦æˆªå–çš„é•¿åº¦)<br>æ³¨ï¼šå³ä½¿keyä¸å­˜åœ¨ï¼Œè°ƒç”¨GetRange()ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯è¿”å›çš„æˆªå–ç»“æœæ˜¯ç©º"",å¯ä»¥ä½¿ç”¨fmt.Printf("%q\n", val)æ¥æ‰“å°æµ‹è¯•</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>err := rdb.Set(ctx, &#34;key&#34;, &#34;Hello World!&#34;, 0).Err()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>val, err := rdb.GetRange(ctx, &#34;key&#34;, 1, 4).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;key: %v\n&#34;, val) //æˆªå–åˆ°çš„å†…å®¹ä¸º: ello
</span></span></code></pre></td></tr></table></div></div><h3 id=incrå¢åŠ 1>Incr():å¢åŠ +1</h3><p>Incr()ã€IncrBy()éƒ½æ˜¯æ“ä½œæ•°å­—ï¼Œå¯¹æ•°å­—è¿›è¡Œå¢åŠ çš„æ“ä½œï¼Œincræ˜¯æ‰§è¡ŒåŸå­åŠ 1æ“ä½œï¼ŒincrByæ˜¯å¢åŠ æŒ‡å®šçš„æ•°<br>æ‰€è°“åŸå­æ“ä½œæ˜¯æŒ‡ä¸ä¼šè¢«çº¿ç¨‹è°ƒåº¦æœºåˆ¶æ‰“æ–­çš„æ“ä½œï¼šè¿™ç§æ“ä½œä¸€æ—¦å¼€å§‹ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°ç»“æŸï¼Œä¸­é—´ä¸ä¼šæœ‰ä»»ä½•context witch(åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹).<br>(1)åœ¨å•çº¿ç¨‹ä¸­ï¼Œèƒ½å¤Ÿåœ¨å•æ¡æŒ‡ä»¤ä¸­å®Œæˆçš„æ“ä½œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯â€œåŸå­æ“ä½œâ€ï¼Œå› ä¸ºä¸­æ–­åªèƒ½å‘ç”ŸäºæŒ‡ä»¤ä¹‹é—´ã€‚<br>(2)åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä¸èƒ½è¢«å…¶å®ƒè¿›ç¨‹(çº¿ç¨‹)æ‰“ç®—çš„æ“ä½œå«åŸå­æ“ä½œã€‚<br>Rediså•å‘½ä»¤çš„åŸå­æ€§ä¸»è¦å¾—ç›ŠäºRedisçš„å•çº¿ç¨‹</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>val, err := rdb.Incr(ctx, &#34;number&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;keyå½“å‰çš„å€¼ä¸º: %v\n&#34;, val)
</span></span></code></pre></td></tr></table></div></div><h3 id=incrbyæŒ‰æŒ‡å®šæ­¥é•¿å¢åŠ >IncrBy():æŒ‰æŒ‡å®šæ­¥é•¿å¢åŠ </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>val, err := rdb.IncrBy(ctx, &#34;number&#34;, 12).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;keyå½“å‰çš„å€¼ä¸º: %v\n&#34;, val)
</span></span></code></pre></td></tr></table></div></div><h3 id=decrå‡å°‘-1>Decr():å‡å°‘-1</h3><p>Decr()å’ŒDecrBy()æ–¹æ³•æ˜¯å¯¹æ•°å­—è¿›è¡Œå‡çš„æ“ä½œï¼Œå’ŒIncræ­£å¥½ç›¸å</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>val, err := rdb.Decr(ctx, &#34;number&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;keyå½“å‰çš„å€¼ä¸º: %v\n&#34;, val)
</span></span></code></pre></td></tr></table></div></div><h3 id=decrbyæŒ‰æŒ‡å®šæ­¥é•¿å‡å°‘>DecrBy():æŒ‰æŒ‡å®šæ­¥é•¿å‡å°‘</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>val, err := rdb.DecrBy(ctx, &#34;number&#34;, 12).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;keyå½“å‰çš„å€¼ä¸º: %v\n&#34;, val)
</span></span></code></pre></td></tr></table></div></div><h3 id=appendè¿½åŠ >Append():è¿½åŠ </h3><p>Append()è¡¨ç¤ºå¾€å­—ç¬¦ä¸²åé¢è¿½åŠ å…ƒç´ ï¼Œè¿”å›å€¼æ˜¯å­—ç¬¦ä¸²çš„æ€»é•¿åº¦</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>err := rdb.Set(ctx, &#34;key&#34;, &#34;hello&#34;, 0).Err()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>length, err := rdb.Append(ctx, &#34;key&#34;, &#34; world!&#34;).Result()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>fmt.Printf(&#34;å½“å‰ç¼“å­˜keyçš„é•¿åº¦ä¸º: %v\n&#34;, length) //12
</span></span><span class=line><span class=cl>val, err := rdb.Get(ctx, &#34;key&#34;).Result()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>fmt.Printf(&#34;å½“å‰ç¼“å­˜keyçš„å€¼ä¸º: %v\n&#34;, val) //hello world!
</span></span></code></pre></td></tr></table></div></div><h3 id=strlenè·å–é•¿åº¦>StrLen():è·å–é•¿åº¦</h3><p>StrLen()æ–¹æ³•å¯ä»¥è·å–å­—ç¬¦ä¸²çš„é•¿åº¦</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>err := rdb.Set(ctx, &#34;key&#34;, &#34;hello world!&#34;, 0).Err()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>length, err := rdb.StrLen(ctx, &#34;key&#34;).Result()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>fmt.Printf(&#34;å½“å‰ç¼“å­˜keyçš„é•¿åº¦ä¸º: %v\n&#34;, length) //12
</span></span></code></pre></td></tr></table></div></div><h3 id=æ›´å¤š>æ›´å¤š</h3><p>å¦‚ä¸Šæ‰€è¿°éƒ½æ˜¯å¸¸ç”¨çš„å­—ç¬¦ä¸²æ“ä½œï¼Œæ­¤å¤–ï¼Œå­—ç¬¦ä¸²(string)ç±»å‹è¿˜æœ‰MGet()ã€Mset()ã€MSetNX()ç­‰åŒæ—¶æ“ä½œå¤šä¸ªkeyçš„æ–¹æ³•ï¼Œè¯¦è§ï¼šhttps://pkg.go.dev/github.com/go-redis/redis/v9</p><h2 id=åˆ—è¡¨listç±»å‹>åˆ—è¡¨(list)ç±»å‹</h2><h3 id=lpushå°†å…ƒç´ å‹å…¥é“¾è¡¨>LPush():å°†å…ƒç´ å‹å…¥é“¾è¡¨</h3><p>å¯ä»¥ä½¿ç”¨LPush()æ–¹æ³•å°†æ•°æ®ä»å·¦ä¾§å‹å…¥é“¾è¡¨,ä¹Ÿå¯ä»¥ä»å³ä¾§å‹å¦‚é“¾è¡¨ï¼Œå¯¹åº”çš„æ–¹æ³•æ˜¯RPush()</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>//è¿”å›å€¼æ˜¯å½“å‰åˆ—è¡¨å…ƒç´ çš„æ•°é‡
</span></span><span class=line><span class=cl>n, err := rdb.LPush(ctx, &#34;list&#34;, 1, 2, 3).Result()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>fmt.Println(n)
</span></span></code></pre></td></tr></table></div></div><h3 id=linsertåœ¨æŸä¸ªä½ç½®æ’å…¥æ–°å…ƒç´ >LInsert():åœ¨æŸä¸ªä½ç½®æ’å…¥æ–°å…ƒç´ </h3><p>ä½ç½®çš„åˆ¤æ–­ï¼Œæ˜¯æ ¹æ®ç›¸å¯¹çš„å‚è€ƒå…ƒç´ åˆ¤æ–­.<br>æ³¨ï¼šå³ä½¿keyåˆ—è¡¨é‡Œæœ‰å¤šä¸ªå€¼ä¸º100çš„å…ƒç´ ï¼Œä¹Ÿåªä¼šåœ¨ç¬¬ä¸€ä¸ªå€¼ä¸º100çš„å…ƒç´ å‰é¢æ’å…¥123ï¼Œå¹¶ä¸ä¼šåœ¨æ‰€æœ‰å€¼ä¸º100çš„å‰é¢æ’å…¥123,å®¢æˆ·ç«¯è¿˜æä¾›äº†ä»å‰é¢æ’å…¥å’Œä»åé¢æ’å…¥çš„LInsertBefore()å’ŒLInsertAfer()æ–¹æ³•</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>//åœ¨åä¸ºkeyçš„ç¼“å­˜é¡¹å€¼ä¸º100çš„å…ƒç´ å‰é¢æ’å…¥ä¸€ä¸ªå€¼ï¼Œå€¼ä¸º123
</span></span><span class=line><span class=cl>err := rdb.LInsert(ctx, &#34;key&#34;, &#34;before&#34;, &#34;100&#34;, 123).Err()
</span></span><span class=line><span class=cl>if err != nil {
</span></span><span class=line><span class=cl>	panic(err)
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=lsetè®¾ç½®æŸä¸ªå…ƒç´ çš„å€¼>LSet():è®¾ç½®æŸä¸ªå…ƒç´ çš„å€¼</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>//ä¸‹æ ‡æ˜¯ä»0å¼€å§‹çš„
</span></span><span class=line><span class=cl>err := rdb.LSet(ctx, &#34;list&#34;, 1, 100).Err()
</span></span></code></pre></td></tr></table></div></div><h3 id=llenè·å–é“¾è¡¨å…ƒç´ ä¸ªæ•°>LLen():è·å–é“¾è¡¨å…ƒç´ ä¸ªæ•°</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>length, err := rdb.LLen(ctx, &#34;list&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;å½“å‰é“¾è¡¨çš„é•¿åº¦ä¸º: %v\n&#34;, length)
</span></span></code></pre></td></tr></table></div></div><h3 id=lindexè·å–é“¾è¡¨ä¸‹æ ‡å¯¹åº”çš„å…ƒç´ >LIndex():è·å–é“¾è¡¨ä¸‹æ ‡å¯¹åº”çš„å…ƒç´ </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>val, err := rdb.LIndex(ctx, &#34;list&#34;, 0).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;ä¸‹æ ‡ä¸º0çš„å€¼ä¸º: %v\n&#34;, val)
</span></span></code></pre></td></tr></table></div></div><h3 id=lrangeè·å–æŸä¸ªé€‰å®šèŒƒå›´çš„å…ƒç´ é›†>LRange():è·å–æŸä¸ªé€‰å®šèŒƒå›´çš„å…ƒç´ é›†</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vals, err := rdb.LRange(ctx, &#34;list&#34;, 0, 2).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;ä»ä¸‹æ ‡0åˆ°ä¸‹æ ‡2çš„å€¼: %v\n&#34;, vals)
</span></span></code></pre></td></tr></table></div></div><h3 id=lpopä»é“¾è¡¨å·¦ä¾§å¼¹å‡ºæ•°æ®>LPopä»é“¾è¡¨å·¦ä¾§å¼¹å‡ºæ•°æ®</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>val, err := rdb.LPop(ctx, &#34;list&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;ç§»é™¤çš„å…ƒç´ ä¸º: %v\n&#34;, val)
</span></span></code></pre></td></tr></table></div></div><h3 id=lremæ ¹æ®å€¼ç§»é™¤å…ƒç´ >LRem():æ ¹æ®å€¼ç§»é™¤å…ƒç´ </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>n, err := rdb.LRem(ctx, &#34;list&#34;, 2, &#34;100&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;ç§»é™¤äº†: %v ä¸ª\n&#34;, n)
</span></span></code></pre></td></tr></table></div></div><h2 id=é›†åˆsetç±»å‹>é›†åˆ(set)ç±»å‹</h2><p>Redis setå¯¹å¤–æä¾›çš„åŠŸèƒ½ä¸listç±»ä¼¼æ˜¯ä¸€ä¸ªåˆ—è¡¨çš„åŠŸèƒ½ï¼Œç‰¹æ®Šä¹‹å¤„åœ¨äºsetæ˜¯å¯ä»¥è‡ªåŠ¨æ’é‡çš„ï¼Œå½“ä½ éœ€è¦å­˜å‚¨ä¸€ä¸ªåˆ—è¡¨æ•°æ®ï¼Œåˆä¸å¸Œæœ›å‡ºç°é‡å¤æ•°æ®ï¼Œsetæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå¹¶ä¸”setæä¾›äº†åˆ¤æ–­æŸä¸ªæˆå‘˜æ˜¯å¦åœ¨ä¸€ä¸ªseté›†åˆå†…çš„æ¥å£ï¼Œè¿™æ˜¯ä¹Ÿæ˜¯listæ‰€ä¸èƒ½æä¾›äº†ã€‚<br>Redisçš„Setæ˜¯stringç±»å‹çš„æ— åºé›†åˆã€‚å®ƒåº•å±‚å…¶å®æ˜¯ä¸€ä¸ªvalueä¸ºnullçš„hashè¡¨ï¼Œæ‰€ä»¥æ·»åŠ ã€åˆ é™¤ã€æŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚<br>é›†åˆæ•°æ®çš„ç‰¹å¾ï¼š<br>å…ƒç´ ä¸èƒ½é‡å¤ï¼Œä¿æŒå”¯ä¸€æ€§<br>å…ƒç´ æ— åºï¼Œä¸èƒ½ä½¿ç”¨ç´¢å¼•(ä¸‹æ ‡)æ“ä½œ<br>æ›´å¤šå†…å®¹å‚è€ƒ redis hash list set zset çš„å¯¹æ¯”å’Œä½¿ç”¨ <a class=link href=https://dev.leiyanhui.com/web/redis-hash-set-list/ target=_blank rel=noopener>https://dev.leiyanhui.com/web/redis-hash-set-list/</a></p><h3 id=saddæ·»åŠ å…ƒç´ >SAdd():æ·»åŠ å…ƒç´ </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>rdb.SAdd(ctx, &#34;team&#34;, &#34;kobe&#34;, &#34;jordan&#34;)
</span></span><span class=line><span class=cl>rdb.SAdd(ctx, &#34;team&#34;, &#34;curry&#34;)
</span></span><span class=line><span class=cl>rdb.SAdd(ctx, &#34;team&#34;, &#34;kobe&#34;) //ç”±äºkobeå·²ç»è¢«æ·»åŠ åˆ°teamé›†åˆä¸­ï¼Œæ‰€ä»¥é‡å¤æ·»åŠ æ—¶æ— æ•ˆçš„
</span></span></code></pre></td></tr></table></div></div><h3 id=spopéšæœºè·å–ä¸€ä¸ªå…ƒç´ >SPop():éšæœºè·å–ä¸€ä¸ªå…ƒç´ </h3><p>SPop()æ–¹æ³•æ˜¯ä»é›†åˆä¸­éšæœºå–å‡ºå…ƒç´ çš„ï¼Œå¦‚æœæƒ³ä¸€æ¬¡è·å–å¤šä¸ªå…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨SPopN()æ–¹æ³•</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>val, err := rdb.SPop(ctx, &#34;team&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Println(val)
</span></span></code></pre></td></tr></table></div></div><h3 id=sremåˆ é™¤é›†åˆé‡ŒæŒ‡å®šçš„å€¼>SRem():åˆ é™¤é›†åˆé‡ŒæŒ‡å®šçš„å€¼</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>n, err := rdb.SRem(ctx, &#34;team&#34;, &#34;kobe&#34;, &#34;v2&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Println(n)
</span></span></code></pre></td></tr></table></div></div><h3 id=ssmembersè·å–æ‰€æœ‰æˆå‘˜>SSMembers():è·å–æ‰€æœ‰æˆå‘˜</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vals, err := rdb.SMembers(ctx, &#34;team&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Println(vals)
</span></span></code></pre></td></tr></table></div></div><h3 id=sismemberåˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­>SIsMember():åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>exists, err := rdb.SIsMember(ctx, &#34;team&#34;, &#34;jordan&#34;).Result()
</span></span><span class=line><span class=cl>if exists {
</span></span><span class=line><span class=cl>	fmt.Println(&#34;å­˜åœ¨é›†åˆä¸­&#34;)
</span></span><span class=line><span class=cl>} else {
</span></span><span class=line><span class=cl>	fmt.Println(&#34;ä¸å­˜åœ¨é›†åˆä¸­&#34;)
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=scardè·å–é›†åˆå…ƒç´ ä¸ªæ•°>SCard():è·å–é›†åˆå…ƒç´ ä¸ªæ•°</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>total, err := rdb.SCard(ctx, &#34;team&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Printf(&#34;é›†åˆæ€»å…±æœ‰ %v ä¸ªå…ƒç´ \n&#34;, total)
</span></span></code></pre></td></tr></table></div></div><h3 id=sunionå¹¶é›†sdiffå·®é›†sinteräº¤é›†>SUnion():å¹¶é›†,SDiff():å·®é›†,SInter():äº¤é›†</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>rdb.SAdd(ctx, &#34;setA&#34;, &#34;a&#34;, &#34;b&#34;, &#34;c&#34;, &#34;d&#34;)
</span></span><span class=line><span class=cl>rdb.SAdd(ctx, &#34;setB&#34;, &#34;a&#34;, &#34;d&#34;, &#34;e&#34;, &#34;f&#34;)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>//å¹¶é›†
</span></span><span class=line><span class=cl>union, err := rdb.SUnion(ctx, &#34;setA&#34;, &#34;setB&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Println(union)
</span></span><span class=line><span class=cl>//å·®é›†
</span></span><span class=line><span class=cl>diff, err := rdb.SDiff(ctx, &#34;setA&#34;, &#34;setB&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Println(diff)
</span></span><span class=line><span class=cl>//äº¤é›†
</span></span><span class=line><span class=cl>inter, err := rdb.SInter(ctx, &#34;setA&#34;, &#34;setB&#34;).Result()
</span></span><span class=line><span class=cl>fmt.Println(inter)
</span></span></code></pre></td></tr></table></div></div><h2 id=æœ‰åºé›†åˆzsetç±»å‹>æœ‰åºé›†åˆ(zset)ç±»å‹</h2><p>Redis æœ‰åºé›†åˆå’Œé›†åˆä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚<br>ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚<br>æœ‰åºé›†åˆçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚<br>é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚ é›†åˆä¸­æœ€å¤§çš„æˆå‘˜æ•°ä¸º 232 - 1 (4294967295, æ¯ä¸ªé›†åˆå¯å­˜å‚¨40å¤šäº¿ä¸ªæˆå‘˜)ã€‚</p><h3 id=zaddæ·»åŠ å…ƒç´ >ZAdd():æ·»åŠ å…ƒç´ </h3><p>æ·»åŠ 6ä¸ªå…ƒç´ 1~6,åˆ†å€¼éƒ½æ˜¯0</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>rdb.ZAdd(ctx, &#34;zSet&#34;, &amp;redis.Z{
</span></span><span class=line><span class=cl>	Score: 0,
</span></span><span class=line><span class=cl>	Member: 1,
</span></span><span class=line><span class=cl>})
</span></span><span class=line><span class=cl>rdb.ZAdd(ctx, &#34;zSet&#34;, &amp;redis.Z{
</span></span><span class=line><span class=cl>	Score: 0,
</span></span><span class=line><span class=cl>	Member: 2,
</span></span><span class=line><span class=cl>})
</span></span><span class=line><span class=cl>rdb.ZAdd(ctx, &#34;zSet&#34;, &amp;redis.Z{
</span></span><span class=line><span class=cl>	Score: 0,
</span></span><span class=line><span class=cl>	Member: 3,
</span></span><span class=line><span class=cl>})
</span></span><span class=line><span class=cl>rdb.ZAdd(ctx, &#34;zSet&#34;, &amp;redis.Z{
</span></span><span class=line><span class=cl>	Score: 0,
</span></span><span class=line><span class=cl>	Member: 4,
</span></span><span class=line><span class=cl>})
</span></span><span class=line><span class=cl>rdb.ZAdd(ctx, &#34;zSet&#34;, &amp;redis.Z{
</span></span><span class=line><span class=cl>	Score: 0,
</span></span><span class=line><span class=cl>	Member: 5,
</span></span><span class=line><span class=cl>})
</span></span><span class=line><span class=cl>rdb.ZAdd(ctx, &#34;zSet&#34;, &amp;redis.Z{
</span></span><span class=line><span class=cl>	Score: 0,
</span></span><span class=line><span class=cl>	Member: 6,
</span></span><span class=line><span class=cl>})
</span></span></code></pre></td></tr></table></div></div><h3 id=zincrbyå¢åŠ å…ƒç´ åˆ†å€¼>ZIncrBy():å¢åŠ å…ƒç´ åˆ†å€¼</h3><p>åˆ†å€¼å¯ä»¥ä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºé€’å‡</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>rdb.ZIncrBy(ctx, &#34;zSet&#34;, float64(rand.Intn(100)), &#34;1&#34;)
</span></span><span class=line><span class=cl>rdb.ZIncrBy(ctx, &#34;zSet&#34;, float64(rand.Intn(100)), &#34;2&#34;)
</span></span><span class=line><span class=cl>rdb.ZIncrBy(ctx, &#34;zSet&#34;, float64(rand.Intn(100)), &#34;3&#34;)
</span></span><span class=line><span class=cl>rdb.ZIncrBy(ctx, &#34;zSet&#34;, float64(rand.Intn(100)), &#34;4&#34;)
</span></span><span class=line><span class=cl>rdb.ZIncrBy(ctx, &#34;zSet&#34;, float64(rand.Intn(100)), &#34;5&#34;)
</span></span><span class=line><span class=cl>rdb.ZIncrBy(ctx, &#34;zSet&#34;, float64(rand.Intn(100)), &#34;6&#34;)
</span></span></code></pre></td></tr></table></div></div><h3 id=zrangezrevrangeè·å–æ ¹æ®scoreæ’åºåçš„æ•°æ®æ®µ>ZRange()ã€ZRevRange():è·å–æ ¹æ®scoreæ’åºåçš„æ•°æ®æ®µ</h3><p>æ ¹æ®åˆ†å€¼æ’åºåçš„ï¼Œå‡åºå’Œé™åºçš„åˆ—è¡¨è·å–</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>//è·å–æ’è¡Œæ¦œ
</span></span><span class=line><span class=cl>//è·å–åˆ†å€¼(ç‚¹å‡»ç‡)å‰ä¸‰çš„æ–‡ç« IDåˆ—è¡¨
</span></span><span class=line><span class=cl>res, err := rdb.ZRevRange(ctx, &#34;zSet&#34;, 0, 2).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=zrangebyscorezrevrangebyscoreè·å–scoreè¿‡æ»¤åæ’åºçš„æ•°æ®æ®µ>ZRangeByScore()ã€ZRevRangeByScore():è·å–scoreè¿‡æ»¤åæ’åºçš„æ•°æ®æ®µ</h3><p>æ ¹æ®åˆ†å€¼è¿‡æ»¤ä¹‹åçš„åˆ—è¡¨,éœ€è¦æä¾›åˆ†å€¼åŒºé—´</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>res, err := rdb.ZRangeByScore(ctx, &#34;zSet&#34;, &amp;redis.ZRangeBy{
</span></span><span class=line><span class=cl>	Min:    &#34;40&#34;,
</span></span><span class=line><span class=cl>	Max:    &#34;85&#34;,
</span></span><span class=line><span class=cl>}).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=zcardè·å–å…ƒç´ ä¸ªæ•°>ZCard():è·å–å…ƒç´ ä¸ªæ•°</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>count, err := rdb.ZCard(ctx, &#34;zSet&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=zcountè·å–åŒºé—´å†…å…ƒç´ ä¸ªæ•°>ZCount():è·å–åŒºé—´å†…å…ƒç´ ä¸ªæ•°</h3><p>è·å–åˆ†å€¼åœ¨[40, 85]çš„å…ƒç´ çš„æ•°é‡</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>n, err := rdb.ZCount(ctx, &#34;zSet&#34;, &#34;40&#34;, &#34;85&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=zscoreè·å–å…ƒç´ çš„score>ZScore():è·å–å…ƒç´ çš„score</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>score, err := rdb.ZScore(ctx, &#34;zSet&#34;, &#34;5&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=zrankzrevrankè·å–æŸä¸ªå…ƒç´ åœ¨é›†åˆä¸­çš„æ’å>ZRank()ã€ZRevRank():è·å–æŸä¸ªå…ƒç´ åœ¨é›†åˆä¸­çš„æ’å</h3><p>ZRank()æ–¹æ³•æ˜¯è¿”å›å…ƒç´ åœ¨é›†åˆä¸­çš„å‡åºæ’åæƒ…å†µï¼Œä»0å¼€å§‹ã€‚ZRevRank()æ­£å¥½ç›¸å</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>res, err := rdb.ZRevRank(ctx, &#34;zSet&#34;, &#34;2&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=zremåˆ é™¤å…ƒç´ >ZRem():åˆ é™¤å…ƒç´ </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>res, err := rdb.ZRem(ctx, &#34;zSet&#34;, &#34;2&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=zremrangebyrankæ ¹æ®æ’åæ¥åˆ é™¤>ZRemRangeByRank():æ ¹æ®æ’åæ¥åˆ é™¤</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>//æŒ‰ç…§å‡åºæ’åºåˆ é™¤ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå…ƒç´ 
</span></span><span class=line><span class=cl>res, err := rdb.ZRemRangeByRank(ctx, &#34;zSet&#34;,  0, 1).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=zremrangebyscoreæ ¹æ®åˆ†å€¼åŒºé—´æ¥åˆ é™¤>ZRemRangeByScore():æ ¹æ®åˆ†å€¼åŒºé—´æ¥åˆ é™¤</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>//åˆ é™¤scoreåœ¨[40, 70]ä¹‹é—´çš„å…ƒç´ 
</span></span><span class=line><span class=cl>res, err := rdb.ZRemRangeByScore(ctx, &#34;zSet&#34;, &#34;40&#34;, &#34;70&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h2 id=å“ˆå¸Œhashç±»å‹>å“ˆå¸Œ(hash)ç±»å‹</h2><p>Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ fieldï¼ˆå­—æ®µï¼‰ å’Œ valueï¼ˆå€¼ï¼‰ çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚</p><p>Redis ä¸­æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 232 - 1 é”®å€¼å¯¹ï¼ˆ40å¤šäº¿ï¼‰ã€‚</p><p>å½“å‰æœåŠ¡å™¨ä¸€èˆ¬éƒ½æ˜¯å°†ç”¨æˆ·ç™»å½•ä¿¡æ¯ä¿å­˜åˆ°Redisä¸­ï¼Œè¿™é‡Œå­˜å‚¨ç”¨æˆ·ç™»å½•ä¿¡æ¯å°±æ¯”è¾ƒé€‚åˆç”¨hashè¡¨ã€‚hashè¡¨æ¯”stringæ›´åˆé€‚ï¼Œå¦‚æœæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨stringç±»å‹æ¥å­˜å‚¨ç”¨æˆ·çš„ä¿¡æ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ¯æ¬¡å­˜å‚¨çš„æ—¶å€™å°±å¾—å…ˆåºåˆ—åŒ–(json_encode()ã€serialize())æˆå­—ç¬¦ä¸²æ‰èƒ½å­˜å‚¨redis,</p><p>ä»redisæ‹¿åˆ°ç”¨æˆ·ä¿¡æ¯ååˆå¾—ååºåˆ—åŒ–(UnMarshal()ã€Marshal())æˆæ•°ç»„æˆ–å¯¹è±¡ï¼Œè¿™æ ·å¼€é”€æ¯”è¾ƒå¤§ã€‚å¦‚æœä½¿ç”¨hashçš„è¯æˆ‘ä»¬é€šè¿‡key(ç”¨æˆ·ID)+field(å±æ€§æ ‡ç­¾)å°±å¯ä»¥æ“ä½œå¯¹åº”å±æ€§æ•°æ®äº†ï¼Œæ—¢ä¸éœ€è¦é‡å¤å­˜å‚¨æ•°æ®ï¼Œä¹Ÿä¸ä¼šå¸¦æ¥åºåˆ—åŒ–å’Œå¹¶å‘ä¿®æ”¹æ§åˆ¶çš„é—®é¢˜ã€‚</p><h3 id=hsetè®¾ç½®>HSet():è®¾ç½®</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>rdb.HSet(ctx, &#34;user&#34;, &#34;key1&#34;, &#34;value1&#34;, &#34;key2&#34;, &#34;value2&#34;)
</span></span><span class=line><span class=cl>rdb.HSet(ctx, &#34;user&#34;, []string{&#34;key3&#34;, &#34;value3&#34;, &#34;key4&#34;, &#34;value4&#34;})
</span></span><span class=line><span class=cl>rdb.HSet(ctx, &#34;user&#34;, map[string]interface{}{&#34;key5&#34;: &#34;value5&#34;, &#34;key6&#34;: &#34;value6&#34;})
</span></span></code></pre></td></tr></table></div></div><h3 id=hmsetæ‰¹é‡è®¾ç½®>HMset():æ‰¹é‡è®¾ç½®</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>rdb.Del(ctx, &#34;user&#34;)
</span></span><span class=line><span class=cl>rdb.HMSet(ctx, &#34;user&#34;, map[string]interface{}{&#34;name&#34;:&#34;kevin&#34;, &#34;age&#34;: 27, &#34;address&#34;:&#34;åŒ—äº¬&#34;})
</span></span></code></pre></td></tr></table></div></div><h3 id=hgetè·å–æŸä¸ªå…ƒç´ >HGet():è·å–æŸä¸ªå…ƒç´ </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>address, err := rdb.HGet(ctx, &#34;user&#34;, &#34;address&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=hgetallè·å–å…¨éƒ¨å…ƒç´ >HGetAll():è·å–å…¨éƒ¨å…ƒç´ </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>user, err := rdb.HGetAll(ctx, &#34;user&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=hdelåˆ é™¤æŸä¸ªå…ƒç´ >HDel():åˆ é™¤æŸä¸ªå…ƒç´ </h3><p>HDel():åˆ é™¤æŸä¸ªå…ƒç´ </p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>res, err := rdb.HDel(ctx, &#34;user&#34;, &#34;name&#34;, &#34;age&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=hexistsåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨>HExists():åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>res, err := rdb.HExists(ctx, &#34;user&#34;, &#34;address&#34;).Result()
</span></span></code></pre></td></tr></table></div></div><h3 id=hlenè·å–é•¿åº¦>HLen():è·å–é•¿åº¦</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>res, err := rdb.HLen(ctx, &#34;user&#34;).Result()
</span></span><span class=line><span class=cl>```æœ¬æ–‡è½¬è‡ªï¼šhttps://www.cnblogs.com/itbsl/p/14198111.html
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/golang/getkeyswithprefixforcluster/><div class=article-details><h2 class=article-title>golang ä»redis clusterè·å–æ‰€æœ‰keys</h2></div></a></article><article><a href=/golang/webview/><div class=article-details><h2 class=article-title>golang æ¯”è¾ƒé è°±çš„ webview</h2></div></a></article><article><a href=/golang/ws-redis/><div class=article-details><h2 class=article-title>redisèµ°websocketçš„æ–¹æ³•</h2></div></a></article><article><a href=/golang/goget/><div class=article-details><h2 class=article-title>go get è·å–ä¸åˆ°æœ€æ–°ç‰ˆï¼Ÿ</h2></div></a></article><article><a href=/nixos/golang/><div class=article-details><h2 class=article-title>nixosä¸‹golang+golandå¼€å‘ç¯å¢ƒ</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//xiao-lei-sui-shou-ji.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2025 å°ç±»éšæ‰‹è®°</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>