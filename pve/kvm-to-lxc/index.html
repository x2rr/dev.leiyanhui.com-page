<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="å¦‚æœæ˜¯linux ä¸éœ€è¦æ˜¾ç¤ºå±æ˜¾ç¤ºçš„è¯ï¼Œå»ºè®®lxcè¿è¡Œã€‚\nå¯¹æ¯” lxc å’Œ è™šæ‹Ÿæœºkvmå¯¹æ¯” lxcæ²¡åŠæ³•æ”¯æŒ macos win ä»¥åŠé»‘ç¾¤æ™– çˆ±å¿«ç­‰éå¸¸è§„ç³»ç»Ÿï¼Œæ”¯æŒå¸¸è§linuxç±»æœåŠ¡ï¼Œæ”¯æŒåµŒå¥—docker\nlxc æ”¯æŒçƒ­å¤‡ä»½\nlxc æ€§èƒ½æ›´é«˜ï¼Œå‡ ä¹å°±æ˜¯åŸå£°æ€§èƒ½ï¼Œå°¤å…¶æ˜¯æ˜¯éœ€è¦ç¡¬ä»¶çš„æœåŠ¡ï¼Œä¾‹å¦‚ openwrt jellyfin ç­‰å·®è·å¾ˆå¤§\nkvmå¤šäº†ä¸€å±‚è½¬æ¢ï¼Œæ€§èƒ½ç•¥ä½äºlxcï¼Œéƒ¨åˆ†æƒ…å†µä¸‹å·®è·å¾ˆå¤§ï¼ ä¾‹å¦‚ openwrt\nlxc å’Œ docker å¯¹æ¯” lxc å’Œdocker å·®ä¸å¤šã€‚\nlxc æ²¡æœ‰åˆ†å±‚æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨é¢‘ç¹éœ€è¦ä¿®æ”¹ä¸œè¥¿ä¸Šã€‚æ¯”å¦‚æ•°æ®åº“ï¼Œopenwrtè¿™ç§ç»å¸¸ä¿®æ”¹é…ç½®çš„æœåŠ¡ä¸Šï¼Œæ›´é€‚åˆã€‚\nlxc å¯ä»¥åœ¨åˆ›å»ºå®Œæˆå ä¿®æ”¹æŒ‚è½½ ç”šè‡³ä¸éœ€è¦ä¸­æ–­æœåŠ¡\nlxc åœ¨pveä¸Š çº¦ç­‰äºä¸€ä¸ªç‹¬ç«‹çš„ linuxè™šæ‹Ÿæœºï¼Œæ¯”dockerçš„æ›´å®Œæ•´\npveä¸Šçš„lxc åœ¨ç½‘ç»œé…ç½®ä¸Šå¯ä»¥ç›´æ¥ä½¿ç”¨æ¡¥æ¥æ¥å…¥å®¿ä¸»æœºå™¨ç‰©ç†ç½‘ç»œ\nlxc å¯ä»¥ç‹¬ç«‹ä¸”ç®€å•æ–¹ä¾¿çš„åµŒå¥—docker docker ä¼˜åŠ¿ï¼šæ›´å¤šçš„åŸå§‹é•œåƒçš„æ”¯æŒ\nä½†æ˜¯åœ¨pveä¸‹ å› ä¸ºè‡ªå¸¦lxcçš„æ”¯æŒï¼Œæ‰€ä»¥èƒ½ç”¨lxcè·‘çš„ å°±ä¸è¦éº»çƒ¦dockeräº†ã€‚ å®è¦ç”¨docker å¯ä»¥ lxcå¥—docker æˆ–è€… pveç›´æ¥è£…docker éƒ½å¯ä»¥ã€‚\nlxc æœ‰ä¸€ä¸ªå°å°çš„ç¼ºç‚¹ï¼š æ— ç‰¹æƒå®¹å™¨ å¤–æŒ‚ç›®å½•æœ‰æƒé™é—®é¢˜è¦å¤„ç†å¦åˆ™åªèƒ½åªè¯»ï¼Œç‰¹æƒå®¹å™¨è·‘dockeræœ‰ä¸€ç‚¹ç‚¹é—®é¢˜ï¼Œéœ€è¦é¢å¤–å¤„ç†ã€‚ä½ å¯ä»¥åœ¨æœ¬ç«™æ‰¾åˆ°ç›¸å…³æ•™ç¨‹ã€‚\npveå®˜ç½‘å»ºè®® åŸæ–‡\n1 If you want to run application containers, for example, Docker images, it is recommended that you run them inside a Proxmox Qemu VM. This will give you all the advantages of application containerization, while also providing the benefits that VMs offer, such as strong isolation from the host and the ability to live-migrate, which otherwise isnâ€™t possible with containers. å¤§æ¦‚å°±æ˜¯è¯´ vmè·‘docker è¿ç§»æ€§å’Œå¼ºåˆ¶éš”ç¦»æ•ˆæœæ›´å¥½ã€‚\nå®é™…ä½¿ç”¨ä¸­ï¼Œä½ ä¼šå‘ç° lxcå¥—docker ä¸€ä¸ªlxc è·‘ä¸€ä¸ªalpine å¥—1-Nä¸ªæ›´æ–¹ä¾¿ã€‚ä¸€äº›å®¶ç”¨å¿…é¡»æœ‰çš„æœåŠ¡ï¼Œæ¯”å¦‚ ipsec nginxåä»£\n"><title>pveä¸‹è™šæ‹Ÿæœºkvmè½¬lxc dockerè½¬lxc æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºä¹Ÿå¯ä»¥ï¼Œ ä»¥åŠlxcå’Œdocker kvmä¹‹é—´çš„å¯¹æ¯”</title><link rel=canonical href=https://dev.leiyanhui.com/pve/kvm-to-lxc/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="pveä¸‹è™šæ‹Ÿæœºkvmè½¬lxc dockerè½¬lxc æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºä¹Ÿå¯ä»¥ï¼Œ ä»¥åŠlxcå’Œdocker kvmä¹‹é—´çš„å¯¹æ¯”"><meta property='og:description' content="å¦‚æœæ˜¯linux ä¸éœ€è¦æ˜¾ç¤ºå±æ˜¾ç¤ºçš„è¯ï¼Œå»ºè®®lxcè¿è¡Œã€‚\nå¯¹æ¯” lxc å’Œ è™šæ‹Ÿæœºkvmå¯¹æ¯” lxcæ²¡åŠæ³•æ”¯æŒ macos win ä»¥åŠé»‘ç¾¤æ™– çˆ±å¿«ç­‰éå¸¸è§„ç³»ç»Ÿï¼Œæ”¯æŒå¸¸è§linuxç±»æœåŠ¡ï¼Œæ”¯æŒåµŒå¥—docker\nlxc æ”¯æŒçƒ­å¤‡ä»½\nlxc æ€§èƒ½æ›´é«˜ï¼Œå‡ ä¹å°±æ˜¯åŸå£°æ€§èƒ½ï¼Œå°¤å…¶æ˜¯æ˜¯éœ€è¦ç¡¬ä»¶çš„æœåŠ¡ï¼Œä¾‹å¦‚ openwrt jellyfin ç­‰å·®è·å¾ˆå¤§\nkvmå¤šäº†ä¸€å±‚è½¬æ¢ï¼Œæ€§èƒ½ç•¥ä½äºlxcï¼Œéƒ¨åˆ†æƒ…å†µä¸‹å·®è·å¾ˆå¤§ï¼ ä¾‹å¦‚ openwrt\nlxc å’Œ docker å¯¹æ¯” lxc å’Œdocker å·®ä¸å¤šã€‚\nlxc æ²¡æœ‰åˆ†å±‚æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨é¢‘ç¹éœ€è¦ä¿®æ”¹ä¸œè¥¿ä¸Šã€‚æ¯”å¦‚æ•°æ®åº“ï¼Œopenwrtè¿™ç§ç»å¸¸ä¿®æ”¹é…ç½®çš„æœåŠ¡ä¸Šï¼Œæ›´é€‚åˆã€‚\nlxc å¯ä»¥åœ¨åˆ›å»ºå®Œæˆå ä¿®æ”¹æŒ‚è½½ ç”šè‡³ä¸éœ€è¦ä¸­æ–­æœåŠ¡\nlxc åœ¨pveä¸Š çº¦ç­‰äºä¸€ä¸ªç‹¬ç«‹çš„ linuxè™šæ‹Ÿæœºï¼Œæ¯”dockerçš„æ›´å®Œæ•´\npveä¸Šçš„lxc åœ¨ç½‘ç»œé…ç½®ä¸Šå¯ä»¥ç›´æ¥ä½¿ç”¨æ¡¥æ¥æ¥å…¥å®¿ä¸»æœºå™¨ç‰©ç†ç½‘ç»œ\nlxc å¯ä»¥ç‹¬ç«‹ä¸”ç®€å•æ–¹ä¾¿çš„åµŒå¥—docker docker ä¼˜åŠ¿ï¼šæ›´å¤šçš„åŸå§‹é•œåƒçš„æ”¯æŒ\nä½†æ˜¯åœ¨pveä¸‹ å› ä¸ºè‡ªå¸¦lxcçš„æ”¯æŒï¼Œæ‰€ä»¥èƒ½ç”¨lxcè·‘çš„ å°±ä¸è¦éº»çƒ¦dockeräº†ã€‚ å®è¦ç”¨docker å¯ä»¥ lxcå¥—docker æˆ–è€… pveç›´æ¥è£…docker éƒ½å¯ä»¥ã€‚\nlxc æœ‰ä¸€ä¸ªå°å°çš„ç¼ºç‚¹ï¼š æ— ç‰¹æƒå®¹å™¨ å¤–æŒ‚ç›®å½•æœ‰æƒé™é—®é¢˜è¦å¤„ç†å¦åˆ™åªèƒ½åªè¯»ï¼Œç‰¹æƒå®¹å™¨è·‘dockeræœ‰ä¸€ç‚¹ç‚¹é—®é¢˜ï¼Œéœ€è¦é¢å¤–å¤„ç†ã€‚ä½ å¯ä»¥åœ¨æœ¬ç«™æ‰¾åˆ°ç›¸å…³æ•™ç¨‹ã€‚\npveå®˜ç½‘å»ºè®® åŸæ–‡\n1 If you want to run application containers, for example, Docker images, it is recommended that you run them inside a Proxmox Qemu VM. This will give you all the advantages of application containerization, while also providing the benefits that VMs offer, such as strong isolation from the host and the ability to live-migrate, which otherwise isnâ€™t possible with containers. å¤§æ¦‚å°±æ˜¯è¯´ vmè·‘docker è¿ç§»æ€§å’Œå¼ºåˆ¶éš”ç¦»æ•ˆæœæ›´å¥½ã€‚\nå®é™…ä½¿ç”¨ä¸­ï¼Œä½ ä¼šå‘ç° lxcå¥—docker ä¸€ä¸ªlxc è·‘ä¸€ä¸ªalpine å¥—1-Nä¸ªæ›´æ–¹ä¾¿ã€‚ä¸€äº›å®¶ç”¨å¿…é¡»æœ‰çš„æœåŠ¡ï¼Œæ¯”å¦‚ ipsec nginxåä»£\n"><meta property='og:url' content='https://dev.leiyanhui.com/pve/kvm-to-lxc/'><meta property='og:site_name' content='å°ç±»éšæ‰‹è®°'><meta property='og:type' content='article'><meta property='article:section' content='Pve'><meta property='article:published_time' content='2023-02-03T12:40:20+08:00'><meta property='article:modified_time' content='2023-02-03T12:40:20+08:00'><meta name=twitter:title content="pveä¸‹è™šæ‹Ÿæœºkvmè½¬lxc dockerè½¬lxc æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºä¹Ÿå¯ä»¥ï¼Œ ä»¥åŠlxcå’Œdocker kvmä¹‹é—´çš„å¯¹æ¯”"><meta name=twitter:description content="å¦‚æœæ˜¯linux ä¸éœ€è¦æ˜¾ç¤ºå±æ˜¾ç¤ºçš„è¯ï¼Œå»ºè®®lxcè¿è¡Œã€‚\nå¯¹æ¯” lxc å’Œ è™šæ‹Ÿæœºkvmå¯¹æ¯” lxcæ²¡åŠæ³•æ”¯æŒ macos win ä»¥åŠé»‘ç¾¤æ™– çˆ±å¿«ç­‰éå¸¸è§„ç³»ç»Ÿï¼Œæ”¯æŒå¸¸è§linuxç±»æœåŠ¡ï¼Œæ”¯æŒåµŒå¥—docker\nlxc æ”¯æŒçƒ­å¤‡ä»½\nlxc æ€§èƒ½æ›´é«˜ï¼Œå‡ ä¹å°±æ˜¯åŸå£°æ€§èƒ½ï¼Œå°¤å…¶æ˜¯æ˜¯éœ€è¦ç¡¬ä»¶çš„æœåŠ¡ï¼Œä¾‹å¦‚ openwrt jellyfin ç­‰å·®è·å¾ˆå¤§\nkvmå¤šäº†ä¸€å±‚è½¬æ¢ï¼Œæ€§èƒ½ç•¥ä½äºlxcï¼Œéƒ¨åˆ†æƒ…å†µä¸‹å·®è·å¾ˆå¤§ï¼ ä¾‹å¦‚ openwrt\nlxc å’Œ docker å¯¹æ¯” lxc å’Œdocker å·®ä¸å¤šã€‚\nlxc æ²¡æœ‰åˆ†å±‚æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨é¢‘ç¹éœ€è¦ä¿®æ”¹ä¸œè¥¿ä¸Šã€‚æ¯”å¦‚æ•°æ®åº“ï¼Œopenwrtè¿™ç§ç»å¸¸ä¿®æ”¹é…ç½®çš„æœåŠ¡ä¸Šï¼Œæ›´é€‚åˆã€‚\nlxc å¯ä»¥åœ¨åˆ›å»ºå®Œæˆå ä¿®æ”¹æŒ‚è½½ ç”šè‡³ä¸éœ€è¦ä¸­æ–­æœåŠ¡\nlxc åœ¨pveä¸Š çº¦ç­‰äºä¸€ä¸ªç‹¬ç«‹çš„ linuxè™šæ‹Ÿæœºï¼Œæ¯”dockerçš„æ›´å®Œæ•´\npveä¸Šçš„lxc åœ¨ç½‘ç»œé…ç½®ä¸Šå¯ä»¥ç›´æ¥ä½¿ç”¨æ¡¥æ¥æ¥å…¥å®¿ä¸»æœºå™¨ç‰©ç†ç½‘ç»œ\nlxc å¯ä»¥ç‹¬ç«‹ä¸”ç®€å•æ–¹ä¾¿çš„åµŒå¥—docker docker ä¼˜åŠ¿ï¼šæ›´å¤šçš„åŸå§‹é•œåƒçš„æ”¯æŒ\nä½†æ˜¯åœ¨pveä¸‹ å› ä¸ºè‡ªå¸¦lxcçš„æ”¯æŒï¼Œæ‰€ä»¥èƒ½ç”¨lxcè·‘çš„ å°±ä¸è¦éº»çƒ¦dockeräº†ã€‚ å®è¦ç”¨docker å¯ä»¥ lxcå¥—docker æˆ–è€… pveç›´æ¥è£…docker éƒ½å¯ä»¥ã€‚\nlxc æœ‰ä¸€ä¸ªå°å°çš„ç¼ºç‚¹ï¼š æ— ç‰¹æƒå®¹å™¨ å¤–æŒ‚ç›®å½•æœ‰æƒé™é—®é¢˜è¦å¤„ç†å¦åˆ™åªèƒ½åªè¯»ï¼Œç‰¹æƒå®¹å™¨è·‘dockeræœ‰ä¸€ç‚¹ç‚¹é—®é¢˜ï¼Œéœ€è¦é¢å¤–å¤„ç†ã€‚ä½ å¯ä»¥åœ¨æœ¬ç«™æ‰¾åˆ°ç›¸å…³æ•™ç¨‹ã€‚\npveå®˜ç½‘å»ºè®® åŸæ–‡\n1 If you want to run application containers, for example, Docker images, it is recommended that you run them inside a Proxmox Qemu VM. This will give you all the advantages of application containerization, while also providing the benefits that VMs offer, such as strong isolation from the host and the ability to live-migrate, which otherwise isnâ€™t possible with containers. å¤§æ¦‚å°±æ˜¯è¯´ vmè·‘docker è¿ç§»æ€§å’Œå¼ºåˆ¶éš”ç¦»æ•ˆæœæ›´å¥½ã€‚\nå®é™…ä½¿ç”¨ä¸­ï¼Œä½ ä¼šå‘ç° lxcå¥—docker ä¸€ä¸ªlxc è·‘ä¸€ä¸ªalpine å¥—1-Nä¸ªæ›´æ–¹ä¾¿ã€‚ä¸€äº›å®¶ç”¨å¿…é¡»æœ‰çš„æœåŠ¡ï¼Œæ¯”å¦‚ ipsec nginxåä»£\n"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_6049d840d4e2d14.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸŸ</span></figure><div class=site-meta><h1 class=site-name><a href=/>å°ç±»éšæ‰‹è®°</a></h1><h2 class=site-description>just so so.</h2></div></header><ol class=menu-social><li><a href=https://github.com/joyanhui/dev.leiyanhui.com-src target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>åˆ—è¡¨</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>ç«™å†…æœç´¢</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>links</span></a></li><li><a href=/contact/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>contact</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#å¯¹æ¯”>å¯¹æ¯”</a><ol><li><a href=#lxc-å’Œ-è™šæ‹Ÿæœºkvmå¯¹æ¯”>lxc å’Œ è™šæ‹Ÿæœºkvmå¯¹æ¯”</a></li><li><a href=#lxc-å’Œ-docker-å¯¹æ¯”>lxc å’Œ docker å¯¹æ¯”</a></li><li><a href=#pveå®˜ç½‘å»ºè®®>pveå®˜ç½‘å»ºè®®</a></li></ol></li><li><a href=#å…³äºlxc-å¯¼å…¥çš„æ ¼å¼>å…³äºlxc å¯¼å…¥çš„æ ¼å¼</a></li><li><a href=#è™šæ‹Ÿæœº>è™šæ‹Ÿæœº</a></li><li><a href=#æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº>æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº</a></li><li><a href=#dockerçš„è¯ç›´æ¥å¯¼å‡º>dockerçš„è¯ï¼Œç›´æ¥å¯¼å‡º</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/openwrt/>Openwrt
</a><a href=/categories/pve/>Pve
</a><a href=/categories/lxc/>Lxc
</a><a href=/categories/docker/>Docker</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/pve/kvm-to-lxc/>pveä¸‹è™šæ‹Ÿæœºkvmè½¬lxc dockerè½¬lxc æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºä¹Ÿå¯ä»¥ï¼Œ ä»¥åŠlxcå’Œdocker kvmä¹‹é—´çš„å¯¹æ¯”</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2023-02-03</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 2 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p>å¦‚æœæ˜¯linux ä¸éœ€è¦æ˜¾ç¤ºå±æ˜¾ç¤ºçš„è¯ï¼Œå»ºè®®lxcè¿è¡Œã€‚</p><h3 id=å¯¹æ¯”>å¯¹æ¯”</h3><h4 id=lxc-å’Œ-è™šæ‹Ÿæœºkvmå¯¹æ¯”>lxc å’Œ è™šæ‹Ÿæœºkvmå¯¹æ¯”</h4><p>lxcæ²¡åŠæ³•æ”¯æŒ macos win ä»¥åŠé»‘ç¾¤æ™– çˆ±å¿«ç­‰éå¸¸è§„ç³»ç»Ÿï¼Œæ”¯æŒå¸¸è§linuxç±»æœåŠ¡ï¼Œæ”¯æŒåµŒå¥—docker<br>lxc æ”¯æŒçƒ­å¤‡ä»½<br>lxc æ€§èƒ½æ›´é«˜ï¼Œå‡ ä¹å°±æ˜¯åŸå£°æ€§èƒ½ï¼Œå°¤å…¶æ˜¯æ˜¯éœ€è¦ç¡¬ä»¶çš„æœåŠ¡ï¼Œä¾‹å¦‚ openwrt jellyfin ç­‰å·®è·å¾ˆå¤§<br>kvmå¤šäº†ä¸€å±‚è½¬æ¢ï¼Œæ€§èƒ½ç•¥ä½äºlxcï¼Œéƒ¨åˆ†æƒ…å†µä¸‹å·®è·å¾ˆå¤§ï¼ ä¾‹å¦‚ openwrt</p><h4 id=lxc-å’Œ-docker-å¯¹æ¯”>lxc å’Œ docker å¯¹æ¯”</h4><p>lxc å’Œdocker å·®ä¸å¤šã€‚<br>lxc æ²¡æœ‰åˆ†å±‚æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨é¢‘ç¹éœ€è¦ä¿®æ”¹ä¸œè¥¿ä¸Šã€‚æ¯”å¦‚æ•°æ®åº“ï¼Œopenwrtè¿™ç§ç»å¸¸ä¿®æ”¹é…ç½®çš„æœåŠ¡ä¸Šï¼Œæ›´é€‚åˆã€‚<br>lxc å¯ä»¥åœ¨åˆ›å»ºå®Œæˆå ä¿®æ”¹æŒ‚è½½ ç”šè‡³ä¸éœ€è¦ä¸­æ–­æœåŠ¡<br>lxc åœ¨pveä¸Š çº¦ç­‰äºä¸€ä¸ªç‹¬ç«‹çš„ linuxè™šæ‹Ÿæœºï¼Œæ¯”dockerçš„æ›´å®Œæ•´<br>pveä¸Šçš„lxc åœ¨ç½‘ç»œé…ç½®ä¸Šå¯ä»¥ç›´æ¥ä½¿ç”¨æ¡¥æ¥æ¥å…¥å®¿ä¸»æœºå™¨ç‰©ç†ç½‘ç»œ<br>lxc å¯ä»¥ç‹¬ç«‹ä¸”ç®€å•æ–¹ä¾¿çš„åµŒå¥—docker<br>docker ä¼˜åŠ¿ï¼šæ›´å¤šçš„åŸå§‹é•œåƒçš„æ”¯æŒ<br>ä½†æ˜¯åœ¨pveä¸‹ å› ä¸ºè‡ªå¸¦lxcçš„æ”¯æŒï¼Œæ‰€ä»¥èƒ½ç”¨lxcè·‘çš„ å°±ä¸è¦éº»çƒ¦dockeräº†ã€‚ å®è¦ç”¨docker å¯ä»¥ lxcå¥—docker æˆ–è€… pveç›´æ¥è£…docker éƒ½å¯ä»¥ã€‚</p><blockquote><p>lxc æœ‰ä¸€ä¸ªå°å°çš„ç¼ºç‚¹ï¼š æ— ç‰¹æƒå®¹å™¨ å¤–æŒ‚ç›®å½•æœ‰æƒé™é—®é¢˜è¦å¤„ç†å¦åˆ™åªèƒ½åªè¯»ï¼Œç‰¹æƒå®¹å™¨è·‘dockeræœ‰ä¸€ç‚¹ç‚¹é—®é¢˜ï¼Œéœ€è¦é¢å¤–å¤„ç†ã€‚ä½ å¯ä»¥åœ¨æœ¬ç«™æ‰¾åˆ°ç›¸å…³æ•™ç¨‹ã€‚</p></blockquote><h4 id=pveå®˜ç½‘å»ºè®®>pveå®˜ç½‘å»ºè®®</h4><p>åŸæ–‡</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>If you want to run application containers, for example, Docker images, it is recommended that you run them inside a Proxmox Qemu VM. This will give you all the advantages of application containerization, while also providing the benefits that VMs offer, such as strong isolation from the host and the ability to live-migrate, which otherwise isnâ€™t possible with containers.
</span></span></code></pre></td></tr></table></div></div><p>å¤§æ¦‚å°±æ˜¯è¯´ vmè·‘docker è¿ç§»æ€§å’Œå¼ºåˆ¶éš”ç¦»æ•ˆæœæ›´å¥½ã€‚<br>å®é™…ä½¿ç”¨ä¸­ï¼Œä½ ä¼šå‘ç° lxcå¥—docker ä¸€ä¸ªlxc è·‘ä¸€ä¸ªalpine å¥—1-Nä¸ªæ›´æ–¹ä¾¿ã€‚ä¸€äº›å®¶ç”¨å¿…é¡»æœ‰çš„æœåŠ¡ï¼Œæ¯”å¦‚ ipsec nginxåä»£</p><h3 id=å…³äºlxc-å¯¼å…¥çš„æ ¼å¼>å…³äºlxc å¯¼å…¥çš„æ ¼å¼</h3><p>å°±æ˜¯å¸¦æƒé™çš„å‹ç¼©åŒ…ï¼Œæ¯”å¦‚ tar gz zstç­‰æ ¼å¼ã€‚æ‰€ä»¥ æ— è®ºåŸå§‹æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬åªè¦æœ€ç»ˆ æ‰“åŒ…æ–‡ä»¶å°±å¯ä»¥äº†ã€‚</p><h3 id=è™šæ‹Ÿæœº>è™šæ‹Ÿæœº</h3><p>è™šæ‹Ÿæœºå¦‚æœå¯ä»¥å…³æœºçš„è¯ï¼Œç›´æ¥è½¬æ¢åŸæ¥ç£ç›˜æ–‡ä»¶ä¸ºimgå³å¯ï¼Œqcow2 ä¹Ÿå¯ä»¥ç›´æ¥åœ¨pveä¸‹æŒ‚è½½ï¼Œä¸‹é¢ä»¥imgä¸ºä¾‹ã€‚ å…¶ä»–æ ¼å¼ åŒ…æ‹¬ vmware å’Œ virtualboxçš„ éƒ½å¯ä»¥è½¬æ¢ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>cd</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>vz</span><span class=o>/</span><span class=n>template</span><span class=o>/</span><span class=n>cache</span>
</span></span><span class=line><span class=cl><span class=n>mkdir</span> <span class=n>op</span>
</span></span><span class=line><span class=cl><span class=n>root_partition</span><span class=o>=$</span><span class=p>((</span><span class=err>`</span><span class=n>fdisk</span> <span class=o>-</span><span class=n>l</span> <span class=n>op</span><span class=o>.</span><span class=n>img</span> <span class=o>|</span> <span class=n>grep</span> <span class=o>.</span><span class=n>img2</span> <span class=o>|</span> <span class=n>awk</span> <span class=s1>&#39;{print $2}&#39;</span><span class=err>`</span> <span class=o>*</span> <span class=mi>512</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>mount</span> <span class=o>-</span><span class=n>o</span> <span class=n>loop</span><span class=p>,</span><span class=n>offset</span><span class=o>=$</span><span class=n>root_partition</span> <span class=n>op</span><span class=o>.</span><span class=n>img</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>vz</span><span class=o>/</span><span class=n>template</span><span class=o>/</span><span class=n>cache</span><span class=o>/</span><span class=n>op</span>
</span></span><span class=line><span class=cl><span class=n>cd</span> <span class=n>op</span> <span class=o>&amp;&amp;</span> <span class=n>tar</span> <span class=n>zcf</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>vz</span><span class=o>/</span><span class=n>template</span><span class=o>/</span><span class=n>cache</span><span class=o>/</span><span class=n>op</span><span class=o>.</span><span class=n>tar</span><span class=o>.</span><span class=n>gz</span> <span class=o>*</span> <span class=o>&amp;&amp;</span><span class=n>cd</span> <span class=o>..</span>     <span class=c1># æ‰“åŒ…è‡³PVEä¸­LXCæ¨¡æ¿è·¯å¾„</span>
</span></span><span class=line><span class=cl><span class=n>umount</span> <span class=n>op</span> <span class=o>&amp;&amp;</span> <span class=n>rm</span> <span class=o>-</span><span class=n>rf</span> <span class=n>op</span>
</span></span><span class=line><span class=cl><span class=c1>#rm -rf å›ºä»¶åç§°.img</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ€ç»ˆæ‹¿åˆ°å‹ç¼©åŒ… op.tar.gzï¼Œç„¶åå°±å¯ä»¥ç›´æ¥åœ¨pve åˆ›å»ºctå®¹å™¨äº†ã€‚</p><p>å¦‚æœæ˜¯ openwrtç­‰ç³»ç»Ÿï¼Œå¯èƒ½è¿˜éœ€è¦å¦å¤–å¤„ç†ä¸€ä¸‹ã€‚ å‚è€ƒï¼šhttps://dev.leiyanhui.com/openwrt/pve-lxc-install-op/</p><h3 id=æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº>æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº</h3><p>å¦‚æœæ˜¯pveçš„è¯ï¼Œç›´æ¥å¤‡ä»½ï¼Œç„¶å å†å¯¼å…¥åˆ°è™šæ‹Ÿæœºï¼Œç„¶åå†å¤„ç†ç£ç›˜å³å¯ã€‚</p><p>å‚è€ƒï¼šhttps://dev.leiyanhui.com/openwrt/pve-lxc-install-op/</p><h3 id=dockerçš„è¯ç›´æ¥å¯¼å‡º>dockerçš„è¯ï¼Œç›´æ¥å¯¼å‡º</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>docker</span> <span class=n>save</span> <span class=o>-</span><span class=n>o</span> <span class=n>centos</span><span class=o>.</span> <span class=n>tar</span> <span class=n>centos</span><span class=p>:</span><span class=n>latest</span> <span class=c1>#å°†centos:latest é•œåƒå¯¼å‡º ä¸ºcentos. tar</span>
</span></span><span class=line><span class=cl><span class=n>docker</span> <span class=k>export</span> <span class=n>debian</span><span class=o>-</span><span class=n>go</span><span class=o>-</span><span class=n>codeserver</span><span class=o>-</span><span class=n>git</span> <span class=o>&gt;</span> <span class=n>debian11</span><span class=o>-</span><span class=k>for</span><span class=o>-</span><span class=n>sshd</span><span class=o>.</span><span class=n>tar</span>  <span class=c1># å°†æ­£åœ¨è¿è¡Œçš„å®¹å™¨ ä¸ä¿ç•™å†å²è®°å½• ç›´æ¥å¯¼å‡º</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>éƒ¨åˆ†å®¹å™¨ å¯¼å‡ºçš„åçš„ å‹ç¼©åŒ…ä¸èƒ½ç›´æ¥å¯¼å…¥åˆ°lxcï¼Œå»ºè®® lxc åµŒå¥—docker</p></blockquote></section><footer class=article-footer><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/pve/docker-mini/><div class=article-details><h2 class=article-title>pve ç”¨lxcå®¹å™¨è¿è¡Œdockeræœ€å°åŒ–éƒ¨ç½²ï¼Œä»¥åŠlxcæ‰€æœ‰é—®é¢˜æ±‡æ€»ï¼</h2></div></a></article><article><a href=/pve/ipsec/><div class=article-details><h2 class=article-title>pveä¸‹ä»¥lxcæ¨¡å¼è¿è¡Œ ipsec ï¼ˆå¥—dockerï¼‰</h2></div></a></article><article><a href=/openwrt/pve-lxc-install-op/><div class=article-details><h2 class=article-title>pveä¸‹ä»¥lxcæ¨¡å¼è¿è¡Œopenwrt</h2></div></a></article><article><a href=/openwrt/lxc-mian-op/><div class=article-details><h2 class=article-title>åŒç½‘å¡ pve8.0.3 lxc è¿è¡Œ openwrtä½œä¸ºä¸»è·¯ç”± æœ€é è°±ç®€å•æ•™ç¨‹</h2></div></a></article><article><a href=/pve/lxc-nas-office/><div class=article-details><h2 class=article-title>lxc alpineä¸‹ä½¿ç”¨cloudreve å’Œ LibreOffice çš„é…ç½®</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//xiao-lei-sui-shou-ji.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2025 å°ç±»éšæ‰‹è®°</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>