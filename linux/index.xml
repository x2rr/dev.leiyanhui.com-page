<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linuxes on 小类随手记</title><link>https://dev.leiyanhui.com/linux/</link><description>Recent content in Linuxes on 小类随手记</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 12 Jan 2025 00:14:20 +0800</lastBuildDate><atom:link href="https://dev.leiyanhui.com/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>cosmic desktop Alpha 5 初体验</title><link>https://dev.leiyanhui.com/linux/cosmic-desktop-alpha5/</link><pubDate>Sun, 12 Jan 2025 00:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/cosmic-desktop-alpha5/</guid><description>&lt;p>cosmic 已经到了 Alpha 5版，在nixos下暂时只能编译安装。nixpkg仓库里面的版比较老。
简单体验了一会 只能说未来可期，暂时无法使用。&lt;/p>
&lt;h2 id="目前的bug">目前的bug
&lt;/h2>&lt;ul>
&lt;li>桌面背景无法设置图片，具体表现为 选择图片的对话框打不开。直接闪掉&lt;/li>
&lt;li>同样 多数应用的选择文件的对话框也如此&lt;/li>
&lt;li>屏幕 dpi 设置有效，但是会直接卡掉桌面 需要重启桌面&lt;/li>
&lt;li>fcitx5 会卡掉整个桌面&lt;/li>
&lt;li>堆叠窗口模式下 大部分app的窗口外壳 外面套了一个cosmic的默认窗口样式。导致部分应用带了两个标题栏。好像i3w hyprland之类的浮动模式也有这个问题，不过cosmic暂时不知道怎隐藏指定应用的窗口外框title&lt;/li>
&lt;li>动画效果是0 ，几乎没有任何窗口切换效果&lt;/li>
&lt;li>alt tab 功能缺失，好像别人的没问题。&lt;/li>
&lt;li>cosmic-file 没有收藏/书签 功能，&lt;/li>
&lt;/ul>
&lt;p>所以目前cosmic 还无法正常使用&lt;/p>
&lt;h2 id="亮点未来可期">亮点，未来可期
&lt;/h2>&lt;ul>
&lt;li>默认主题不太难看，样式较为统一&lt;/li>
&lt;li>平铺模式和堆叠模式 都支持，而且支持的不错。&lt;/li>
&lt;li>cosmic 自带的应用 终端 文本编辑器 文件管理器 设置 等 完成度不错。&lt;/li>
&lt;li>风格接近gnome但是占用比gnome少太多了&lt;/li>
&lt;li>比gnome可定制性强，比kde简洁。&lt;/li>
&lt;/ul>
&lt;p>非常非常期待 cosmic, 受够了kde的繁琐 和gnoome的丑&lt;/p></description></item><item><title>nixos基础安装 和带桌面安装</title><link>https://dev.leiyanhui.com/linux/nixos-install/</link><pubDate>Tue, 12 Mar 2024 00:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/nixos-install/</guid><description>&lt;p>本文不再更新，建议查看 &lt;a class="link" href="https://dev.leiyanhui.com/nixos/start/" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/nixos/start/&lt;/a>&lt;/p>
&lt;h2 id="硬盘">硬盘
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nix" data-lang="nix">&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="err">-&lt;/span>&lt;span class="n">e&lt;/span> &lt;span class="s2">&amp;#34;mklabel gpt &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">mkpart ESP fat32 1MiB 512MiB &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">set 1 esp on &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">mkpart primary 512MiB 100% &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">quit&amp;#34;&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="n">parted&lt;/span> &lt;span class="sr">/dev/nvme0n1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mkfs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fat&lt;/span> &lt;span class="err">-&lt;/span>&lt;span class="n">F&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="sr">/dev/nvme0n1p1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#dosfslabel /dev/nvme0n1p1 EFI&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mkfs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">btrfs&lt;/span> &lt;span class="err">-&lt;/span>&lt;span class="n">L&lt;/span> &lt;span class="n">NIXOS&lt;/span> &lt;span class="sr">/dev/nvme0n1p2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mount&lt;/span> &lt;span class="sr">/dev/nvme0n1p2&lt;/span> &lt;span class="sr">/mnt&lt;/span> &lt;span class="c1"># 将根分区挂载到 /mnt 下&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">btrfs&lt;/span> &lt;span class="n">subvolume&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="sr">/mnt/root&lt;/span> &lt;span class="c1"># 创建 root 子卷&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">btrfs&lt;/span> &lt;span class="n">subvolume&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="sr">/mnt/home&lt;/span> &lt;span class="c1"># 创建 home 子卷&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">btrfs&lt;/span> &lt;span class="n">subvolume&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="sr">/mnt/nix&lt;/span> &lt;span class="c1"># 创建 nix 子卷&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">umount&lt;/span> &lt;span class="sr">/mnt&lt;/span> &lt;span class="c1"># 取消挂载&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mount&lt;/span> &lt;span class="err">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="err">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">root&lt;/span> &lt;span class="sr">/dev/nvme0n1p2&lt;/span> &lt;span class="sr">/mnt&lt;/span> &lt;span class="c1"># 启用透明压缩参数挂载 root 子卷&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mkdir&lt;/span> &lt;span class="sr">/mnt&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="n">nix&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="c1"># 创建 home，nix，boot 目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mount&lt;/span> &lt;span class="err">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="err">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">home&lt;/span> &lt;span class="sr">/dev/nvme0n1p2&lt;/span> &lt;span class="sr">/mnt/home&lt;/span> &lt;span class="c1"># 启用透明压缩参数挂载 home 子卷&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mount&lt;/span> &lt;span class="err">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="err">,&lt;/span>&lt;span class="n">noatime&lt;/span>&lt;span class="err">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nix&lt;/span> &lt;span class="sr">/dev/nvme0n1p2&lt;/span> &lt;span class="sr">/mnt/nix&lt;/span> &lt;span class="c1"># 启用透明压缩并不记录时间戳参数挂载 nix 子卷&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mount&lt;/span> &lt;span class="sr">/dev/nvme0n1p1&lt;/span> &lt;span class="sr">/mnt/boot&lt;/span> &lt;span class="c1"># 挂载 boot&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nixos-generate-config&lt;/span> &lt;span class="err">--&lt;/span>&lt;span class="n">root&lt;/span> &lt;span class="sr">/mnt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cd&lt;/span> &lt;span class="sr">/mnt/etc/nixos&lt;/span>&lt;span class="err">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="err">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="err">/&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;subvol=root&amp;#34;&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">/&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;subvol=nix&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;compress=zstd&amp;#34;&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="sr">/g&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="n">hardware-configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="err">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="err">/&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;subvol=home&amp;#34;&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">/&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;subvol=nix&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;compress=zstd&amp;#34;&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="sr">/g&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="n">hardware-configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="err">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="err">/&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;subvol=nix&amp;#34;&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">/&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;subvol=nix&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;compress=zstd&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;noatime&amp;#34;&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="sr">/g&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="n">hardware-configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nix&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="configurationnix-base-with-zsh">configuration.nix base with zsh
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nix" data-lang="nix">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span> &lt;span class="n">config&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">lib&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">pkgs&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">imports&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sr">./hardware-configuration.nix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">boot&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">systemd-boot&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">boot&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">efi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">canTouchEfiVariables&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">settings&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">substituters&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;https://mirrors.ustc.edu.cn/nix-channels/store&amp;#34;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nixpkgs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowUnfree&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">networking&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hostName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;nixos&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># Define your hostname.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">timeZone&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">virtualisation&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vmware&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">guest&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sound&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mutableUsers&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">false&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 禁止useradd添加用户&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#security.sudo.wheelNeedsPassword = false;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yh&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">#用户名是yh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">isNormalUser&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hashedPassword&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;$y$j9T$I9BXOYYJGTV/Yx5hM7YmJ/$0Mhrve6QTJW4qZtBHRqUG7dJnXWRmdjwkFkNMM0ARA3&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">extraGroups&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;wheel&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;users&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">environment&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">systemPackages&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">with&lt;/span> &lt;span class="n">pkgs&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wget&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">curl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">unzip&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zsh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wqy_zenhei&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openssh&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openssh&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorizedKeys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDwkV1nzSvgoklrfinn8BzxveOPd0UPY1sYwwMMMQrjoAih1PZldT8LcA6zqUsERLXGHf2qy1gSdMFomAAejDEo1aU0PmaGGX4+LWgvlH2xvr3MlbItWLwbXYQdhsfqKu93Qnt7aODJ1Ts2kzp7CP1yR1O4BFUemfnPMVyj07Vj70yg1nDPIXxCPzcMEsJ1OGUduCaDqNA8Ag+TmSSCM+E9rEgMEAcRqpziQYeUEU/RASRYPDeDj5kE81qcDDhseknTFGGa99yZU1R+zuVh4IQEZnr0rZbty0noRFU4AFgMxKaMXwrusjOoX62pEQ0KKU7+pJoKgzVNSFDwt7j50PgOXCue3cqi3Rf4zMpVPkrJP2V+ELR44i/PNHP0GflaNU0RumX8jwScqxMT/NOAdsPs5fRIiUocDXASypjM/2dpJ9wlmmU+ngVFba316Q1kff1LQ0NH5kmKs5DDmL+vbC8wcWuwVuZty2FPJwpdxXK1Oax8GEw4WIM6QjJJ4jqh//k= joyanhui@qq.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yh&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openssh&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorizedKeys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDwkV1nzSvgoklrfinn8BzxveOPd0UPY1sYwwMMMQrjoAih1PZldT8LcA6zqUsERLXGHf2qy1gSdMFomAAejDEo1aU0PmaGGX4+LWgvlH2xvr3MlbItWLwbXYQdhsfqKu93Qnt7aODJ1Ts2kzp7CP1yR1O4BFUemfnPMVyj07Vj70yg1nDPIXxCPzcMEsJ1OGUduCaDqNA8Ag+TmSSCM+E9rEgMEAcRqpziQYeUEU/RASRYPDeDj5kE81qcDDhseknTFGGa99yZU1R+zuVh4IQEZnr0rZbty0noRFU4AFgMxKaMXwrusjOoX62pEQ0KKU7+pJoKgzVNSFDwt7j50PgOXCue3cqi3Rf4zMpVPkrJP2V+ELR44i/PNHP0GflaNU0RumX8jwScqxMT/NOAdsPs5fRIiUocDXASypjM/2dpJ9wlmmU+ngVFba316Q1kff1LQ0NH5kmKs5DDmL+vbC8wcWuwVuZty2FPJwpdxXK1Oax8GEw4WIM6QjJJ4jqh//k= joyanhui@qq.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">defaultUserShell&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pkgs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zsh&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">programs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zsh&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">enableCompletion&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">autosuggestions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">syntaxHighlighting&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shellAliases&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#history.size = 10000;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#history.path = &amp;#34;${config.xdg.dataHome}/zsh/history&amp;#34;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">system&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">stateVersion&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;23.11&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="configurationnix--with--kde6-and-wayfire">configuration.nix with kde6 and wayfire
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nix" data-lang="nix">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span> &lt;span class="n">config&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">lib&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">pkgs&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">imports&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sr">./hardware-configuration.nix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">boot&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">systemd-boot&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">boot&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">efi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">canTouchEfiVariables&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">settings&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">substituters&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;https://mirrors.ustc.edu.cn/nix-channels/store&amp;#34;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nixpkgs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowUnfree&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">networking&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hostName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;nixos&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># Define your hostname.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">timeZone&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">virtualisation&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vmware&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">guest&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i18n&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inputMethod&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">enabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;fcitx5&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fcitx5&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">addons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">with&lt;/span> &lt;span class="n">pkgs&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fcitx5-chinese-addons&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fcitx5-gtk&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xserver&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xserver&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">displayManager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sddm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xserver&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">desktopManager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plasma6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sound&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mutableUsers&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">false&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 禁止useradd添加用户&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#security.sudo.wheelNeedsPassword = false;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yh&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">#用户名是yh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">isNormalUser&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hashedPassword&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;$y$j9T$I9BXOYYJGTV/Yx5hM7YmJ/$0Mhrve6QTJW4qZtBHRqUG7dJnXWRmdjwkFkNMM0ARA3&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">extraGroups&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;wheel&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;users&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">environment&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">systemPackages&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">with&lt;/span> &lt;span class="n">pkgs&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wget&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">curl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">unzip&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zsh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ntfs3g&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wqy_zenhei&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">kitty&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">microsoft-edge&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openssh&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openssh&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorizedKeys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDwkV1nzSvgoklrfinn8BzxveOPd0UPY1sYwwMMMQrjoAih1PZldT8LcA6zqUsERLXGHf2qy1gSdMFomAAejDEo1aU0PmaGGX4+LWgvlH2xvr3MlbItWLwbXYQdhsfqKu93Qnt7aODJ1Ts2kzp7CP1yR1O4BFUemfnPMVyj07Vj70yg1nDPIXxCPzcMEsJ1OGUduCaDqNA8Ag+TmSSCM+E9rEgMEAcRqpziQYeUEU/RASRYPDeDj5kE81qcDDhseknTFGGa99yZU1R+zuVh4IQEZnr0rZbty0noRFU4AFgMxKaMXwrusjOoX62pEQ0KKU7+pJoKgzVNSFDwt7j50PgOXCue3cqi3Rf4zMpVPkrJP2V+ELR44i/PNHP0GflaNU0RumX8jwScqxMT/NOAdsPs5fRIiUocDXASypjM/2dpJ9wlmmU+ngVFba316Q1kff1LQ0NH5kmKs5DDmL+vbC8wcWuwVuZty2FPJwpdxXK1Oax8GEw4WIM6QjJJ4jqh//k= joyanhui@qq.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yh&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openssh&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorizedKeys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDwkV1nzSvgoklrfinn8BzxveOPd0UPY1sYwwMMMQrjoAih1PZldT8LcA6zqUsERLXGHf2qy1gSdMFomAAejDEo1aU0PmaGGX4+LWgvlH2xvr3MlbItWLwbXYQdhsfqKu93Qnt7aODJ1Ts2kzp7CP1yR1O4BFUemfnPMVyj07Vj70yg1nDPIXxCPzcMEsJ1OGUduCaDqNA8Ag+TmSSCM+E9rEgMEAcRqpziQYeUEU/RASRYPDeDj5kE81qcDDhseknTFGGa99yZU1R+zuVh4IQEZnr0rZbty0noRFU4AFgMxKaMXwrusjOoX62pEQ0KKU7+pJoKgzVNSFDwt7j50PgOXCue3cqi3Rf4zMpVPkrJP2V+ELR44i/PNHP0GflaNU0RumX8jwScqxMT/NOAdsPs5fRIiUocDXASypjM/2dpJ9wlmmU+ngVFba316Q1kff1LQ0NH5kmKs5DDmL+vbC8wcWuwVuZty2FPJwpdxXK1Oax8GEw4WIM6QjJJ4jqh//k= joyanhui@qq.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">programs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wayfire&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plugins&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">with&lt;/span> &lt;span class="n">pkgs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wayfirePlugins&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wcm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wf-shell&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wayfire-plugins-extra&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">defaultUserShell&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pkgs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zsh&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">programs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zsh&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">enableCompletion&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">autosuggestions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">syntaxHighlighting&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shellAliases&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#history.size = 10000;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#history.path = &amp;#34;${config.xdg.dataHome}/zsh/history&amp;#34;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">system&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">stateVersion&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;23.11&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="命令">命令
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nix" data-lang="nix">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ix-channel&lt;/span> &lt;span class="err">--&lt;/span>&lt;span class="n">add&lt;/span> &lt;span class="sd">https://mirrors.ustc.edu.cn/nix-channels/nixpkgs-unstable&lt;/span> &lt;span class="n">nixos&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nix-channel&lt;/span> &lt;span class="err">--&lt;/span>&lt;span class="n">update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">nixos-rebuild&lt;/span> &lt;span class="n">switch&lt;/span> &lt;span class="err">--&lt;/span>&lt;span class="n">option&lt;/span> &lt;span class="n">substituters&lt;/span> &lt;span class="sd">https://mirrors.ustc.edu.cn/nix-channels/store&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cd&lt;/span> &lt;span class="sr">/mnt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nixos-install&lt;/span> &lt;span class="err">--&lt;/span>&lt;span class="n">show-trace&lt;/span> &lt;span class="err">--&lt;/span>&lt;span class="n">option&lt;/span> &lt;span class="n">substituters&lt;/span> &lt;span class="sd">https://mirrors.ustc.edu.cn/nix-channels/store&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>debian12安装微信原生版 非web 非electron 非wine</title><link>https://dev.leiyanhui.com/linux/wecha-new-debian/</link><pubDate>Thu, 07 Mar 2024 06:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/wecha-new-debian/</guid><description>&lt;p>惊闻微信出linux版，一开始以为是uos的那个web微信升级了。后来知道是原生测试版本。
当然只支持银河麒麟和统信，不过有解决颁发。&lt;/p>
&lt;h2 id="新版微信">新版微信
&lt;/h2>&lt;p>debian12 可以直接安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">https://www.52pojie.cn/thread-1896902-1-1.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 下载地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://cloud.cnxclm.com/s/XOxIb?path&lt;span class="o">=&lt;/span>%2F%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不一定需要&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir /usr/lib/license/ &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> cp ./libuosdevicea.so /usr/lib/license/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="卸载和安装">卸载和安装
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install dpkg-dev &lt;span class="c1"># 非必须&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install ./store.spark-app.wechat-linux-spark_2.2-real-1.0.0.145_amd64.deb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">killall wechat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt purge store.spark-app.wechat-linux-spark
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="体验">体验
&lt;/h2>&lt;p>比win的微信差了不是一点半点，比web微信强了也不是一点半点 。&lt;br>
内存 有一个weicha进程80-150M内存 有几个 wechatAPPex进程 每个 8-80M不等 总共 400M内存左右。 &lt;br>
xwayland和xorg 下fcitx5 都不需要单独处理 直接可用。&lt;/p>
&lt;ul>
&lt;li>托盘图标有，但是右键没反应 &lt;code>killall wechat&lt;/code> 就行了。 有时候需要点击两次才可以唤起微信窗口&lt;/li>
&lt;li>gnome dash图标空白的蓝色齿轮图&lt;/li>
&lt;li>消息提醒不显示消息内容 只有 &amp;ldquo;wechat is ready&amp;rdquo;&lt;/li>
&lt;li>wayland下截图不可用 黑屏，xorg下正常。alt+x 截图快捷键正常&lt;/li>
&lt;li>没有群消息折叠 群太多的话依旧蛋疼&lt;/li>
&lt;li>维持和 某一个好友的对话框的情况下，收到好友消息后，手机也会提醒。(web微信不可以，非常容易漏消息)&lt;/li>
&lt;li>没有暗黑模式适配，白晃晃的亮瞎眼睛&lt;/li>
&lt;li>聊天记录没有清理功能。可以删除消息但是只能一条一条的。&lt;/li>
&lt;li>被加好友 没有任何提醒&lt;/li>
&lt;li>没有朋友圈功能，有小程序 看一看 视频号&lt;/li>
&lt;li>群聊内无法点击好友头像转私聊&lt;/li>
&lt;li>查看图片功能 esc无效要 alt+f4&lt;/li>
&lt;li>貌似是qt开发的，发送文件的选择文件对话框 整个上古风，不过可以输入路径前缀定位文件。&lt;/li>
&lt;li>消息不能撤回！！！&lt;/li>
&lt;/ul>
&lt;p>据说在麒麟和uos下托盘和消息提醒功能适配的不错，但是debian下 只能凑合用&lt;/p>
&lt;p>其他参考 &lt;a class="link" href="https://www.52pojie.cn/thread-1896902-1-1.html" target="_blank" rel="noopener"
>https://www.52pojie.cn/thread-1896902-1-1.html&lt;/a>&lt;/p></description></item><item><title>fctix5和搜狗输入法的个人词库转换</title><link>https://dev.leiyanhui.com/linux/fctix5-sogou/</link><pubDate>Mon, 15 Jan 2024 22:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/fctix5-sogou/</guid><description>&lt;p>截止2024年1月15日 有效&lt;/p>
&lt;p>需要的工具
1：深蓝词库转换 &lt;a class="link" href="https://github.com/studyzy/imewlconverter" target="_blank" rel="noopener"
>https://github.com/studyzy/imewlconverter&lt;/a>&lt;/p>
&lt;p>2：rose &lt;a class="link" href="https://github.com/nopdan/rose" target="_blank" rel="noopener"
>https://github.com/nopdan/rose&lt;/a>&lt;/p>
&lt;h2 id="细胞词库">细胞词库
&lt;/h2>&lt;p>fctix5 pinyin输入法 可以直接导入搜狗细胞词库 不用额外处理。如果要导出rime支持的格式 可以用深蓝词库工具转&lt;/p>
&lt;h2 id="个人词库">个人词库
&lt;/h2>&lt;h3 id="fcitx5">fcitx5
&lt;/h3>&lt;p>fcitx5 的个人词库 在 ~/.local/share/fcitx5/pinyin/user.dict 这个文件
使用命令 ： &lt;code>libime_pinyindict -d &amp;quot;user.dict&amp;quot; &amp;quot;user.dict.txt&amp;quot; &lt;/code> 可以导出为txt
格式为 &lt;code>没满 mei'man 0&lt;/code> 即 汉字 拼音 词频 三者用空格分割 拼音用&amp;rsquo;分割&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/.local/share/fcitx5/pinyin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">libime_pinyindict -d &lt;span class="s2">&amp;#34;user.dict&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;user.dict.txt&amp;#34;&lt;/span> &lt;span class="c1">#dict 到 txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">libime_pinyindict &lt;span class="s2">&amp;#34;词库文件.txt&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;词库文件.dict&amp;#34;&lt;/span> &lt;span class="c1"># txt到dict&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="搜狗">搜狗
&lt;/h3>&lt;p>搜狗的个人词库导出后是加密的bin格式，目前深蓝不能识别rose 可以识别到&lt;/p>
&lt;h2 id="转换">转换
&lt;/h2>&lt;h3 id="搜狗-到-fcitx5-pinyin">搜狗 到 fcitx5 pinyin
&lt;/h3>&lt;p>使用 rose 转换搜狗导出的个人词库文件到 随便一种格式，可以使用百度拼音txt的格式 和 user.dict.txt的格式一样
也可以用就用sogou txt格式，然后用深蓝转换工具自定义格式转换user.dict.txt 的格式，最后运行上面的libime_pinyindict命令替换 &amp;ldquo;user.dict&amp;rdquo; 。&lt;/p>
&lt;p>如果不需要编辑，windows下sogou输入法导出再次导入一次个人词库，会在 &lt;code>C:\Users\XXXX\AppData\LocalLow\SogouPY.users\XXXX\scd\tmp&lt;/code> 下找到对应的细胞词库&lt;/p>
&lt;h3 id="搜狗-到-fcitx5-rime">搜狗 到 fcitx5 rime
&lt;/h3>&lt;p>到rime的和 pinyin的一样&lt;/p>
&lt;h3 id="fcitx5-pinyin-到-sogou-pc版">fcitx5 pinyin 到 sogou pc版
&lt;/h3>&lt;p>目前搜狗输入法直接导入txt 是无法合并到用户词库的，但是可以被导入到细胞词库。
使用 rose 转换 &amp;ldquo;user.dict.txt&amp;rdquo; 到 纯词组，或者用深蓝转换为只有词库 也可以。然后在windows下搜狗输入法里面导入txt即可。同时 会在 &lt;code>C:\Users\XXXX\AppData\LocalLow\SogouPY.users\XXXX\scd\tmp&lt;/code> 下找到词库文件&lt;/p>
&lt;p>手机版暂时没有办法直接导入，只能使用一段时间后词库自动同步到手机上。&lt;/p></description></item><item><title>linux下使用web微信的奇技淫巧</title><link>https://dev.leiyanhui.com/linux/wechat-web/</link><pubDate>Tue, 26 Dec 2023 22:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/wechat-web/</guid><description>&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/linux/wecha-new-debian" target="_blank" rel="noopener"
>2024-03-7 已经有原生版微信，虽然目前之支持uos和麒麟等系统，实际上其他系统也可以用。&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/arch/new-qq2022/" target="_blank" rel="noopener"
>2022年12月07日 腾讯已经发布新版linux qq &lt;/a>&lt;/p>
&lt;p>linux使用微信 只有wine 和 仿uos web微信 两种。&lt;/p>
&lt;p>wine方式的微信功能更全一些，比如支持多数小程序支持朋友圈。但是也比较卡，而且需要wine。&lt;/p>
&lt;p>我的几个微信号，都登陆过web微信，但是都是后期无法使用。而且我微信主要是工作文字交流和小文件手法。web微信足够使用。所以寻找web微信的登陆方式。&lt;/p>
&lt;p>通过逆向uos版本微信，可以得知：
微信给uos那边适配web微信使用了简单区分的方式，就是在header里面添加了两个字段 。
这两个字段都是是静态的，而且都放到了同一个so文件里面，只做了字符串混淆，混淆还是最简单的 xor。或许这是适配uos的程序员的良心。 最后整理得到两个header内容如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">client-version &lt;span class="o">=&lt;/span> 2.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">extspam&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Go8FCIkFEokFCggwMDAwMDAwMRAGGvAESySibk50w5Wb3uTl2c2h64jVVrV7gNs06GFlWplHQbY/5FfiO++1yH4ykCyNPWKXmco+wfQzK5R98D3so7rJ5LmGFvBLjGceleySrc3SOf2Pc1gVehzJgODeS0lDL3/I/0S2SSE98YgKleq6Uqx6ndTy9yaL9qFxJL7eiA/R3SEfTaW1SBoSITIu+EEkXff+Pv8NHOk7N57rcGk1w0ZzRrQDkXTOXFN2iHYIzAAZPIOY45Lsh+A4slpgnDiaOvRtlQYCt97nmPLuTipOJ8Qc5pM7ZsOsAPPrCQL7nK0I7aPrFDF0q4ziUUKettzW8MrAaiVfmbD1/VkmLNVqqZVvBCtRblXb5FHmtS8FxnqCzYP4WFvz3T0TcrOqwLX1M/DQvcHaGGw0B0y4bZMs7lVScGBFxMj3vbFi2SRKbKhaitxHfYHAOAa0X7/MSS0RNAjdwoyGHeOepXOKY+h3iHeqCvgOH6LOifdHf/1aaZNwSkGotYnYScW8Yx63LnSwba7+hESrtPa/huRmB9KWvMCKbDThL/nne14hnL277EDCSocPu3rOSYjuB9gKSOdVmWsj9Dxb/iZIe+S6AiG29Esm+/eUacSba0k8wn5HhHg9d4tIcixrxveflc8vi2/wNQGVFNsGO6tB5WF0xf/plngOvQ1/ivGV/C1Qpdhzznh0ExAVJ6dwzNg7qIEBaw+BzTJTUuRcPk92Sn6QDn2Pu3mpONaEumacjW4w6ipPnPw+g2TfywJjeEcpSZaP4Q3YV5HG8D6UjWA4GSkBKculWpdCMadx0usMomsSS/74QgpYqcPkmamB4nVv1JxczYITIqItIKjD35IGKAUwAA&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>另外一点就是登陆地址要用 &lt;code>https://wx.qq.com/?&amp;amp;lang=zh_CN&amp;amp;target=t&lt;/code> 多一个&lt;code>&amp;amp;target=t&lt;/code>&lt;br>
找一个支持浏览器header修改的扩展，适配wx.qq.com这个域名 添加上面两个字段即可。 &lt;br>
web微信只有登陆的时候会校验这个字段，后面使用的时候不会再检查，所以只需匹配url:&lt;code>https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxnewloginpage&lt;/code>&lt;/p>
&lt;p>有可能需要登陆一次微信网页文件传输助手后才可以&lt;code>https://filehelper.weixin.qq.com/&lt;/code> 登陆一次即可，以后推出也不影响。 如果依旧不行，可以虚拟机装一个uos 先去uos下试试是否可以。&lt;/p>
&lt;p>也可以用现成的扩展：
&lt;a class="link" href="https://github.com/lqzhgood/wechat-need-web/releases" target="_blank" rel="noopener"
>https://github.com/lqzhgood/wechat-need-web/releases&lt;/a>&lt;/p>
&lt;p>下载chrom.zip 解压，然后打开（chrome/edge）浏览器插件管理,勾选开发者模式，选择加载已经解压的扩展目录。 不用任何配置即可使用。&lt;/p>
&lt;blockquote>
&lt;p>linux下edge升级 有可能自己删掉这种自己手动加载的扩展，需要自己重新再安装一次扩展。&lt;/p>&lt;/blockquote>
&lt;p>同样的扩展有：https://github.com/adamyi/wechrome&lt;/p>
&lt;p>Monkey脚本版本：https://greasyfork.org/en/scripts/456545-wechromium-%E5%BE%AE%E4%BF%A1%E7%BD%91%E9%A1%B5%E7%89%88-%E7%BD%91%E9%A1%B5%E7%89%88%E5%BE%AE%E4%BF%A1-linux%E5%BE%AE%E4%BF%A1/&lt;/p>
&lt;p>electron 版本：
另外有一个类似方式实现的已经打包好的 xchat
&lt;a class="link" href="https://github.com/xYx-c/xchat" target="_blank" rel="noopener"
>https://github.com/xYx-c/xchat&lt;/a> （基于electron+react 不是很建议，功能比web微信有缺失，偶尔卡顿丢消息）&lt;/p>
&lt;p>另外 基于 wechaty-puppet-wechat 的也很多&lt;/p>
&lt;p>注意 使用上面的方式，很有可能在数天/数周后被疼逊警告使用了第三方工具。也有人反馈说会被封号。&lt;/p>
&lt;p>另外绑定境外手机号的微信无法使用web微信，在转到wechat的时候有条款提醒的哦。&lt;/p></description></item><item><title>跨云集群管理 k8s/k3s/docker swarm /apache mesos 选型和总结</title><link>https://dev.leiyanhui.com/linux/multcloud/</link><pubDate>Sun, 03 Dec 2023 00:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/multcloud/</guid><description>&lt;h2 id="选型">选型
&lt;/h2>&lt;p>业务类型 允许短时间（数秒内）部分业务中断，不允许超过1分钟以上的故障。
现有服务 多为无状态服务，一部分为半无状态，另外有redis和pgsql 。 &lt;br>
服务器 目前共有 12台 目前10台在线 2台冗余热备。主要是阿里云和腾讯云，另有两台异地pve。&lt;br>
首先说，服务器有一些本身是云厂商的活动价格购入的，配置2H2G那种。k8s肯定是不适合，太重。k3s只能说是空服务的是内存占用可以（本身512M左右内存），开启服务后和k8s并没有明显有时。&lt;br>
除去性能的占用，k8s/k3s集群公网通讯开支较大。容器数量只有几十个，机器不到10台，所以无论如何Kubernetes都不适合目前的场景。&lt;br>
其次考虑到 mesos,无奈了解太少，加上过于非主流了，所以没有去尝试。&lt;br>
然后目光就投到了 docker swarm。&lt;/p>
&lt;h2 id="docker-swarm-优势">docker swarm 优势
&lt;/h2>&lt;ul>
&lt;li>硬件资源占用很低，cpu和内存占用可以忽略不计&lt;/li>
&lt;li>节点之间公网通讯带宽占用在10-几十K，可以忽略不计。&lt;/li>
&lt;li>原docker/podman容器迁移成本时间成本极低，毕竟docker自家的，docker compose yml略微修改就可以。&lt;/li>
&lt;li>partainer 够轻量，够直观，也足够docker swarm的图形化管理（毕竟有时候还是需要直观的查看的服务的分布情况）&lt;/li>
&lt;/ul>
&lt;h2 id="docker-swarm-的缺点">docker swarm 的缺点
&lt;/h2>&lt;p>只针对目前项目的情况的一些看法&lt;/p>
&lt;ul>
&lt;li>日后迁移云k8s需要二次折腾，目前主流云厂商都放弃了docker swarm&lt;/li>
&lt;li>可能B格不够 有人为阻力&lt;/li>
&lt;/ul>
&lt;h2 id="服务的处理">服务的处理
&lt;/h2>&lt;h3 id="半无状态服务弱持久化储存依赖的">半无状态服务（弱持久化储存依赖的）
&lt;/h3>&lt;p>无状态服务没啥可说的，但是有一些半无状态的服务，需要存取数据。在从手动管理docker升到swarm的时候需要简单处理一下。&lt;/p>
&lt;ul>
&lt;li>尽可能 使用constraint参数 把服务分布指定的某台或某组机器上。&lt;/li>
&lt;li>使用云储存，在云主机上使用内网读写对应的数据。&lt;/li>
&lt;/ul>
&lt;h3 id="有状态服务redismysql">有状态服务redis/mysql
&lt;/h3>&lt;p>项目里面存在3个redis集群 一个pgsql主从。&lt;/p>
&lt;ul>
&lt;li>原则上 尽可能的使用云厂商的，不自建。非要自建的情况参考下文&lt;/li>
&lt;li>使用constraint参数 把服务分布指定的某台或某组机器上。&lt;/li>
&lt;li>读写不频繁的文件，例如redis的 rdb/aof 直接到云储存上。&lt;/li>
&lt;li>读写频繁但是可用性要求不高的文件，直接落地到机器的硬盘上，然后定时同步到云储存。&lt;/li>
&lt;li>读写频繁并且可用性要求高的文件，直接落地云储存或者直接用云厂商的服务。比如pgsql&lt;/li>
&lt;/ul>
&lt;h3 id="实践">实践
&lt;/h3>&lt;ul>
&lt;li>配置项目 尽可能使用环境变量，直接到swarm的服务里面。&lt;/li>
&lt;li>配置项目 只能使用配置文件的，配置文件到云储存。使用 docker rclone插件，直接绑定到docker卷。&lt;/li>
&lt;li>嵌入式kv，写频繁但是允许短时间丢失的，落地硬盘，并定时同步到的云储存。&lt;/li>
&lt;li>redis持久化文件 使用 docker rclone插件，直接绑定到docker卷。&lt;/li>
&lt;/ul></description></item><item><title>gnome调整窗口大小快捷修改 win+中键 改为 右键</title><link>https://dev.leiyanhui.com/linux/gnome-resize-win/</link><pubDate>Mon, 27 Nov 2023 06:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/gnome-resize-win/</guid><description>&lt;p>在平铺桌面下 一般常用的 快捷调整窗口大小的快捷键，除了键盘调整之外，最常用的 win+鼠标右键&lt;/p>
&lt;p>但是gnome下 默认是 win+ 鼠标中键 刚刚切换到gnome后很不适应 调整起来比较吃力。&lt;/p>
&lt;p>两个解决方法&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">gsettings &lt;span class="nb">set&lt;/span> org.gnome.desktop.wm.preferences resize-with-right-button &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或者用 gnome-tweaks 选择 窗口 启用 副键调整窗口大小&lt;/p></description></item><item><title>monit常用例子和坑</title><link>https://dev.leiyanhui.com/linux/monit-exp/</link><pubDate>Sat, 21 Oct 2023 08:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/monit-exp/</guid><description>&lt;h2 id="monit-基本命令">monit 基本命令
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">monit &lt;span class="c1"># 默认文件启动 /etc/monit/monitrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">monit -c /XXX/_config/monit/monitrc &lt;span class="c1"># 以指定配置文件启动&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">monit reload -c /XXX/_config/monit/monitrc &lt;span class="c1">#重载&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">monit procmatch &lt;span class="s2">&amp;#34;/usr/bin/ddns-go&amp;#34;&lt;/span> &lt;span class="c1">#测试正则表达式 适合 没有pid的进程&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="monit-基本配置">monit 基本配置
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">daemon&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="c1"># 多久检测一次&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># with start delay 240 # 第一次检查 延迟 多久，默认启动后就检查&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#set log /var/log/monit.log&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="nb">log&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">XXX&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">monit&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set pidfile /var/run/monit.pid # 没太大必要&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">pidfile&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">XXX&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">monit&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set idfile /var/.monit.id 设置Monit实例的id文件路径。id文件记录了Monit实例的唯一ID（标识），id在第一次Monit启动时生成并存储。默# 认情况下，文件放置在$HOME/.monit.id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#set idfile /var/lib/monit/id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#set idfile /monit/id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">idfile&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">XXX&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">monit&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">idfile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set statefile /var/.monit.state #保存监视状态的Monit状态文件的位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#set statefile /var/lib/monit/state&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">statefile&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">XXX&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">monit&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">state&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">set&lt;/span> &lt;span class="n">eventqueue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">basedir&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">XXX&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">monit&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">events&lt;/span> &lt;span class="c1"># 设置存储事件的基本目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">slots&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="c1"># 可选择限制队列大小&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">httpd&lt;/span> &lt;span class="n">port&lt;/span> &lt;span class="mi">8022&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="c1">#这里允许公网访问 不绑定ip&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">with&lt;/span> &lt;span class="n">ssl&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pemfile&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">XXX&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">my_ssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">domain_aio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pem&lt;/span> &lt;span class="c1"># 二合一证书文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">selfsigned&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">allow&lt;/span> &lt;span class="c1">#允许自签名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span> &lt;span class="err">用户名&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">XXX&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">_config&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">monit&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">include&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">conf&lt;/span> &lt;span class="c1">#包含文件&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="常用配置">常用配置
&lt;/h2>&lt;h3 id="几个注意点">几个注意点
&lt;/h3>&lt;ul>
&lt;li>守护进程 优先使用pid，其次再选择 matching 进程名称&lt;/li>
&lt;li>启动和关闭进程优先使用/etc/init.d/&lt;/li>
&lt;li>monitrc 文件 权限必须是700 include的文件权限无所谓&lt;/li>
&lt;/ul>
&lt;h3 id="控制sshd">控制sshd
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">check process sshd with pidfile /run/sshd.pid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> start &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/etc/init.d/ssh start&amp;#34;&lt;/span> with timeout &lt;span class="m">120&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stop &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/usr/bin/killall sshd&amp;#34;&lt;/span> with timeout &lt;span class="m">120&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- 或者 mkdir -p /run/sshd 后- ---------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">check process sshd with matching &lt;span class="s2">&amp;#34;/usr/sbin/sshd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> does not exist &lt;span class="k">then&lt;/span> &lt;span class="nb">exec&lt;/span> &lt;span class="s2">&amp;#34;/usr/sbin/sshd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stop &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/usr/bin/killall sshd&amp;#34;&lt;/span> with timeout &lt;span class="m">120&lt;/span> seconds
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注意 /etc/init.d/ssh stop 无法彻底关闭sshd&lt;/p>
&lt;h3 id="控制crontab">控制crontab
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">check process crontab with pidfile /var/run/crond.pid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> start &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/etc/init.d/cron start&amp;#34;&lt;/span> with timeout &lt;span class="m">120&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stop &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/etc/init.d/cron stop&amp;#34;&lt;/span> with timeout &lt;span class="m">120&lt;/span> seconds
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注意crontabl是使用 /usr/sbin/cron 而不是 /usr/bin/crontab&lt;/p>
&lt;h3 id="控制ddns-go-等没有pid的">控制ddns-go 等没有pid的
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">check process ddns-go with matching &lt;span class="s2">&amp;#34;ddns-go&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> does not exist &lt;span class="k">then&lt;/span> &lt;span class="nb">exec&lt;/span> &lt;span class="s2">&amp;#34;/usr/bin/ddns-go&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stop &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/usr/bin/killall ddns-go&amp;#34;&lt;/span> with timeout &lt;span class="m">120&lt;/span> seconds
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="指定用户运行redis">指定用户运行redis
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">check process redis6001 with pidfile /XXX/pid/redis6001.pid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> start &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/bin/su - userRedis -c &amp;#39;/usr/bin/redis-server /XXX/_config/redis/redis6001.conf &amp;amp;&amp;#39; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> with timeout &lt;span class="m">120&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stop &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/bin/su - userRedis -c &amp;#39;/usr/bin/redis-cli -p 6001 -a 密码 -h localhost SHUTDOWN &amp;amp; /usr/bin/sleep 5 &amp;amp;&amp;amp;/usr/bin/kill -9 &lt;/span>&lt;span class="k">$(&lt;/span> lsof -t -i:6001&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> with timeout &lt;span class="m">120&lt;/span> seconds
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="控制rclone挂载">控制rclone挂载
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">CHECK FILESYSTEM rclone_dev_log PATH /localPath
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> start &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/usr/bin/rclone mount --allow-other --daemon oss-qd:xxx/ /localPath/ --config /XXX/_config/rclone.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> with timeout &lt;span class="m">120&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stop &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/usr/bin/fusermount -u /localPath &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> with timeout &lt;span class="m">120&lt;/span> seconds
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>多用户环境这里 注意 &amp;ndash;allow-other 参数 不然其他用户无法访问&lt;/p></description></item><item><title>linux下轻量级桌面对比和选择</title><link>https://dev.leiyanhui.com/linux/light-desktop/</link><pubDate>Wed, 18 Oct 2023 08:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/light-desktop/</guid><description>&lt;h2 id="xfce">xfce
&lt;/h2>&lt;p>xfce4 比较稳，开箱即用，该有的功能都有。 美化比较简单，如果不是非要用wayland的 很不错。
xfce4默认给你创建的面板2实际是一个启动器而不是dock，需要自己另外处理一下。&lt;/p>
&lt;h2 id="kde-和gnome">kde 和gnome
&lt;/h2>&lt;p>kde和gnome 自定义功能复杂，而且很多无法实现。
gnome多数自定义功能需要插件来，但是随着版本更新很多插件会失效。即便如此gnome的个性化和自定义功能还是非常有限，而且部分功能实现起来非常复杂。
kde自定义功能要比gnome多很多，但是很多都是面板配置，直接修改配置文件需要熟悉他的配置项，太多太复杂，没有必要浪费精神。&lt;/p>
&lt;h2 id="dwm-和-i3">dwm 和 i3
&lt;/h2>&lt;p>这两个我长期使用的桌面，dwm入坑，随后几个月后就转入i3 并长期使用。
dwm除了修改配置需要重新编译之外，也就只有基础的一些功能。相对来说i3的功能更加完善。
这两个桌面 性能都非常好，在低配机器上相应速度也非常流畅，在xrdp远程环境下工作也良好。&lt;/p>
&lt;h2 id="wayfire">wayfire
&lt;/h2>&lt;p>目前还是初级阶段，折腾并使用过一段时间，很多常规窗口管理的热键尚不支持。而且遇到几次整个桌面闪掉回退到tty的情况。
平铺模式下 很多常用热键不支持，也无法自行配置。 不过waybar确实不错。
多屏幕管理有一点问题。&lt;/p>
&lt;h2 id="openbox">openbox
&lt;/h2>&lt;p>堆叠桌面的轻量选择，需要自己简单配置一下热键和右键菜单。并配合 tin2 或者plank使用。 作为堆叠桌面，够用。作为平铺桌面使用的话非常不方便。&lt;/p>
&lt;h2 id="awesome">awesome
&lt;/h2>&lt;p>目前使用的。
awesome 还是比较推荐的，他有以下几个优点&lt;/p>
&lt;h3 id="优点">优点
&lt;/h3>&lt;ul>
&lt;li>开箱即用 并且同时支持平铺和堆叠&lt;/li>
&lt;li>默认配置文件和官方文档提供了丰富的实例，只要有编程基础不需要会lua语言就可以轻松个性化。&lt;/li>
&lt;li>因为基于lua的配置下所以进阶使用功能比i3丰富很多 堪称牛逼。&lt;/li>
&lt;li>和i3 、dwm 一样的稳定性兼容性&lt;/li>
&lt;li>在低配电脑上工作良好&lt;/li>
&lt;li>在xrdp和vnc模式下 同样反应速度很快&lt;/li>
&lt;li>可以单独某一个屏幕使用浮动窗口
罗列几个lua配置可以实现的一些i3和其他轻量级桌面无法很优雅实现的功能。&lt;/li>
&lt;li>可以用 popup 和 tasklist 两个组件 实现 alt+tab 的功能 ，而i3下一般是使用rofi来实现。自己实现的会更加灵活。&lt;/li>
&lt;li>窗口的rules 控制规则可以更精细，甚至可以精确到某一个应用的某一个对话框、设置框。当然i3 支持 应用默认在固定的桌面/显示器 都是支持的。&lt;/li>
&lt;li>因为lua本身就是一个强大的语言，所以可以实现一个不依赖python 获取其他语言的 纯lua实现的一些小插件到awesome&lt;/li>
&lt;li>同样组件组合的功能，可以实现比polybar更加丰富和美观的bar&lt;/li>
&lt;li>多个菜单的组合 会更加灵活&lt;/li>
&lt;li>整个桌面功能，可以只需要一个配置文件（rc.lua）不需要其他任何依赖。&lt;/li>
&lt;/ul>
&lt;h3 id="缺点">缺点
&lt;/h3>&lt;ul>
&lt;li>基于lua的配置文件，很多平铺桌面党多数是选的i3 中文资料较少 会劝退很多人。&lt;/li>
&lt;li>x11转发到本地的窗口在平铺模式下 修改窗口大小 会有一点拖影。&lt;/li>
&lt;/ul>
&lt;h2 id="我的awesome配置">我的awesome配置
&lt;/h2>&lt;p>可能有一定的滞后性，最新的可以查看 &lt;a class="link" href="https://github.com/joyanhui/desktop-cfg/tree/main/.config/awesome" target="_blank" rel="noopener"
>https://github.com/joyanhui/desktop-cfg/tree/main/.config/awesome&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;span class="lnt">269
&lt;/span>&lt;span class="lnt">270
&lt;/span>&lt;span class="lnt">271
&lt;/span>&lt;span class="lnt">272
&lt;/span>&lt;span class="lnt">273
&lt;/span>&lt;span class="lnt">274
&lt;/span>&lt;span class="lnt">275
&lt;/span>&lt;span class="lnt">276
&lt;/span>&lt;span class="lnt">277
&lt;/span>&lt;span class="lnt">278
&lt;/span>&lt;span class="lnt">279
&lt;/span>&lt;span class="lnt">280
&lt;/span>&lt;span class="lnt">281
&lt;/span>&lt;span class="lnt">282
&lt;/span>&lt;span class="lnt">283
&lt;/span>&lt;span class="lnt">284
&lt;/span>&lt;span class="lnt">285
&lt;/span>&lt;span class="lnt">286
&lt;/span>&lt;span class="lnt">287
&lt;/span>&lt;span class="lnt">288
&lt;/span>&lt;span class="lnt">289
&lt;/span>&lt;span class="lnt">290
&lt;/span>&lt;span class="lnt">291
&lt;/span>&lt;span class="lnt">292
&lt;/span>&lt;span class="lnt">293
&lt;/span>&lt;span class="lnt">294
&lt;/span>&lt;span class="lnt">295
&lt;/span>&lt;span class="lnt">296
&lt;/span>&lt;span class="lnt">297
&lt;/span>&lt;span class="lnt">298
&lt;/span>&lt;span class="lnt">299
&lt;/span>&lt;span class="lnt">300
&lt;/span>&lt;span class="lnt">301
&lt;/span>&lt;span class="lnt">302
&lt;/span>&lt;span class="lnt">303
&lt;/span>&lt;span class="lnt">304
&lt;/span>&lt;span class="lnt">305
&lt;/span>&lt;span class="lnt">306
&lt;/span>&lt;span class="lnt">307
&lt;/span>&lt;span class="lnt">308
&lt;/span>&lt;span class="lnt">309
&lt;/span>&lt;span class="lnt">310
&lt;/span>&lt;span class="lnt">311
&lt;/span>&lt;span class="lnt">312
&lt;/span>&lt;span class="lnt">313
&lt;/span>&lt;span class="lnt">314
&lt;/span>&lt;span class="lnt">315
&lt;/span>&lt;span class="lnt">316
&lt;/span>&lt;span class="lnt">317
&lt;/span>&lt;span class="lnt">318
&lt;/span>&lt;span class="lnt">319
&lt;/span>&lt;span class="lnt">320
&lt;/span>&lt;span class="lnt">321
&lt;/span>&lt;span class="lnt">322
&lt;/span>&lt;span class="lnt">323
&lt;/span>&lt;span class="lnt">324
&lt;/span>&lt;span class="lnt">325
&lt;/span>&lt;span class="lnt">326
&lt;/span>&lt;span class="lnt">327
&lt;/span>&lt;span class="lnt">328
&lt;/span>&lt;span class="lnt">329
&lt;/span>&lt;span class="lnt">330
&lt;/span>&lt;span class="lnt">331
&lt;/span>&lt;span class="lnt">332
&lt;/span>&lt;span class="lnt">333
&lt;/span>&lt;span class="lnt">334
&lt;/span>&lt;span class="lnt">335
&lt;/span>&lt;span class="lnt">336
&lt;/span>&lt;span class="lnt">337
&lt;/span>&lt;span class="lnt">338
&lt;/span>&lt;span class="lnt">339
&lt;/span>&lt;span class="lnt">340
&lt;/span>&lt;span class="lnt">341
&lt;/span>&lt;span class="lnt">342
&lt;/span>&lt;span class="lnt">343
&lt;/span>&lt;span class="lnt">344
&lt;/span>&lt;span class="lnt">345
&lt;/span>&lt;span class="lnt">346
&lt;/span>&lt;span class="lnt">347
&lt;/span>&lt;span class="lnt">348
&lt;/span>&lt;span class="lnt">349
&lt;/span>&lt;span class="lnt">350
&lt;/span>&lt;span class="lnt">351
&lt;/span>&lt;span class="lnt">352
&lt;/span>&lt;span class="lnt">353
&lt;/span>&lt;span class="lnt">354
&lt;/span>&lt;span class="lnt">355
&lt;/span>&lt;span class="lnt">356
&lt;/span>&lt;span class="lnt">357
&lt;/span>&lt;span class="lnt">358
&lt;/span>&lt;span class="lnt">359
&lt;/span>&lt;span class="lnt">360
&lt;/span>&lt;span class="lnt">361
&lt;/span>&lt;span class="lnt">362
&lt;/span>&lt;span class="lnt">363
&lt;/span>&lt;span class="lnt">364
&lt;/span>&lt;span class="lnt">365
&lt;/span>&lt;span class="lnt">366
&lt;/span>&lt;span class="lnt">367
&lt;/span>&lt;span class="lnt">368
&lt;/span>&lt;span class="lnt">369
&lt;/span>&lt;span class="lnt">370
&lt;/span>&lt;span class="lnt">371
&lt;/span>&lt;span class="lnt">372
&lt;/span>&lt;span class="lnt">373
&lt;/span>&lt;span class="lnt">374
&lt;/span>&lt;span class="lnt">375
&lt;/span>&lt;span class="lnt">376
&lt;/span>&lt;span class="lnt">377
&lt;/span>&lt;span class="lnt">378
&lt;/span>&lt;span class="lnt">379
&lt;/span>&lt;span class="lnt">380
&lt;/span>&lt;span class="lnt">381
&lt;/span>&lt;span class="lnt">382
&lt;/span>&lt;span class="lnt">383
&lt;/span>&lt;span class="lnt">384
&lt;/span>&lt;span class="lnt">385
&lt;/span>&lt;span class="lnt">386
&lt;/span>&lt;span class="lnt">387
&lt;/span>&lt;span class="lnt">388
&lt;/span>&lt;span class="lnt">389
&lt;/span>&lt;span class="lnt">390
&lt;/span>&lt;span class="lnt">391
&lt;/span>&lt;span class="lnt">392
&lt;/span>&lt;span class="lnt">393
&lt;/span>&lt;span class="lnt">394
&lt;/span>&lt;span class="lnt">395
&lt;/span>&lt;span class="lnt">396
&lt;/span>&lt;span class="lnt">397
&lt;/span>&lt;span class="lnt">398
&lt;/span>&lt;span class="lnt">399
&lt;/span>&lt;span class="lnt">400
&lt;/span>&lt;span class="lnt">401
&lt;/span>&lt;span class="lnt">402
&lt;/span>&lt;span class="lnt">403
&lt;/span>&lt;span class="lnt">404
&lt;/span>&lt;span class="lnt">405
&lt;/span>&lt;span class="lnt">406
&lt;/span>&lt;span class="lnt">407
&lt;/span>&lt;span class="lnt">408
&lt;/span>&lt;span class="lnt">409
&lt;/span>&lt;span class="lnt">410
&lt;/span>&lt;span class="lnt">411
&lt;/span>&lt;span class="lnt">412
&lt;/span>&lt;span class="lnt">413
&lt;/span>&lt;span class="lnt">414
&lt;/span>&lt;span class="lnt">415
&lt;/span>&lt;span class="lnt">416
&lt;/span>&lt;span class="lnt">417
&lt;/span>&lt;span class="lnt">418
&lt;/span>&lt;span class="lnt">419
&lt;/span>&lt;span class="lnt">420
&lt;/span>&lt;span class="lnt">421
&lt;/span>&lt;span class="lnt">422
&lt;/span>&lt;span class="lnt">423
&lt;/span>&lt;span class="lnt">424
&lt;/span>&lt;span class="lnt">425
&lt;/span>&lt;span class="lnt">426
&lt;/span>&lt;span class="lnt">427
&lt;/span>&lt;span class="lnt">428
&lt;/span>&lt;span class="lnt">429
&lt;/span>&lt;span class="lnt">430
&lt;/span>&lt;span class="lnt">431
&lt;/span>&lt;span class="lnt">432
&lt;/span>&lt;span class="lnt">433
&lt;/span>&lt;span class="lnt">434
&lt;/span>&lt;span class="lnt">435
&lt;/span>&lt;span class="lnt">436
&lt;/span>&lt;span class="lnt">437
&lt;/span>&lt;span class="lnt">438
&lt;/span>&lt;span class="lnt">439
&lt;/span>&lt;span class="lnt">440
&lt;/span>&lt;span class="lnt">441
&lt;/span>&lt;span class="lnt">442
&lt;/span>&lt;span class="lnt">443
&lt;/span>&lt;span class="lnt">444
&lt;/span>&lt;span class="lnt">445
&lt;/span>&lt;span class="lnt">446
&lt;/span>&lt;span class="lnt">447
&lt;/span>&lt;span class="lnt">448
&lt;/span>&lt;span class="lnt">449
&lt;/span>&lt;span class="lnt">450
&lt;/span>&lt;span class="lnt">451
&lt;/span>&lt;span class="lnt">452
&lt;/span>&lt;span class="lnt">453
&lt;/span>&lt;span class="lnt">454
&lt;/span>&lt;span class="lnt">455
&lt;/span>&lt;span class="lnt">456
&lt;/span>&lt;span class="lnt">457
&lt;/span>&lt;span class="lnt">458
&lt;/span>&lt;span class="lnt">459
&lt;/span>&lt;span class="lnt">460
&lt;/span>&lt;span class="lnt">461
&lt;/span>&lt;span class="lnt">462
&lt;/span>&lt;span class="lnt">463
&lt;/span>&lt;span class="lnt">464
&lt;/span>&lt;span class="lnt">465
&lt;/span>&lt;span class="lnt">466
&lt;/span>&lt;span class="lnt">467
&lt;/span>&lt;span class="lnt">468
&lt;/span>&lt;span class="lnt">469
&lt;/span>&lt;span class="lnt">470
&lt;/span>&lt;span class="lnt">471
&lt;/span>&lt;span class="lnt">472
&lt;/span>&lt;span class="lnt">473
&lt;/span>&lt;span class="lnt">474
&lt;/span>&lt;span class="lnt">475
&lt;/span>&lt;span class="lnt">476
&lt;/span>&lt;span class="lnt">477
&lt;/span>&lt;span class="lnt">478
&lt;/span>&lt;span class="lnt">479
&lt;/span>&lt;span class="lnt">480
&lt;/span>&lt;span class="lnt">481
&lt;/span>&lt;span class="lnt">482
&lt;/span>&lt;span class="lnt">483
&lt;/span>&lt;span class="lnt">484
&lt;/span>&lt;span class="lnt">485
&lt;/span>&lt;span class="lnt">486
&lt;/span>&lt;span class="lnt">487
&lt;/span>&lt;span class="lnt">488
&lt;/span>&lt;span class="lnt">489
&lt;/span>&lt;span class="lnt">490
&lt;/span>&lt;span class="lnt">491
&lt;/span>&lt;span class="lnt">492
&lt;/span>&lt;span class="lnt">493
&lt;/span>&lt;span class="lnt">494
&lt;/span>&lt;span class="lnt">495
&lt;/span>&lt;span class="lnt">496
&lt;/span>&lt;span class="lnt">497
&lt;/span>&lt;span class="lnt">498
&lt;/span>&lt;span class="lnt">499
&lt;/span>&lt;span class="lnt">500
&lt;/span>&lt;span class="lnt">501
&lt;/span>&lt;span class="lnt">502
&lt;/span>&lt;span class="lnt">503
&lt;/span>&lt;span class="lnt">504
&lt;/span>&lt;span class="lnt">505
&lt;/span>&lt;span class="lnt">506
&lt;/span>&lt;span class="lnt">507
&lt;/span>&lt;span class="lnt">508
&lt;/span>&lt;span class="lnt">509
&lt;/span>&lt;span class="lnt">510
&lt;/span>&lt;span class="lnt">511
&lt;/span>&lt;span class="lnt">512
&lt;/span>&lt;span class="lnt">513
&lt;/span>&lt;span class="lnt">514
&lt;/span>&lt;span class="lnt">515
&lt;/span>&lt;span class="lnt">516
&lt;/span>&lt;span class="lnt">517
&lt;/span>&lt;span class="lnt">518
&lt;/span>&lt;span class="lnt">519
&lt;/span>&lt;span class="lnt">520
&lt;/span>&lt;span class="lnt">521
&lt;/span>&lt;span class="lnt">522
&lt;/span>&lt;span class="lnt">523
&lt;/span>&lt;span class="lnt">524
&lt;/span>&lt;span class="lnt">525
&lt;/span>&lt;span class="lnt">526
&lt;/span>&lt;span class="lnt">527
&lt;/span>&lt;span class="lnt">528
&lt;/span>&lt;span class="lnt">529
&lt;/span>&lt;span class="lnt">530
&lt;/span>&lt;span class="lnt">531
&lt;/span>&lt;span class="lnt">532
&lt;/span>&lt;span class="lnt">533
&lt;/span>&lt;span class="lnt">534
&lt;/span>&lt;span class="lnt">535
&lt;/span>&lt;span class="lnt">536
&lt;/span>&lt;span class="lnt">537
&lt;/span>&lt;span class="lnt">538
&lt;/span>&lt;span class="lnt">539
&lt;/span>&lt;span class="lnt">540
&lt;/span>&lt;span class="lnt">541
&lt;/span>&lt;span class="lnt">542
&lt;/span>&lt;span class="lnt">543
&lt;/span>&lt;span class="lnt">544
&lt;/span>&lt;span class="lnt">545
&lt;/span>&lt;span class="lnt">546
&lt;/span>&lt;span class="lnt">547
&lt;/span>&lt;span class="lnt">548
&lt;/span>&lt;span class="lnt">549
&lt;/span>&lt;span class="lnt">550
&lt;/span>&lt;span class="lnt">551
&lt;/span>&lt;span class="lnt">552
&lt;/span>&lt;span class="lnt">553
&lt;/span>&lt;span class="lnt">554
&lt;/span>&lt;span class="lnt">555
&lt;/span>&lt;span class="lnt">556
&lt;/span>&lt;span class="lnt">557
&lt;/span>&lt;span class="lnt">558
&lt;/span>&lt;span class="lnt">559
&lt;/span>&lt;span class="lnt">560
&lt;/span>&lt;span class="lnt">561
&lt;/span>&lt;span class="lnt">562
&lt;/span>&lt;span class="lnt">563
&lt;/span>&lt;span class="lnt">564
&lt;/span>&lt;span class="lnt">565
&lt;/span>&lt;span class="lnt">566
&lt;/span>&lt;span class="lnt">567
&lt;/span>&lt;span class="lnt">568
&lt;/span>&lt;span class="lnt">569
&lt;/span>&lt;span class="lnt">570
&lt;/span>&lt;span class="lnt">571
&lt;/span>&lt;span class="lnt">572
&lt;/span>&lt;span class="lnt">573
&lt;/span>&lt;span class="lnt">574
&lt;/span>&lt;span class="lnt">575
&lt;/span>&lt;span class="lnt">576
&lt;/span>&lt;span class="lnt">577
&lt;/span>&lt;span class="lnt">578
&lt;/span>&lt;span class="lnt">579
&lt;/span>&lt;span class="lnt">580
&lt;/span>&lt;span class="lnt">581
&lt;/span>&lt;span class="lnt">582
&lt;/span>&lt;span class="lnt">583
&lt;/span>&lt;span class="lnt">584
&lt;/span>&lt;span class="lnt">585
&lt;/span>&lt;span class="lnt">586
&lt;/span>&lt;span class="lnt">587
&lt;/span>&lt;span class="lnt">588
&lt;/span>&lt;span class="lnt">589
&lt;/span>&lt;span class="lnt">590
&lt;/span>&lt;span class="lnt">591
&lt;/span>&lt;span class="lnt">592
&lt;/span>&lt;span class="lnt">593
&lt;/span>&lt;span class="lnt">594
&lt;/span>&lt;span class="lnt">595
&lt;/span>&lt;span class="lnt">596
&lt;/span>&lt;span class="lnt">597
&lt;/span>&lt;span class="lnt">598
&lt;/span>&lt;span class="lnt">599
&lt;/span>&lt;span class="lnt">600
&lt;/span>&lt;span class="lnt">601
&lt;/span>&lt;span class="lnt">602
&lt;/span>&lt;span class="lnt">603
&lt;/span>&lt;span class="lnt">604
&lt;/span>&lt;span class="lnt">605
&lt;/span>&lt;span class="lnt">606
&lt;/span>&lt;span class="lnt">607
&lt;/span>&lt;span class="lnt">608
&lt;/span>&lt;span class="lnt">609
&lt;/span>&lt;span class="lnt">610
&lt;/span>&lt;span class="lnt">611
&lt;/span>&lt;span class="lnt">612
&lt;/span>&lt;span class="lnt">613
&lt;/span>&lt;span class="lnt">614
&lt;/span>&lt;span class="lnt">615
&lt;/span>&lt;span class="lnt">616
&lt;/span>&lt;span class="lnt">617
&lt;/span>&lt;span class="lnt">618
&lt;/span>&lt;span class="lnt">619
&lt;/span>&lt;span class="lnt">620
&lt;/span>&lt;span class="lnt">621
&lt;/span>&lt;span class="lnt">622
&lt;/span>&lt;span class="lnt">623
&lt;/span>&lt;span class="lnt">624
&lt;/span>&lt;span class="lnt">625
&lt;/span>&lt;span class="lnt">626
&lt;/span>&lt;span class="lnt">627
&lt;/span>&lt;span class="lnt">628
&lt;/span>&lt;span class="lnt">629
&lt;/span>&lt;span class="lnt">630
&lt;/span>&lt;span class="lnt">631
&lt;/span>&lt;span class="lnt">632
&lt;/span>&lt;span class="lnt">633
&lt;/span>&lt;span class="lnt">634
&lt;/span>&lt;span class="lnt">635
&lt;/span>&lt;span class="lnt">636
&lt;/span>&lt;span class="lnt">637
&lt;/span>&lt;span class="lnt">638
&lt;/span>&lt;span class="lnt">639
&lt;/span>&lt;span class="lnt">640
&lt;/span>&lt;span class="lnt">641
&lt;/span>&lt;span class="lnt">642
&lt;/span>&lt;span class="lnt">643
&lt;/span>&lt;span class="lnt">644
&lt;/span>&lt;span class="lnt">645
&lt;/span>&lt;span class="lnt">646
&lt;/span>&lt;span class="lnt">647
&lt;/span>&lt;span class="lnt">648
&lt;/span>&lt;span class="lnt">649
&lt;/span>&lt;span class="lnt">650
&lt;/span>&lt;span class="lnt">651
&lt;/span>&lt;span class="lnt">652
&lt;/span>&lt;span class="lnt">653
&lt;/span>&lt;span class="lnt">654
&lt;/span>&lt;span class="lnt">655
&lt;/span>&lt;span class="lnt">656
&lt;/span>&lt;span class="lnt">657
&lt;/span>&lt;span class="lnt">658
&lt;/span>&lt;span class="lnt">659
&lt;/span>&lt;span class="lnt">660
&lt;/span>&lt;span class="lnt">661
&lt;/span>&lt;span class="lnt">662
&lt;/span>&lt;span class="lnt">663
&lt;/span>&lt;span class="lnt">664
&lt;/span>&lt;span class="lnt">665
&lt;/span>&lt;span class="lnt">666
&lt;/span>&lt;span class="lnt">667
&lt;/span>&lt;span class="lnt">668
&lt;/span>&lt;span class="lnt">669
&lt;/span>&lt;span class="lnt">670
&lt;/span>&lt;span class="lnt">671
&lt;/span>&lt;span class="lnt">672
&lt;/span>&lt;span class="lnt">673
&lt;/span>&lt;span class="lnt">674
&lt;/span>&lt;span class="lnt">675
&lt;/span>&lt;span class="lnt">676
&lt;/span>&lt;span class="lnt">677
&lt;/span>&lt;span class="lnt">678
&lt;/span>&lt;span class="lnt">679
&lt;/span>&lt;span class="lnt">680
&lt;/span>&lt;span class="lnt">681
&lt;/span>&lt;span class="lnt">682
&lt;/span>&lt;span class="lnt">683
&lt;/span>&lt;span class="lnt">684
&lt;/span>&lt;span class="lnt">685
&lt;/span>&lt;span class="lnt">686
&lt;/span>&lt;span class="lnt">687
&lt;/span>&lt;span class="lnt">688
&lt;/span>&lt;span class="lnt">689
&lt;/span>&lt;span class="lnt">690
&lt;/span>&lt;span class="lnt">691
&lt;/span>&lt;span class="lnt">692
&lt;/span>&lt;span class="lnt">693
&lt;/span>&lt;span class="lnt">694
&lt;/span>&lt;span class="lnt">695
&lt;/span>&lt;span class="lnt">696
&lt;/span>&lt;span class="lnt">697
&lt;/span>&lt;span class="lnt">698
&lt;/span>&lt;span class="lnt">699
&lt;/span>&lt;span class="lnt">700
&lt;/span>&lt;span class="lnt">701
&lt;/span>&lt;span class="lnt">702
&lt;/span>&lt;span class="lnt">703
&lt;/span>&lt;span class="lnt">704
&lt;/span>&lt;span class="lnt">705
&lt;/span>&lt;span class="lnt">706
&lt;/span>&lt;span class="lnt">707
&lt;/span>&lt;span class="lnt">708
&lt;/span>&lt;span class="lnt">709
&lt;/span>&lt;span class="lnt">710
&lt;/span>&lt;span class="lnt">711
&lt;/span>&lt;span class="lnt">712
&lt;/span>&lt;span class="lnt">713
&lt;/span>&lt;span class="lnt">714
&lt;/span>&lt;span class="lnt">715
&lt;/span>&lt;span class="lnt">716
&lt;/span>&lt;span class="lnt">717
&lt;/span>&lt;span class="lnt">718
&lt;/span>&lt;span class="lnt">719
&lt;/span>&lt;span class="lnt">720
&lt;/span>&lt;span class="lnt">721
&lt;/span>&lt;span class="lnt">722
&lt;/span>&lt;span class="lnt">723
&lt;/span>&lt;span class="lnt">724
&lt;/span>&lt;span class="lnt">725
&lt;/span>&lt;span class="lnt">726
&lt;/span>&lt;span class="lnt">727
&lt;/span>&lt;span class="lnt">728
&lt;/span>&lt;span class="lnt">729
&lt;/span>&lt;span class="lnt">730
&lt;/span>&lt;span class="lnt">731
&lt;/span>&lt;span class="lnt">732
&lt;/span>&lt;span class="lnt">733
&lt;/span>&lt;span class="lnt">734
&lt;/span>&lt;span class="lnt">735
&lt;/span>&lt;span class="lnt">736
&lt;/span>&lt;span class="lnt">737
&lt;/span>&lt;span class="lnt">738
&lt;/span>&lt;span class="lnt">739
&lt;/span>&lt;span class="lnt">740
&lt;/span>&lt;span class="lnt">741
&lt;/span>&lt;span class="lnt">742
&lt;/span>&lt;span class="lnt">743
&lt;/span>&lt;span class="lnt">744
&lt;/span>&lt;span class="lnt">745
&lt;/span>&lt;span class="lnt">746
&lt;/span>&lt;span class="lnt">747
&lt;/span>&lt;span class="lnt">748
&lt;/span>&lt;span class="lnt">749
&lt;/span>&lt;span class="lnt">750
&lt;/span>&lt;span class="lnt">751
&lt;/span>&lt;span class="lnt">752
&lt;/span>&lt;span class="lnt">753
&lt;/span>&lt;span class="lnt">754
&lt;/span>&lt;span class="lnt">755
&lt;/span>&lt;span class="lnt">756
&lt;/span>&lt;span class="lnt">757
&lt;/span>&lt;span class="lnt">758
&lt;/span>&lt;span class="lnt">759
&lt;/span>&lt;span class="lnt">760
&lt;/span>&lt;span class="lnt">761
&lt;/span>&lt;span class="lnt">762
&lt;/span>&lt;span class="lnt">763
&lt;/span>&lt;span class="lnt">764
&lt;/span>&lt;span class="lnt">765
&lt;/span>&lt;span class="lnt">766
&lt;/span>&lt;span class="lnt">767
&lt;/span>&lt;span class="lnt">768
&lt;/span>&lt;span class="lnt">769
&lt;/span>&lt;span class="lnt">770
&lt;/span>&lt;span class="lnt">771
&lt;/span>&lt;span class="lnt">772
&lt;/span>&lt;span class="lnt">773
&lt;/span>&lt;span class="lnt">774
&lt;/span>&lt;span class="lnt">775
&lt;/span>&lt;span class="lnt">776
&lt;/span>&lt;span class="lnt">777
&lt;/span>&lt;span class="lnt">778
&lt;/span>&lt;span class="lnt">779
&lt;/span>&lt;span class="lnt">780
&lt;/span>&lt;span class="lnt">781
&lt;/span>&lt;span class="lnt">782
&lt;/span>&lt;span class="lnt">783
&lt;/span>&lt;span class="lnt">784
&lt;/span>&lt;span class="lnt">785
&lt;/span>&lt;span class="lnt">786
&lt;/span>&lt;span class="lnt">787
&lt;/span>&lt;span class="lnt">788
&lt;/span>&lt;span class="lnt">789
&lt;/span>&lt;span class="lnt">790
&lt;/span>&lt;span class="lnt">791
&lt;/span>&lt;span class="lnt">792
&lt;/span>&lt;span class="lnt">793
&lt;/span>&lt;span class="lnt">794
&lt;/span>&lt;span class="lnt">795
&lt;/span>&lt;span class="lnt">796
&lt;/span>&lt;span class="lnt">797
&lt;/span>&lt;span class="lnt">798
&lt;/span>&lt;span class="lnt">799
&lt;/span>&lt;span class="lnt">800
&lt;/span>&lt;span class="lnt">801
&lt;/span>&lt;span class="lnt">802
&lt;/span>&lt;span class="lnt">803
&lt;/span>&lt;span class="lnt">804
&lt;/span>&lt;span class="lnt">805
&lt;/span>&lt;span class="lnt">806
&lt;/span>&lt;span class="lnt">807
&lt;/span>&lt;span class="lnt">808
&lt;/span>&lt;span class="lnt">809
&lt;/span>&lt;span class="lnt">810
&lt;/span>&lt;span class="lnt">811
&lt;/span>&lt;span class="lnt">812
&lt;/span>&lt;span class="lnt">813
&lt;/span>&lt;span class="lnt">814
&lt;/span>&lt;span class="lnt">815
&lt;/span>&lt;span class="lnt">816
&lt;/span>&lt;span class="lnt">817
&lt;/span>&lt;span class="lnt">818
&lt;/span>&lt;span class="lnt">819
&lt;/span>&lt;span class="lnt">820
&lt;/span>&lt;span class="lnt">821
&lt;/span>&lt;span class="lnt">822
&lt;/span>&lt;span class="lnt">823
&lt;/span>&lt;span class="lnt">824
&lt;/span>&lt;span class="lnt">825
&lt;/span>&lt;span class="lnt">826
&lt;/span>&lt;span class="lnt">827
&lt;/span>&lt;span class="lnt">828
&lt;/span>&lt;span class="lnt">829
&lt;/span>&lt;span class="lnt">830
&lt;/span>&lt;span class="lnt">831
&lt;/span>&lt;span class="lnt">832
&lt;/span>&lt;span class="lnt">833
&lt;/span>&lt;span class="lnt">834
&lt;/span>&lt;span class="lnt">835
&lt;/span>&lt;span class="lnt">836
&lt;/span>&lt;span class="lnt">837
&lt;/span>&lt;span class="lnt">838
&lt;/span>&lt;span class="lnt">839
&lt;/span>&lt;span class="lnt">840
&lt;/span>&lt;span class="lnt">841
&lt;/span>&lt;span class="lnt">842
&lt;/span>&lt;span class="lnt">843
&lt;/span>&lt;span class="lnt">844
&lt;/span>&lt;span class="lnt">845
&lt;/span>&lt;span class="lnt">846
&lt;/span>&lt;span class="lnt">847
&lt;/span>&lt;span class="lnt">848
&lt;/span>&lt;span class="lnt">849
&lt;/span>&lt;span class="lnt">850
&lt;/span>&lt;span class="lnt">851
&lt;/span>&lt;span class="lnt">852
&lt;/span>&lt;span class="lnt">853
&lt;/span>&lt;span class="lnt">854
&lt;/span>&lt;span class="lnt">855
&lt;/span>&lt;span class="lnt">856
&lt;/span>&lt;span class="lnt">857
&lt;/span>&lt;span class="lnt">858
&lt;/span>&lt;span class="lnt">859
&lt;/span>&lt;span class="lnt">860
&lt;/span>&lt;span class="lnt">861
&lt;/span>&lt;span class="lnt">862
&lt;/span>&lt;span class="lnt">863
&lt;/span>&lt;span class="lnt">864
&lt;/span>&lt;span class="lnt">865
&lt;/span>&lt;span class="lnt">866
&lt;/span>&lt;span class="lnt">867
&lt;/span>&lt;span class="lnt">868
&lt;/span>&lt;span class="lnt">869
&lt;/span>&lt;span class="lnt">870
&lt;/span>&lt;span class="lnt">871
&lt;/span>&lt;span class="lnt">872
&lt;/span>&lt;span class="lnt">873
&lt;/span>&lt;span class="lnt">874
&lt;/span>&lt;span class="lnt">875
&lt;/span>&lt;span class="lnt">876
&lt;/span>&lt;span class="lnt">877
&lt;/span>&lt;span class="lnt">878
&lt;/span>&lt;span class="lnt">879
&lt;/span>&lt;span class="lnt">880
&lt;/span>&lt;span class="lnt">881
&lt;/span>&lt;span class="lnt">882
&lt;/span>&lt;span class="lnt">883
&lt;/span>&lt;span class="lnt">884
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- If LuaRocks is installed, make sure that packages installed through it are&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- found (e.g. lgi). If LuaRocks is not installed, do nothing.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pcall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">require&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;luarocks.loader&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Standard awesome library&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">gears&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;gears&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">awful&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;awful&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;awful.autofocus&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Widget and layout library&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">wibox&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;wibox&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Theme handling library&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">beautiful&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;beautiful&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Notification library&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">naughty&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;naughty&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">menubar&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;menubar&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">hotkeys_popup&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;awful.hotkeys_popup&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Enable hotkeys help widget for VIM and other apps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- when client with a matching name is opened:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;awful.hotkeys_popup.keys&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Load Debian menu entries&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">debian&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;debian.menu&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">has_fdo&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">freedesktop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pcall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">require&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;freedesktop&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 跟随启动&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="nf">run_once&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cmd_arr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">for&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cmd&lt;/span> &lt;span class="kr">in&lt;/span> &lt;span class="n">ipairs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cmd_arr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">with_shell&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string.format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pgrep -u $USER -fx &amp;#39;%s&amp;#39; &amp;gt; /dev/null || (%s)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cmd&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cmd&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 部分 透明&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">run_once&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s2">&amp;#34;compton&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 网络&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">run_once&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s2">&amp;#34;nm-tray&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- plank 如果在左右侧面 会遮挡 bar部分区域导致无法点击，cairo-dock也有这个问题&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--run_once({ &amp;#34;plank&amp;#34; })&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- tint2 没意义，不如配置一下 awful.widget.tasklist&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--run_once({&amp;#34;tint2&amp;#34;})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 随机壁纸&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">run_once&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s2">&amp;#34;/usr/bin/feh --randomize --bg-fill ~/bg/* &amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--awful.spawn.with_shell(&amp;#34;&amp;#34;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--awful.spawn.with_shell(&amp;#34;sh .config/polybar/polybar_run.sh&amp;#34;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- {{{ Error handling&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Check if awesome encountered an error during startup and fell back to&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- another config (This code will only ever execute for the fallback config)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">awesome.startup_errors&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">naughty.notify&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">preset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">naughty.config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">presets.critical&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Oops, there were errors during startup!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awesome.startup_errors&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Handle runtime errors after startup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">in_error&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awesome.connect_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;debug::error&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Make sure we don&amp;#39;t go into an endless error loop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">in_error&lt;/span> &lt;span class="kr">then&lt;/span> &lt;span class="kr">return&lt;/span> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">in_error&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">naughty.notify&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">preset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">naughty.config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">presets.critical&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Oops, an error happened!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tostring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="p">)})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">in_error&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- }}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- {{{ Variable definitions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Themes define colours, icons, font and wallpapers. 壁纸 和主题等&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- ls /usr/share/awesome/themes default gtk sky xresources zenburn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- beautiful.init(gears.filesystem.get_themes_dir() .. &amp;#34;default/theme.lua&amp;#34;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">beautiful.init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string.format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;%s/.config/awesome/themes/my-zenburn/theme.lua&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">os.getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;HOME&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- This is used later as the default terminal and editor to run.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">terminal&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;x-terminal-emulator&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">editor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os.getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;EDITOR&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="s2">&amp;#34;editor&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">editor_cmd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">terminal&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="s2">&amp;#34; -e &amp;#34;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">editor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Default modkey.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Usually, Mod4 is the key with a logo between Control and Alt.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- If you do not like this or do not have such a key,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- I suggest you to remap Mod4 to another key using xmodmap or other tools.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- However, you can use another modifier like Mod1, but it may interact with others.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">modkey&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Mod4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 可用布局&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">layouts&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">suit.tile&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- 布局类似： 左右 口三&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">suit.floating&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">--浮动&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">suit.corner&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nw&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- 主窗 的 右侧和下部 环绕小窗&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">suit.magnifier&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- 主窗口 固定在屏幕中央 其他窗口 横向平铺到背景&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">--[[
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.tile.left, -- 左右 三口
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.spiral,-- 复杂布局 左侧大 右上 1/4 右下 N口
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.spiral.dwindle, -- 复杂布局 左侧大 右上 1/4 右下 口N
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.tile.bottom, -- 上下 口 三
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.tile.top, -- 上下 三口
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.fair, -- 左右 三二 布局
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.fair.horizontal, --上下 三二 布局
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.max,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.max.fullscreen, -- 活动窗口全屏
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.corner.ne, - 主窗 的 左侧侧和下部 环绕小窗
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.corner.sw, -- 主窗 的 右侧和顶部 环绕小窗
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.layout.suit.corner.se, - 主窗 的 左侧侧和上部 环绕小窗
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> --]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- }}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- {{{ Menu&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Create a launcher widget and a main menu&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">myawesomemenu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;查看热键&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">hotkeys_popup.show_help&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awful.screen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focused&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;查看手册&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">terminal&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="s2">&amp;#34; -e man awesome&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- { &amp;#34;随即壁纸&amp;#34;, awful.spawn.with_shell(&amp;#34;/usr/bin/feh --randomize --bg-fill ~/bg/&amp;#34;)},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;随机壁纸&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">with_shell&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/usr/bin/feh --randomize --bg-fill ~/bg/*&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;编辑配置&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">editor_cmd&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">awesome.conffile&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;重启as&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awesome.restart&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;退出桌面&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awesome.quit&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">menu_awesome&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;awesome&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">myawesomemenu&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">beautiful.awesome_icon&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">menu_terminal&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;open terminal&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">terminal&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">menu_alacritty&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;打开 alacritty&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;alacritty&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">menu_exitmenu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;exit menu(Esc)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">has_fdo&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mymainmenu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">freedesktop.menu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">before&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">menu_awesome&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">after&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">menu_terminal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">menu_alacritty&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">menu_exitmenu&lt;/span>&lt;span class="p">}})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mymainmenu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.menu&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">items&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">menu_awesome&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;Debian&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">debian.menu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Debian_menu.Debian&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">menu_terminal&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">menu_alacritty&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">menu_exitmenu&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mylauncher&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">launcher&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">image&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">beautiful.awesome_icon&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">menu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mymainmenu&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Menubar configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">menubar.utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">terminal&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">terminal&lt;/span> &lt;span class="c1">-- Set the terminal for applications that require it&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- }}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Keyboard map indicator and switcher&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mykeyboardlayout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">keyboardlayout&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- {{{ Wibar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Create a textclock widget&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--mytextclock = wibox.widget.textclock()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytextclock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">textclock&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;%H:%M&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- 只要时间 不要日期&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Create a wibox for each screen and add it&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">taglist_buttons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">view_only&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">client.focus&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client.focus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">move_to_tag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">viewtoggle&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">client.focus&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client.focus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">toggle_tag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">viewnext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t.screen&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">viewprev&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t.screen&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="nf">set_wallpaper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Wallpaper&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">beautiful.wallpaper&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">wallpaper&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">beautiful.wallpaper&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- If wallpaper is a function, call it with the screen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wallpaper&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;function&amp;#34;&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wallpaper&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wallpaper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gears.wallpaper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">maximized&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wallpaper&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Re-set wallpaper when a screen&amp;#39;s geometry changes (e.g. different resolution)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">screen.connect_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;property::geometry&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">set_wallpaper&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.screen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">connect_for_each_screen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Wallpaper&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">set_wallpaper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Each screen has its own tag table.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;4&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;5&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;6&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;7&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;8&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;9&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">layouts&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Create a promptbox for each screen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mypromptbox&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">prompt&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Create an imagebox widget which will contain an icon indicating which layout we&amp;#39;re using.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- We need one layoutbox per screen.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mylayoutbox&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">layoutbox&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mylayoutbox&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">buttons&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">inc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">inc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">inc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">inc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mylayoutbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">forced_height&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">18&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mylayoutbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">forced_width&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">18&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mylayoutbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">opacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">mylayoutbox&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">margin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s.mylayoutbox&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- 设置容器的边距&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Create a taglist widget&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mytaglist&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">taglist&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">screen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filter&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">taglist.filter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">all&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">buttons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">taglist_buttons&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">--[[
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> local tasklist_buttons = gears.table.join(
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.button({}, 1, function (c)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> -- 左键 默认是 如果是焦点那么最小化 否则切换为焦点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> --if c == client.focus then -- 如果是焦点那么最小化
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> -- c.minimized = true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> --else
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> -- c:emit_signal(&amp;#34;request::activate&amp;#34;, &amp;#34;tasklist&amp;#34;, {raise = true}) -- 否则切换为焦点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> --end
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> -- 左键修改为 就替换到对应tag 因为主要用平铺
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> c.minimized = false -- 取消最小化
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.tag.viewonly(c.first_tag) --切换到窗口所在屏幕
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> -- 取消其他窗口的 activate {{
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> local current_screen = awful.screen.focused()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> for _, cl in ipairs(current_screen.clients) do
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> if cl ~= c and not cl.minimized then
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> cl:emit_signal(&amp;#34;request::activate&amp;#34;, &amp;#34;tasklist&amp;#34;, {raise = false})
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> end
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> end
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> c:emit_signal(&amp;#34;request::activate&amp;#34;, &amp;#34;tasklist&amp;#34;, {raise = true})
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> -- 重新绘制任务栏
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> s.mytasklist:emit_signal(&amp;#34;widget::redraw_needed&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> -- 将鼠标移动到激活的窗口的中心位置
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> client.focus = c
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> c:raise()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> local geo = c:geometry()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> local x = geo.x + geo.width / 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> local y = geo.y + geo.height / 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> mouse.coords({x = x, y = y}, true)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> end),
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.button({}, 3, function() awful.menu.client_list({theme = {width = 250}}) end), -- 右键 显示所有窗口
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.button({}, 4, function () awful.client.focus.byidx(1) end), --滚轮切换窗口 焦点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.button({}, 5, function () awful.client.focus.byidx(-1) end) --滚轮切换窗口
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> )
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> -- Create a tasklist widget 任务栏 默认显示图标和文字
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> s.mytasklist = awful.widget.tasklist {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> screen = s,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> filter = awful.widget.tasklist.filter.currenttags, -- 显示当前标签页中的任务
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> filter = awful.widget.tasklist.filter.alltags, -- 显示所有标签页中的任务
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> buttons = tasklist_buttons -- 任务栏按键点击行为
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> -- ]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 定义点击任务栏的行为&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">tasklist_buttons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- 左键修改为 就切换到对应tag 因为主要用平铺&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c.minimized&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span> &lt;span class="c1">-- 取消最小化&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">viewonly&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c.first_tag&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">--切换到窗口所在屏幕&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">emit_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;request::activate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tasklist&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">raise&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">})&lt;/span> &lt;span class="c1">-- 激活窗口&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awful.menu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">client_list&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">theme&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">width&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">250&lt;/span>&lt;span class="p">}})&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">-- 右键 显示所有窗口&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focus.byidx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">--滚轮切换窗口 焦点&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focus.byidx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">--滚轮切换窗口&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 任务栏的配置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mytasklist&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tasklist&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">screen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filter&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tasklist.filter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">allscreen&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- awful.widget.tasklist.filter.focused&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">buttons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tasklist_buttons&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- 按钮行为控制函数 只是鼠标的控制就好&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">style&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shape_border_width&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shape_border_color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;#555&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gears.shape&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">rounded_bar&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">spacing&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">--间隔&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">flex.horizontal&lt;/span> &lt;span class="c1">-- 横向排列&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget_template&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="c1">-- 任务栏图标&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;icon_role&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">imagebox&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">margins&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">--用边距控制图标大小&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">margin&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="c1">-- 任务栏文字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;text_role&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">textbox&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">fixed.horizontal&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">left&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">right&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">margin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--forced_width = 10000,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;background_role&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">background&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Create the wibox 状态栏&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- s.mywibox = awful.wibar({ position = &amp;#34;bottom&amp;#34;, screen = s })&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mywibox&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.wibar&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">position&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;top&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">screen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mywibox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">opacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.8&lt;/span> &lt;span class="c1">--状态栏整体透明度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_pot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">watch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;echo 🔸&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3600000&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- 一个分隔符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_space&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">watch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;echo -e &amp;#34;　&amp;#34; &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3600000&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">--中文全角空格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_weather&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">watch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;bash -c &amp;#34;python3 ~/.config/topbar_plus/weather-plugin.py&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1800&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">--天气预报&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_weather&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">buttons&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;xdg-open http://www.weather.com.cn/weather15d/101120802.shtml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">-- 左键&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;xdg-open http://www.weather.com.cn/weather15d/101120802.shtml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="c1">--右键&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_lunarDate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">watch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;bash -c &amp;#34;$HOME/.env/lunarDate_plugin/bin/python ~/.config/topbar_plus/lunarDate-plugin.py&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- 农历阳历周&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_lunarDate&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">buttons&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;xdg-open https://wannianli.tianqi.com/&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">-- 左键&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;xdg-open https://wannianli.tianqi.com/&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="c1">--右键&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">vicious&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;vicious&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 监测 CPU 使用情况&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cpuwidget&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">textbox&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vicious.cache&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vicious.widgets&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cpu&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vicious.register&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cpuwidget&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">vicious.widgets&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cpu&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;CPU: &amp;lt;span foreground=&amp;#39;#20B2AA&amp;#39;&amp;gt; $1% &amp;lt;/span&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">memwidget&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">textbox&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vicious.cache&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vicious.widgets&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">mem&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vicious.register&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">memwidget&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">vicious.widgets&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">mem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;内存: &amp;lt;span foreground=&amp;#39;#20B2AA&amp;#39;&amp;gt; $1% &amp;lt;/span&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 托盘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mysystray&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">systray&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--mysystray.forced_width =50&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--mysystray.forced_height=10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 直接用 forced_width 会导致图标多的时候图标太小，forced_height貌似无效，所以下面把托盘放到容器里面，控制容器边距变相修改托盘大小&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">mysystray_container&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">margin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mysystray&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- 设置容器的边距 [, left[, right[, top[, bottom[, color[, draw_empty]]]]]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 音量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volume_widget&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">textbox&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--awful.widget.watch(&amp;#39;bash -c &amp;#34;LANG=en_US.utf8 &amp;amp;&amp;amp; pactl list sinks | grep \&amp;#39;front-left\&amp;#39; &amp;amp;&amp;amp; pactl list sinks | grep \&amp;#39;Mute:\&amp;#39; &amp;#34;&amp;#39;, 1, function(widget, stdout)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">watch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;bash -c &amp;#34;LANG=en_US.utf8 &amp;amp;&amp;amp; pactl list sinks | grep -E &lt;/span>&lt;span class="se">\&amp;#39;&lt;/span>&lt;span class="s1">front-left|Mute:&lt;/span>&lt;span class="se">\&amp;#39;&lt;/span>&lt;span class="s1">&amp;#34; &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">widget&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stdout&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 从输出中获取音量信息&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">volume&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">string.match&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;(%d+)%%&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 从输出中获取静音状态信息&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">mute&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">string.match&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Mute: (%a+)&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 更新文本框内容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39; 🔈&amp;lt;span foreground=&amp;#34;#20B2AA&amp;#34;&amp;gt;&amp;#39;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">volume&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;/span&amp;gt; %&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">mute&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;yes&amp;#34;&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39; 🔇&amp;lt;span foreground=&amp;#34;#ce2605&amp;#34;&amp;gt;&amp;#39;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">volume&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;/span&amp;gt; %&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">set_markup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- widget:set_text(text)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">volume_widget&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 音量 按键操作&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volume_widget&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">buttons&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pactl set-sink-mute @DEFAULT_SINK@ toggle&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">-- 左键静音&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pavucontrol&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">--右键打开 面板&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pactl set-sink-volume @DEFAULT_SINK@ +1%&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">-- 向上滚动增大音量 另外绑定键盘的 音量键在 音量控制 那边&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pactl set-sink-volume @DEFAULT_SINK@ -1%&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="c1">-- 向下滚动减小音量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 滚轮事件处理&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volume_widget&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">connect_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;button::scroll_up&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pactl set-sink-volume @DEFAULT_SINK@ +5%&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volume_widget&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">connect_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;button::scroll_down&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pactl set-sink-volume @DEFAULT_SINK@ -5%&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Add widgets to the wibox 状态栏布局 排序 全局标题栏&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mywibox&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">setup&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">align.horizontal&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="c1">-- Left widgets&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">fixed.horizontal&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mylauncher&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mytaglist&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mypromptbox&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s.mytasklist&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- Middle widget&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="c1">-- Right widgets&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">fixed.horizontal&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cpuwidget&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">memwidget&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_pot&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_weather&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_pot&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_lunarDate&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_space&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytextclock&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_pot&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volume_widget&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_space&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--mykeyboardlayout,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- wibox.widget.systray(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mysystray_container&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shell_space&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mylayoutbox&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- }}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- {{{ Mouse bindings 这里是屏幕空白地方的鼠标操作&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">root.buttons&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">mymainmenu&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">toggle&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">--右键打开主菜单&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">viewnext&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">-- 滚轮切换标签 不是窗口&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">viewprev&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="c1">-- 滚轮切换标签&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- }}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- {{{ Key bindings 按键绑定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">globalkeys&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hotkeys_popup.show_help&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;show help 显示快捷键&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;awesome&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;Left&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">viewprev&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">--切换标签&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;view previous 切换标签&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tag&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;Right&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">viewnext&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;view next 切换标签&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tag&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span> &lt;span class="c1">--切换标签&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;Escape&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">history.restore&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">--返回标签&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;go back 返回标签&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tag&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;j&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- 切换 窗口焦点&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focus.byidx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;focus next by index 切换 窗口焦点&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;k&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- 切换 窗口焦点&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focus.byidx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;focus previous by index 切换 窗口焦点&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">mymainmenu&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- 显示主菜单&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;show main menu 显示主菜单&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;awesome&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Layout manipulation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;j&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">swap.byidx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- 移动窗口位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;swap with next client by index&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;k&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">swap.byidx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- 移动窗口位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;swap with previous client by index&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;j&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.screen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focus_relative&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;focus the next screen&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;screen&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;k&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.screen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focus_relative&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;focus the previous screen&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;screen&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;u&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">urgent.jumpto&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;jump to urgent client&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;Tab&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focus.history&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">previous&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">client.focus&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client.focus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">raise&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;go back&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Standard program&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--awful.key({ modkey, }, &amp;#34;Return&amp;#34;, function () awful.spawn(terminal) end,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;Return&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;alacritty&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;open a terminal 打开终端&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;launcher&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;r&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awesome.restart&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">--保留awesome的 win ctrl+r 配置出错的时候 只能用这个快捷键重载&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;reload awesome 重载aw&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;awesome&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awesome.restart&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">--和i3一致方便过度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;reload awesome 重载aw&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;awesome&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--awful.key({ modkey, &amp;#34;Shift&amp;#34; }, &amp;#34;q&amp;#34;, awesome.quit,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--- {description = &amp;#34;推出 awesome &amp;#34;, group = &amp;#34;awesome&amp;#34;}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 推出 awesome awful.prompt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- awful.key({ modkey, &amp;#34;Shift&amp;#34; }, &amp;#34;e&amp;#34;, function()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- awful.prompt.run {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- prompt = &amp;#34;确定要退出 Awesome WM 吗？ (y/n): &amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- textbox = awful.screen.focused().mypromptbox.widget,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- exe_callback = function(answer)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- if answer == &amp;#34;y&amp;#34; then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- awesome.quit()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- end, { description = &amp;#34;退出 Awesome WM&amp;#34;, group = &amp;#34;awesome&amp;#34; })&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 推出 awesome ，用naughty.notify&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--awful.key({ modkey, &amp;#34;Shift&amp;#34; }, &amp;#34;e&amp;#34;, function()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- naughty.notify({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- text = &amp;#34;　　　确定要退出 Awesome WM 吗？　　\n　　如果要推出输入y,不推出按下esc正常操作　　&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- timeout = 3,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- position = &amp;#34;bottom_right&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- bg = &amp;#34;#FF0000&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- fg = &amp;#34;#FFFFFF&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- font = &amp;#34;sans 25&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- })&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- awful.prompt.run {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- prompt = &amp;#34;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- textbox = awful.screen.focused().mypromptbox.widget,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- exe_callback = function(answer)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- if answer == &amp;#34;y&amp;#34; then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- awesome.quit()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--end, { description = &amp;#34;确定退出 Awesome WM&amp;#34;, group = &amp;#34;awesome&amp;#34; }),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 和i3 一致 推出 awesome&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 依赖 zenity&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;e&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;zenity --question --text &amp;#39;确定要退出 Awesome WM 吗？&amp;#39; --no-wrap --title &amp;#39;亲爱哒&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">easy_async_with_shell&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">exit_code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">exit_code&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awesome.quit&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;确定退出 Awesome WM&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;awesome&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;l&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">incmwfact&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">0.05&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;increase master width factor + 主宽度&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;layout&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">incmwfact&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.05&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;decrease master width factor - 主宽度&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;layout&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">incnmaster&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;增加主区域的窗口数量&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;layout&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;l&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">incnmaster&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;减少主区域的窗口数量&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;layout&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">incncol&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;增加列的数量&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;layout&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;l&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">incncol&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;减少列的数量&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;layout&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;space&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">inc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;select next 布局模式&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;layout&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;space&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">inc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;select previous 布局模式&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;layout&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">restore&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Focus restored client&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">emit_signal&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;request::activate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;key.unminimize&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">raise&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;restore minimized 恢复最小化的&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Prompt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;Return&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;rofi -show drun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;rofi -show drun 启动器&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;launcher&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;Tab&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;rofi -show window&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;rofi -show window 窗口切换&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;launcher&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;p&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/usr/bin/flameshot gui &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;flameshot gui 截图 &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;launcher&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;e&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pcmanfm &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;pcmanfm 文件管理器 &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;launcher&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 运行命令 这个用rofi替代掉&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- awful.key({ modkey ,&amp;#34;Shift&amp;#34;,&amp;#34;Alt&amp;#34;}, &amp;#34;r&amp;#34;, function () awful.screen.focused().mypromptbox:run() end,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- {description = &amp;#34;run prompt此功能关闭&amp;#34;, group = &amp;#34;launcher&amp;#34;}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 运行lua代码 不需要&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- awful.key({ modkey ,&amp;#34;Shift&amp;#34; ,&amp;#34;Alt&amp;#34; }, &amp;#34;x&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- function ()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- awful.prompt.run {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- prompt = &amp;#34;Run Lua code: &amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- textbox = awful.screen.focused().mypromptbox.widget,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- exe_callback = awful.util.eval,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- history_path = awful.util.get_cache_dir() .. &amp;#34;/history_eval&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- end,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- {description = &amp;#34;lua execute prompt此功能关闭&amp;#34;, group = &amp;#34;awesome&amp;#34;}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 音量控制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="s2">&amp;#34;XF86AudioRaiseVolume&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">os.execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pactl set-sink-volume @DEFAULT_SINK@ +5%&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;volume up&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hotkeys&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="s2">&amp;#34;XF86AudioLowerVolume&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">os.execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pactl set-sink-volume @DEFAULT_SINK@ -5%&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;volume down&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hotkeys&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="s2">&amp;#34;XF86AudioMute&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">os.execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pactl set-sink-mute @DEFAULT_SINK@ toggle&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;toggle mute&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hotkeys&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Menubar 应用程序菜单 不需要，rifo 以及右键菜单以及右上角 mylauncher = awful.widget.launcher 都可以搞定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--awful.key({ modkey ,&amp;#34;Shift&amp;#34;}, &amp;#34;p&amp;#34;, function() menubar.show() end,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- {description = &amp;#34;show the menubar 应用程序菜单&amp;#34;, group = &amp;#34;launcher&amp;#34;})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">clientkeys&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c.fullscreen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">c.fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">raise&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;toggle fullscreen全屏&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">--[[
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.key({ modkey, &amp;#34;Shift&amp;#34; }, &amp;#34;c&amp;#34;, function (c) c:kill() end,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> awful.key({modkey, &amp;#34;Shift&amp;#34;}, &amp;#34;q&amp;#34;, function (c) c:kill() end,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> {description = &amp;#34;close关闭窗口&amp;#34;, group = &amp;#34;client&amp;#34;}),
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> local window_title = focused_client.name or &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> -- 构建 Zenity 命令
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> local command = string.format(&amp;#34;zenity --question --text &amp;#39;%s&amp;#39; --no-wrap --title &amp;#39;亲爱哒&amp;#39;&amp;#34;, window_title)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> --]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;q&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">window_title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">c.name&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1">--窗口标题&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">string.format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;zenity --question --text &amp;#39;确定要关闭 %s 吗？&amp;#39; --no-wrap --title &amp;#39;亲爱哒&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">window_title&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.spawn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">easy_async_with_shell&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">exit_code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">exit_code&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">kill&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;确定退出 窗口&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;awesome&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;space&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">floating.toggle&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;toggle floating浮动&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;Return&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">swap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">getmaster&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;move to master主区域&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;o&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">move_to_screen&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;move to screen&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;t&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">c.ontop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">c.ontop&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;toggle keep on top&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 隐藏和显示标题栏&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">awful.titlebar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">toggle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Show/Hide Titlebars隐藏和显示标题栏&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 最小化&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- The client currently has the input focus, so it cannot be&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- minimized, since minimized clients can&amp;#39;t have the focus.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c.minimized&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;minimize 最小化&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 最大化&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c.maximized&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">c.maximized&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">raise&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;(un)maximize 最大化&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 垂直最大化&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c.maximized_vertical&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">c.maximized_vertical&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">raise&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;(un)maximize vertically 垂直最大化&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 水平最大化&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c.maximized_horizontal&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">c.maximized_horizontal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">raise&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;(un)maximize horizontally 水平最大化&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;client&amp;#34;&lt;/span>&lt;span class="p">}))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Bind all key numbers to tags.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Be careful: we use keycodes to make it work on any keyboard layout.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- This should map on the top row of your keyboard, usually 1 to 9.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="kr">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">globalkeys&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">globalkeys&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- View tag only 切换桌面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">screen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.screen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focused&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">screen.tags&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tag&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">view_only&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;view tag #&amp;#34;&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tag&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Toggle tag display.合并两个桌面的窗口&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">screen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.screen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focused&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">screen.tags&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.tag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">viewtoggle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;toggle tag #&amp;#34;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tag&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Move client to tag. 移动窗口到桌面x&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">client.focus&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">client.focus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">screen.tags&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client.focus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">move_to_tag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;move focused client to tag #&amp;#34;&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tag&amp;#34;&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Toggle tag on focused client. 窗口同时显示到桌面x&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.key&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Control&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Shift&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">function&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">client.focus&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">client.focus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">screen.tags&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client.focus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">toggle_tag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;toggle focused client on tag #&amp;#34;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tag&amp;#34;&lt;/span>&lt;span class="p">}))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 窗口的点击事件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">clientbuttons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">emit_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;request::activate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;mouse_click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">raise&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">})&lt;/span> &lt;span class="c1">--鼠标左键单击：激活该窗口（如果没有激活），并将其置于顶层。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">emit_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;request::activate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;mouse_click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">raise&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">})&lt;/span> &lt;span class="c1">-- Mod 键 + 鼠标左键单击：激活该窗口，并开始移动窗口位置。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.mouse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">client.move&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">modkey&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">emit_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;request::activate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;mouse_click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">raise&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">})&lt;/span> &lt;span class="c1">-- Mod 键 + 鼠标右键单击：激活该窗口，并开始改变窗口大小。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.mouse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">client.resize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Set keys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">root.keys&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">globalkeys&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- }}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- {{{ Rules&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Rules to apply to new clients (through the &amp;#34;manage&amp;#34; signal).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 规则&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.rules&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">rules&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- All clients will match this rule.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">rule&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">properties&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">border_width&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">beautiful.border_width&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">border_color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">beautiful.border_normal&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">focus&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">focus.filter&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">raise&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">keys&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">clientkeys&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">buttons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">clientbuttons&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- 窗口点击事件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">screen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.screen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">preferred&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">placement&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.placement&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">no_overlap&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">awful.placement&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">no_offscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Floating clients. 内置的自动浮动规则&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">rule_any&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">instance&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;DTA&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- Firefox addon DownThemAll.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;copyq&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- Includes session name in class.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;pinentry&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">class&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Arandr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Blueman-manager&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Gpick&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Kruler&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;MessageWin&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- kalarm.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Sxiv&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Tor Browser&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- Needs a fixed window size to avoid fingerprinting by screen size.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Wpa_gui&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;veromix&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;xtightvncviewer&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Note that the name property shown in xprop might be set slightly after creation of the client&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- and the name shown there might not match defined rules here.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Event Tester&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- xev.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">role&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;AlarmWindow&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- Thunderbird&amp;#39;s calendar.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ConfigManager&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- Thunderbird&amp;#39;s about:config.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;pop-up&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">-- e.g. Google Chrome&amp;#39;s (detached) Developer Tools.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}},&lt;/span> &lt;span class="n">properties&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">floating&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">}},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Add titlebars to normal clients and dialogs 标题栏&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">rule_any&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;normal&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;dialog&amp;#34;&lt;/span>&lt;span class="p">}},&lt;/span> &lt;span class="n">properties&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">titlebars_enabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">}},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- xprop|grep CLASS 自动隐藏标题栏的软件 无标题栏&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">rule_any&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">class&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Sublime_text&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Geany&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Plank&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;QQ&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;TelegramDesktop&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Chromium&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Google-chrome&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Firefox-esr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Microsoft-edge&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;org.remmina.Remmina&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;another-redis-desktop-manager&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Thonny&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Thunar&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="n">properties&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">titlebars_enabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">}},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- xprop|grep CLASS 强制默认平铺&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">rule_any&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">class&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Microsoft-edge&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="n">properties&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">floating&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">}},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- xprop|grep CLASS 自动浮动的软件 但不控制窗口位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">rule_any&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">class&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Plank&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tint2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Tint2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="n">properties&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">floating&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">}},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- xprop|grep CLASS 自动浮动的软件 并居中显示&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="n">rule_any&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;图片查看器&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">class&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Pavucontrol&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;fcitx5-config-qt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Tint2conf&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;vlc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="n">properties&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">floating&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">placement&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.placement&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">centered&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- }}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- {{{ Signals&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Signal function to execute when a new client appears.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client.connect_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;manage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Set the windows at the slave,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- i.e. put it at the end of others instead of setting it master.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- if not awesome.startup then awful.client.setslave(c) end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">awesome.startup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ow">and&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">c.size_hints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_position&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ow">and&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">c.size_hints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">program_position&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Prevent clients from being unreachable after screen count changes.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.placement&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">no_offscreen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Add a titlebar if titlebars_enabled is set to true in the rules.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client.connect_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;request::titlebars&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- buttons for the titlebar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">buttons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gears.table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">emit_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;request::activate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;titlebar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">raise&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.mouse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">client.move&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.button&lt;/span>&lt;span class="p">({},&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">emit_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;request::aRctivate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;titlebar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">raise&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.mouse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">client.resize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 窗口的标题栏配置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.titlebar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">setup&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="c1">-- Left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.titlebar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">widget.iconwidget&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">buttons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">buttons&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">fixed.horizontal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="c1">-- Middle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="c1">-- Title&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">align&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;center&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">awful.titlebar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">widget.titlewidget&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">buttons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">buttons&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">flex.horizontal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="c1">-- Right 标题右侧&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.titlebar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">widget.floatingbutton&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.titlebar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">widget.maximizedbutton&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.titlebar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">widget.stickybutton&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.titlebar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">widget.ontopbutton&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awful.titlebar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">widget.closebutton&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">fixed.horizontal&lt;/span>&lt;span class="p">()},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wibox.layout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">align.horizontal&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- 默认隐藏标题栏 此代码会覆盖掉前面rule中的配置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">--awful.titlebar.hide(c)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Enable sloppy focus, so that focus follows mouse.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client.connect_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;mouse::enter&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">emit_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;request::activate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;mouse_enter&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">raise&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client.connect_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;focus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">c.border_color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">beautiful.border_focus&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client.connect_signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;unfocus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">c.border_color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">beautiful.border_normal&lt;/span> &lt;span class="kr">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- }}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>debian下x11和pipewire网络播放声音的方法</title><link>https://dev.leiyanhui.com/linux/pipwire-remote/</link><pubDate>Tue, 17 Oct 2023 08:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/pipwire-remote/</guid><description>&lt;h2 id="场景">场景
&lt;/h2>&lt;p>远程机器（可以是 docker lxc） ，没有装图形桌面，但是装了edge浏览器。
本地使用x11 转发打开edge后 播放视频没声音。
远程机器 是 lxc debian12 本地是 pve 装了桌面&lt;/p>
&lt;h2 id="简明">简明
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">apt install pipwaire pulseaudio-module-zeroconf # 两边都装
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt install avahi-daemon # 本地安装
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="本地">本地
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">status&lt;/span> &lt;span class="n">avahi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="c1"># 确定一下状态 默认安装后会自动启动，如果没有手动启动一下这个服务&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pactl&lt;/span> &lt;span class="nb">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">module&lt;/span> &lt;span class="n">module&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">native&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">protocol&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="n">listen&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">10.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.6&lt;/span> &lt;span class="c1"># listen=10.1.1.6 可以不输入，但是不能有错误&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pactl&lt;/span> &lt;span class="nb">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">module&lt;/span> &lt;span class="n">module&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">zeroconf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">publish&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>avahi-daemon 需要使用5353 端口，注意防火墙&lt;/p>
&lt;h3 id="远程">远程
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pactl&lt;/span> &lt;span class="nb">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">module&lt;/span> &lt;span class="n">module&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">zeroconf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discover&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后远程打开一个有声音输入的软件 就可以了
例如远程机器上 cat ~/start.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">GTK_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">fcitx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">QT_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">fcitx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">XMODIFIERS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">im&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">fcitx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">SDL_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">fcitx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">GLFW_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ibus&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">killall&lt;/span> &lt;span class="n">fcitx5&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fcitx5&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pactl&lt;/span> &lt;span class="nb">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">module&lt;/span> &lt;span class="n">module&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">zeroconf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discover&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#firefox &amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">microsoft&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stable&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>本地&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pactl&lt;/span> &lt;span class="nb">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">module&lt;/span> &lt;span class="n">module&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">native&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">protocol&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pactl&lt;/span> &lt;span class="nb">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">module&lt;/span> &lt;span class="n">module&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">zeroconf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">publish&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ssh&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">X&lt;/span> &lt;span class="n">yanhui&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">10.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.231&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#-----&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sh&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="走的的坑">走的的坑
&lt;/h2>&lt;p>&lt;code>pactl load-module module-native-protocol-tcp &lt;/code> 这个命令在第二次运行的时候 会提示 未知错误，实际上有效的。&lt;/p>
&lt;h2 id="其他一些工具">其他一些工具
&lt;/h2>&lt;p>paprefs 貌似不适合 pipewire
qpwgraph 可用，可以用两边检查连接状态 ，或者局域网内有多个avahi的情况下手动调整。正常运行的时候 远程段的qpwgraph 是可以看到本地的音频设备。
正常是播放声音的app 连接到 目标机器的 内置数字立体声的play_back 就好了。&lt;/p></description></item><item><title>linux启动appimage 快捷方式和脚本</title><link>https://dev.leiyanhui.com/linux/startup_appimage/</link><pubDate>Sun, 08 Oct 2023 00:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/startup_appimage/</guid><description>&lt;p>/usr/share/applications/qq.desktop&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Desktop Entry]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type=Application
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Encoding=UTF-8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name=qq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Comment=qq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Exec=/opt/startup_appimage.sh /opt/qq.AppImage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Icon=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Terminal=false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Categories=System;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>/opt/startup_appimage.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>id -u&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -eq &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;当前用户是root&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$1&lt;/span> --no-sandbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;当前用户不是root&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>debian12 pipewire i3安装配置</title><link>https://dev.leiyanhui.com/linux/pipewire-debian/</link><pubDate>Sat, 22 Jul 2023 00:00:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/pipewire-debian/</guid><description>&lt;h1 id="pulseaudio">pulseaudio
&lt;/h1>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo apt install pulseaudio
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install pavucontrol
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不用创建服务，可以直接跟随i3启动和重载,i3配置&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">exec_always --no-startup-id killall pulseaudio &amp;amp;&amp;amp; pulseaudio
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="pipewire">pipewire
&lt;/h1>&lt;p>可以不用安装PulseAudio,直接使用安装 pipewire即可&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo apt install pipewire
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>包含：&lt;br>
libpipewire-0.3-0 libpipewire-0.3-common libpipewire-0.3-modules libspa-0.2-modules ibwireplumber-0.4-0 pipewire-bin pipewire-pulse rtkit wireplumber
可选：&lt;br>
libspa-0.2-bluetooth pulseaudio-utils wireplumber-doc&lt;/p>
&lt;p>可能需要：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">apt install wireplumber pipewire-media-session-
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>另外装一个面板工具&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo apt install pavucontrol
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>普通用户启动&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">systemctl --user --now enable wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="有问题的时候重启">有问题的时候重启
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo systemctl restart pipewire
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --user --now enable wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="对比">对比
&lt;/h1>&lt;p>日常使用没啥感觉，在部分硬件上 pulseaudio下存在颤音，pipewire同样存在。 并且pipewire在设备长时间待机的时候 会无声音，需要重启服务&lt;/p></description></item><item><title>rofi启动appimages 并显示在rofi的列表中</title><link>https://dev.leiyanhui.com/linux/appimages/</link><pubDate>Fri, 21 Jul 2023 00:00:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/appimages/</guid><description>&lt;p>以qq为例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget linuxqq官网地址
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x linuxqq_*.AppImage
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我这里选择直接安装到当前用户下
先确保 &lt;code>.bashrc&lt;/code> 下有 &lt;code>export PATH=&amp;quot;$PATH:/home/用户名/.local/bin&amp;quot;&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mv linuxqq_*.AppImage ~/.local/bin/qq
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样就可以在rofi 或者shell之里面 直接输入qq启动 了，但是在rofi列表里面看不到。
创建一个快捷方式就好了，还是放到当前用户下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd ~/.local/share/applications
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat qq.desktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==============================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Desktop Entry]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name=qqnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Comment=linuxqq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Exec=qq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#Icon=qq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Terminal=false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type=Application
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Categories=Developer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>简单 不需要多说&lt;/p></description></item><item><title>debian12 安装微信</title><link>https://dev.leiyanhui.com/linux/debian-wechat/</link><pubDate>Tue, 11 Jul 2023 06:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/debian-wechat/</guid><description>&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/linux/wecha-new-debian" target="_blank" rel="noopener"
>2024-03-7 已经有原生版微信，虽然目前之支持uos和麒麟等系统，实际上其他系统也可以用。&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/arch/new-qq2022/" target="_blank" rel="noopener"
>2022年12月07日 腾讯已经发布新版linux qq &lt;/a>&lt;/p>
&lt;p>因为各个版本的 都存在封号情况，目前只有deepin wine版本 尚可&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget -O- https://deepin-wine.i-m.dev/setup.sh | sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install com.qq.weixin.deepin com.qq.im.deepin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## 如无法发送照片
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install libjpeg62:i386
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启动命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/opt/apps/com.qq.weixin.deepin/files/run.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在i3 下有黑框影响观感，但是不影响使用。&lt;/p></description></item><item><title> usb 设备网络共享方案（免费） win=> linux</title><link>https://dev.leiyanhui.com/linux/usbip/</link><pubDate>Fri, 07 Jul 2023 11:02:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/usbip/</guid><description>&lt;p>如果设备不多，可以接受只一个设备 的话，可以使用 virtualhere 这个的免费版本。但是免费版之能连接一个设备，收费版本价格不低。&lt;/p>
&lt;p>如果是双linux的话，可以用usbip直接处理。&lt;/p>
&lt;p>我设备在win电脑上，linux电脑来连接。
所以采取 virtualbox 运行一个 alpine,然后共享usb设备出来的方案。&lt;/p>
&lt;p>virtualbox 添加usb设备进去 alpine安装 配置&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tools&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">usbip&lt;/span> &lt;span class="c1"># 注意要打开 community源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">modprobe&lt;/span> &lt;span class="n">usbip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span> &lt;span class="n">usbip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">host&lt;/span> &lt;span class="n">vhci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hcd&lt;/span> &lt;span class="c1"># 内核要支持， 不能加载话 需要安装完整的alpine 不要用 virt的内核&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 写入到 /etc/modules 每次开机自启&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查询模块加载情况&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lsmod&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="n">usbip&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看usb设备&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">usbip&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">usbipd&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">D&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="c1"># 启动服务，&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 把usb设备添加到usbip中去：可以添加多个&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2-1就是上面的编号 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">usbip&lt;/span> &lt;span class="n">bind&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">b&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 解除绑定usb设备&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">usbip&lt;/span> &lt;span class="n">unbind&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">b&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>客户端 linux-debian # 如果是在容器中的，记得从宿主机器加载 并映射过来&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo modprobe usbip-core usbip-host vhci-hcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lsmod | grep usbip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install usbip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lsusb # sudo apt install usbutils
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo usbip list -r 10.1.1.215 # 查看
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo usbip attach -r 10.1.1.215 -b 2-1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>安卓运行lxc/docker方法（非虚拟机）</title><link>https://dev.leiyanhui.com/linux/android-linux/</link><pubDate>Sat, 17 Jun 2023 22:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/android-linux/</guid><description>&lt;p>注意，必须root.没有root权限 无解。&lt;br>
你需要会用&lt;/p>
&lt;h3 id="准备工作">准备工作
&lt;/h3>&lt;p>1 MT管理器 &lt;a class="link" href="https://www.coolapk.com/apk/bin.mt.plus" target="_blank" rel="noopener"
>https://www.coolapk.com/apk/bin.mt.plus&lt;/a>
2 下载 秋秋 静态编译的 lxc文件，
原下载地址 (下载后不用改名)
点这里
备用地址 (下载以后把后缀名.zip 删掉)
点这里&lt;/p>
&lt;h3 id="解压lxc">解压lxc
&lt;/h3>&lt;p>用mt管理器把静态编译的lxc压缩包 lxcnew.tar.gz文件复制到/data/lxc&lt;br>
打开mt管理器，点左上角 三条杠，
终端模拟器，如果是第一次使用，
等它初始化一下。
开始执行命令 解压 ,记得手机访问本网页，你可以直接复制代码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /data/lxc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar -xvf lxcnew.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="检测cgroup版本">检测cgroup版本
&lt;/h3>&lt;p>分别执行以下命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount &lt;span class="p">|&lt;/span> grep cgroup2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount &lt;span class="p">|&lt;/span> grep cgroup1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果第 1 条命令有输出信息，你就是cgroup2&lt;br>
如果第 2 条命令有输出信息，你就是cgroup1&lt;br>
如果你是cgroup2版本，执行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;lxc.init.cmd = /sbin/init systemd.unified_cgroup_hierarchy&amp;#34;&lt;/span> &amp;gt;&amp;gt;&lt;span class="p">;&lt;/span> /data/lxc/share/lxc/config/common.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果你是cgroup2版本，执行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;lxc.init.cmd = /sbin/init systemd.unified_cgroup_hierarchy=0&amp;#34;&lt;/span> &amp;gt;&amp;gt; /data/lxc/share/lxc/config/common.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="配置一下lxc的网络">配置一下lxc的网络
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s1">&amp;#39;s/lxc\.net\.0\.type = empty/lxc.net.0.type = none/g&amp;#39;&lt;/span> /data/lxc/etc/lxc/default.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="挂载cgroup">挂载cgroup
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -t tmpfs -o &lt;span class="nv">mode&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">755&lt;/span> tmpfs /sys/fs/cgroup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /sys/fs/cgroup/devices
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -t cgroup -o devices cgroup /sys/fs/cgroup/devices
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /sys/fs/cgroup/systemd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -t cgroup cgroup -o none,name&lt;span class="o">=&lt;/span>systemd /sys/fs/cgroup/systemd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上面5行命令 每次启动都要执行，可以更换termux 处理，写入到.bashrc 的末尾&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bashrc" data-lang="bashrc">&lt;span class="line">&lt;span class="cl">sudo mount -t tmpfs -o &lt;span class="nv">mode&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">755&lt;/span> tmpfs /sys/fs/cgroup &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo mkdir -p /sys/fs/cgroup/devices &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo mount -t cgroup -o devices cgroup /sys/fs/cgroup/devices &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo mkdir -p /sys/fs/cgroup/systemd &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo mount -t cgroup cgroup -o none,name&lt;span class="o">=&lt;/span>systemd /sys/fs/cgroup/systemd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo lxc-setup-cgroups
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>记得 termux 要安装 tsu &lt;code>pkg install tsu&lt;/code> 否则没有sudo命令，同时要给termux root权限，不然sudo 也执行不了&lt;/p>
&lt;h3 id="准备创建lxc">准备创建lxc
&lt;/h3>&lt;p>后面的命令都在termux里面执行，当然MT的终端 适当修改一下也可以&lt;/p>
&lt;h4 id="下载镜像">下载镜像
&lt;/h4>&lt;p>我这里选择debian,不喜欢ubuntu&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lxc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lxc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">create&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="n">download&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">debian&lt;/span> &lt;span class="o">--&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="n">mirrors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tuna&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tsinghua&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">edu&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lxc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">images&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>依次输入 debian bookworm arm64&lt;/p>
&lt;h4 id="启动">启动
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo /data/lxc/bin/lxc-start -n debian
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果提示 state &amp;ldquo;ABORTING&amp;rdquo; instead of &amp;ldquo;RUNNING&amp;rdquo;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo /data/lxc/bin/lxc-start -n debian --logfile=tmp.log --logpriority=DEBUG
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cat tmp.log 检查错误
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo /data/lxc/bin/lxc-attach -n debian /bin/passwd root
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>本文转自： &lt;a class="link" href="https://purpleleaf.top/posts/%E5%AE%89%E5%8D%93lxc%E7%8B%AC%E7%AB%8B%E8%BF%90%E8%A1%8C%E6%95%99%E7%A8%8Bv3/" target="_blank" rel="noopener"
>https://purpleleaf.top/posts/%E5%AE%89%E5%8D%93lxc%E7%8B%AC%E7%AB%8B%E8%BF%90%E8%A1%8C%E6%95%99%E7%A8%8Bv3/&lt;/a>&lt;/p>
&lt;p>日期 2023年07月21日
时间 01:44&lt;/p>
&lt;p>by redblue(弗朗西斯科)&lt;/p>
&lt;p>【 一 】 前期准备
( 1 )
mt管理器，进入手机目录/data，
新建 lxc 文件夹&lt;/p>
&lt;p>下载 秋秋 静态编译的 lxc文件，
原下载地址 (下载后不用改名)
点这里
备用地址 (下载以后把后缀名.zip 删掉)
点这里&lt;/p>
&lt;p>然后把 lxcnew.tar.gz文件复制到/data/lxc,
打开mt管理器，点左上角 三条杠，
终端模拟器，如果是第一次使用，
等它初始化一下。
开始执行命令&lt;/p>
&lt;p>$ su
$ cd /data/lxc
$ tar -xvf lxcnew.tar.gz
( 2 ) ——检测cgroup版本
分别执行以下命令&lt;/p>
&lt;p>$ mount | grep cgroup2
$ mount | grep cgroup1
如果第 1 条命令有输出信息，你就是cgroup2
如果第 2 条命令有输出信息，你就是cgroup1&lt;/p>
&lt;p>如果你是cgroup1版本，执行 (执行1次即可，以后每次启动 无需再次执行)&lt;/p>
&lt;p>$ echo &amp;ldquo;lxc.init.cmd = /sbin/init systemd.unified_cgroup_hierarchy&amp;rdquo; &amp;raquo;; /data/lxc/share/lxc/config/common.conf
如果你是cgroup2版本 执行 (执行1次即可，以后每次启动 无需再次执行)&lt;/p>
&lt;p>$ echo &amp;ldquo;lxc.init.cmd = /sbin/init systemd.unified_cgroup_hierarchy=0&amp;rdquo; &amp;raquo; /data/lxc/share/lxc/config/common.conf
( 3 )
网络设置
( cgroup1 和cgroup2都要执行 )
( 共1条命令，只需要执行 1 次 )&lt;/p>
&lt;p>$ sed -i &amp;rsquo;s/lxc.net.0.type = empty/lxc.net.0.type = none/g&amp;rsquo; /data/lxc/etc/lxc/default.conf
( 4 )
挂载cgroup ( 可能需要每次都执行,如果在termux里可以在每个命令前加sudo，放.bashrc里每次自动执行)&lt;/p>
&lt;p>mount -t tmpfs -o mode=755 tmpfs /sys/fs/cgroup &amp;amp;&amp;amp; mkdir -p /sys/fs/cgroup/devices &amp;amp;&amp;amp; mount -t cgroup -o devices cgroup /sys/fs/cgroup/devices &amp;amp;&amp;amp; mkdir -p /sys/fs/cgroup/systemd &amp;amp;&amp;amp; mount -t cgroup cgroup -o none,name=systemd /sys/fs/cgroup/systemd
或者
建议直接去termux里，执行&lt;/p>
&lt;p>$ pkg install root-repo
$ pkg install tsu lxc
$ sudo mount -t tmpfs -o mode=755 tmpfs /sys/fs/cgroup &amp;amp;&amp;amp; sudo mkdir -p /sys/fs/cgroup/devices &amp;amp;&amp;amp; sudo mount -t cgroup -o devices cgroup /sys/fs/cgroup/devices &amp;amp;&amp;amp; sudo mkdir -p /sys/fs/cgroup/systemd &amp;amp;&amp;amp; sudo mount -t cgroup cgroup -o none,name=systemd /sys/fs/cgroup/systemd
$ sudo lxc-setup-cgroups&lt;/p>
&lt;p>【 二 】 创建和启动 lxc容器
接下来，你可以选择自己喜欢的app进行操作，
例如
mt管理器
juicessh
termius
termux
本地adb shell
远程adb&lt;/p>
&lt;p>( 1 ) 配置环境
以mt管理器 为例，
打开mt管理器，点左上角 三条杠，
终端模拟器，如果是第一次使用，
等它初始化一下。
开始执行命令&lt;/p>
&lt;p>$ su
$ cd /data/lxc
$ source env.sh
( 2 ) 创建和运行 lxc容器
创建lxc容器&lt;/p>
&lt;p>$ lxc-create -t download -n ubuntu &amp;ndash; &amp;ndash;server mirrors.tuna.tsinghua.edu.cn/lxc-images
以 ubuntu 23.04 为例,依次输入
ubuntu
lunar
arm64&lt;/p>
&lt;p>等它下载解压完&lt;/p>
&lt;p>启动容器&lt;/p>
&lt;p>lxc-start -n ubuntu
改密码&lt;/p>
&lt;p>lxc-attach -n ubuntu /bin/passwd root
然后输入密码
再次输入密码
密码改好了!&lt;/p>
&lt;p>停止容器&lt;/p>
&lt;p>lxc-stop -n ubuntu
启动并进入容器&lt;/p>
&lt;p>lxc-start -n ubuntu -F
输入用户名 root
输入密码 你改的密码&lt;/p>
&lt;p>执行&lt;/p>
&lt;p>apt update
发现网络有问题，失败&lt;/p>
&lt;p>解决网络问题 ( 共3条命令 )&lt;/p>
&lt;p>$ groupadd -g 3003 aid_inet
$ usermod -g aid_inet _apt
$ echo &amp;ldquo;nameserver 8.8.8.8&amp;rdquo; &amp;gt; /etc/resolv.conf
执行&lt;/p>
&lt;p>apt update
发现成功了&lt;/p>
&lt;p>【 三 】 ubuntu后续使用
( 1 ) 更换为清华大学源 可选
备份原镜像源&lt;/p>
&lt;p>$ cp /etc/apt/sources.list /etc/apt/sources.list.bak
ubuntu 23.04更换清华大学源
共4条命令&lt;/p>
&lt;p>$ echo &amp;ldquo;deb &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/" target="_blank" rel="noopener"
>https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/&lt;/a> lunar main restricted universe multiverse&amp;rdquo; &amp;gt; /etc/apt/sources.list&lt;/p>
&lt;p>$ echo &amp;ldquo;deb &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/" target="_blank" rel="noopener"
>https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/&lt;/a> lunar-updates main restricted universe multiverse&amp;rdquo; &amp;raquo; /etc/apt/sources.list&lt;/p>
&lt;p>$ echo &amp;ldquo;deb &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/" target="_blank" rel="noopener"
>https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/&lt;/a> lunar-backports main restricted universe multiverse&amp;rdquo; &amp;raquo; /etc/apt/sources.list&lt;/p>
&lt;p>$ echo &amp;ldquo;deb &lt;a class="link" href="http://ports.ubuntu.com/ubuntu-ports/" target="_blank" rel="noopener"
>http://ports.ubuntu.com/ubuntu-ports/&lt;/a> lunar-security main restricted universe multiverse&amp;rdquo; &amp;raquo; /etc/apt/sources.list
( 2 ) ssh连接&lt;/p>
&lt;p>$ apt install openssh-server
修改ssh配置文件，允许root用户的ssh连接，&lt;/p>
&lt;p>$ apt install nano
$ nano /etc/ssh/sshd_config
找到这行
#PermitRootLogin prohibit-password
在它的下面添加1行
PermitRootLogin yes&lt;/p>
&lt;p>保存并退出
Ctrl + o
Enter
Ctrl + x&lt;/p>
&lt;p>重启ssh服务&lt;/p>
&lt;p>$ systemctl restart ssh
( 3 ) 改时区 描述: 日期时间不对，需要改下时区&lt;/p>
&lt;p>执行&lt;/p>
&lt;p>date
发现日期时间不对&lt;/p>
&lt;p>执行以下命令 ( 即设定时区 让它自动校正时间 )&lt;/p>
&lt;p>sudo ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
执行&lt;/p>
&lt;p>date
发现时间自动校正了&lt;/p>
&lt;p>【 四 】 lxc里的docker 运行
参考 安卓Lxc教程V9 的以下章节 :
【 六 】lxc里运行docker&lt;/p>
&lt;p>【 五 】 常用命令
这里记录一些常用命令&lt;/p>
&lt;p>( 1 )
lxc容器后台运行&lt;/p>
&lt;p>lxc-start -n ubuntu -d
然后就可以ssh连接了&lt;/p>
&lt;p>( 2 )
停止lxc容器&lt;/p>
&lt;p>lxc-stop -n ubuntu
也可以这样停止容器&lt;/p>
&lt;p>$ su
$ /data/lxc/bin/lxc-stop -n ubuntu
termux里 可以这样停止容器&lt;/p>
&lt;p>sudo /data/lxc/bin/lxc-stop -n ubuntu&lt;/p></description></item><item><title>linux-live环境定制 可U盘硬盘或者iso启动</title><link>https://dev.leiyanhui.com/linux/linux-live-diy/</link><pubDate>Sat, 03 Jun 2023 00:01:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/linux-live-diy/</guid><description>&lt;h1 id="目标">目标
&lt;/h1>&lt;p>创建一个可以在fat/exfat/ext4 以及U盘 光盘可以启动的自定义linux系统环境&lt;/p>
&lt;h1 id="基于">基于
&lt;/h1>&lt;p>debian11 ：http://mirror.lzu.edu.cn/debian-cd/11.7.0/amd64/iso-dvd/debian-11.7.0-amd64-DVD-1.iso&lt;br>
其他linux系统差不多
脚本工具：http://linux-live.org/&lt;/p>
&lt;h1 id="原理">原理
&lt;/h1>&lt;p>基于自定义的initramfs挂载和启动到squashfs只读镜像启动默认的linux环境。&lt;br>
在只读媒体上，修改点映射到内存。&lt;br>
在linux原生磁盘分区上，修改内容映射到指定目录。 在fat exfat等磁盘分区上修改内容映射到data文件（限制12-16G）&lt;/p>
&lt;h1 id="基本步骤实现">基本步骤实现
&lt;/h1>&lt;p>新机器安装一个干净的linux 并必须安装以下工具包&lt;code>squashfs-tools genisoimage 或者 mkisofs zip&lt;/code>
另外 需要 &lt;code> xz rsync sshd sudo wget unzip nano&lt;/code> 等&lt;/p>
&lt;h1 id="打包">打包
&lt;/h1>&lt;h2 id="打包工具">打包工具
&lt;/h2>&lt;p>用 linux-live.org 的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkdir /mklive &amp;amp; cd /mklive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://github.com/Tomas-M/linux-live/archive/refs/heads/master.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unzip master.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd linux-live-master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="配置">配置
&lt;/h2>&lt;p>需要配置config 文件里面分别是&lt;/p>
&lt;ul>
&lt;li>LIVEKITNAME 目录 通常不需要修改&lt;/li>
&lt;li>VMLINUZ 内核位置，非chroot情况可以不修改，chroot过来的花需要修改为实际的内核路径，并且需要修改引导的cfg&lt;/li>
&lt;li>KERNEL 内核版本 通常不需要修改&lt;/li>
&lt;li>MKMOD 包含的目录，通常不需要修改，如果你有其他目录 单独加上&lt;/li>
&lt;li>NETWORK 是否支持网络引导 通常不需要修改&lt;/li>
&lt;li>LIVEKITDATA 最后打包的目标目录，其中包含 syslinux引导以及squashfs镜像和一些其他文件&lt;/li>
&lt;li>BEXT squashfs文件后缀名称 通常不需要修改&lt;/li>
&lt;li>LMK 内核ko模块目录，通常不需要修改&lt;/li>
&lt;/ul>
&lt;h2 id="创建">创建
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">./build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>会在LIVEKITDATA指定的目录创建sb文件 initramfs 和其他需要的文件 也会吧内核复制一份过去
如果是alpine的话需要注意base的处理，另外&lt;code>initramfs/initramfs_create&lt;/code> 也需要执行权限。&lt;/p>
&lt;h2 id="打包-1">打包
&lt;/h2>&lt;p>最终的文件 是 在 /tmp/linux-data-XXX 目录 直接执行&lt;code>/tmp/gen_linux_zip.sh&lt;/code> 就可以了打包成zip 了，解压到U盘 或者硬盘 linux 或许win 执行里面的 bootinst.sh/bat 即可在对应设备上创建好引导。默认是用的syslinux引导的。
如果打包iso的话，默认不支持EFI启动。&lt;/p>
&lt;h2 id="启动背景">启动背景
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/tmp/linux-data-XXX/linux/boot/bootlogo.png
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>网上找了一个 &lt;a class="link" href="https://raw.githubusercontent.com/xenlism/Grub-themes/main/xenlism-grub-1080p-Debian/Xenlism-Debian/background.png" target="_blank" rel="noopener"
>https://raw.githubusercontent.com/xenlism/Grub-themes/main/xenlism-grub-1080p-Debian/Xenlism-Debian/background.png&lt;/a>
不合适&lt;/p>
&lt;h4 id="修改readme">修改readme
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cat &amp;gt; ./readme.txt &amp;lt;&amp;lt; \EOF
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Default (SeaBIOS) use syslinux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OVMF (UEFI) use grub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">EOF
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打包iso&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/tmp/gen_linux_iso.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="测试">测试
&lt;/h1>&lt;p>pve 宿主机复制出来&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rsync yanhui@10.1.1.239:/tmp/linux-x86_64.iso /exfat/iso/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="efi启动">efi启动
&lt;/h1>&lt;h2 id="硬盘efigrub启动">硬盘efi+grub启动
&lt;/h2>&lt;p>自带一硬盘启动的sh和bat自动处理脚本，并支持 bios+syslinux 和 efi+syslinux
如果要修改为grub参考
&lt;a class="link" href="https://github.com/beatfan/UEFI_grub2/" target="_blank" rel="noopener"
>https://github.com/beatfan/UEFI_grub2/&lt;/a>&lt;/p>
&lt;h2 id="iso-efi-启动支持">iso efi 启动支持
&lt;/h2>&lt;p>自创建的iso支持bios启动，如果efi参考
&lt;a class="link" href="https://github.com/beatfan/USB_Boot_With_Grub_Grub2_ISOLINUX" target="_blank" rel="noopener"
>https://github.com/beatfan/USB_Boot_With_Grub_Grub2_ISOLINUX&lt;/a>&lt;/p></description></item><item><title>polybar天气预报插件</title><link>https://dev.leiyanhui.com/linux/polybar-weather-plugin/</link><pubDate>Sat, 13 May 2023 12:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/polybar-weather-plugin/</guid><description>&lt;p>自己手写一个，你可以直接抄作业。&lt;/p>
&lt;h2 id="获取天气预报api">获取天气预报api
&lt;/h2>&lt;p>首先需要自己注册一个api,我这里用的 openweathermap,注册账号后打开 &lt;a class="link" href="https://home.openweathermap.org/api_keys" target="_blank" rel="noopener"
>https://home.openweathermap.org/api_keys&lt;/a>,查看自己的 api_key&lt;br>
openweathermap 的api_key有延迟，界面显示可用的有时候好像需要半个多小时才可以使用，否则接口一直返回401错误&lt;br>
openweathermap 虽然有诸多不方便，比如英文，速度慢，但是天气预报很准确 而且接口稳定，并分钟级实时预报，天气云图，国内很多免费的接口不稳定。&lt;/p>
&lt;h2 id="获取城市id">获取城市id
&lt;/h2>&lt;p>openweathermap 支持城市名称搜索查询，我这里为了简化直接用城市id了。 打开openweathermap网站 输入你所在地城市的拼音/英文名搜索，查看天气，地址栏的例如 &lt;a class="link" href="https://openweathermap.org/city/1793724" target="_blank" rel="noopener"
>https://openweathermap.org/city/1793724&lt;/a> 1793724就是城市id了&lt;/p>
&lt;h2 id="手动测试api">手动测试api
&lt;/h2>&lt;p>访问地址： &lt;a class="link" href="https://api.openweathermap.org/data/2.5/weather?id=%7b" target="_blank" rel="noopener"
>https://api.openweathermap.org/data/2.5/weather?id={&lt;/a>城市ID}&amp;amp;appid={api_key}&amp;amp;units=Metric&amp;amp;lang=zh_cn
后面units是单位公制或者英制之类的 lang 就是语言了&lt;br>
正常应该可以返回json数据，如果是401错误，那么就是api_key错误，或者没生效，或者请求太频繁（1分钟上限60次）&lt;/p>
&lt;h2 id="本地准备">本地准备
&lt;/h2>&lt;p>因为是polybar用，那么铁定是linux下日用，也肯定有pyhone了。我抄的别人的（原作者忘记）直接用了pyhone。&lt;br>
需要先引用requests, 没有安装。提前安装一下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -S python-pip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pip3 install requests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Rns python-pip #是否卸载掉看你自己
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建脚本">创建脚本
&lt;/h2>&lt;p>把下面脚本的apt_key和城市id（1793724）换成你自己的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 需要requests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># sudo pacman -S python-pip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># pip3 install requests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat &amp;gt; ~/.config/polybar/weather-plugin.py&amp;lt;&amp;lt; \EOF
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#!/bin/python
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># -*- coding: utf-8 -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import requests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REQ = requests.get(&amp;#34;https://api.openweathermap.org/data/2.5/weather?id=1793724&amp;amp;appid=XXXXXXXXXXXX&amp;amp;units=Metric&amp;amp;lang=zh_cn&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">try:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # HTTP CODE = OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if REQ.status_code == 200:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON_ID = REQ.json()[&amp;#34;weather&amp;#34;][0][&amp;#34;icon&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Set the weather icon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if ICON_ID == &amp;#34;01d&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;☀&amp;#34; # 晴天 Clear Sky
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;01n&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;⭐&amp;#34; # Night, Clear Sky
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;02d&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;🌤&amp;#34; # Day,少云 Few Clouds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;02n&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;🌤&amp;#34; # Night, 少云 Few Clouds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;03d&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;🌤&amp;#34; # Day, 少云 Scattered Clouds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;03n&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;🌤&amp;#34; # Night, 少云 Scattered Clouds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;04d&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;多云&amp;#34; # Day, 多云 Broken Clouds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;04n&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;多云&amp;#34; # Night, 多云 Broken Clouds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;09d&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;🌧&amp;#34; # Day, 小雨 Shower Rain
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;09n&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;🌧&amp;#34; # Night,小雨 Shower Rain
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;10d&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;🌧&amp;#34; # Day, Rain
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;10n&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;🌧&amp;#34; # Night, Rain
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;11d&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;⛈&amp;#34; # Day, 雷雨 Thunderstorm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;11n&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;⛈&amp;#34; # Night, 雷雨 Thunderstorm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;13d&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;❄&amp;#34; # Day,雪 Snow
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;13n&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;❄&amp;#34; # Night, 雪 Snow
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;50d&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;🌫&amp;#34; # Day, 雾 Mist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elif ICON_ID == &amp;#34;50n&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;🌫&amp;#34; # Night,雾 Mist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> else:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ICON = &amp;#34;天气 &amp;#34; # 其他 Just Weather Icon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CURRENT = REQ.json()[&amp;#34;weather&amp;#34;][0][&amp;#34;description&amp;#34;].capitalize()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> TEMP = int(float(REQ.json()[&amp;#34;main&amp;#34;][&amp;#34;temp&amp;#34;]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> WIND = int(float(REQ.json()[&amp;#34;wind&amp;#34;][&amp;#34;speed&amp;#34;]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 输出格式
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> print(&amp;#34;{} {}, {} °C 🌬 {}m/s&amp;#34;.format(ICON, CURRENT, TEMP, WIND))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> else:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> print(&amp;#34;Error: BAD HTTP STATUS CODE &amp;#34; + str(REQ.status_code))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">except (ValueError, IOError):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> print(&amp;#34;Error: Unable print the data&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">EOF
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>测试一下，正常可以在终端输出天气&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">python3 ~/.config/polybar/weather-plugin.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="polybar引用">polybar引用
&lt;/h2>&lt;p>编辑配置文件 ~/.config/polybar/config.ini 添加一行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">; ===天气预报 需要单独的pyhtone插件===
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[module/weather]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type = custom/script
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exec = python3 ~/.config/polybar/weather-plugin.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">interval = 960
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tail = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">click-left= exec firefox https://openweathermap.org/city/1793724
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="完毕">完毕
&lt;/h2></description></item><item><title>btrfs 文件系统 简要说明</title><link>https://dev.leiyanhui.com/linux/btrfs/</link><pubDate>Wed, 21 Dec 2022 06:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/btrfs/</guid><description>&lt;h2 id="格式化">格式化
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkfs.btrfs /dev/nvme0n1p4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkfs.btrfs -f /dev/nvme0n1p4 #强制
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lsblk
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="压缩">压缩
&lt;/h2>&lt;h3 id="挂载时候全盘启用压缩">挂载时候全盘启用压缩
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mount -o compress=lzo /dev/nvme0n1p4 /mnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o compress=zstd /dev/sdx /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>自动挂载fstab&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/dev/nvme0n1p4 / btrfs defaults,compress-force=lzo,subvol=snapshot 0 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>lzo&lt;/code>是压缩算法，目前btrfs支持lzo zlib ZSTD三种算法,旧版只支持lzo zlib ，默认压缩方式是 zlib 压缩等级是3&lt;/p>
&lt;h3 id="单文件或者路径压缩">单文件或者路径压缩
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">chattr +c file
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs property set file compression zstd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="关于写复制">关于写复制
&lt;/h2>&lt;p>改动频繁的文件，务必 使用chattr命令给文件或目录添加C属性&lt;/p>
&lt;p>windows下可以全速读写btrfs分区：&lt;a class="link" href="https://dev.leiyanhui.com/win/winbtrfs/" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/win/winbtrfs/&lt;/a>&lt;/p>
&lt;p>参考： &lt;a class="link" href="https://btrfs.readthedocs.io/en/latest/btrfs-man5.html#how-to-enable-compression" target="_blank" rel="noopener"
>https://btrfs.readthedocs.io/en/latest/btrfs-man5.html#how-to-enable-compression&lt;/a>&lt;/p>
&lt;h2 id="后记">后记
&lt;/h2>&lt;h3 id="winpe-支持">winpe 支持
&lt;/h3>&lt;p>测试winpe 为 firpe v1.8.1&lt;/p>
&lt;h3 id="其他">其他
&lt;/h3>&lt;p>真的不建议再用exfat了，
macos的话，也可以用虚拟机映射分区的方法访问，然后sftp或者其他方式再挂载出来。
另外爱折腾我们最爱的ventoy 尚不支持 btrfs&lt;/p></description></item><item><title>再见宝塔，关于宝塔的17个替代品</title><link>https://dev.leiyanhui.com/linux/other-bt/</link><pubDate>Wed, 07 Dec 2022 09:58:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/other-bt/</guid><description>&lt;p>宝塔经历过几次严重漏洞，加上最近小bug不断，甚至有的bug反反复复，如同月经一样，每个月出现一次（宝塔周更）&lt;/p>
&lt;p>还有之前直播间的事故，强制绑定手机号等等&amp;hellip;.官网bug论坛的机器人一样的回复：我没有bug，你更新一下&lt;/p>
&lt;p>反正就是死不承认，然后一直到反馈的人多了，甚至过去数周才去修复，然后过几周可能又复现&lt;/p>
&lt;p>这个曾经优秀的国产软件，也可能是因为用户群太多，也可能是内部管理真的是混乱不堪。频繁爆出bug 还有 安全问题。&lt;/p>
&lt;p>去年开始，新机器上就避免再使用宝塔。&lt;/p>
&lt;p>这次宝塔的操作 也非常惊人，宝塔官方自己的demo都被黑掉，依旧不承认有漏洞，然后在论坛开始疯狂删反馈贴！&lt;/p>
&lt;p>搞笑的是，宝塔自己的demo 迟迟都没有处理掉，第二天早上直接挂403了。 真的是。。。&lt;/p>
&lt;p>首先说，还是推荐尽量手搓的方式来管理生产服务器，真的不建议再用宝塔这种鬼东西。&lt;/p>
&lt;p>如果实在是需要图形界面 或者一键环境 可以看一下相关替代产品&lt;/p>
&lt;h3 id="替代品">替代品
&lt;/h3>&lt;p>1、https://cockpit-project.org/&lt;/p>
&lt;p>Cockpit 是由 Red Hat 开发的使得管理服务器变得轻松简单的自由开源软件。它非常适合于进行简单的系统管理任务和新手系统管理员。&lt;/p>
&lt;p>2、https://github.com/midoks/mdserver-web
UI跟宝塔差不多，但个人试用了一下发现占用资源挺高的。&lt;/p>
&lt;p>3、https://hestiacp.com/
太简单，功能不足&lt;/p>
&lt;p>4、https://oneinstack.com/
类lnmp，无web UI&lt;/p>
&lt;p>5、https://cyberpanel.net/
太简单，功能不足&lt;/p>
&lt;p>6、https://lnmp.org/
无web UI&lt;/p>
&lt;p>7、https://github.com/DevHaoZi/Panel
耗子面板，仅支持redhat系列&lt;/p>
&lt;p>8、http://amh.sh/
amh面板&lt;/p>
&lt;p>9、https://www.appnode.com/&lt;/p>
&lt;p>10、https://vestacp.com/&lt;/p>
&lt;p>11、https://fastpanel.direct/&lt;/p>
&lt;p>12、https://www.urlos.com/&lt;/p>
&lt;p>13、https://www.hws.com/&lt;/p>
&lt;p>14、https://www.digitalocean.com/community/tools/nginx?global.app.lang=zhCN&lt;/p>
&lt;p>15、 Nginx Proxy Manager
&lt;a class="link" href="https://nginxproxymanager.com/" target="_blank" rel="noopener"
>https://nginxproxymanager.com/&lt;/a> 纯nginx反代 和 le证书管理工具&lt;/p>
&lt;p>16、 纯证书管理
&lt;a class="link" href="https://github.com/acmesh-official/acme.sh" target="_blank" rel="noopener"
>https://github.com/acmesh-official/acme.sh&lt;/a>&lt;/p>
&lt;p>17、超过25年的老古董Webmin/Virtualmin&lt;/p></description></item><item><title>unraid docker最简单的搭建代理方法</title><link>https://dev.leiyanhui.com/linux/docker-proxy/</link><pubDate>Sat, 29 Oct 2022 04:37:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/docker-proxy/</guid><description>&lt;p>网上教程多数是基于clash的，颇为繁琐 并且还需要另外一个 yacd配合使用&lt;/p>
&lt;p>直接使用这个方法更简单一些&lt;/p>
&lt;p>v2rayA是V2Ray的一个Web客户端，前端使用Vue.js构建，后端使用Golang构建。&lt;/p>
&lt;p>clash也基于go的，功能更强大一些。&lt;/p>
&lt;p>但是 我只是需要github 还有google 偶尔看看视频。。。v2a真的 足够足够用了而且简单集成度高&lt;/p>
&lt;p>主要是解决unraid 商店打不开的问题，先运行一个docker&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run -d --restart=always --privileged \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --network=host \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --name v2raya \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v /etc/resolv.conf:/etc/resolv.conf \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v /mnt/user/appdata/v2raya:/etc/v2raya \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v /mnt/user/appdata/v2raya/modules:/lib/modules \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mzz2017/v2raya
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以简化一下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run -d --restart=always --privileged \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --network=host \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --name v2raya \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v /etc/resolv.conf:/etc/resolv.conf \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mzz2017/v2raya
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>http://你的ip:2017 打开配置页面，&lt;/p>
&lt;p>win和macos下的docker好像不支持 host模式，自己做端口映射哦。 我是linux。不存在这个问题&lt;/p>
&lt;p>依次：&lt;/p>
&lt;p>导入订阅
点设置 里面 更新一下 GFWList
透明代理 GFWList&lt;/p>
&lt;p>左上角 启动&lt;/p>
&lt;p>你也可以开启端口转发 这样局域网内其他机器 都可以使用他做代理了。&lt;/p>
&lt;p>还有订阅是可以自动更新的，设置里面都有&lt;/p>
&lt;p>unraid 还需要在面板里面 添加一下这个容器的自动启动&lt;/p>
&lt;p>再处理一下一下商店的单独代理&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd /boot/config/plugins/community.applications/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tee proxy.cfg &amp;lt;&amp;lt;-&amp;#39;EOF&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">port=20172
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tunnel=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">proxy=http://10.0.0.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">EOF
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>你可能还需要处理一下 /boot/config/go 以便开机就能走代理&lt;/p>
&lt;pre>&lt;code>http_proxy=http://10.0.0.8:20172 https_proxy=http://10.0.0.8:20172 /usr/local/sbin/emhttp &amp;amp;
echo &amp;quot;export http_proxy=&amp;quot;http://10.0.0.8:20172&amp;quot;&amp;quot; &amp;gt;&amp;gt; /root/.bash_profile
echo &amp;quot;export https_proxy=&amp;quot;http://10.0.0.8:20172&amp;quot;&amp;quot; &amp;gt;&amp;gt; /root/.bash_profile
&lt;/code>&lt;/pre>
&lt;p>可以再增加几行，更新github的hosts，以后 sh /github.sh 就可可以更新了&lt;/p>
&lt;pre>&lt;code>echo &amp;quot;cd /etc &amp;amp;&amp;amp; cp hosts hosts-bak &amp;amp;&amp;amp; rm -rf hosts&amp;quot; &amp;gt; /github.sh
echo &amp;quot;wget -c https://gitlab.com/ineo6/hosts/-/raw/master/next-hosts&amp;quot; &amp;gt;&amp;gt; /github.sh
echo &amp;quot;mv next-hosts hosts&amp;quot;&amp;gt;&amp;gt;/root/github.sh
&lt;/code>&lt;/pre>
&lt;p>火狐的话设置
http 和 https
http://10.0.0.8 20172
SOCKS
http://10.0.0.8 20170&lt;/p>
&lt;p>默认端口：&lt;/p>
&lt;p>2017: v2rayA后端端口&lt;/p>
&lt;p>20170: SOCKS协议&lt;/p>
&lt;p>20171: HTTP协议&lt;/p>
&lt;p>20172: 带分流规则的HTTP协议&lt;/p>
&lt;p>其他端口：&lt;/p>
&lt;p>32345: tproxy，透明代理所需&lt;/p>
&lt;p>32346: 插件协议端口，如trojan、ssr和pingtunnel&lt;/p>
&lt;p>20171 和 20172 这个两个端口 自己选择了，如果你要隐私向全部走代理 那就20171 如果要速度 只gfw的网站走代理，那就20172&lt;/p></description></item><item><title>pve安装到硬盘的一个虚拟文件然后物理机启动的几个注意点</title><link>https://dev.leiyanhui.com/linux/pve-vdisk/</link><pubDate>Tue, 25 Oct 2022 00:00:00 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/pve-vdisk/</guid><description>&lt;p>硬盘安装了ventoy，ventoy 使用了两个分区，一个是ventoy分区 大小几百M-几G 一个是 ventoyefi分区32M，后面的分区是保留分区。&lt;/p>
&lt;p>先用ventoy 启动硬盘保留分区的一个 win11.vhd 或者其他系统都可。&lt;/p>
&lt;p>安装 virtualbox 创建一个虚拟机debian11，挂pve7.2.iso 不创建硬盘&lt;/p>
&lt;p>系统设置里面 打开 efi，创建一个虚拟硬盘 固定大小的。virtualbox现在升级到6.1-7 按钮位置发生了变化注意一一点。
网络选择桥接&lt;/p>
&lt;p>这里注意三个点:&lt;/p>
&lt;ul>
&lt;li>必须打开efi 这是 ventoy 启动的要求&lt;/li>
&lt;li>虚拟硬盘需要固定大小&lt;/li>
&lt;li>虚拟硬盘尺寸不能太小，因为pve除了自己占用的3-4G空间之外，还有node需要保留一些空间。我粗略测试 12G不可以，20G可以。懒得继续测试，直接用20G的vhd固定大小安装&lt;/li>
&lt;li>要在virtualbox这个虚拟机设置里面打开虚拟化嵌套的，不然装不上&lt;/li>
&lt;/ul>
&lt;p>安装完成后，虚拟机挂载 plugin_vtoyboot 的iso &lt;a class="link" href="https://github.com/ventoy/vtoyboot/releases" target="_blank" rel="noopener"
>https://github.com/ventoy/vtoyboot/releases&lt;/a>&lt;/p>
&lt;p>在pve里面 mount上，然后cp 里面的tar.gz 到 ~ tar解压 ，cd 进去 sh vtoyboot.sh&lt;/p>
&lt;p>在这之前，最好把pve的 debian源和pve源换到国内，然后更新一下pve系统，&lt;/p>
&lt;p>反正关机之前，要 sh vtoyboot.sh一下，以后系统升级后也执行一次。&lt;/p>
&lt;p>关机后，复制vhd文件出来，后缀修改 vhd.vtoy&lt;/p>
&lt;p>然后 用ventoy 自带的工具，创建一个 link到 ventoy分区，倒计时启动等，最重要的 是，要打开 VTOY_LINUX_REMOUNT &lt;a class="link" href="https://www.ventoy.net/cn/plugin_control.html" target="_blank" rel="noopener"
>参考&lt;/a>&lt;/p>
&lt;p>用用ventoy启动后，用root登录，然后修改网络配置 主要是修改ip 还有更换网卡，因为在虚拟机里面安装的虚拟网卡，在物理机没有这个网卡，&lt;/p>
&lt;blockquote>
&lt;p>注意 pve 是用vmbr0 这个网卡来转发实际网卡的数据的，不要把virtualbox的虚拟网卡和vmbr0搞混概念&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> 查看网卡设备，有线网卡一般是enXxx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip link show
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 修改配置文件，把网卡改成新的名字 我的就是 enp0s3修改为 enp1s0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano /etc/network/interfaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 重启网络应用改动
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl restart networking
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这是我修改前的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> cat /etc/network/interfaces-bak
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto lo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface lo inet loopback
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface enp0s3 inet manual
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto vmbr0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface vmbr0 inet static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> address 10.0.0.128/24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gateway 10.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bridge-ports enp0s3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bridge-stp off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bridge-fd 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改后的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> cat /etc/network/interfaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto lo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface lo inet loopback
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface enp1s0 inet manual
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto vmbr0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface vmbr0 inet static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> address 10.0.0.99/24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gateway 10.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bridge-ports enp1s0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bridge-stp off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bridge-fd 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>另外 /etc/issue 和 /etc/hosts 可以顺带修改一下，不修改也不影响&lt;/p>
&lt;p>网络正常后 处理自动挂载&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">blkid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/nvme0n1p1: LABEL_FATBOOT=&amp;#34;EFI2&amp;#34; LABEL=&amp;#34;EFI2&amp;#34; UUID=&amp;#34;729A-FE81&amp;#34; BLOCK_SIZE=&amp;#34;512&amp;#34; TYPE=&amp;#34;vfat&amp;#34; PARTUUID=&amp;#34;7adb76ae-01&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/nvme0n1p2: SEC_TYPE=&amp;#34;msdos&amp;#34; LABEL_FATBOOT=&amp;#34;VTOYEFI&amp;#34; LABEL=&amp;#34;VTOYEFI&amp;#34; UUID=&amp;#34;ADC2-5F11&amp;#34; BLOCK_SIZE=&amp;#34;512&amp;#34; TYPE=&amp;#34;vfat&amp;#34; PARTUUID=&amp;#34;7adb76ae-02&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/nvme0n1p3: LABEL=&amp;#34;Exfat&amp;#34; UUID=&amp;#34;7F17-3D02&amp;#34; BLOCK_SIZE=&amp;#34;512&amp;#34; TYPE=&amp;#34;exfat&amp;#34; PARTUUID=&amp;#34;7adb76ae-03&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/sda1: LABEL=&amp;#34;HHD&amp;#34; UUID=&amp;#34;9D09-82A9&amp;#34; BLOCK_SIZE=&amp;#34;512&amp;#34; TYPE=&amp;#34;exfat&amp;#34; PARTUUID=&amp;#34;b1fb145f-01&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mapper/ventoy2: UUID=&amp;#34;FF54-9C3A&amp;#34; BLOCK_SIZE=&amp;#34;512&amp;#34; TYPE=&amp;#34;vfat&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mapper/ventoy3: UUID=&amp;#34;AGKBNe-Bw8e-Rg2H-YLtd-XCjp-x8SO-Yo52AW&amp;#34; TYPE=&amp;#34;LVM2_member&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mapper/pve-swap: UUID=&amp;#34;b50aa774-310e-43af-87d2-4ef40e033910&amp;#34; TYPE=&amp;#34;swap&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mapper/pve-root: UUID=&amp;#34;1637dd63-6dc3-4957-934a-2ff8c41f8f10&amp;#34; BLOCK_SIZE=&amp;#34;4096&amp;#34; TYPE=&amp;#34;ext4&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mapper/ventoy: PTUUID=&amp;#34;00a161a2-67c0-4d79-815a-c7d23b5d727c&amp;#34; PTTYPE=&amp;#34;gpt&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano /etc/fstab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># &amp;lt;file system&amp;gt; &amp;lt;mount point&amp;gt; &amp;lt;type&amp;gt; &amp;lt;options&amp;gt; &amp;lt;dump&amp;gt; &amp;lt;pass&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/pve/root / ext4 errors=remount-ro 0 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=FF54-9C3A /boot/efi vfat defaults 0 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/pve/swap none swap sw 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">proc /proc proc defaults 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=729A-FE81 /mnt/efi2 vfat defaults 0 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=7F17-3D02 /mnt/exfat exfat defaults 0 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=9D09-82A9 /mnt/hdd exfat defaults 0 2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>接近永久免费的vps-woiden</title><link>https://dev.leiyanhui.com/linux/free-vps-woiden/</link><pubDate>Sun, 23 Oct 2022 00:00:00 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/free-vps-woiden/</guid><description>&lt;h1 id="接近永久免费的vps-woiden">接近永久免费的vps-woiden
&lt;/h1>&lt;p>woiden.id 和 hax.co.id都是同一家，不同的是 hax.co.id 提供的是免费的IPv6 VPS，而 woiden.id 则提供免费的 NAT VPS（自带一个 IPv6）。NAT VPS几乎与其他VP相似，但使用NAT（网络地址转换）方法，可以将单个IPv4共享给多个VP，然后为每个用户分配不同的端口。&lt;/p>
&lt;p>woiden 可以单独申请共享的ipv4 会给10个端口&lt;/p>
&lt;p>如果要作站的话可以套cf 转换80 和 443端口&lt;/p>
&lt;p>VPS的配置是1核，750M内存，4G SSD，不限制流量。&lt;/p>
&lt;p>申请后 有效期7天，7天内登录一次官网 可以顺延7天&lt;/p>
&lt;p>可以在 github actions 设置自动登录验证&lt;/p>
&lt;p>支持IPv6+不咋稳定的IPv4。&lt;/p>
&lt;p>申请方法：首先得有telegram 添加 @HaxTG_bot，获取ID后， 这个id 就是你以后登录的id 可以单独设置密码
，到网站输入后，填写TG返回的串码以绑定账号（TG会反馈网站上的操作成功信息）。&lt;/p>
&lt;p>注册成功后即可创建一个VPS了。具体看站点和TG的反馈就行。&lt;/p>
&lt;p>申请地址： woiden.id&lt;/p>
&lt;p>页面上有很多广告，注意别点错了&lt;/p>
&lt;p>申请和开通过程很简单，但是我这边遇到 开通的时候 过一会提示 please report via telegram&lt;/p></description></item><item><title>arch 配置网络</title><link>https://dev.leiyanhui.com/linux/arch-network-wifi/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-network-wifi/</guid><description>&lt;h1 id="arch-配置网络">arch 配置网络
&lt;/h1>&lt;p>笔记本的网卡损坏，使用的一个淘宝杂牌usb网卡&lt;/p>
&lt;p>iwd 一直找不到网卡 不知道为什么&lt;/p>
&lt;p>最后 还是用 networkmanage 弄好&lt;/p>
&lt;p>安装的时候 用的iphone usb共享网络，chroot到系统后 需要安装两个包&lt;/p>
&lt;p>一个是 usbmuxd 一个是 dhcpcd&lt;/p>
&lt;p>dhcpd 记得用 systemctl 启用 并启动&lt;/p>
&lt;p>只有前者 iphone会提示设备访问 但是无法共享网络过来 只有后者 不用说了。&lt;/p>
&lt;p>安卓不清楚 没研究过&lt;/p>
&lt;p>我装了图形界面 dwm&lt;/p>
&lt;p>所以也顺带安装了 networkmanager 和 network-manager-applet 提供系统托盘图标（nm-applet）&lt;/p>
&lt;p>在 ～/。xinitr添加一行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">exec nm-applet &amp;amp;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 exec dwm之前&lt;/p>
&lt;p>如果 dwm安装了系统托盘扩展的话，&lt;a class="link" href="https://dev.leiyanhui.com/linux/arch-install-dwm-pacher.html" target="_blank" rel="noopener"
>参考本文&lt;/a>，就可以在下次重启的之后 在系统托盘看到信号 并可以配置了&lt;/p>
&lt;p>官网wiki参考 ：https://wiki.archlinux.org/title/NetworkManager_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&lt;/p></description></item><item><title>arch 上安装32位支持，以便支持wine等软件</title><link>https://dev.leiyanhui.com/linux/arch-32bit-for-wine/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-32bit-for-wine/</guid><description>&lt;h1 id="arch-上安装32位支持以便支持wine等软件">arch 上安装32位支持，以便支持wine等软件
&lt;/h1>&lt;p>启用multilib 多库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo nano /etc/pacman.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[multilib]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Include = /etc/pacman.d/mirrorlist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后更新&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -Sy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果只是 需要 wine qq 微信之类的，就什么都不用做了&lt;/p></description></item><item><title>arch 系统清理和瘦身</title><link>https://dev.leiyanhui.com/linux/arch-disk-clean/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-disk-clean/</guid><description>&lt;h1 id="arch-系统清理和瘦身">arch 系统清理和瘦身
&lt;/h1>&lt;p>节省磁盘空间&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -Sc # 清理未安装软件包
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -Scc # 清理缓存中所有内容
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -Scc # 如果安装了yay 直接用yay清理就好
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看所有已经安装的包，看需求删除&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">列出所有本地软件包（-Q,query查询本地；-q省略版本号）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Qq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">列出所有显式安装（-e,explicitly显式安装；-n忽略外部包AUR）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Qqe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Qqen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">列出自动安装的包（-d,depends作为依赖项）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Qqd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">列出孤立的包（-t不再被依赖的&amp;#34;作为依赖项安装的包&amp;#34;）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Qqdt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -Qg: 列出本地已经安装的软件包组和子包
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>删掉不需要的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -Rns ttf-nerd-fonts-symbols-2048-em
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Rns neofetch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -R $(pacman -Qdtq) #删掉所有独立的包 慎用，最好先 pacman -Qqdt 一下
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#只删除包和它自己的独立需要的依赖 保留配置的话
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Rs firefox
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>限制一下日志大小&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo journalctl --vacuum-size=10M
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>archlinux 删除kde</title><link>https://dev.leiyanhui.com/linux/arch-del-kde/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-del-kde/</guid><description>&lt;h1 id="archlinux--删除kde">archlinux 删除kde
&lt;/h1>&lt;blockquote>
&lt;p>最近爱上平铺桌面，暂时用的的dwm，所以清理掉kde&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -Rsc plasma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Rsc kde-applications
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>qingli&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo paccache -r # 清理缓存,仅包含最近的三个版本
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo paccache -rk1 # 清理缓存,仅包含最近的1个版本
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Sc # 清理未安装软件包
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Scc # 清理缓存中所有内容
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -Scc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>yay -S gnome-shell-extension-kimpanel-git&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">yay&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">Rsn&lt;/span> &lt;span class="n">fcitx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sogoupinyin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">Rsn&lt;/span> &lt;span class="n">fcitx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">im&lt;/span> &lt;span class="n">fcitx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configtool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">fcitx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configtool&lt;/span> &lt;span class="n">fcitx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qt5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">yay&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">fcitx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qt4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">yay&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">fcitx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sogoupinyin&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>archlinux 安装 dwm桌面</title><link>https://dev.leiyanhui.com/linux/arch-install-dwm/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-install-dwm/</guid><description>&lt;h1 id="archlinux-安装-dwm桌面">archlinux 安装 dwm桌面
&lt;/h1>&lt;p>一直被人案例 i3w 和 dwm桌面，号称 开机20m内存额外占用&lt;/p>
&lt;h2 id="需要安装x-和-驱动">需要安装x 和 驱动
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S xorg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装yay &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-install-yay/index.html" target="_blank" rel="noopener"
>查看本文&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -S dwm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这好像就完了，会自动帮你一起安装 dwm ，当然没有定制功能，定制看后面编译安装&lt;/p>
&lt;p>修改 或者新建&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nano .xinitrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>添加一行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">exec dwm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>因为dwm 很多地方的修改都需要重新编译，所以 长时间使用 还是建议用编译安装
alt（win） +shift + q 退出 x&lt;/p>
&lt;p>然后删掉yay安装的dwm&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -Rn dwm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>单独建立 一个目录 在 ～ 下 因为以后使用可能还有一些补丁 和资源 等 需要处理&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkdir ~/dwmfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone git://git.suckless.org/dwm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd dwm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ls #有一个config.def.h 是我们可以自定义的，也可不修改
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="arch-install-dwm-hotkey.md" >dwm修改主快捷键和默认快捷键配置&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="arch-install-dwm-pacher.md" >dwm添加补丁-系统托盘&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>用yay 或者编译安装后&lt;/p>
&lt;p>输入 startx 直接就启动了&lt;/p>
&lt;p>alt+shift+回车 启动终端&lt;/p>
&lt;p>安装一个火狐浏览器 alt+p 输入firefox 会自动提示，回车 启动火狐。。。。&lt;/p>
&lt;p>还可以自动换壁纸&lt;/p>
&lt;p>feh&lt;/p>
&lt;p>哈可以半透明&lt;/p>
&lt;p>compton&lt;/p>
&lt;p>输入法 有点问题 搜狗好像不行
但是 谷歌输入法 没问题&lt;/p>
&lt;p>开机到登录桌面 全部内存汗用120M 左右。。。&lt;/p>
&lt;p>是有点香喷喷的&lt;/p></description></item><item><title>archlinux 安装GNOME 桌面环境</title><link>https://dev.leiyanhui.com/linux/arch-install-gnome/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-install-gnome/</guid><description>&lt;h1 id="archlinux-安装gnome-桌面环境">archlinux 安装GNOME 桌面环境
&lt;/h1>&lt;p>我一个笔记的arch是用的archinstall 装的kde桌面 [已经全面切换到平铺桌面]&lt;/p>
&lt;p>现在想试是gnome&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">gnome&lt;/span> &lt;span class="n">gnome&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">extra&lt;/span> &lt;span class="n">gnome&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tweak&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">tool&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或者&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">needed&lt;/span> &lt;span class="n">gnome&lt;/span> &lt;span class="n">gnome&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tweaks&lt;/span> &lt;span class="n">nautilus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sendto&lt;/span> &lt;span class="n">gnome&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nettool&lt;/span> &lt;span class="n">gnome&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">usage&lt;/span> &lt;span class="n">gnome&lt;/span> &lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">writer&lt;/span> &lt;span class="n">adwaita&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">icon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">theme&lt;/span> &lt;span class="n">chrome&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gnome&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">shell&lt;/span> &lt;span class="n">xdg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dirs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gtk&lt;/span> &lt;span class="n">fwupd&lt;/span> &lt;span class="n">arc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gtk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">theme&lt;/span> &lt;span class="n">seahosrse&lt;/span> &lt;span class="n">gdm&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>需要简单优化一下
终端闪烁的问题，在终端设置里面 配置一下 背景颜色 就ok了
先去弄扩展&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -S gnome-browser-connector
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S gnome-tweaks
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我用的火狐 还需要装一个扩展&lt;/p>
&lt;p>&lt;a class="link" href="https://addons.mozilla.org/en-US/firefox/addon/gnome-shell-integration/" target="_blank" rel="noopener"
>https://addons.mozilla.org/en-US/firefox/addon/gnome-shell-integration/&lt;/a>&lt;/p>
&lt;p>然后打开&lt;/p>
&lt;p>&lt;a class="link" href="https://extensions.gnome.org/" target="_blank" rel="noopener"
>https://extensions.gnome.org/&lt;/a>&lt;/p>
&lt;p>就可以装插件了 在插件页面 点击 on off 就可以了
appindicator 系统托盘程序哦，gnome默认关闭的 不安装的话你用微信qq之类的 没有提醒托盘图标
&lt;a class="link" href="https://extensions.gnome.org/extension/615/appindicator-support/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/615/appindicator-support/&lt;/a>&lt;/p>
&lt;p>这个tray-icons-reloaded 也可以 一样用
&lt;a class="link" href="https://extensions.gnome.org/extension/2890/tray-icons-reloaded/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/2890/tray-icons-reloaded/&lt;/a>&lt;/p>
&lt;p>dash-to-dock是可以 吧dock 固定到屏幕上，类似 Windows 任务栏 macos 的dock 一样的
&lt;a class="link" href="https://extensions.gnome.org/extension/307/dash-to-dock/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/307/dash-to-dock/&lt;/a>&lt;/p>
&lt;p>Transparent Shell 通知栏 或者 dock 搜索条 透明，可以单独设置&lt;/p>
&lt;p>&lt;a class="link" href="https://extensions.gnome.org/extension/3518/transparent-shell/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/3518/transparent-shell/&lt;/a>&lt;/p>
&lt;p>Coverflow Alt-Tab 更漂亮的 Alt-Tab 带预览 不吃性能
&lt;a class="link" href="https://extensions.gnome.org/extension/97/coverflow-alt-tab/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/97/coverflow-alt-tab/&lt;/a>&lt;/p>
&lt;p>Clipboard Indicator 剪切板管理&lt;/p>
&lt;p>&lt;a class="link" href="https://extensions.gnome.org/extension/779/clipboard-indicator/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/779/clipboard-indicator/&lt;/a>&lt;/p>
&lt;p>Desktop Icons NG (DING) 可以在桌面创建快捷方式 新版gnome 移除这个功能了，装这个扩展就ok了&lt;/p>
&lt;p>&lt;a class="link" href="https://extensions.gnome.org/extension/2087/desktop-icons-ng-ding/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/2087/desktop-icons-ng-ding/&lt;/a>&lt;/p>
&lt;p>Application Volume Mixer 可以显示每个用声音的程序&lt;/p>
&lt;p>&lt;a class="link" href="https://extensions.gnome.org/extension/3499/application-volume-mixer/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/3499/application-volume-mixer/&lt;/a>&lt;/p>
&lt;p>Extension List 插件管理程序，不用每次都去网站卸载 这个没啥用，可以在启动里面找到extension直接管理
打开后 屏幕右上角 可以管理插件
&lt;a class="link" href="https://extensions.gnome.org/extension/3088/extension-list/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/3088/extension-list/&lt;/a>&lt;/p>
&lt;p>天气预报
&lt;a class="link" href="https://extensions.gnome.org/extension/750/openweather/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/750/openweather/&lt;/a>&lt;/p>
&lt;p>其他的&lt;/p>
&lt;p>Blur my shell。它可以使得我们在切换工作区时背景不那么单调。（操作基本同上）&lt;/p>
&lt;p>ArcMenu。它默认会在桌面左上角生成一个小图标，点击其会分栏列出应用等 就是一个开始菜单。（操作基本同上）&lt;/p>
&lt;p>Vitals。它默认会在桌面右上角生成计算机的温度、风扇转速、以及cpu、内存等信息。（操作基本同上） &lt;a class="link" href="https://extensions.gnome.org/extension/1460/vitals/" target="_blank" rel="noopener"
>https://extensions.gnome.org/extension/1460/vitals/&lt;/a>&lt;/p>
&lt;p>just perfection。它可以自主显示和关闭某些UI元素。（操作基本同上）&lt;/p></description></item><item><title>archlinux 截图工具</title><link>https://dev.leiyanhui.com/linux/arch-kde-jietu/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-kde-jietu/</guid><description>&lt;h1 id="archlinux-截图工具">archlinux 截图工具
&lt;/h1>&lt;p>我是 kde桌面 测试了几个软件后 感觉 spectacle 不错&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> sudo pacman -S spectacle
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装完成 会自动在kde 快捷键设置里面 添加快捷键，也可以自己手动配置 或者 修改&lt;/p>
&lt;p>wechat-uos 这个包 截图的话 要用 scrot 但是 经过测试是没法用的。有新的wechat的uos 第三方包，可以用其他截图工具&lt;/p>
&lt;p>后经过测试 Flamesshot 兼容性不错，体积也不大&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> sudo pacman -S dlamesshot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>archlinux 双蓝牙 配置</title><link>https://dev.leiyanhui.com/linux/arch-bluez/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-bluez/</guid><description>&lt;h1 id="archlinux-双蓝牙-配置">archlinux 双蓝牙 配置
&lt;/h1>&lt;p>我这个本 板载蓝牙有问题，有时候 莫名其妙 会找不到，也连不上ek的键盘 罗技的鼠标 可以链接&lt;/p>
&lt;p>加了一个usb蓝牙使用&lt;/p>
&lt;p>所以 我不单需要安装蓝牙 还要处理 双蓝牙的切换，在archinstall安装的kde上 很简单，有自带的工具包&lt;/p>
&lt;p>现在用的 dwm 就需要自己来搞定。1是驱动和管理程序 2 是系统托盘&lt;/p>
&lt;pre>&lt;code>安装 bluez，这个软件包提供蓝牙协议栈。
安装 bluez-utils，这个软件包 bluetoothctl 实用程序。另外，也可以安装 bluez-utils-compat(yay) 来获得#弃用的 BlueZ 工具。
通用蓝牙驱动是 btusb 内核模块。检查模块是否已加载。如果还没有，先加载模块。
systemctl enable bluetooth
systemctl start bluetooth
&lt;/code>&lt;/pre>
&lt;p>先检查蓝牙设备&lt;/p>
&lt;pre>&lt;code> rfkill list
------
0: hci0: Bluetooth
Soft blocked: no
Hard blocked: no
1: hci1: Bluetooth
Soft blocked: no
Hard blocked: no
&lt;/code>&lt;/pre>
&lt;p>两个蓝牙都启用状态 r&lt;a class="link" href="https://wiki.archlinux.org/title/Network_configuration/Wireless#Rfkill_caveat" target="_blank" rel="noopener"
>fkill命令参考&lt;/a>&lt;/p>
&lt;p>为了方便期间 我先拔下usb蓝牙，禁用板载蓝牙&lt;/p>
&lt;pre>&lt;code> rfkill block 0
rfkill list
------
0: hci0: Bluetooth
Soft blocked: yes
Hard blocked: no
&lt;/code>&lt;/pre>
&lt;p>Soft blocked: yes 就是禁用了哦&lt;/p>
&lt;p>启用的话&lt;/p>
&lt;pre>&lt;code> rfkill unblock 0
&lt;/code>&lt;/pre>
&lt;p>插入usb蓝牙，对应 1&lt;/p>
&lt;pre>&lt;code>sudo pacman -S blueberry
&lt;/code>&lt;/pre>
&lt;p>先测试了一下 blueberry 60多M 可以使用，在dwm下也有系统托盘 &lt;code>blueberry-tray&lt;/code> 但是不知道怎么添加 搜索设备。。。&lt;/p>
&lt;p>再 试试 &lt;a class="link" href="https://wiki.archlinux.org/title/Blueman" target="_blank" rel="noopener"
>bluesman&lt;/a> 和 blueberry 要么太大了 要么不能用 需要一堆依赖的&lt;/p>
&lt;p>算了 直接使用 bluez自带的 bluetoothctl 吧，执行 bluetoothctl 进去交互&lt;/p>
&lt;pre>&lt;code> #bluetoothctl
$ bluetoothctl 进入蓝牙管理工具环境
[bluetooth]# power on 打开蓝牙
[bluetooth]# agent on 开启代理
[bluetooth]# scan on 扫描蓝牙设备
[bluetooth]# pair xx:xx:xx:... 配对该设备
[bluetooth]# trust xx:xx:xx:... 信任该设备
[bluetooth]# connect xx:xx:... 连接该设备
[bluetooth]# disconnect xx:xx:... 断开蓝牙
&lt;/code>&lt;/pre>
&lt;p>这里以链接我的ez键盘为例子
bluetoothctl
&amp;mdash;&amp;mdash;
Agent registered
[CHG] Controller A0:9F:10:10:99:1F Pairable: yes
[CHG] Controller 04:7F:0E:14:6A:53 Pairable: yes&lt;/p>
&lt;pre>&lt;code> scan on
#等一会儿 等显示出来设备名称
# [NEW] Device DC:2C:26:F5:19:A6 EK871 BT keyboard
# 先删除
#disconnect DC:2C:26:F5:19:A6
pair DC:2C:26:F5:19:A6
trust DC:2C:26:F5:19:A6
connect DC:2C:26:F5:19:A6
# 这样就搞定了
&lt;/code>&lt;/pre>
&lt;p>后发现 重启好哦usb蓝牙有概率连不上&lt;/p>
&lt;p>新建一个sh文件&lt;/p>
&lt;pre>&lt;code> # /bin/bash
sudo rfkill list
sudo rfkill block 1
sudo rfkill list
sudo rfkill unblock 1
sudo rfkill block 0
sudo rfkill list
sudo rfkill unblock 0
sudo rfkill
#bluetoothctl
# scan no
echo &amp;quot;重新插拔一下 再执行&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>官网wiki ： &lt;a class="link" href="https://wiki.archlinux.org/title/Bluetooth_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener"
>https://wiki.archlinux.org/title/Bluetooth_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&lt;/a>&lt;/p></description></item><item><title>archlinux 一键备份</title><link>https://dev.leiyanhui.com/linux/arch-backup/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-backup/</guid><description>&lt;h1 id="archlinux-一键备份">archlinux 一键备份
&lt;/h1>&lt;p>考虑到兼容性 用的ext4 分区，不方便用快照功能备份。驱动弄完后，就用tar备份一下系统&lt;/p>
&lt;p>tar备份和Windows的 ghost备份其实差不多，甚至更加灵活方便。&lt;/p>
&lt;p>先看 arch的根目录&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">boot&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">etc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">home&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lost&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">found&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mnt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">opt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">proc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">root&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">run&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sbin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">srv&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">tmp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">usr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>准备打包，先安装 pigz,因为支持多核压缩 也可以不用直接用gz也行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -S pigz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>要排除的目录&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="err">设备指向&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">sys&lt;/span>&lt;span class="o">/*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="err">临时目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">mnt&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="err">默认挂载&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">media&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="err">新版已经把这个目录挪到了&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">media&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="err">运行中的程序&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="err">一些程序锁定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="err">和&lt;/span>&lt;span class="n">run目录有啥区别不明&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pacman&lt;/span>&lt;span class="o">/*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pacman&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="n">pacman的缓存&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">proc&lt;/span> &lt;span class="err">内存&lt;/span>&lt;span class="n">proc&lt;/span> &lt;span class="err">文件系统，&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">lost&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">found&lt;/span> &lt;span class="err">回收站&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其他一些&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/run/media 自动挂载的盘 usb和cd等
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/boot efi分区
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/home/yanhui/.cache
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/home/yanhui/.mozilla
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/home/yanhui/.local/share/wallpapers/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>建议 切换到&lt;/p>
&lt;h4 id="打包压缩命令">打包压缩命令
&lt;/h4>&lt;p>pigz 打包，这个需要live环境有安装才可以&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">use&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">program&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">pigz&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">cvpf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">backup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tgz&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">backup&lt;/span>&lt;span class="o">.*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">sys&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">mnt&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">media&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pacman&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pacman&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">proc&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">lost&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">found&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">yanhui&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">yanhui&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">mozilla&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>单线程打包到tar.gz&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">zcvf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">backup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">backup&lt;/span>&lt;span class="o">.*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">sys&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">mnt&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">media&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pacman&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pacman&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">proc&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">lost&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">found&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">yanhui&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">exclude&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">yanhui&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">mozilla&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="恢复">恢复
&lt;/h4>&lt;p>live盘启动
需要先 fdisk -l 和 mount 命令 挂载分区
至少两个分区 efi和根分区&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">fdisk -l #查看分区
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /temp_for_backup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sdb3 /temp_for_backup # 挂载分区sdb3到 temp_for_backup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /temp_for_backup/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda1 /temp_for_backup/boot # 挂载分区efi分区到 /temp_for_backup/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf /temp_for_backup/* #可选
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar --use-compress-program=pigz -xvpf /f/sysbackup/arch-backup-20160331.tgz -C /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>archlinux没声音，检查声音，dwm系统系统托盘声音</title><link>https://dev.leiyanhui.com/linux/arch-alsa/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-alsa/</guid><description>&lt;h1 id="分别这两个音频驱动包">分别这两个音频驱动包
&lt;/h1>&lt;p>sudo pacman -S sof-firmware
sudo pacman -S alsa-ucm-conf&lt;/p>
&lt;p>先装几个包&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> sudo pacman -S alsa-utils
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo pacman -S alsa-plugins
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo pacman -S pulseaudio-alsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo pacman -S pavucontrol-qt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo pacman -S pavucontrol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo pacman -S pasystray
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启用：amixer sset Master unmute
命令行设置：alsamixer
UI设置：pavucontrol&lt;/p>
&lt;p>alsamixer&lt;/p>
&lt;p>声道下方标有 MM 表示其已经静音，而标有 00 表示已经启用。
使用 ← 和 → 键滚动到 Master 和 PCM 声道，按下 m 键解除静音。&lt;/p>
&lt;p>使用 ↑ 键增加音量，获得0dB的增益。增益值可在左上方 Item: 字段旁边看到。
注意： 若增益高于0 dB，可能会听到失真。&lt;/p>
&lt;p>是一个系统托盘小程序 可以和pavucontrol 配合&lt;/p>
&lt;p>测试声音&lt;/p>
&lt;pre>&lt;code>speaker-test -c 2
&lt;/code>&lt;/pre>
&lt;p>但是 依旧没声音&lt;/p>
&lt;p>aplay -l
aplay: device_list:275: no soundcards found&amp;hellip;
找不到声卡&lt;/p>
&lt;p>在 /etc/modprobe.d/alsa-base.conf 添加一行&lt;/p>
&lt;p>options snd-hda-intel dmic_detect=0&lt;/p>
&lt;p>重启后 可以识别hdmi声卡了。但是。。主板集成的声卡 还是不行&lt;/p>
&lt;p>我有win系统，所以先去win下看一下声卡型号 essx8336 好吧，搜了一下 暂时无解，有提供驱动包的，但是网盘已经打不开&lt;/p>
&lt;p>在 &lt;a class="link" href="https://www.alsa-project.org/wiki/Changes_v1.2.6.3_v1.2.7" target="_blank" rel="noopener"
>https://www.alsa-project.org/wiki/Changes_v1.2.6.3_v1.2.7&lt;/a> 官网 搜索到&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> ucm2: sof-essx8336: use the right mixers for speaker/headphone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ucm2: sof-essx8336: drop conditional control settings
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ucm2: sof-essx8336: Add a boot sequence
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ucm2: sof-essx8336: Fix location of HiFi.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ucm2: sof-essx8336: Fill in SectionVerb session at HiFi.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>先装上一堆&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">modprobe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">alsa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">base&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sudo&lt;/span> &lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">alsa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">firmware&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sudo&lt;/span> &lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">alsa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">utils&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sudo&lt;/span> &lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">alsa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plugins&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sudo&lt;/span> &lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">alsa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tools&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>aplay -l&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">**** List of PLAYBACK Hardware Devices ****
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">card 0: sofessx8336 [sof-essx8336], device 0: ES8336 (*) []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subdevices: 0/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subdevice #0: subdevice #0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">card 0: sofessx8336 [sof-essx8336], device 5: HDMI 1 (*) []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subdevices: 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subdevice #0: subdevice #0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">card 0: sofessx8336 [sof-essx8336], device 6: HDMI 2 (*) []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subdevices: 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subdevice #0: subdevice #0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">card 0: sofessx8336 [sof-essx8336], device 7: HDMI 3 (*) []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subdevices: 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subdevice #0: subdevice #0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参考
&lt;a class="link" href="https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener"
>https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%AE%89%E8%A3%85&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.archlinux.org/title/PulseAudio_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener"
>https://wiki.archlinux.org/title/PulseAudio_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%AE%89%E8%A3%85&lt;/a>&lt;/p></description></item><item><title>archlinux上安装微信 qq 企业微信</title><link>https://dev.leiyanhui.com/linux/arch-weixin-qq/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-weixin-qq/</guid><description>&lt;h1 id="archlinux上安装微信-qq-企业微信">archlinux上安装微信 qq 企业微信
&lt;/h1>&lt;p>十数年来，linux桌面系统 两大困扰 输入法 和 腾讯系&lt;/p>
&lt;p>输入法 目前 &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-cninputu-sogou-baidu/index.html" target="_blank" rel="noopener"
>百度 和 搜狗都已经可以安装(不支持词库同步)&lt;/a>&lt;/p>
&lt;p>剩下就是 腾讯系 如果要用完整功能，只能wine跑（但是新版 也多少有一些问题，比如 摄像头 截图等）&lt;/p>
&lt;h2 id="前言">前言
&lt;/h2>&lt;p>目前最简单可靠的 并且可以满足日常使用的方法
&lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-install-yay/" target="_blank" rel="noopener"
>首先安装 yay &lt;/a>&lt;/p>
&lt;pre>&lt;code>yay -S electronic-wechat-uos-bin
yay -S icalingua++
# yay -S linuxqq #官方QQ 其实也还好 能用就行
&lt;/code>&lt;/pre>
&lt;p>微信用 electronic 封装的 （uos也是同样的，但是uos没有托盘）&lt;/p>
&lt;p>qq 用 icalingua++ （也是electronic封装，模拟 安卓 apad ipad的客户端 ）&lt;/p>
&lt;p>截图用第三方，我用flameshot&lt;/p>
&lt;p>不推荐用 wine 1是要装一堆 32位的东西，另外就是 性能拉跨&lt;/p>
&lt;p>先感谢 deepin&lt;/p>
&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-install-yay/" target="_blank" rel="noopener"
>首先安装 yay &lt;/a>&lt;/p>
&lt;h2 id="微信">微信
&lt;/h2>&lt;p>可选的有很多&lt;/p>
&lt;p>截止目前 2022-10-18 win版本的目前是 3.7.6.44&lt;/p>
&lt;p>&lt;a class="link" href="https://aur.archlinux.org/packages/com.qq.weixin.deepin/" target="_blank" rel="noopener"
>com.qq.weixin.deepin&lt;/a> 3.2.1.154_14-2&lt;/p>
&lt;p>&lt;a class="link" href="https://aur.archlinux.org/packages/com.qq.weixin.spark" target="_blank" rel="noopener"
>com.qq.weixin.spark&lt;/a> 3.7.6.44spark0-1&lt;/p>
&lt;p>&lt;a class="link" href="https://aur.archlinux.org/packages/deepin-wine-wechat" target="_blank" rel="noopener"
>deepin-wine-wechat &lt;/a> 3.7.6.44-1&lt;/p>
&lt;p>&lt;a class="link" href="https://aur.archlinux.org/packages/wechat-uos" target="_blank" rel="noopener"
>wechat-uos&lt;/a> 这个是uos的原生版本 基于electric的 功能少，但是可能最稳定和流畅 使用 bubblewrap 替换 os-release 和 lsb-release，在没有修改其分发的二进制文件的前提下，实现模拟 UOS 专业版运行环境，&lt;/p>
&lt;p>&lt;a class="link" href="https://aur.archlinux.org/packages/electronic-wechat-uos-bin" target="_blank" rel="noopener"
>electronic-wechat-uos-bin&lt;/a> 第三方的uos版本&lt;/p>
&lt;p>还有一种&lt;a class="link" href="https://github.com/huan/docker-wechat" target="_blank" rel="noopener"
>docker运行方法，&lt;/a>但是 已经&lt;a class="link" href="https://github.com/huan/docker-wechat/issues/55" target="_blank" rel="noopener"
>有人封号&lt;/a>了&lt;/p>
&lt;p>在使用wine之前 需要处理32位的问题，因为wine目前还是基于32位的 &lt;a class="link" href="arch-32bit-for-wine.md" >查看这里，打开32位支持&lt;/a>&lt;/p>
&lt;p>选择前三个 需要装一大堆32位的包，确保磁盘容量够用。我一开始只给arch分配了10G 已经不够了。 &lt;a class="link" href="linux-diskpartion-add.md" >给linux系统扩建容量&lt;/a>&lt;/p>
&lt;h4 id="deepin-wine-wechat">deepin-wine-wechat
&lt;/h4>&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/linux/wecha-new-debian" target="_blank" rel="noopener"
>2024-03-7 已经有原生版微信，虽然目前之支持uos和麒麟等系统，实际上其他系统也可以用。&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/arch/new-qq2022/" target="_blank" rel="noopener"
>2022年12月07日 腾讯已经发布新版linux qq &lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -S deepin-wine-wechat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#卸载
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -Rsn deepin-wine-wechat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf /home/yanhui/.deepinwine/Deepin-WeChat/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>截图也是黑屏，但是其他截图工具可以粘贴过来。 缺点和 com.qq.weixin.spark 一样 都是卡&lt;/p>
&lt;p>输入法的 如果不能输入 需要处理一下 &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-cninputu-sogou-baidu/" target="_blank" rel="noopener"
>参考这里我之前的纪录&lt;/a>&lt;/p>
&lt;p>系统托盘图标的问题，注销一下kde 重新登录 重新开微信就ok了&lt;/p>
&lt;p>有可能会报错&lt;/p>
&lt;p>error: could not set install reason for package lib32-at-spi2-atk (could not find or read package)&lt;/p>
&lt;p>不用管 ，重新运行即可&lt;/p>
&lt;p>kde桌面环境 可能还需要处理一下 和 deepin wine的问题 &lt;a class="link" href="https://wiki.archlinux.org/title/Deepin-wine_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener"
>参考这里&lt;/a>&lt;/p>
&lt;h3 id="comqqweixinspark">com.qq.weixin.spark
&lt;/h3>&lt;p>我这边提示有一个 spark-dwine-helper 依赖找不到，随放弃&lt;/p>
&lt;h3 id="wechat-uos">wechat-uos
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> sudo pacman -S scrot # 截图需要另外安装scrot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> yay -S wechat-uos
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>缺点很多：&lt;/p>
&lt;p>没有群折叠功能，&lt;/p>
&lt;p>没有朋友圈 小程序&lt;/p>
&lt;p>没系统托盘提醒&lt;/p>
&lt;p>也没有关闭和退出&lt;/p>
&lt;p>彻底关闭需要kill electron&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">killall electron
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>meiyou sousuo&lt;/p>
&lt;p>另外每次登录都需要扫码一次&lt;/p>
&lt;p>如果第一次打开卡，注销掉桌面系统 或者 kill 掉electron 重新开 就会好很多&lt;/p>
&lt;p>虽然有很多缺点，但是这个几乎是最流程稳定了一个版本&lt;/p>
&lt;p>如果截图黑屏的话，可以用&lt;a class="link" href="arch-kde-jietu.md" >spectacle&lt;/a> 截图后文件后 发送文件。。暂时。。没别的好办法&lt;/p>
&lt;h2 id="安装qq">安装QQ
&lt;/h2>&lt;p>TIM：com.qq.office.deepin ，若想使用较新的可选： com.qq.tim.spark或deepin-wine-tim。&lt;/p>
&lt;p>还有一个简单版本 基于 &lt;a class="link" href="https://github.com/takayama-lily/vscode-qq" target="_blank" rel="noopener"
>vscode插件的&lt;/a> 在插件市场直接走走&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -S deepin-wine-tim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S xsettingsd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>把 &lt;code>/usr/bin/xsettingsd&lt;/code> 弄到自动启动项&lt;/p>
&lt;p>我是 xorg 所以直接修改&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">~/.xinitrc 或者 /etc/X11/xinit/xinitrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 在 twm &amp;amp; 之前添加
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/xsettingsd &amp;amp;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>kde桌面环境 可能还需要处理一下 和 deepin wine的问题 &lt;a class="link" href="https://wiki.archlinux.org/title/Deepin-wine_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener"
>参考这里&lt;/a>&lt;/p>
&lt;h2 id="完全不用wine方法">完全不用wine方法
&lt;/h2>&lt;p>微信用 wechat-uos QQ 用 &lt;a class="link" href="https://github.com/Icalingua-plus-plus/Icalingua-plus-plus" target="_blank" rel="noopener"
>icalingua++&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#yay -S wechat-uos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S electronic-wechat-uos-bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S icalingua++
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>wechat-uos 的缺点前面都说很多，主要是功能不全，但是稳定轻量
electronic-wechat-uos-bin 更好用一些&lt;/p>
&lt;p>icalingua 速度嗷嗷的好，也支持群文件，重启kde 或者 dwm后就支持系统托盘了 ，和&lt;a class="link" href="arch-kde-jietu.md" >其他截图工具配合可以支持截图&lt;/a>&lt;/p>
&lt;p>彻底清理deepin wine版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -Rsn deepin-wine-wechat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf /home/yanhui/.deepinwine/Deepin-WeChat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf /home/yanhui/Documents/WeChat\ Files/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -Rsn deepin-wine-tim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf /home/yanhui/.deepinwine/Deepin-TIM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf /home/yanhui/.deepinwine
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>小插曲
关于 electronic-wechat-uos-bin 这个包
First Submitted: 2022-10-19 09:18 (UTC)
Last Updated: 2022-10-19 10:10 (UTC)&lt;/p>
&lt;p>今天是 2022-10-29 18：35&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.archlinux.org/title/WeChat_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener"
>官网wiki&lt;/a>&lt;/p></description></item><item><title>dwm 扩展 安装方法</title><link>https://dev.leiyanhui.com/linux/arch-install-dwm-pacher/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-install-dwm-pacher/</guid><description>&lt;h1 id="dwm-扩展-安装方法">dwm 扩展 安装方法
&lt;/h1>&lt;p>首先用 &lt;a class="link" href="arch-install-dwm.md" >卸载yay安装的版本，用编译方式安装的dwm&lt;/a>&lt;/p>
&lt;p>创建目录 用于存补丁&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkdir ~/dwmfiles/patches/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#没有安装wget也安装一下
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S wget
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>获取补丁&lt;/p>
&lt;p>官网地址 &lt;a class="link" href="https://dwm.suckless.org/patches/" target="_blank" rel="noopener"
>https://dwm.suckless.org/patches/&lt;/a>&lt;/p>
&lt;p>类似一个应用市场&lt;/p>
&lt;p>找到 &lt;a class="link" href="https://dwm.suckless.org/patches/systray/" target="_blank" rel="noopener"
>https://dwm.suckless.org/patches/systray/&lt;/a>&lt;/p>
&lt;p>我现在的是最新版本 6.3版 所以就下载他对应的补丁&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget https://dwm.suckless.org/patches/systray/dwm-systray-6.3.diff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>到dwm源码目录&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkdir ~/dwmfiles/dwm/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果么有配置git 用户的话配置一下，&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> git config --global user.name &amp;#34;leiyanhui&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git config --global user.email &amp;#34;leiyanhui@xxx.com&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打补丁，重新提交commit 编译&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">patch &amp;lt; ~/dwmfiles/patches/dwm-systray-6.3.diff
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -am &amp;#34;systray&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf config.h # 这个文件是每次编译的使用 那个 config.ref.h自动生成的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo make clean install #重新安装
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>dwm 使用快捷键 打开程序</title><link>https://dev.leiyanhui.com/linux/arch-install-dwm-diykey/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-install-dwm-diykey/</guid><description>&lt;h1 id="dwm-使用快捷键-打开程序">dwm 使用快捷键 打开程序
&lt;/h1>&lt;p>比如 win+E 打开文件管理器Thunar&lt;/p>
&lt;pre>&lt;code>cd dwmfiles/dwm/
nano config.def.h
&lt;/code>&lt;/pre>
&lt;p>在&lt;/p>
&lt;pre>&lt;code> static const Key keys[] = {
&lt;/code>&lt;/pre>
&lt;p>增加一行&lt;/p>
&lt;pre>&lt;code>{ MODKEY, XK_e, spawn, SHCMD(&amp;quot;thunar&amp;quot;)},
&lt;/code>&lt;/pre>
&lt;p>重新编译&lt;/p>
&lt;pre>&lt;code> rm -rf config.h
make
sudo make clean install
&lt;/code>&lt;/pre>
&lt;p>再比如 截图 flameshot 或者 spectacle&lt;/p>
&lt;p>先获取 prt Scr的对照&lt;/p>
&lt;pre>&lt;code> xev
# 看 keycode 的值 是107
&lt;/code>&lt;/pre>
&lt;p>不过我喜欢习惯了用 alt+a来截图&lt;/p>
&lt;pre>&lt;code>// 截图
{ Mod1Mask, XK_a, spawn, SHCMD(&amp;quot;flameshot&amp;quot;)},
&lt;/code>&lt;/pre>
&lt;p>不过这里只是一个例子 flameshot 丢到后台启动更好一些吧&lt;/p>
&lt;p>增加一个 win+R 的启动dmenucmd程序，类似windows的&lt;/p>
&lt;pre>&lt;code> // Win+r 运行
{ Mod4Mask, XK_r, spawn, {.v = dmenucmd } },
&lt;/code>&lt;/pre>
&lt;p>参考 &lt;a class="link" href="https://blog.csdn.net/weixin_43889478/article/details/108937727" target="_blank" rel="noopener"
>https://blog.csdn.net/weixin_43889478/article/details/108937727&lt;/a>&lt;/p></description></item><item><title>dwm修改主快捷键和默认快捷键配置</title><link>https://dev.leiyanhui.com/linux/arch-install-dwm-hotkey/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-install-dwm-hotkey/</guid><description>&lt;h1 id="dwm修改主快捷键和默认快捷键配置">dwm修改主快捷键和默认快捷键配置
&lt;/h1>&lt;p>dwm默认的主快捷键/功能按键是Alt,也就是说如果要使用快捷键来完成一些便捷操作的话，基本上我们都要按一下Alt键。因为dwm是窗口管理器嘛，用键盘上的Windows键来完成与窗口相关的操作更合理一下，也防止很多软件冲突。找到配置文件的当中的#define MODKEY,把后面的内容调整为Mod4Mask，这样后面所有用到MODKEY的快捷键就都按Windows键就可以了。&lt;/p>
&lt;p>修改主快捷键 需要 自行编译
完整的编译命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone git://git.suckless.org/dwm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd dwm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在make之前&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nano config.def.h
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>找到 #define MODKEY
改为 #define MODKEY Mod4Mask&lt;/p>
&lt;p>然后
make
make install&lt;/p>
&lt;p>进阶 &lt;a class="link" href="arch-install-dwm-diykey.md" >快捷键启动指定程序&lt;/a>&lt;/p>
&lt;p>桌面模式&lt;/p>
&lt;pre>&lt;code>全屏 [2]
平铺 []=
浮动全屏模式 [3]
&lt;/code>&lt;/pre>
&lt;p>常用快捷键&lt;/p>
&lt;pre>&lt;code>当前窗口全屏 Mod + m 返回方法 mod + 空格 或者 mod + t
当前窗口全屏 mod + 空格 浮动全屏模式
当前窗口 移动到别的工作区域 mod shift 1-9
然后需要手动 在 mod 1-9 切换到对用工作去，有 pathc可以搞定自动跟随切换
切换焦点（类似鼠标点击窗口）
当前窗口作为主窗口（左侧或者右侧主区域） mod + 回车
平铺模式 mod + t
两种模式 横向和竖向 其中分别还有3种小模式，所以 书香排列切换到横小排列，你或许 需要 mod +d 再 + d 连续按多次d
窗口横向排列 mod +d
调整横向分割大小 mod + h mod + L
窗口竖向排列 mod + i
&lt;/code>&lt;/pre>
&lt;p>默认快捷键对照&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Alt + shift + Enter # 打开新窗口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + shift + C # 关闭当前窗口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + D # 窗口横向排列
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + I # 窗口竖向排列
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + Enter # 窗口位置互换
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + num # 切换标签页
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + shift + num # 移动窗口至某标签页
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + T # 平铺模式（tiling)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + M # 单窗口模式
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + F # 浮动模式（float)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 在窗口间切换
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + J
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + K
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 改变窗口的长度/比例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + H
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + L
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 窗口模式切换
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + Space
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alt + shift + Space
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">在主副屏之间移动焦点
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Mod + &amp;lt; # 移动焦点至左边屏幕
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Mod + &amp;gt; # 移动焦点至右边屏幕
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">在主副屏之间移动窗口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Mod + shift + &amp;lt; # 移动窗口至左边屏幕
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Mod + shift + &amp;gt; # 移动窗口至右边屏幕
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Mod + 鼠标右键
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Basic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">=====
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Shift]+[Mod]+[Enter] - launch terminal.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[b] - 隐藏和显示顶部栏目
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[p] - dmenu 搜索和启动程序
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[Enter] - 切换窗口布局push acive window from stack to master, or pulls last used window from stack onto master.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod] + [j / k] - 移动鼠标焦点 focus on next/previous window in current tag.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod] + [h / l] - 修改窗口左右横列宽度 increases / decreases master size.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Navigation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==========
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[2] - moves your focus to tag 2.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Shift]+[Mod]+[2] - 把窗口一定移动到2号桌面 move active window to the 2 tag.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod] + [i / d] - 横竖布局 increases / decreases number of windows on master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod] + [, / .] - move focus between screens (multi monitor setup)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Shift]+[Mod]+[, / .] - move active window to different screen.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[0] - view all windows on screen.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Shift]+[Mod]+[0] - make focused window appear on all tags.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Shift]+[Mod]+[c] - kill active window.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Shift]+[Mod]+[q] - quit dwm cleanly.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Layout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">======
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[t] - tiled mode. []=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[f] - floating mode. &amp;gt;&amp;lt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[m] - monocle mode. [M] (single window fullscreen)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Floating
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">========
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[R M B] - to resize the floating window.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[L M B] - to move the floating window around.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[Space] - toggles to the previous layout mode.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[Shift]+[Space] - to make an individual window float.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Mod]+[M M B] - to make an individual window un-float.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>dwm重启，但是不重启xorg</title><link>https://dev.leiyanhui.com/linux/arch-dwm-restart/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-dwm-restart/</guid><description>&lt;p>~/bin/startdwm&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">while true; do
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Log stderror to a file
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dwm 2&amp;gt; ~/.dwm.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # No error logging
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #dwm &amp;gt;/dev/null 2&amp;gt;&amp;amp;1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">done
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>~/.xinitrc&lt;/p>
&lt;p>exec startdwm&lt;/p></description></item><item><title>inux 下常用的轻量好用的图形界面程序</title><link>https://dev.leiyanhui.com/linux/linux-soft/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/linux-soft/</guid><description>&lt;h1 id="linux-下常用的轻量好用的图形界面程序">linux 下常用的轻量好用的图形界面程序
&lt;/h1>&lt;pre>&lt;code>终端：kitty, alacritty, termite（前两个有GPU加速）
护眼：redshift-gtk
程序启动器：dmenu, rofi
Shell：fish, zsh
壁纸设置器：feh, nitrogen
音乐播放器：mpd&amp;amp;ncmpcpp（基于终端）, deadbeaf-git
特效合成器：picom-jonaburg-git, picom
文件管理器：thunar, nemo
电源管理器：xfce4-power-manager
截图工具：flameshot, scrot
主题设置器：lxappearance&amp;amp;qt5ct&amp;amp;xsettingsd
输入法：fcitx5
科学上网工具：qv2ray
剪切板管理器：copyq
云同步工具：nutstore（坚果云）, dropbox
通知管理器：dunst
锁屏管理器：betterlockscreen, xautolock（用于自动锁屏）
pdf 阅读器：zathura（vim风格）, atril（没有gnome依赖的evince）
文本编辑器：nano nvim, doom emacs(可选)，(vs)code
屏幕亮度调节器：light
&lt;/code>&lt;/pre></description></item><item><title>linux下 可视化文件管理器</title><link>https://dev.leiyanhui.com/linux/linux-file-manager/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/linux-file-manager/</guid><description>&lt;h1 id="linux下-可视化文件管理器">linux下 可视化文件管理器
&lt;/h1>&lt;p>我选择以来最少，也最轻量的 Thunar&lt;/p>
&lt;pre>&lt;code> sudo pacman -S thunar
&lt;/code>&lt;/pre>
&lt;p>自带基本的图片查看&lt;/p>
&lt;p>dwm ：
win +p thunar&lt;/p></description></item><item><title>linux下 可视化文件管理器</title><link>https://dev.leiyanhui.com/linux/rdp-win/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/rdp-win/</guid><description>&lt;h1 id="linux下远程控制win以及remoteapp的rdp客户端的尝试">Linux下远程控制win以及remoteapp的rdp客户端的尝试
&lt;/h1>&lt;h2 id="简单使用">简单使用
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -S  remmina
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S freerdp # rdp协议支持
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S libvncserver # vnc协议
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S spice-gtk # spice协议
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>总结，暂时没法没找到 linux下支持 remoteapp的办法&lt;/p>&lt;/blockquote>
&lt;h2 id="尝试记录">尝试记录
&lt;/h2>&lt;p>环境 arch 2022-10-18&lt;/p>
&lt;p>先尝试  安装一个图形界面的远程管理工具吧。我这里选择 Remmina&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -S  remmina
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>默认 只支持 ssh x2go&lt;/p>
&lt;p>如果你需要 RDP 支持，还要选择安装 freerdp 或 remmina-plugin-rdesktop(AUR)。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -S remmina-plugin-rdesktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 关闭remmina
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">killall remmina
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>测试后 发现好像连不上&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -Rs remmina-plugin-rdesktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Rs rdesktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>试试 freerdp&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -S freerdp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">killall
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>再次使用 可以正常链接Windows了&lt;/p>
&lt;p>rdp文件也可以自动关联到remmina&lt;/p>
&lt;p>但是 remotapp 依旧不知道应该如何支持&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.archlinux.org/title/Remmina_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener"
>arch wifi&lt;/a>&lt;/p></description></item><item><title>linux下分区无损扩容</title><link>https://dev.leiyanhui.com/linux/linux-diskpartion-add/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/linux-diskpartion-add/</guid><description>&lt;h1 id="linux下分区无损扩容">linux下分区无损扩容
&lt;/h1>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo fdisk -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cfdisk /dev/XXXXXX
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后添加容量即可&lt;/p>
&lt;p>当然后面必须要有空余容量&lt;/p>
&lt;p>使用winpe diskgen 会出现一下其他错误，不建议使用&lt;/p>
&lt;p>另外 cfdisk 减小容量 哪怕是减小到大于目前容量 也会导致部分文件丢失，慎用！&lt;/p>
&lt;p>容量扩展后，df -h 查看容量没有增加，fdisk -l 查看容量已经增加&lt;/p>
&lt;p>这时候 需要重设一下分区大小，以ext4为例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> sudo resize2fs /dev/mmcblk0p2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>再次df -h 查看 已经正常&lt;/p>
&lt;p>最后经过测试&lt;/p>
&lt;p>使用archinstall 全盘安装的系统，可以用diskgen 收缩分区容量，且不会破坏引导，但是速度很慢，而且仅限ext4分区格式&lt;/p></description></item><item><title>linux下用fish作为默认shell</title><link>https://dev.leiyanhui.com/linux/fish-install/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/fish-install/</guid><description>&lt;h1 id="linux下用fish作为默认shell">linux下用fish作为默认shell
&lt;/h1>&lt;p>fish 更加漂亮 好用一些&lt;/p>
&lt;p>官网 &lt;a class="link" href="http://fishshell.com/" target="_blank" rel="noopener"
>http://fishshell.com/&lt;/a>&lt;/p>
&lt;p>debian/deepin 发行版可直接 sudo apt install fish&lt;/p>
&lt;p>arch&lt;/p>
&lt;p>sudo pacman -S fish&lt;/p>
&lt;p>其他发行版在官网找到对应的安装方法，安装完成后执行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">chsh -s /usr/bin/fish
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>就可设置fish为默认shell了，&lt;/p>
&lt;p>需要退出终端再进一次即可生效&lt;/p>
&lt;p>但是仅供远程ssh的时候使用&lt;/p>
&lt;p>经过测试 还需要配置一下 konsole&lt;/p>
&lt;p>先检查&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">chsh -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#/bin/sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#/bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#/usr/bin/git-shell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#/usr/bin/fish
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#/bin/fish
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开 konsole&lt;/p>
&lt;p>setting&amp;gt; manage Profiles &amp;gt;&lt;/p>
&lt;p>添加一个配置文件 名字就叫 fish就好了&lt;/p>
&lt;p>然后修改 bin/bash 为 /bin/fish&lt;/p>
&lt;p>发现有bug，关闭重启后 就丢了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd ~/.local/share/konsole/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>nano fish.profile&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[General]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Command=/bin/fish
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name=fish
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Parent=FALLBACK/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或者 手动多建立几个 也可以&lt;/p>
&lt;p>&lt;a class="link" href="https://wiki.archlinux.org/title/Fish_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29#%E5%B0%86_fish_%E8%AE%BE%E4%B8%BA%E9%BB%98%E8%AE%A4_shell" target="_blank" rel="noopener"
>arch官网wiki&lt;/a>&lt;/p></description></item><item><title>为什么选择arch</title><link>https://dev.leiyanhui.com/linux/arch-why/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/linux/arch-why/</guid><description>&lt;h1 id="为什么选择arch">为什么选择arch
&lt;/h1>&lt;p>已经使用arch作为工作系统5年多，主要是go php java ardruino的开发环境使用&lt;/p>
&lt;h2 id="桌面系统">桌面系统
&lt;/h2>&lt;p>首先是因为可定制，其次是因为arch还是比较适合做桌面系统的，主要原因还是官方源的驱动比较全比较新&lt;/p>
&lt;p>和多数人一样，都是从redhat开始 centos Fedora debian Ubuntu Slackware Gentoo Mandrake deepin uos&lt;/p>
&lt;p>Ubuntu 的各个衍生版 应该是我用的最多最久的&lt;/p>
&lt;p>期间一度迷恋alpine，很早之前就知道arch但是尝试安装Manjaro后 也感觉，直到群里有大神再次推荐。于是尝试几次后 开始一发不可收拾。。&lt;/p>
&lt;p>先说缺点吧&lt;/p>
&lt;h3 id="缺点">缺点
&lt;/h3>&lt;ul>
&lt;li>安装难度略大&lt;/li>
&lt;li>其实 现在有archinstall 自动脚本后已经很简单了&lt;/li>
&lt;li>只是想体验的话 有 &lt;a class="link" href="https://hub.docker.com/r/linuxserver/webtop" target="_blank" rel="noopener"
>https://hub.docker.com/r/linuxserver/webtop&lt;/a> 这个docker的桌面系统&lt;/li>
&lt;li>滚动更新 有很小的概率升级的时候搞挂 不是服务器的话没影响&lt;/li>
&lt;/ul>
&lt;h3 id="优点">优点
&lt;/h3>&lt;ul>
&lt;li>很新 很新
其他发行版本 也不能说有问题 只是会带来一些额外的工作量&lt;/li>
&lt;li>驱动支持的广泛
无论是古董机器，还是低配机器，还是最新顶配 基本上都可以搞定&lt;/li>
&lt;li>包管理的方便 第三方包很丰富并且更新频繁 中文wifi 以及国内众多使用者
一些特殊软件，尤其是 微信 qq之类的 都比较容易解决&lt;/li>
&lt;/ul>
&lt;p>总的来说arch 就是新&lt;/p>
&lt;h2 id="服务器系统">服务器系统
&lt;/h2>&lt;p>目前还是Ubuntu20.04 和 21.04 ， 因为习惯用宝塔，所以还是在 Debian 和 redhat系 来回使用。&lt;/p>
&lt;p>作为一个业余玩家，服务器一直使用vps，好像即便是选择arch 哪怕升级挂了 也不是大问题。&lt;/p>
&lt;h2 id="arch一键备份">arch一键备份
&lt;/h2>&lt;p>&lt;a class="link" href="arch-backup.md" >在这里整理和更新&lt;/a>&lt;/p></description></item></channel></rss>