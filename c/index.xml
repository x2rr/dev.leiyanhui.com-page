<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cs on 小类随手记</title><link>https://dev.leiyanhui.com/c/</link><description>Recent content in Cs on 小类随手记</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Wed, 11 Jun 2025 08:30:20 +0800</lastBuildDate><atom:link href="https://dev.leiyanhui.com/c/index.xml" rel="self" type="application/rss+xml"/><item><title>adguard home单实例自动更新分流规则</title><link>https://dev.leiyanhui.com/c/adguardhome-rules/</link><pubDate>Wed, 11 Jun 2025 08:30:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/adguardhome-rules/</guid><description>&lt;blockquote>
&lt;p>本文更新可能滞后于 &lt;a class="link" href="https://github.com/joyanhui/adguardhome-rules" target="_blank" rel="noopener"
>github仓库的说明文档&lt;/a>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>使用问题交流请去恩山或&lt;a class="link" href="https://github.com/joyanhui/adguardhome-rules/discussions" target="_blank" rel="noopener"
>discussions&lt;/a>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>bug反馈和建议以及公共doh/github proxy分享都可以提&lt;a class="link" href="https://github.com/joyanhui/adguardhome-rules/issues" target="_blank" rel="noopener"
>issues&lt;/a>，我会尽快处理.给个star我会很开心.&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>PR请尽量通过一次commit提交过来.&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>关于爱快的分流规则请查看我另外的仓库 &lt;a class="link" href="https://github.com/joyanhui/ikuai-bypass" target="_blank" rel="noopener"
>[joyanhui/ikuai-bypass]&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h2 id="单adguardhome分流解析">单adguardhome分流解析
&lt;/h2>&lt;h3 id="安装和启动">安装和启动
&lt;/h3>&lt;p>这里以opwenwrt主路由的情况为例子，其他环境随便使用docker或者官方的安装命令等都可以正常安装。此文不涵盖相关内容。&lt;/p>
&lt;p>非常不建议使用luci-app-adguardhome,不但没必要而且会带来更多困扰。&lt;/p>
&lt;p>先确定你的openwrt配置了正确的源，并且没有项目展会用3000端口，然后依次运行下面两行命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">opkg update &lt;span class="c1">#更新软件列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">opkg install adguardhome &lt;span class="c1">#安装&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/init.d/adguardhome start &lt;span class="c1">#启动&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/init.d/adguardhome &lt;span class="nb">enable&lt;/span> &lt;span class="c1">#下次开机自动运行&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="adguardhome-替代路由器自带的dnsmasq">adguardhome 替代路由器自带的Dnsmasq
&lt;/h3>&lt;ul>
&lt;li>关闭Dnsmasq的dns功能：openwrt web界面：网络&amp;gt;DHCP/DNS&amp;gt;高级设置 &lt;code>DNS 服务器端口&lt;/code> 默认是53修改为0 即可关闭&lt;/li>
&lt;li>修改dhcp下发的dns ：openwrt web界面：网络&amp;gt;接口 找到&lt;code>br-lan&lt;/code> 编辑 一般在这个接口的DHCP服务器的高级设置里面 找到 &lt;code>DHCP 选项&lt;/code> 添加或者修改一协调&lt;code>6,192.168.1.1,223.6.6.6&lt;/code> 即给dhcp客户端分配两个dns地址192.168.1.1,223.6.6.6 如果你的 adguardhome的安装ip不是在192.168.1.1那么这里要修改一下&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>如果是爱快直接使用dns代理功能指定到adguardhome即可&lt;/p>&lt;/blockquote>
&lt;h3 id="adguardhome-基本配置">adguardhome 基本配置
&lt;/h3>&lt;p>访问你运行adguardhome的加端口号 3000，例如:http://192.168.1.1:3000&lt;/p>
&lt;p>dns端口就用53,因为上面我们已经把Dnsmasq的dns功能关闭了，所以这里adguard可以站哟机构53端口。 web访问端口不要用80,还是3000就好啦。&lt;/p>
&lt;p>以及配置好管理账号密码以后 进入adg的管理面板&lt;/p>
&lt;h4 id="adguardhome-基本dns配置">adguardhome 基本dns配置
&lt;/h4>&lt;p>adg的管理面板：设置 &amp;gt; DNS设置&lt;/p>
&lt;ul>
&lt;li>上游 DNS 服务器 随便输入一个可用的，不用配置太多，因为后面我们要用配置路径的方式用文件来配置上游dns规则。建议就输入一个 &lt;code>223.5.5.5&lt;/code>&lt;/li>
&lt;li>负载均衡/并行请求/最快ip地址 建议选择 并行请求&lt;/li>
&lt;li>Bootstrap DNS 服务器 输入几个公共dns的ip 例如 &lt;code>123.125.81.6&lt;/code> &lt;code>223.6.6.6&lt;/code> &lt;code>119.29.29.29&lt;/code>一行一个&lt;/li>
&lt;li>DNS 服务配置 速度限制 建议修改20-100左右，我这里配置为50&lt;/li>
&lt;li>DNS缓存配置 根据自己需求和硬件性能配置我这里配置 缓存大小&lt;code>1024000&lt;/code> 最小ttl&lt;code>30&lt;/code> 最大ttl&lt;code>1800&lt;/code>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>此时 整个局域网的，包括路由器openwrt自己的dns 均由adguard接管。测试未访问过的网站是否可以正常ping到ip地址。例如：&lt;code>ping news.163.com&lt;/code> &lt;code>ping news.baidu.com&lt;/code> &lt;code>ping image.baidu.com&lt;/code>&lt;/p>&lt;/blockquote>
&lt;h3 id="adguardhome-配置分流规则">adguardhome 配置分流规则
&lt;/h3>&lt;h4 id="adguardhome-分流思路">adguardhome 分流思路
&lt;/h4>&lt;p>adguard home支持 &lt;code>[/example.local/]94.140.14.140: 指定为特定域名的上游服务器；&lt;/code> 这样的规则，那么我们只需要整理对应的域名列表 然后指定对应的上游dns即可。但是在adguard home的管理面部中的上游dns配置这个页面 显然不可能输入上几万个域名。但是adguard支持直接用文件配置。而我们又可以从Loyalsoldier等大佬的仓库获得一些我们需要的域名清单。虽然格式不符合要求，但是我们可以自己用程序稍微处理一下让他符合adguard home的格式，再把多个域名清单列表合并到一个里面那就大功告成了。&lt;/p>
&lt;p>所以我提供好了 每天会更新的规则文件，你只需要下载回去自己再用脚本修改一下即可。 然后这个脚本 可以用wget下载sed修改，然后添加到计划人物每天运行就可以自动更新了。 地址是 &lt;code>https://github.com/joyanhui/adguardhome-rules/tree/release_file&lt;/code>&lt;/p>
&lt;h4 id="无辅助上网环境的情况下">无辅助上网环境的情况下
&lt;/h4>&lt;p>你要确定你有办法可以直接方法github的文件，以及有无污染的dns上游可用，建议自己准备一个域名自己从cloudflare自建一个github镜像站和自建一个私有doh.&lt;/p>
&lt;p>域名，可以申请免费那些域名。不过建议从阿里云或者cloudflare或者其他地方购买一个。8位数字的xyz域名一年只要几块钱。免费的二级域名比较容易在敏感时期全部被大局域网屏蔽，然后dns托管到cloudflare,开通 cloudflare worker。这个网络很多教程。&lt;/p>
&lt;ul>
&lt;li>配置自己的 github代理镜像网址 worker源码 &lt;a class="link" href="https://github.com/joyanhui/gh-proxy/blob/master/index.js" target="_blank" rel="noopener"
>https://github.com/joyanhui/gh-proxy/blob/master/index.js&lt;/a>&lt;/li>
&lt;li>配置自己的 doh源码： &lt;a class="link" href="https://github.com/joyanhui/adguardhome-rules/blob/main/cfworks_doh.js" target="_blank" rel="noopener"
>cfworks_doh.js&lt;/a> 记得修改里面的?dns-query=&lt;/li>
&lt;/ul>
&lt;p>如果你不想折腾可以从网络搜索其他人的，这里提供几个目前可用的&lt;/p>
&lt;h5 id="github-proxy-地址收集">github proxy 地址收集
&lt;/h5>&lt;ul>
&lt;li>&lt;a class="link" href="https://goppx.com/" target="_blank" rel="noopener"
>https://goppx.com/&lt;/a>&lt;/li>
&lt;li>github proxy: &lt;a class="link" href="https://github.akams.cn/" target="_blank" rel="noopener"
>https://github.akams.cn/&lt;/a>&lt;/li>
&lt;li>github proxy: &lt;a class="link" href="https://ghproxy.net/" target="_blank" rel="noopener"
>https://ghproxy.net/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h5 id="无污染的-dns-地址收集">无污染的 dns 地址收集
&lt;/h5>&lt;p>dot因为端口特殊的问题基本都不稳定，doh的话 cloudclare在多数下可用&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://dns.cloudflare.com/dns-query" target="_blank" rel="noopener"
>https://dns.cloudflare.com/dns-query&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="创建一个自动更新adguard上游dns规则文件的脚本">创建一个自动更新adguard上游dns规则文件的脚本
&lt;/h4>&lt;p>创建一个自动更新脚本 比如&lt;/p>
&lt;p>&lt;code>nano /overlay/data/adguard_upstream_dns_file_update.sh&lt;/code> 内容如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>rm -rf /overlay/data/adguard_upstream_dns_file.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget &lt;span class="s2">&amp;#34;https://你的githubProxy代理站地址/https://raw.githubusercontent.com/joyanhui/adguardhome-rules/refs/heads/release_file/ADG_chinaDirect_WinUpdate_Gfw.txt&amp;#34;&lt;/span> -O /overlay/data/adguard_upstream_dns_file.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s1">&amp;#39;s/d-o-h.you-cf-domain.com/你的doh域名部分/g&amp;#39;&lt;/span> /overlay/data/adguard_upstream_dns_file.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s1">&amp;#39;s/your-suffix/你的doh后缀部分/g&amp;#39;&lt;/span> /overlay/data/adguard_upstream_dns_file.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/init.d/adguardhome restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果你没有自己的私有githubPoryx和doh&lt;/p>
&lt;ul>
&lt;li>GithubProxy
&lt;ul>
&lt;li>&lt;code>https://你的githubProxy代理站地址/&lt;/code> 修改为 &lt;code>https://goppx.com/&lt;/code>。也可以把wget的完整地址更换为&lt;/li>
&lt;li>&lt;code>https://joyanhui.github.io/adguardhome-rules/ADG_chinaDirect_WinUpdate_Gfw.txt&lt;/code>&lt;/li>
&lt;li>&lt;code>https://gcore.jsdelivr.net/gh/joyanhui/adguardhome-rules@release_file/ADG_chinaDirect_WinUpdate_Gfw.txt&lt;/code>&lt;/li>
&lt;li>&lt;code>https://testingcf.jsdelivr.net/gh/joyanhui/adguardhome-rules@release_file/ADG_chinaDirect_WinUpdate_Gfw.txt&lt;/code>&lt;/li>
&lt;li>&lt;code>https://cdn.jsdmirror.com/gh/joyanhui/adguardhome-rules@release_file/ADG_chinaDirect_WinUpdate_Gfw.txt&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>无污染的dns,udp/tcp无可用的，tls不稳定，目前只有cloudflare的多数时间和地区可用。强烈建议自建
&lt;ul>
&lt;li>&lt;code>你的doh域名部分&lt;/code> 可以修改为 &lt;code>dns.cloudflare.com&lt;/code> &lt;code>你的doh后缀部分&lt;/code> 修改为&lt;code>dns-query&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;a class="link" href="https://github.com/joyanhui/adguardhome-rules/tree/release_file" target="_blank" rel="noopener"
>[joyanhui/adguardhome-rules/tree/release_file]&lt;/a> 分支中有多个每日自动更新的规则文件，选择其中一个适合你的&lt;/p>
&lt;p>你需要根据你的情况修改一下 里面两个地址 以及文件路径。如果不是openwrt还需要修改对应的重启adgurd的命令&lt;/p>
&lt;p>运行一次 &lt;code>sh /overlay/data/adguard_upstream_dns_file_update.sh&lt;/code>,然后自己检查获取到的adguard_upstream_dns_file.txt这个文件是否正常。&lt;/p>
&lt;p>如果你中间运行出错了，导致dns全部失效 可以执行下面命令恢复dns基本的运行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;114.114.114.114
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">223.6.6.6
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&lt;/span>&amp;gt;/overlay/data/adguard_upstream_dns_file.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="添加到计划任务">添加到计划任务
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">chmod +x /overlay/data/adguard_upstream_dns_file_update.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后在openwrt的web管理里面：系统&amp;gt;计划任务 增加一行 本机时间每天早上8点15运行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="m">15&lt;/span> &lt;span class="m">8&lt;/span> * * * /overlay/data/adguard_upstream_dns_file_update.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="配置adguard-home-的上游dns为规则文件模式">配置adguard home 的上游dns为规则文件模式
&lt;/h4>&lt;p>找到你的adguardhome的yaml配置文件。上面按照的是在&lt;code>/etc/adguardhome.yaml&lt;/code>,如果你不确定可以搜索一下 &lt;code>find / -name &amp;quot;*uard*ome.yaml&amp;quot;&lt;/code>&lt;/p>
&lt;p>编辑这个文件 找到这行 &lt;code>upstream_dns_file&lt;/code> 修改为&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">upstream_dns_file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/overlay/data/adguard_upstream_dns_file.txt&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在修改&lt;code>upstream_dns_file&lt;/code>并重启adguardhome后&lt;code>upstream_dns&lt;/code> 部分的配置会失效，adguardhome的网页端也可以看到&lt;/p>
&lt;p>在修改upstream_dns_file 之前可以先ping一个gfw的域名。例如 &lt;code>ping google.com&lt;/code>,修改完成后 重启adguardhome ，然后再ping一下看看能否获取正确的ip&lt;/p>
&lt;h3 id="进阶-adguardhome-搭建自己的doh">进阶 adguardhome 搭建自己的doh
&lt;/h3>&lt;p>本地的adguardhome也可以对外提供 doh。有两种方式 一种是自签证书&lt;a class="link" href="https://www.toolhelper.cn/SSL/SSLGenerate" target="_blank" rel="noopener"
>[在线生成]&lt;/a>或者购买一个长期证书。另外一种方式就是配合证书管理和反向代理工具，下面用 lucky来做简单说明。&lt;/p>
&lt;h4 id="adguardhome-启用doh">adguardhome 启用doh
&lt;/h4>&lt;p>在 adguardhome 的设置 加密设置里面 启用加密 HTTPS 端口 配置为一个可用的端口，例如 30443 不要打开https重定向，无意义&lt;/p>
&lt;p>DNS-over-TLS 端口 和 DNS-over-QUIC 端口 因为牵扯到证书续签的问题，这里就干脆设置为0,不使用了。&lt;/p>
&lt;p>然后 证书内容 粘贴一下随便一个目前可用的域名证书（暂时可用的就ok） 可以从lucky的ssl管理的 映射路径 里面 crt 和key文件里面获取到。&lt;/p>
&lt;p>然后保存修改&lt;/p>
&lt;h4 id="lucky接管-adguardhome的https">lucky接管 adguardhome的https
&lt;/h4>&lt;p>lucky web服务正常可用的情况下，添加一个子规则：&lt;/p>
&lt;ul>
&lt;li>前端地址 你的域名&lt;/li>
&lt;li>后端地址 adguardhome 的https地址 例如 https://192.168.1.1:30443&lt;/li>
&lt;li>忽略后端TLS证书验证 一定要勾选 这样我们就不用关心adguardhome的证书是否可用。&lt;/li>
&lt;/ul>
&lt;h4 id="doh-测试命令-大全">doh 测试命令 大全
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnslookup x.com https://你的doh域名/你的doh后缀
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">doggo x.com A AAAA MX --time @https://你的doh域名/你的doh后缀
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">doggo x.com @https://你的doh域名/你的doh后缀
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">doggo x.com @https://cloudflare-dns.com/dns-query
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="adguard-广告过滤规则-收集">adguard 广告过滤规则 收集
&lt;/h2>&lt;p>adguard home广告过滤&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># easylist国际网页&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://easylist-downloads.adblockplus.org/easylist.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># easylist国内网页&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://easylist-downloads.adblockplus.org/easylistchina.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># easylist-cookis 阻止Cookie标语，GDPR覆盖窗口和其他与隐私相关的通知&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://easylist-downloads.adblockplus.org/easylist-cookie.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># anti-AD中文区命中率最高 的广告过滤列表 电视盒子 日志收集、大数据统计&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://gh.leiyanhui.com/https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-easylist.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="感谢">感谢
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="github.com/Loyalsoldier" >[Loyalsoldier]&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>关于zed editor的几个评价</title><link>https://dev.leiyanhui.com/c/zed-editor/</link><pubDate>Tue, 11 Mar 2025 08:30:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/zed-editor/</guid><description>&lt;p>zed编辑器 已经到了完全可用的阶段（linux/macos）&lt;/p>
&lt;p>目前发现的的几个问题&lt;/p>
&lt;ul>
&lt;li>不支持flutter 虽然支持dart 但是对flutter的支持接近没有。 官方貌似不打算支持，只能等第三方。&lt;/li>
&lt;li>没有debug模式，更无法打断点。 貌似官方明确短时间不会支持&lt;/li>
&lt;li>ai功能 目前比较孱弱 虽然有不少功能模仿了cursor/windsurf 但是很简陋&lt;/li>
&lt;/ul></description></item><item><title>目前较为好用的ai 代码助手长时间使用亲身体会</title><link>https://dev.leiyanhui.com/c/code-ai/</link><pubDate>Fri, 27 Dec 2024 00:01:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/code-ai/</guid><description>&lt;p>平时写的东西比较杂， go rust python flutter c pythone mircopython uniapp vue react。 使用几个ai后基本的纯感觉。&lt;br>
不同于网上的那些对比比较，这几个有限的&lt;/p>
&lt;p>每个功能按照10分计算&lt;/p>
&lt;h2 id="基本体验">基本体验
&lt;/h2>&lt;ul>
&lt;li>copilot: 代码提示准确率6分 速度4分 修错能力2分&lt;/li>
&lt;li>通义灵码 : 代码提示准确率5分 速度4分 修错能力1分 （评价：免费的 加上马马虎虎的准确率）&lt;/li>
&lt;li>cursor: 代码提示准确率8分 速度5分 修错能力6分 （整体不错，就是贵）&lt;/li>
&lt;li>fitten : 代码提示准确率2分 速度10分 修错能力1分 （这个目前感觉，用他以后效率反而下滑）&lt;/li>
&lt;li>JetBrains AI Assistant ：只试用过5天左右，到期后没有继续试用，整体感觉和通义灵码差距不大 优势不明显。然而通义灵码免费&lt;/li>
&lt;li>Codeium （插件）：代码提示准确率5.5分 速度4分 修错能力2分 因为用的时间较少 加上windsurf的nixos包需要自己写，所以不做更多评价&lt;/li>
&lt;li>kimi ： 只用过他的对话模式，不知道时不时使用姿势有问题，感觉他的编程能力接近0 准确率之类的无从谈起&lt;/li>
&lt;/ul>
&lt;h2 id="项目重构能力">项目重构能力
&lt;/h2>&lt;p>这时主要是说的项目结构的变更，包括部分操作单独拆到函数，以及整个项目的结构的重新组织。&lt;/p>
&lt;ul>
&lt;li>copilot: 只有文件内的或者函数级的重构 重构后的逻辑和算法 比一般的程序员写的要好也更加标准，但是也会语法错误或者自己乱造的东西。打4分&lt;/li>
&lt;li>通义灵码 : 和copilot差不多 4分&lt;/li>
&lt;li>cursor: 可以直接帮你新创建文件，要替换的文件也会给你创建一个范例出来。当然文件内和函数级的也没问题，但是也有会语法错误和乱造。6分。其中2分是给目录结构优化的。&lt;/li>
&lt;li>fitten : 只有文件内的或者函数内的重构 胡编乱造的多，但是偶有不错的地方。&lt;/li>
&lt;/ul>
&lt;h2 id="冷门语言和需求的体验">冷门语言和需求的体验
&lt;/h2>&lt;h3 id="mircopython">mircopython
&lt;/h3>&lt;p>因为ai经常会按照python的方法来写mircopython&lt;/p>
&lt;ul>
&lt;li>copilot: 代码提示准确率3分 修错能力0分&lt;/li>
&lt;li>通义灵码 : 代码提示准确率2分 修错能力0分&lt;/li>
&lt;li>cursor: 代码提示准确率4分 修错能力2分&lt;/li>
&lt;li>fitten : 不曾浪费时间使用&lt;/li>
&lt;/ul>
&lt;h4 id="结合硬件的项目单片机uos等">结合硬件的项目，单片机/uos等
&lt;/h4>&lt;ul>
&lt;li>copilot: 代码提示准确率3分 修错能力0分&lt;/li>
&lt;li>通义灵码 : 代码提示准确率2分 修错能力0分&lt;/li>
&lt;li>cursor: 代码提示准确率5分 修错能力4分&lt;/li>
&lt;li>fitten : 不曾浪费时间使用&lt;/li>
&lt;/ul>
&lt;p>cursor 此时在告知了硬件情况后，还是有很大的概率可以修复语法和逻辑错误的&lt;/p>
&lt;h4 id="nix文件">nix文件
&lt;/h4>&lt;p>在2024年10月份左右 各大ai,包chatgpt 对 nix语言的支持基本都是0,但是12月份 准确都不错了&lt;/p>
&lt;ul>
&lt;li>copilot: 代码提示准确率4分 修错能力0分&lt;/li>
&lt;li>通义灵码 : 代码提示准确率2分 修错能力0分&lt;/li>
&lt;li>cursor: 代码提示准确率6分 修错能力5分&lt;/li>
&lt;li>fitten : 因为经常更新自己的nixos-config 所以依旧是体验了下，准确接近0 修错能力更是接近0&lt;/li>
&lt;/ul></description></item><item><title>腾讯cdn在无任何通知的情况下直接关闭了ipv6回源</title><link>https://dev.leiyanhui.com/c/tencent-cdn/</link><pubDate>Tue, 05 Dec 2023 18:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/tencent-cdn/</guid><description>&lt;p>添加界面，告知工单申请，工单申请后告知 &lt;code>您好。非常抱歉。ipv6回源目前已不支持。不过您通过EO（边缘安全加速平台）接入&lt;/code>&lt;/p>
&lt;p>真的佩服昂！&lt;/p>
&lt;p>没有任何提前通知，直接给关掉了！&lt;/p></description></item><item><title>notepad++替代品 20几个 逐个试用过程 和最后的选择</title><link>https://dev.leiyanhui.com/c/notepad-other/</link><pubDate>Mon, 11 Sep 2023 08:30:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/notepad-other/</guid><description>&lt;p>2025-03 更新： 建议使用zed-editor &lt;a class="link" href="https://dev.leiyanhui.com/c/zed-editor" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/zed-editor&lt;/a>&lt;/p>
&lt;p>vscode 因为要处理一些常规项目，还是需要一个轻量级的文本编辑器工具来作为副编辑器。
加上一直想找一个跨平台的vscode之外的开发工具。
这几年其实一直在用notepad++ 和 相关的替代软件尝试替代它。&lt;/p>
&lt;h2 id="选择标准">选择标准
&lt;/h2>&lt;blockquote>
&lt;p>我的需求不一定适合你，我需要的是记事本的替代工具。
1、免配置，可以代码高亮&lt;br>
2、支持多标签的，不然无脑选 notepad2 notepad3了&lt;br>
3、轻量 体积小 小文件启动快（大文件无所谓 还有vscode呢）&lt;br>
4、最好免费开源&lt;br>
5、最好跨平台 &lt;br>
本文创建于2020年，后续虽有部分更新但是已经不全&lt;/p>&lt;/blockquote>
&lt;h2 id="过程">过程
&lt;/h2>&lt;h3 id="notepad2-notepad3">notepad2 notepad3
&lt;/h3>&lt;p>notepad2 不错，但是不支持多标签 notepad3 也不支持。 最要命的这俩货都是win only&lt;/p>
&lt;h3 id="gedit">gedit
&lt;/h3>&lt;p>gnome 默认编辑器 。当然有win和mac版本，我感觉还不错。高级功能没怎么研究过 。gnome-builder 支持lsp但是不轻量，启动速度不适合作为复文本编辑器使用。&lt;br>
gedit 有一些小插件，但是没折腾过lsp不确定是否支持&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo apt install gedit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install gedit-plugins
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="优点">优点
&lt;/h4>&lt;ul>
&lt;li>启动速度尚可&lt;/li>
&lt;li>有几个没啥太大卵用的小插件&lt;/li>
&lt;li>有git最后提交高亮插件 这个不错&lt;/li>
&lt;li>有可以自定义的自动保存&lt;/li>
&lt;li>定位就是文本编辑器，虽然有代码片段，括号补全之类的，但是作为轻量级代码编辑器很多&lt;/li>
&lt;/ul>
&lt;h4 id="小缺点">小缺点
&lt;/h4>&lt;ul>
&lt;li>启动速度没那么舒服&lt;/li>
&lt;li>没研究明白代码自定补全或者lsp的配置&lt;/li>
&lt;li>i3w桌面下 右上角有最大化最小化按钮 去不掉&lt;/li>
&lt;li>无法修改标题栏颜色&lt;/li>
&lt;li>部分文件格式不能自动识别，常见的 conf文件 需手动选择一次 (小问题)&lt;/li>
&lt;li>win下有代码概括图。linux和macos下没有。也都没有大纲功能。&lt;/li>
&lt;li>侧栏 只能一个&lt;/li>
&lt;li>有插件可以开一个shell底部栏，但是有多于的大空白按钮占用屏幕空间&lt;/li>
&lt;/ul>
&lt;h3 id="mousepad">mousepad
&lt;/h3>&lt;p>xfce默认编辑器，没有win和mac版本，linux版下无法实现代码中变量选中高亮。&lt;/p>
&lt;h3 id="sublime-text">sublime text
&lt;/h3>&lt;p>收费的不开源，但是跨平台，不付费会显示为注册但是不太影响使用。win版的话很容易找到开心版。&lt;br>
sublime启动速度快，软件包软体也小，内存占用也不高，其实非常不错！&lt;br>
sublime的插件数量只比vsc逊色，但是插件质量都非常高，性能也很好。&lt;br>
虽然是一个收费的软件，但是对一些后缀名比较特殊的文件（例如.conf）也无法自动识别格式，有插件可以配置为默认识别为某一种格式 比如 batch，略微麻烦。
补充一句，sublime非常强，并不比vsc差。但是他和vsc的插件数量没法比。&lt;/p>
&lt;h3 id="kate">kate
&lt;/h3>&lt;p>Kate作为kde的默认编辑器 很熟悉了，也经常用。kate很强大。 &lt;br>
只是kate真的不算轻量 启动也慢一拍。在非kde下ui也有一点小小的兼容问题&lt;/p>
&lt;h3 id="notepad-next--notepad-">notepad next notepad &amp;ndash;
&lt;/h3>&lt;p>怎么说呢&amp;hellip; 比记事本好用一点点吧。问题很多，尝试就是浪费时间，小问题数不胜数，基本还处于玩具级&lt;br>
notepad next 略微好一些&lt;/p>
&lt;h3 id="notepad-next">notepad next
&lt;/h3>&lt;p>旧版本问题 非常多，基本上无法使用，新版 好一些 但是也不推荐使用&lt;/p>
&lt;h4 id="发现的问题">发现的问题
&lt;/h4>&lt;ul>
&lt;li>对conf后缀的 文件识别有问题 &lt;a class="link" href="https://github.com/dail8859/NotepadNext/issues/365" target="_blank" rel="noopener"
>https://github.com/dail8859/NotepadNext/issues/365&lt;/a>&lt;/li>
&lt;li>md 文件的 标题不加粗 看起来很别扭&lt;/li>
&lt;li>目前最新版0.6.1 值得star一下，不值得作为副文本编辑器使用&lt;/li>
&lt;li>linux下ctrl+o 打开一个win样式的文件管理器&amp;hellip;linuz的文件管理功能首字母搜索也完全不能用，和 fctix5 也有兼容性问题需要手动处理。&lt;/li>
&lt;li>虽然是对标notepad++的，但是云泥之别&lt;/li>
&lt;/ul>
&lt;h3 id="helix">helix
&lt;/h3>&lt;p>跨平台，性能好，支持lsp,但是学习成本太高，我只有短时间尝试过，没有深入使用 。&lt;br>
个人浅浅的观点是，在没有ui的环境下，简单的编辑不如直接用vim和nano。复杂的不如拖回来，或者用支持ssh远程编辑器。 helix和vim命令和快捷键不完全兼容 helix的热度很多是rust带来的, 但是helix确实很不错。&lt;/p>
&lt;h3 id="lapce">Lapce
&lt;/h3>&lt;p>这个算是bug未动，宣传稿先行？网上很多吹，ui漂亮，但是功能上有很多问题。&lt;/p>
&lt;ul>
&lt;li>win下尚不能正常启动，或者是偶尔直接无反应&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>可能是依赖问题，但是没有具体提示 vs++运行库已经安装的情况下也无法正常 也懒得去检查&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>linux下会出现鼠标和焦点不对齐的情况「新版已经修复」&lt;/li>
&lt;li>体积不小，启动速度还可以&lt;br>
没长时间使用，未来可期 眼下不建议折腾&lt;/li>
&lt;/ul>
&lt;h3 id="atom">atom
&lt;/h3>&lt;p>atom体积太大 ，而且已经停止更新&lt;/p>
&lt;h3 id="lite-xl">lite-xl
&lt;/h3>&lt;p>这个做不到开箱使用,过于轻量了，没有长时间体验。 &lt;br>
打开文件的窗口只能输入路径 &lt;br>
双击 无法高亮同词。也没有对应的插件或者配置项&lt;/p>
&lt;h3 id="zed">Zed
&lt;/h3>&lt;p>原atom作者用rust写的新编辑器，目前还在公测，仅有macos平台，其他平台还在计划中，未来可期 眼下算了&lt;/p>
&lt;h3 id="slickedit">SlickEdit
&lt;/h3>&lt;p>SlickEdit ，没测试 收费的&lt;/p>
&lt;h3 id="everedit">EverEdit
&lt;/h3>&lt;p>EverEdit 试用了一下 还不错，有单独的文件关联工具，不过正版要158元 而且只有win版 有破解版 可以正常使用。有一些插件 下载速度也可以。 但是EverEdit 自带的文件关联工具，会导致reg文件关联失效，注意，不要选中 。 win only 不知道什么人会买&amp;hellip;不懂他们的世界&amp;hellip;&lt;/p>
&lt;h3 id="vscodium">VSCodium
&lt;/h3>&lt;p>vscode 写代码，习惯性点他的图标了。。&lt;br>
VSCodium 和 notepad3 写文本 是一个不错的选择&lt;br>
但是和 vscode 一样 启动略慢，吃内存多，所谓一个副文本编辑器 不值得&lt;/p>
&lt;h3 id="rj-texted">RJ TextEd
&lt;/h3>&lt;p>支持lsp，支持旧版本windows，启动略慢 也不小 不支持非win平台&lt;/p>
&lt;h3 id="ultraedit">UltraEdit
&lt;/h3>&lt;p>老牌了，收费而且不便宜，本来是一个文本编辑器，但是他操着ide的心，新版本启动很慢，小问题贼多！破解版都不太想用。。 不支持非win平台&lt;/p>
&lt;h3 id="editplus">editplus
&lt;/h3>&lt;p>陪伴我走过青春的一个软件 35刀 太贵了一点&lt;br>
现在是2023年了，他依旧是功能单薄，该有的没有，甚至比不上很多人尬吹的notepad next&lt;/p>
&lt;h3 id="bowpad">BowPad
&lt;/h3>&lt;h4 id="初遇">初遇
&lt;/h4>&lt;p>免费开源绿色单文件，启动快（配置一次后 同目录 会多出来几个配置文件） 不支持非win平台&lt;br>
有一个小问题就是 默认 会给一堆代码 加上红色波浪线 （去掉 右上角的 Spell Checker 就好了）
默认英文，官网有中文语言包，需要你可以连接的上github ，在bowpad主面板点 other ，然后在 Languages other-language 等更新列表后 在选择中文，提示重启后重启一下就OK了。&lt;br>
BowPad 作为一个文档编辑器来说 非常不错&lt;/p>
&lt;h4 id="优点-1">优点
&lt;/h4>&lt;ul>
&lt;li>免费 开源&lt;/li>
&lt;li>体积小 程序5m 语言文件1.3m&lt;/li>
&lt;li>启动快 秒开&lt;/li>
&lt;li>支持大文件打开 但是打开速度没有UltraEdit好&lt;/li>
&lt;li>支持暗黑主题 但是标题栏 other里面 下拉框还是白色的&lt;/li>
&lt;li>支持简单自动完成，更复杂的没研究过&lt;/li>
&lt;li>支持多数语言的代码高亮&lt;/li>
&lt;/ul>
&lt;h4 id="缺点">缺点
&lt;/h4>&lt;ul>
&lt;li>标题栏 工具栏 有点占用屏幕空间 （2023-4发现 可以隐藏不显示 点最顶部的 倒三角 菜单）&lt;/li>
&lt;li>不够强大吧，毕竟比不上vscode 哈哈&lt;/li>
&lt;li>这么强大的编辑器，没有makedown预览 遗憾&lt;/li>
&lt;li>只有win 没有其他平台&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>2023-04-11 发现 bowpad在打开 挂载的网络文件的时候 会经常发生假死 打开rcone挂载的文件暂时没有问题&lt;/p>&lt;/blockquote>
&lt;h3 id="cudatext">cudatext
&lt;/h3>&lt;p>也不错，秒开，支持代码大纲。&lt;/p>
&lt;h4 id="中文">中文
&lt;/h4>&lt;p>&lt;a class="link" href="https://sourceforge.net/projects/cudatext/files/addons/translations/translation.zh_CN.zip/download" target="_blank" rel="noopener"
>https://sourceforge.net/projects/cudatext/files/addons/translations/translation.zh_CN.zip/download&lt;/a> 解压到 data\lang ，重启软件，然后设置语言&lt;/p>
&lt;h4 id="高亮选中的文本">高亮选中的文本
&lt;/h4>&lt;ul>
&lt;li>没找到配置 开关 ，或许没有这个功能&lt;/li>
&lt;/ul>
&lt;h4 id="发现的问题-1">发现的问题
&lt;/h4>&lt;ul>
&lt;li>右侧 代码大纲延迟比较大，有时候会有有2-4秒的延迟 win和linux下都有这个问题&lt;/li>
&lt;li>双击的选中判断有一些和notepad++ 不太一样，无法区分中文标点符号 很怪的感觉 。&lt;/li>
&lt;li>整体感受，漂亮，速度可以，使用感觉 各种别扭&lt;/li>
&lt;li>尚不支持lsp，官网说在计划中&lt;/li>
&lt;/ul>
&lt;h3 id="scite">SciTE
&lt;/h3>&lt;p>这个只能算是一个内核引擎，配置极度复杂，没有过多深入使用。notepad++ 也是用的它&lt;/p>
&lt;h3 id="textadept">textadept
&lt;/h3>&lt;p>免费，体积并不小。 一开始使用打开中文文档乱码 没找配置项。而后发现新版没问题，尝试中.&lt;/p>
&lt;h4 id="目前的使用感受">目前的使用感受
&lt;/h4>&lt;ul>
&lt;li>启动速度可以&lt;/li>
&lt;li>内存占用很小&lt;/li>
&lt;li>用右键菜单 多次打开同一个文件 会给你弄N个窗口出来，或许可以配置，还在研究&lt;/li>
&lt;li>配置项是lua文件，需要自己搞定&lt;/li>
&lt;li>支持lsp&lt;/li>
&lt;li>这个软件 几乎可以说，你想要的功能 基本没有内置，但是可以扩充&lt;/li>
&lt;li>官网 有一些常用的模块 &lt;a class="link" href="https://github.com/orbitalquark/textadept/wiki" target="_blank" rel="noopener"
>https://github.com/orbitalquark/textadept/wiki&lt;/a>&lt;/li>
&lt;li>首选项是lua 需要自己写&lt;/li>
&lt;li>linux下速度不错，但是ctrl+o 依旧不是linux原生，搜索文件不容易&lt;/li>
&lt;/ul>
&lt;h3 id="akelpad">AkelPad
&lt;/h3>&lt;p>体积小，启动快，没有中文语言包，可以多标签 单窗口 多窗口 等几个模式。 有cudatext的所有问题，并且不能自动识别文件代码高亮。需要手动配置，没找配置项。
替代系统自带记事本， 不合格。&lt;/p>
&lt;h3 id="emacs">emacs
&lt;/h3>&lt;p>不得不说的软件，看你自己有没有时间折腾适应吧。&lt;/p>
&lt;h3 id="geany">geany
&lt;/h3>&lt;p>很早之前有朋友推荐过，跨平台，体积100M左右，启动速度可以。 代码高亮 在yaml 和 md 文件中接近无。 没有选中高亮。（可用 shift+ctrl+m 手动）&lt;br>
另外插件 Miscellanous Plugins for Geany（win下好像没有这个插件） 后来发现：auto-make 这个插件可以实现&lt;br>
默认配色方案别扭，但是有内置 notepad++的方案，启动速度也非常好.&lt;/p>
&lt;h4 id="发现的的问题">发现的的问题
&lt;/h4>&lt;ul>
&lt;li>winrdp下 屏幕 取色器 吸管 会丢失光标 一直到退出&lt;/li>
&lt;li>win下编辑 win资源管理器挂载的webdav的话 会无法保存，rclone挂载的没问题&lt;/li>
&lt;li>编辑rclone挂载的文件，会一直 提示 磁盘文件比当前编辑的新，很烦，2023年弃用了&lt;/li>
&lt;li>linux下 ctrl+c 有问题&lt;/li>
&lt;/ul>
&lt;h3 id="hbuilder">hbuilder
&lt;/h3>&lt;p>虽然作为一个ide来说bug数量可以入选吉尼斯了（有一些不是hb的bug可能是uniapp或者vue的），但是作为一个单纯文本编辑器的话，还是可以使用，。尤其md编辑功能其实很用心了。 做ide就算了，这玩意真的太坑。 不装插件的话体积也不大 几十M，装了插件话 哈哈 几个G 几十万个文件 。。。另外win+mac 没有linux版本，wine后有很多问题。&lt;/p>
&lt;h2 id="win右键菜单">win右键菜单
&lt;/h2>&lt;p>最后附上&lt;/p>
&lt;h3 id="添加右键菜单">添加右键菜单
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Windows Registry Editor Version 5.00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[HKEY_CLASSES_ROOT\*\shell\Edit with Geany]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;Icon&amp;#34;=&amp;#34;D:\\soft\\geany\\bin\\geany.exe&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[HKEY_CLASSES_ROOT\*\shell\Edit with Geany\Command]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@=&amp;#34;D:\\soft\\geany\\bin\\geany.exe \&amp;#34;%1\&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="删除右键菜单">删除右键菜单
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Windows Registry Editor Version 5.00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[-HKEY_CLASSES_ROOT\*\shell\Edit with Geany]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="我的选择过程">我的选择过程
&lt;/h2>&lt;p>选择自己喜欢的吧，我试用一圈后感觉EverEdit 几乎可以无痛平替notepad++，158元 一年可以激活8次总不至于一天重装8次电脑。但是他有一些文件关联的小问题，所以不想付费。&lt;br>
2020年继续用notepad++ 旧版本 不更新 ，折腾了一个寂寞 &lt;br>
2020年后开始
换到 geany 和 bowpad 中间也在使用cudatext
发现 bowpad在打开 挂载的网络文件的时候 会发生假死&lt;br>
geany 发现编辑网络文件的时候，要么出错，要么一直让重载&lt;br>
又开始尝试 notepad next&lt;/p>
&lt;h2 id="2023-4-13">2023-4-13
&lt;/h2>&lt;p>我依旧没有找到 真的符合自己要求的 副文本编辑器，
VSCodium 优点很明显 和 vscode完全一样的配置和使用习惯，确定也很明显 就是启动慢内存占用大 &lt;br>
使用过过一段时间 的 notepadnext gedit 和 sublime 。
随后还是选了 VSCodium ,其实 code-insiders 也是可以的。
或者 vscode + vscode-insiders 或者 vscodium + vscodium-insiders 的组合。在插件不多，不打开大项目文件的情况下，速度虽然比sublime差了一些，但是也勉强可以接受。&lt;/p>
&lt;p>vscode + vscode-insiders 可以同步两边设置，支持github copilot
vscodium + vscodium-insiders 完全开源没有同步功能，也没有copilot插件&lt;/p>
&lt;p>直接编辑文件 命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">code ~/.config/awesome/rc.lua
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">code-insiders ~/.config/awesome/rc.lua
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">codium ~/.config/awesome/rc.lua
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">codium-insiders ~/.config/awesome/rc.lua
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>archlinux安装xrdp，可以和方便win和ipad远程控 i3 kde dwm</title><link>https://dev.leiyanhui.com/c/arch-install-xrdp/</link><pubDate>Wed, 14 Dec 2022 13:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/arch-install-xrdp/</guid><description>&lt;h1 id="arch安装xrdp方便win和ipad远程控">arch安装xrdp，方便win和ipad远程控
&lt;/h1>&lt;p>1、先安装 yay &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-install-yay/" target="_blank" rel="noopener"
>arch安装yay最简单的办法 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>2、安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -S xrdp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S xorgxrdp ＃用ｘｏｒｇ做后端，推荐安装，也可以不用
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>xorgxrdp 和 xorgxrdp-glamor xorgxrdp-nvidia 选一个，&lt;br>
官网wifi的一句话&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#将 allowed_users=anybody 添加到 /etc/X11/Xwrapper.config 以允许任何人启动 X 服务器。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo nano /etc/X11/Xwrapper.config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>显卡3D 加速 用这两个就不用 xorgxrdp了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#intel xorgxrdp-glamor 和 Nvidia GPU 安装 xorgxrdp-nvidia
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S xorgxrdp-glamor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#或者
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S xorgxrdp-nvidia
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>声音，需要用pulseaudio&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -S pulseaudio
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S pulseaudio-module-xrdp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注意 &lt;code>pulseaudio-module-xrdp&lt;/code> 依赖 sbc 和 bluez，如果没有安装的话，编译失败后 看一下原因&lt;/p>
&lt;p>提示&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Remember to pass the environment &amp;#34;PULSE_SCRIPT=/etc/xrdp/pulse/default.pa&amp;#34; to pulseaudio to make this module work
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>新版会自动添加 不用额外处理&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo nano /etc/xrdp/sesman.ini
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#添加
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[SessionVariables]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PULSE_SCRIPT=/etc/xrdp/pulse/default.pa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>3、配置xrdp桌面，这步很重要 很重要 ,不然登录是空白&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cp /etc/X11/xinit/xinitrc ~/.xinitrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano ~/.xinitrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#注释掉下面几行 这几乎是启动一个时钟 几个 xterm，实际上会导致xrdp无法登录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#twm &amp;amp;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#xclock -geometry 50x50-1+1 &amp;amp;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#xterm -geometry 80x50+494+51 &amp;amp;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#xterm -geometry 80x20+494-0 &amp;amp;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#exec xterm -geometry 80x66+0+0 -name login
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>添加内容&lt;br>
声音部分的处理&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 声音部分可能需要 有的桌面环境不需要
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PULSE_SCRIPT=/etc/xrdp/pulse/default.pa pulseaudio --daemonize=no
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pulseaudio &amp;amp;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>桌面环境&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 添加 注意我的的 kde plasma 其他桌面自行处理&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">DESKTOP_SESSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">plasma&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">plasma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dbus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">session&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">needed&lt;/span> &lt;span class="n">startplasma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x11&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果是i3的话，直接exec就可以 dwm类似&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">exec i3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4、启动和配置开机自动启动&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo systemctl enable xrdp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start xrdp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>结束&lt;/p>
&lt;h2 id="其他问题">其他问题：
&lt;/h2>&lt;p>从xrdp里面关机或者重启 会导致xrdp黑屏无法登录，但是不会关机。&lt;/p>
&lt;p>解决方法 就是去ssh 处理，如果黑屏后需要重新登录xrdp就重启一下xrdp就好了 systemctl restart xrdp&lt;/p>
&lt;p>没声音的问题，基本上 pulseaudio 没启动，或者远程桌面客户端这边 没设置声音播放&lt;/p>
&lt;h2 id="感受">感受
&lt;/h2>&lt;p>单纯文字办公 和写代码的话，还可以，如果要播放视频，视频可以很流畅，但是声音卡会卡。&lt;/p>
&lt;p>xvnc 要比 xorg 流畅很多，声音也要比xorg流畅一点点&lt;/p>
&lt;p>中间尝试过自己搭建 rustdesk 中转 ，效果也一般般。哪怕局域网内 rustdesk 有时候 也会糊，但是声音要比xrdp流畅一些。&lt;/p>
&lt;p>另外 ibus 也有一点问题，建议用 fcitx5&lt;/p></description></item><item><title>输入法的选择，win linux macos 安卓 ios</title><link>https://dev.leiyanhui.com/c/inputexe/</link><pubDate>Sat, 22 Oct 2022 06:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/inputexe/</guid><description>&lt;h1 id="输入法的选择">输入法的选择
&lt;/h1>&lt;h2 id="输入法的选择-1">输入法的选择
&lt;/h2>&lt;h2 id="先说结论">先说结论
&lt;/h2>&lt;blockquote>
&lt;p>rime为主，独立帐号的百度输入法 辅助&lt;/p>&lt;/blockquote>
&lt;h2 id="本文最后一次更新2022年11月29日">本文最后一次更新2022年11月29日。
&lt;/h2>&lt;p>win linux 已经 全部切换到 rime。安卓有客户端，但是研究过怎么用，我安卓是备用电话机。。
ios 暂时还是用的百度输入法。 美区有&lt;code>iRime&lt;/code> (没开源国区下架了)1.99刀，可以用。
linux下偶尔也用&lt;code>fcitx-googlepinyin&lt;/code> 比较轻量&lt;/p>
&lt;p>优点:&lt;/p>
&lt;ul>
&lt;li>流畅 非常非常流畅，哪怕momo7w这种N年前都百元平板上都可以流畅输入&lt;/li>
&lt;li>无隐私问题&lt;/li>
&lt;li>字库可以自己git 或者 坚果云 备份&lt;/li>
&lt;li>除了ios之外所有平台可用&lt;/li>
&lt;li>皮肤可以自定义 可以自行配置&lt;/li>
&lt;li>扩展性很强&lt;/li>
&lt;li>开源 快平台&lt;/li>
&lt;li>标准词库格式&lt;/li>
&lt;/ul>
&lt;p>缺点：&lt;/p>
&lt;ul>
&lt;li>新人初次上手难度大 需要设置的地方多 部分配置需要自行修改配置文件&lt;/li>
&lt;li>没有云输入，也就是新鲜热词词库是没有的&lt;/li>
&lt;li>linux不支持&lt;code>fcitx-cloudpinyin&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>官网地址：https://rime.im 下载链接：&lt;a class="link" href="https://rime.im/download/" target="_blank" rel="noopener"
>https://rime.im/download/&lt;/a>
win下叫做 小狼毫 linux下可选 fcitx-rime(第三方) 或者 ibus-rime
===========以下是旧文章================&lt;/p>
&lt;h2 id="再说原因">再说原因
&lt;/h2>&lt;blockquote>
&lt;p>win mac ios 安卓 部分Linux桌面版可以用 词库过得去 ios下基本完美 语音识别准确率过得去&lt;/p>&lt;/blockquote>
&lt;h2 id="不选择其他的原因">不选择其他的原因
&lt;/h2>&lt;blockquote>
&lt;p>· QQ拼音 不支持非Linux 和mac 不考虑 · 搜狗拼音且不说广告【百度拼音可以说没有】，ios下频繁消失的问题频繁出现 · 讯飞 mac和linux支持不好 · 搜狗 另外在多数linux发行版上面没有词库同步&lt;/p>&lt;/blockquote>
&lt;p>#再说缺点&lt;/p>
&lt;blockquote>
&lt;p>· 李彦宏家的 这货&amp;hellip; 隐私问题 独立账号登陆吧 · 设置同步 好像有逻辑问题，比如候选词9个，就不行 · 有时候按错键莫名其妙插入emjo表情，在一些在线编辑器就成了上传图片 · 没有错键识别纠正，比如 jiuzheng 我如果按成kiuzheng 不会自动纠正&lt;/p>&lt;/blockquote></description></item><item><title>maccms 修改采集标题栏，让浏览器标签可以显示采集进度</title><link>https://dev.leiyanhui.com/c/70/</link><pubDate>Sun, 09 Oct 2022 00:00:00 +0000</pubDate><guid>https://dev.leiyanhui.com/c/70/</guid><description>&lt;h1 id="maccms-修改采集标题栏让浏览器标签可以显示采集进度">maccms 修改采集标题栏，让浏览器标签可以显示采集进度
&lt;/h1>&lt;p>/application/admin/controller/Collect.php&lt;/p>
&lt;p>public function vod($param)&lt;/p>
&lt;p>函数 最后一段 280行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">model(&amp;#39;Collect&amp;#39;)-&amp;gt;vod_data($param,$res );
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在这行代码之前添加&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> mac_echo(&amp;#39;&amp;lt;title&amp;gt;&amp;#39;.$param[&amp;#39;page&amp;#39;].&amp;#39;/&amp;#39;.$res[&amp;#39;page&amp;#39;][&amp;#39;pagecount&amp;#39;].&amp;#39;&amp;lt;/title&amp;gt;&amp;#39;);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>已经反馈给作者，作者在新版已经采纳&lt;/p></description></item><item><title>win11 下 设置自定义分辨率 方便远程适配的方法 intel核显</title><link>https://dev.leiyanhui.com/c/62/</link><pubDate>Sun, 09 Oct 2022 00:00:00 +0000</pubDate><guid>https://dev.leiyanhui.com/c/62/</guid><description>&lt;h1 id="win11-下-设置自定义分辨率-方便远程适配的方法-intel核显">win11 下 设置自定义分辨率 方便远程适配的方法 intel核显
&lt;/h1>&lt;p>windows远程桌面 可以通过编辑 rdp文件的方法 随意设置分辨率 并且也支持缩放，不存在这个文件。但是在如下使用场景，比如 WindowsHello 某些3D加速程序，，因为Windows 远程桌面 某些功能不支持 所以需要使用第三方远程桌面软件 比如 todesk 向日葵等。但是全屏的话 和 控制机之间交互不方便，不全品的话 分辨率 太低 用起来别扭。 &lt;a class="link" href="https://www.intel.cn/content/www/cn/zh/download-center/home.html" target="_blank" rel="noopener"
>https://www.intel.cn/content/www/cn/zh/download-center/home.html&lt;/a> 搜索显卡型号 6代以上 直接 下载 &lt;a class="link" href="https://www.intel.cn/content/www/cn/zh/download/19344/intel-graphics-windows-dch-drivers.html?wapkw=%E8%8B%B1%E7%89%B9%E5%B0%94%20uhd%20630%20%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8" target="_blank" rel="noopener"
>https://www.intel.cn/content/www/cn/zh/download/19344/intel-graphics-windows-dch-drivers.html?wapkw=%E8%8B%B1%E7%89%B9%E5%B0%94%20uhd%20630%20%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8&lt;/a> 安装完成后重启电脑，开始菜单 找到 intel显卡控制中心，找到左侧 显示屏的图标，然后 右侧点击添加分辨率 用截图工具先在 todesk远程窗口 查看一下窗口大小 大概是 1920x1015 添加分辨率&lt;br>
定时模式 cvt 宽度1920 高度1000 刷新率60 各行扫码 打开 欠扫描备份率0 试过 1920x1015 不行，暂时就用1920x1000了 其他分辨率 自己 多测试一下， 方法 就是 宽高先用 就近的目标分辨率，调试后 在 从附近的数组 凑整数 后发现 直接从todesk调低分辨率 更简单 平时还是用 rdp协议 所以，删除此文&lt;/p></description></item><item><title>非macos系统 浏览器的选择 除了safari 哪个浏览器是我们的主浏览器</title><link>https://dev.leiyanhui.com/c/59/</link><pubDate>Sun, 09 Oct 2022 00:00:00 +0000</pubDate><guid>https://dev.leiyanhui.com/c/59/</guid><description>&lt;h1 id="非macos系统-浏览器的选择-除了safari-哪个浏览器是我们的主浏览器">非macos系统 浏览器的选择 除了safari 哪个浏览器是我们的主浏览器？
&lt;/h1>&lt;p>最简单的 莫过于 在win下 用edge/chrome 在mac ios下 用safari+edge/chrome 但是书签 历时记录(跨屏浏览)和用户密码的同步 一直是一个麻烦。 safari 在ios 和 mac下的深度同步，确实爱不释手。但是 win和linux下 无法使用。 但是 icloud最近的更新支持了密码的 同步（需要hello id 可以管理，但是可以单向同步） 书签同步却不支持 edge， 其实 书签的问题 好解决，无非就是手动导入导出，但是密码的问题 缺很麻烦。 iCloud 密码 • 在“iCloud 密码” App 中查看和管理 Windows PC 上的密码。 • 在 Chrome 或 Edge 中使用 iCloud 密码扩展保存密码并在设备和 PC 之间同步。 iCloud 邮件、通讯录、日历和书签 • 使邮件、通讯录和日历在您的所有设备（包括 PC）之间保持最新。 • 与其他 iCloud 用户共享日历。 • Internet Explorer、Firefox 和 Google Chrome 书签自动在 Safari 浏览器中保持最新。&lt;/p>
&lt;h2 id="edge">edge
&lt;/h2>&lt;h3 id="优点">优点
&lt;/h3>&lt;blockquote>
&lt;ul>
&lt;li>系统自带&lt;/li>
&lt;li>免翻墙&lt;/li>
&lt;li>没国产那些浏览器的广告 和隐私问题&lt;/li>
&lt;li>可以 从mac下同步密码到这边&lt;/li>
&lt;/ul>&lt;/blockquote>
&lt;h3 id="缺点">缺点
&lt;/h3>&lt;blockquote>
&lt;ul>
&lt;li>无法和safari 书签同步&lt;/li>
&lt;li>偶尔会出现无法登录 挂全局代理也不行 重启 都无效 &amp;gt; 经过测试，可以解决 &lt;a class="link" href="https://dev.leiyanhui.com/c/60" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/60&lt;/a>&lt;/li>
&lt;/ul>&lt;/blockquote>
&lt;h2 id="chrome">chrome
&lt;/h2>&lt;blockquote>
&lt;ul>
&lt;li>没国产那些浏览器的广告 和隐私问题&lt;/li>
&lt;li>其他不用说了&lt;/li>
&lt;/ul>&lt;/blockquote>
&lt;h3 id="缺点-1">缺点
&lt;/h3>&lt;blockquote>
&lt;ul>
&lt;li>唯一一个 也是最致命的！ 需要挂梯子同步&lt;/li>
&lt;/ul>&lt;/blockquote>
&lt;h2 id="我的最终选择">我的最终选择
&lt;/h2>&lt;p>firefox 因为完全开源，多数linux系统不需要第三方库 就可以使用&lt;/p>
&lt;p>不需要更新系统到最新版 就可以登录同步（edge有这个问题）&lt;/p>
&lt;p>linux 下很容易打开硬件加速&lt;/p></description></item><item><title>deepin 安装 vscode server 服务器版 Code Server 并配置ssl加密 以及nginx反代</title><link>https://dev.leiyanhui.com/c/72/</link><pubDate>Sat, 10 Sep 2022 00:00:00 +0000</pubDate><guid>https://dev.leiyanhui.com/c/72/</guid><description>&lt;h1 id="deepin-安装-vscode-server-服务器版-code-server-并配置ssl加密-以及nginx反代">deepin 安装 vscode server 服务器版 Code Server 并配置ssl加密 以及nginx反代
&lt;/h1>&lt;p>&lt;a class="link" href="https://github.com/coder/code-server/releases" target="_blank" rel="noopener"
>https://github.com/coder/code-server/releases&lt;/a>&lt;/p>
&lt;p>加速 下载 &lt;a class="link" href="https://gh.api.99988866.xyz/https://github.com/coder/code-server/releases/download/v4.5.0/code-server" target="_blank" rel="noopener"
>https://gh.api.99988866.xyz/https://github.com/coder/code-server/releases/download/v4.5.0/code-server&lt;/a>_4.5.0_amd64.deb&lt;/p>
&lt;p>双击安装 或者dkpg安装 然后启动 systemctl &amp;ndash;user start code-server systemctl &amp;ndash;user enable code-server vi ~/.config/code-server/config.yaml 修改密码 systemctl &amp;ndash;user restart code-server 内容：&lt;/p>
&lt;pre>&lt;code> location / { proxy_pass http://127.0.0.1:8080; proxy_http_version 1.1;
proxy_redirect off;
proxy_set_header Host http://code.leiyanhui.com;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header REMOTE-HOST $remote_addr;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection &amp;quot;Upgrade&amp;quot;;
proxy_connect_timeout 60; proxy_send_timeout 90;
proxy_read_timeout 90;
proxy_buffer_size 4k;
proxy_buffers 4 32k;
proxy_busy_buffers_size 64k;
proxy_temp_file_write_size 64k; a
dd_header X-Cache $upstream_cache_status;
add_header Cache-Control no-cache;
}
&lt;/code>&lt;/pre>
&lt;p>然后试着用http房屋 没问题了 了 再正常配置 ssl 就可以了 配置 开机自动启动 &lt;a class="link" href="https://dev.leiyanhui.com/c/73" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/73&lt;/a>&lt;/p></description></item><item><title> docker运行桌面linux系统，unraid</title><link>https://dev.leiyanhui.com/c/docker-linux-desktop/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/docker-linux-desktop/</guid><description>&lt;h1 id="本文停止更新">本文停止更新，
&lt;/h1>&lt;p>新地址：&lt;a class="link" href="https://dev.leiyanhui.com/docker/docker-linux-desktop/" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/docker/docker-linux-desktop/&lt;/a>&lt;/p>
&lt;h1 id="docker运行桌面linux系统unraid">docker运行桌面linux系统，unraid
&lt;/h1>&lt;p>一开始 是打算自己弄的，后来发现还是挺麻烦的。。。&lt;/p>
&lt;p>于是看到这个 &lt;a class="link" href="https://hub.docker.com/r/linuxserver/webtop" target="_blank" rel="noopener"
>linuxserver/webtop - Docker Image | Docker Hub&lt;/a>&lt;/p>
&lt;p>docker原则上一个容器只允许一个服务。所以运行一个完整桌面系统，理论上符合原则，但是实际上可行，而且非常方便和舒服。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://hub.docker.com/r/linuxserver/webtop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>支持x64 和arm 包含 alpine fedora arch ubuntu，桌面系统有 xfce i3 kde mate openbox icewm 2022-10-1 查看 6天之前刚刚更新&lt;/p>
&lt;p>远程自带的web-vnc（Web Desktop GUI） xrdp&lt;/p>
&lt;p>先试试 arch-kde&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker pull linuxserver/webtop:arch-kde
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我的宿主机 是unraid ，提前建立文件夹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkdir -p /mnt/disk1/appdata/webtop/config_data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker run -d&lt;br>
--name=arch&lt;br>
--security-opt seccomp=unconfined &lt;code>#optional&lt;/code>&lt;br>
-e PUID=1000&lt;br>
-e PGID=1000&lt;br>
-e TZ=Europe/London&lt;br>
-e SUBFOLDER=/ &lt;code>#optional&lt;/code>&lt;br>
-e KEYBOARD=en-us-qwerty &lt;code>#optional&lt;/code>&lt;br>
-p 10100:3000&lt;br>
-p 10101:3389&lt;br>
-p 10102:22&lt;br>
-v /mnt/disk1/appdata/webtop/config_data:/config&lt;br>
-v /mnt/disk1/appdata/webtop/docker.sock:/var/run/docker.sock &lt;code>#optional&lt;/code>&lt;br>
--device /dev/dri:/dev/dri &lt;code>#optional&lt;/code>&lt;br>
--restart unless-stopped&lt;br>
linuxserver/webtop:arch-kde&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">自带的用户名是 abc 密码也是abc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">可以进去桌面修改密码，或者 在宿主机
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker exec -it arch passwd abc&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">其他选项
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>#自动启动图形界面 -e GUIAUTOSTART=true #自动启动登录密码 -e PASSWORD=yourpassword #禁止 浏览器界面自动登录 -e AUTO_LOGIN=false&lt;/p>
&lt;h2 id="这个是为了部分ui的兼容性-必须加上">这个是为了部分ui的兼容性 必须加上
&lt;/h2>&lt;p>--security-opt seccomp=unconfined&lt;/p>
&lt;h2 id="硬件加速-只有里面的ubuntu镜像支持">硬件加速 只有里面的ubuntu镜像支持
&lt;/h2>&lt;p>--device=/dev/dri:/dev/dri&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">鉴于硬件加速只有ubuntu支持 和arch的熟悉度，最后 我决定也尝试一下ubuntu kde
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker pull linuxserver/webtop:ubuntu-kde mkdir -p /mnt/disk1/appdata/webtop-ubuntu-kde/config_data&lt;/p>
&lt;p>docker run -d&lt;br>
--name=ubuntu&lt;br>
--security-opt seccomp=unconfined &lt;code>#optional&lt;/code>&lt;br>
-e PUID=1000&lt;br>
-e PGID=1000&lt;br>
-e TZ=Europe/London&lt;br>
-e SUBFOLDER=/ &lt;code>#optional&lt;/code>&lt;br>
-e KEYBOARD=en-us-qwerty &lt;code>#optional&lt;/code>&lt;br>
-p 10100:3000&lt;br>
-p 10101:3389&lt;br>
-p 10102:22&lt;br>
-v /mnt/disk1/appdata/webtop-ubuntu-kde/config_data:/config&lt;br>
-v /mnt/disk1/appdata/webtop-ubuntu-kde/docker.sock:/var/run/docker.sock &lt;code>#optional&lt;/code>&lt;br>
--device /dev/dri:/dev/dri &lt;code>#optional&lt;/code>&lt;br>
-e FILE__PASSWORD=/mnt/disk1/appdata/webtop-ubuntu-kde/mysecretpassword&lt;br>
-e AUTO_LOGIN=false&lt;br>
--restart unless-stopped&lt;br>
linuxserver/webtop:ubuntu-kde&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">进去后 换源，更新系统，安装中文字体
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title> golang json字符串和map转化</title><link>https://dev.leiyanhui.com/c/golang-json-map/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/golang-json-map/</guid><description>&lt;h1 id="golang-json字符串和map转化">golang json字符串和map转化
&lt;/h1>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">json&lt;/span> &lt;span class="err">转化为&lt;/span>&lt;span class="n">map&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">JsonToMap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{}&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">tempMap&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Unmarshal&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">tempMap&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">tempMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">json&lt;/span> &lt;span class="n">arr&lt;/span> &lt;span class="err">转化为&lt;/span>&lt;span class="n">map&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">JsonArrToMap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{}&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tempMap&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Unmarshal&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">tempMap&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">tempMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用举例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">json_row := redis_get(redis_key) //
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> get_user_token := JsonArrToMap(json_row)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if user_token == get_user_token[0][&amp;#34;user_token&amp;#34;] {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //fmt.Println(&amp;#34;redis 获取到&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title> hello-world</title><link>https://dev.leiyanhui.com/c/hello-world/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/hello-world/</guid><description>&lt;h1 id="hello-world">hello-world
&lt;/h1>&lt;h2 id="抛弃typecho转换到wordpress">抛弃typecho转换到wordpress
&lt;/h2>&lt;p>wordpress -&amp;gt; typecho -&amp;gt; hexo -&amp;gt; typecho -&amp;gt; wordpress -&amp;gt; php makedown -&amp;gt; vuepress&lt;/p>
&lt;h2 id="关于typecho">关于typecho
&lt;/h2>&lt;p>typecho 不可否认 是一个非常轻量 简单 且优秀的开源软件 但是 用户基数太少，遇到一些小问题的时候，往往没有相关资料支持，需要自己找原因。&lt;/p>
&lt;h2 id="关于typecho比wordpress-优秀的地方">关于typecho比wordpress 优秀的地方
&lt;/h2>&lt;blockquote>
&lt;p>· 原生支持sqlite 更适合更简单的环境 · 体积更小 适合迁移 · 目录名可以任意重命名 之需要修改配置文件即可 · 后台速度更快 · 整体占用资源更低&lt;/p>&lt;/blockquote>
&lt;p>typecho 有它自己的适应场景&lt;/p>
&lt;h2 id="本站再次迁回wordpress的原因">本站再次迁回wordpress的原因
&lt;/h2>&lt;p>个人博客页经历了 wordpress -&amp;gt; typecho -&amp;gt; hexo -&amp;gt; typecho 个人博客其实无非看重的是 前台界面自由 撰写方便。 除非运行环境很恶劣，否则还是老老实实用wordpress的好 #本人维护的typecho1.2分支 将停止维护&lt;/p>
&lt;p>typecho 新版对sqlite的支持有一些bug，模板也经常出现莫名其妙无法打开的情况，排查起来非常麻烦无趣，小bug太多。&lt;/p>
&lt;p>换到wordpress了，但是wordpress 有域名绑定的问题&lt;/p>
&lt;p>在非80端口环境下使用，再套cdn 会导致多次重定向 导致后台无法登录&lt;/p>
&lt;p>虽然修改源码可以解决。最终还是弃用了。wordpress 代码庞大 还是不太适合我。&lt;/p>
&lt;p>目前换到 自己开发的 makedown转html &amp;mdash; 2022年9月20日&lt;/p>
&lt;p>数据导出后使用了 &lt;a class="link" href="https://github.com/palaniraja/blog2md" target="_blank" rel="noopener"
>https://github.com/palaniraja/blog2md&lt;/a> 来转换&lt;/p>
&lt;p>2022-10-7&lt;/p>
&lt;p>重复轮子太累 暂时使用 hugo 了&lt;/p></description></item><item><title> 在docker跑macos 可能吗</title><link>https://dev.leiyanhui.com/c/docker-exec-macos/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/docker-exec-macos/</guid><description>&lt;h1 id="在docker跑macos-可能吗">在docker跑macos 可能吗
&lt;/h1>&lt;h2 id="在docker跑macos-可能吗-1">在docker跑macos 可能吗
&lt;/h2>&lt;p>原理 docker 中运行kvm 而后 opencore 后 macos 由于是半虚拟化 应该还过得去&lt;/p>
&lt;p>尝试一下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">http://github.com/sickcodes/Docker-OSX
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker pull sickcodes/docker-osx:latest&lt;/p>
&lt;p>docker run -it&lt;br>
--name=macos&lt;br>
--device /dev/kvm&lt;br>
--device /dev/snd&lt;br>
-p 50922:10022&lt;br>
-v /tmp/.X11-unix:/tmp/.X11-unix&lt;br>
-e &amp;ldquo;DISPLAY=${DISPLAY:-:0.0}&amp;rdquo;&lt;br>
sickcodes/docker-osx:latest&lt;/p>
&lt;h2 id="turn-on-ssh-after-youve-installed-os-x-in-the-sharing-settings">turn on SSH after you&amp;rsquo;ve installed OS X in the &amp;ldquo;Sharing&amp;rdquo; settings.
&lt;/h2>&lt;p>ssh user@localhost -p 50922&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>alpine/linux 下快速搭建可以随意整体迁移的宝塔面板</title><link>https://dev.leiyanhui.com/c/docker-baota/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/docker-baota/</guid><description>&lt;h1 id="alpinelinux-下快速搭建可以随意整体迁移的宝塔面板">alpine/linux 下快速搭建可以随意整体迁移的宝塔面板
&lt;/h1>&lt;p>这里以alpine为例，安装后占用50M左右硬盘的一个完整linux系统&lt;/p>
&lt;p>下载iso 安装 &lt;a class="link" href="https://dl-cdn.alpinelinux.org/alpine/v3.16/releases/x86" target="_blank" rel="noopener"
>https://dl-cdn.alpinelinux.org/alpine/v3.16/releases/x86&lt;/a>_64/alpine-virt-3.16.2-x86_64.iso&lt;/p>
&lt;p>安装过程使用国内neusoft镜像,用的虚拟机镜像联网安装，安装后就是最新版&lt;/p>
&lt;p>重启后登录：vi /etc/apk/repositories 去掉稳定版的community注释&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">apk add docker #安装docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rc-update add docker boot #开机自动启动
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service docker start #启动
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启一下，启动过程中可以看到dhcp的ip，启动后 ip a 也可以看到，路由器里面dhcp绑定一下ip。&lt;/p>
&lt;p>ssh登录 修改docker源 文件不存在 会自动新建&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vi /etc/docker/daemon.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>{ &amp;ldquo;registry-mirrors&amp;rdquo;: [ &amp;ldquo;&lt;a class="link" href="https://hub-mirror.c.163.com" target="_blank" rel="noopener"
>https://hub-mirror.c.163.com&lt;/a>&amp;rdquo;, &amp;ldquo;&lt;a class="link" href="https://ustc-edu-cn.mirror.aliyuncs.com" target="_blank" rel="noopener"
>https://ustc-edu-cn.mirror.aliyuncs.com&lt;/a>&amp;rdquo;, &amp;ldquo;&lt;a class="link" href="https://docker.mirrors.ustc.edu.cn" target="_blank" rel="noopener"
>https://docker.mirrors.ustc.edu.cn&lt;/a>&amp;rdquo; ] }&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">service&lt;/span> &lt;span class="n">docker&lt;/span> &lt;span class="n">restart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 然后虚拟机关机，整机备份&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">**&lt;/span>&lt;span class="err">容器的选择&lt;/span>&lt;span class="o">**&lt;/span>&lt;span class="err">，&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">宝塔支持&lt;/span> &lt;span class="err">是&lt;/span> &lt;span class="n">Centos7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Debian10&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="mf">20.04&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Centos8&lt;/span> &lt;span class="n">stream&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="mf">18.04&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="err">其它系统&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">这几个系统的最后支持时间&lt;/span> &lt;span class="n">centos7&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="n">debian10&lt;/span> &lt;span class="err">（&lt;/span>&lt;span class="mi">2019&lt;/span>&lt;span class="err">年&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="err">月发布也差不多&lt;/span>&lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="n">ubuntu20&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">04&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2025&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="mf">22.04&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">LTS&lt;/span> &lt;span class="err">安全更新至&lt;/span>&lt;span class="mi">2027&lt;/span>&lt;span class="err">年&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="n">debian11&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="mi">2026&lt;/span> &lt;span class="err">年&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="err">月）尽量选择前三个系统，&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="err">是因为在&lt;/span>&lt;span class="n">debian系下多数组件是编译安装的&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="err">是宝塔最近小&lt;/span>&lt;span class="n">bug非常多&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">centos下会好一些&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">安装&lt;/span>&lt;span class="n">docker&lt;/span> &lt;span class="n">centos&lt;/span> &lt;span class="err">和&lt;/span> &lt;span class="err">宝塔&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">pull&lt;/span> &lt;span class="n">centos&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">images&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 启动容器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 目录不映射出来，因为这里需要做一个全部都在docker的可迁移的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 先把端口考虑好，后续修改麻烦 宝塔面板的两个 80 和 443 mysql MongoDB Redis PgSQL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1122:22 算是备用的，另外需要预留几个golang用的端口 数字80开头的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">baota&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">8888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8888&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">180&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">1122&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">1443&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">13306&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3306&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">888&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">16379&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6379&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">27017&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">27017&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">27018&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">27018&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">27019&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">27019&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">28017&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">28017&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">5432&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5432&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">8180&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8199&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8180&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8199&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">privileged&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">true&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">restart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">always&lt;/span> &lt;span class="n">centos&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#开始安装宝塔&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">exec&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="n">baota&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#安装脚本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">yum&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">O&lt;/span> &lt;span class="n">install&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">install_6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">sh&lt;/span> &lt;span class="n">install&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="n">ed8484bec&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">登录宝塔面板&lt;/span> &lt;span class="err">修改面板入口地址&lt;/span> &lt;span class="err">安装&lt;/span> &lt;span class="n">nginx&lt;/span> &lt;span class="n">mysql5&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="n">php7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">redis7&lt;/span> &lt;span class="n">php&lt;/span> &lt;span class="n">alioss打开常用扩展&lt;/span>&lt;span class="err">，因为版本的原因，均为编译安装，速度非常慢，耐心等待，选&lt;/span>&lt;span class="n">centos7的话就没有这个问题&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">配置好&lt;/span>&lt;span class="n">dnspod&lt;/span> &lt;span class="err">的&lt;/span>&lt;span class="n">key&lt;/span> &lt;span class="err">方便续签域名证书&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">宝塔&lt;/span> &lt;span class="mf">7.9&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="err">的&lt;/span>&lt;span class="n">alioss&lt;/span> &lt;span class="err">有配置错误，经过测试又是一个小&lt;/span>&lt;span class="n">bug&lt;/span>&lt;span class="err">，导致它无论什么系统无法配置。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vi&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">panel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">aliossAS&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;access_key&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;XXXXX&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;secret_key&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;XXXX&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;bucket_name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;XXXX&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;bucket_domain&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;XXXX.oss-cn-qingdao.aliyuncs.com&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;backup_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/bt_backup/&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">可以正常用了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">下载我的开源项目&lt;/span>&lt;span class="n">webdavgo&lt;/span> &lt;span class="err">把&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">www目录映射出来到webdav&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#https://dev.leiyanhui.com/c/webdavgo/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">www&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wget&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">gitee&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">joyanhui&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">webdavgo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">webdav&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">chmod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">webdav&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#wget -c https://gitee.com/joyanhui/webdavgo/releases/download/1.1/webdavgo.json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">编辑配置文件&lt;/span> &lt;span class="err">关闭文件服务，&lt;/span>&lt;span class="n">webdav定位到&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">www&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim&lt;/span> &lt;span class="n">webdavgo&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;server_port&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8189&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;webdav_user_name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;admin&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;webdav_user_psw&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;12345&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;webdav_file_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;/www&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;list_server_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;list_file_path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">宝塔新建一个&lt;/span>&lt;span class="n">go项目&lt;/span> &lt;span class="err">站点&lt;/span> &lt;span class="err">端口输入上面的端口后，可执行文件&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">webdav&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">剩下的不在说明&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">这样&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">www&lt;/span> &lt;span class="err">可以在外网通过&lt;/span>&lt;span class="n">webdav访问&lt;/span> &lt;span class="err">测试完成后，修改&lt;/span>&lt;span class="n">server&lt;/span>\&lt;span class="n">_port端口为没有映射过的端口&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">nginx开启ssl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">同时在自己的域名控制面板里面&lt;/span> &lt;span class="err">添加几个指向本地的子域名，免得测试项目老修改&lt;/span>&lt;span class="n">hosts文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">leiyanhui&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="err">到&lt;/span>&lt;span class="mf">10.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">10.&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">leiyanhui&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="err">到&lt;/span>&lt;span class="mf">10.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">\&lt;span class="o">*.&lt;/span>&lt;span class="mf">10.&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">leiyanhui&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="err">到&lt;/span>&lt;span class="mf">10.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">127.&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">leiyanhui&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="err">到&lt;/span> &lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">\&lt;span class="o">*.&lt;/span>&lt;span class="mf">127.&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">leiyanhui&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="err">到&lt;/span>&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">配置&lt;/span>&lt;span class="n">docker里面的宝塔自动启动&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">在容器内新建文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vi&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wwwroot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 宝塔 在容器内自动启动&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bt&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">redis&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">php&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fpm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">74&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mongodb&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pgsql&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mysqld&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">memcached&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">crond&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">seelp&lt;/span> &lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mysqld&lt;/span> &lt;span class="n">stop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mysqld&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">redis&lt;/span> &lt;span class="n">stop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">redis&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">crond&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">推出容器，在宿主系统中添加开机启动项，这里以&lt;/span>&lt;span class="n">apline为例子&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vi&lt;/span> &lt;span class="n">bt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 添加内容 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">exec&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="n">baota&lt;/span> &lt;span class="n">sh&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wwwroot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">chmod&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="n">bt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">update&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">local&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">备份容器&lt;/span> &lt;span class="err">到&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">baota&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">baota&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">gzip&lt;/span> &lt;span class="n">baota&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#简化一下 事实证明没啥用 其实还是tar宝&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">baota&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="n">baota&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">这个压缩包迁移到其他主机上&lt;/span> &lt;span class="err">或&lt;/span> &lt;span class="err">阿里&lt;/span>&lt;span class="n">docker服务&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 导入到 镜像 baota:v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">import&lt;/span> &lt;span class="n">baota&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="n">baota&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker重启后&lt;/span> &lt;span class="err">要执行一次&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>alpine搭建smb共享</title><link>https://dev.leiyanhui.com/c/alpine-smb/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/alpine-smb/</guid><description>&lt;h1 id="alpine搭建smb共享">alpine搭建smb共享
&lt;/h1>&lt;p>在虚拟机中运行了一个 alpine 然后运行了docker宝塔 遇到一个问题 就是
使用sftp挂载文件到本地硬盘的时候，经常出现一些莫名其妙的权限问题SFTPDrive.exe&lt;/p>
&lt;p>这个软件 在win下也不是很稳定，经常莫名其妙卡死 所以 干脆还是 在虚拟机的 alpine下 共享 wwwroot目录出来 更省事一些&lt;/p>
&lt;p>参考 &lt;a class="link" href="https://wiki.alpinelinux.org/wiki/Setting" target="_blank" rel="noopener"
>https://wiki.alpinelinux.org/wiki/Setting&lt;/a>_up_a_samba-server&lt;/p>
&lt;p>差不多要用掉300M硬盘 另外 也可以在宝塔里面安装ftp来解决&lt;/p>
&lt;p>或者使用 rclone&lt;/p>
&lt;p>我后来单独做了一个基于 golang的 webdav 可以从这里下载 &lt;a class="link" href="https://github.com/joyanhui/webdavgo" target="_blank" rel="noopener"
>https://github.com/joyanhui/webdavgo&lt;/a>&lt;/p></description></item><item><title>archlinux 安装搜狗 百度 输入法</title><link>https://dev.leiyanhui.com/c/archlinux-cninputu-sogou-baidu/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/archlinux-cninputu-sogou-baidu/</guid><description>&lt;h1 id="archlinux-安装搜狗-百度-输入法">archlinux 安装搜狗 百度 输入法
&lt;/h1>&lt;p>1、先安装 yay &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-install-yay/" target="_blank" rel="noopener"
>arch安装yay最简单的办法 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>可选操作 &lt;a class="link" href="https://dev.leiyanhui.com/c/arch-install-xrdp/" target="_blank" rel="noopener"
>arch安装xrdp，方便win和ipad远程控制 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>可选操作 &lt;a class="link" href="https://dev.leiyanhui.com/c/linux-shell-proxy/" target="_blank" rel="noopener"
>Linux的shell命令行等临时挂代理 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>2、安装中文字体 &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-cn-font-input/" target="_blank" rel="noopener"
>archlinux安装中文字体，微软字体和搜狗拼音 百度输入法 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>3、安装中文输入法&lt;/p>
&lt;p>我这里用搜狗，因为 百度出现过 频繁崩溃的情况。 两个都不支持词库同步。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#先安装 fcitx 输入法管理器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">fcitx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 还需要一点别的组件 也快不用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># configtool也不是必须的，是一个图形界面的配置程序，不安装到话直接修改配置文件也是可以的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">fcitx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configtool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#非必需的 其他网上教程让安装的，其实可以不用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># sudo pacman -S fcitx-gtk2 fcitx-gtk3 fcitx-qt5 &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装搜狗 或者 百度&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -S fcitx-sogoupinyin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S fcitx-baidupinyin #不推荐，好像有点问题，会卡死，甚至会连带其他输入法无法使用
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#卸载
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -Rsn fcitx-baidupinyin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#谷歌输入法
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S fcitx-googlepinyin #这个轻量依赖少，但是没词库，是安卓迁移的
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>因为我用的kde桌面，主流桌面会自动启动fcitx ，但是一个程序之间的通讯问题可能需要设置一下环境变量
非必须的操作，不添加的话 部分软件 不支持中文输入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nano ~/.pam_environment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#添加
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GTK_IM_MODULE DEFAULT=fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">QT_IM_MODULE DEFAULT=fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">XMODIFIERS DEFAULT=\@im=fcitx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注销登录的kde 桌面，重新登录会自动打开fcitx在系统托盘位置，右键小键盘 点config配置&lt;/p>
&lt;p>或者 开始菜单 setting里面 有 fcitx config的配置程序&lt;/p>
&lt;p>添加输入法，搜索 sogou baidu 即可添加&lt;/p>
&lt;p>ctrl+空格 即可调出输入法，如果有问题，那就是前面没配置好&lt;/p></description></item><item><title>archlinux安装edge浏览器 和 chrome</title><link>https://dev.leiyanhui.com/c/archlinux-install-edge/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/archlinux-install-edge/</guid><description>&lt;h1 id="archlinux安装edge浏览器-和-chrome">archlinux安装edge浏览器 和 chrome
&lt;/h1>&lt;p>1、先安装 yay &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-install-yay/" target="_blank" rel="noopener"
>arch安装yay最简单的办法 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>可选操作 &lt;a class="link" href="https://dev.leiyanhui.com/c/arch-install-xrdp/" target="_blank" rel="noopener"
>arch安装xrdp，方便win和ipad远程控制 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>可选操作 &lt;a class="link" href="https://dev.leiyanhui.com/c/linux-shell-proxy/" target="_blank" rel="noopener"
>Linux的shell命令行等临时挂代理 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>2、安装中文字体 &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-cn-font-input/" target="_blank" rel="noopener"
>archlinux安装中文字体，微软字体和搜狗拼音 百度输入法 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>3、安装中文输入法 &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-cninputu-sogou-baidu/" target="_blank" rel="noopener"
>archlinux 安装搜狗 百度 输入法 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>4、挂代理防止卡 也可以不用 &lt;a class="link" href="https://dev.leiyanhui.com/c/linux-shell-proxy/" target="_blank" rel="noopener"
>Linux的shell命令行等临时挂代理 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>5、安装edge浏览器&lt;/p>
&lt;p>edge浏览器 是 aur源的， 需要先安装第一步的 yay，另外还需要安装中文字体，不然中文网页打开乱码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -S microsoft-edge-stable-bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#:: Remove make dependencies after install? [y/N] y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#==&amp;gt; [N]one [A]ll [Ab]ort [I]nstalled [No]tInstalled or (1 2 3, 1-3, ^4)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># N
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>yay 部分文件从境外下载，可能会中断，ctrl+c 取消重新来就好了。或者挂梯子&lt;/p>
&lt;p>其他浏览器 开源的 在pacman 非完全开源的 用yay&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -S google-chrome
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S firefox
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>archlinux安装中文字体，微软字体和搜狗拼音 百度输入法</title><link>https://dev.leiyanhui.com/c/archlinux-cn-font-input/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/archlinux-cn-font-input/</guid><description>&lt;h1 id="archlinux安装中文字体微软字体和搜狗拼音-百度输入法">archlinux安装中文字体，微软字体和搜狗拼音 百度输入法
&lt;/h1>&lt;p>1、先安装 yay &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-install-yay/" target="_blank" rel="noopener"
>arch安装yay最简单的办法 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>可选操作 &lt;a class="link" href="https://dev.leiyanhui.com/c/arch-install-xrdp/" target="_blank" rel="noopener"
>arch安装xrdp，方便win和ipad远程控制 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;p>2、安装中文字体&lt;/p>
&lt;p>随便安装一个就可以显示中文了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S wqy-zenhei
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># remove
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># pacman -Rs wqy-zenhei
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>wine 乱码的话 也需要安装几个中文字体，具体忘记，回头记录&lt;/p>
&lt;p>3、安装windows字体&lt;/p>
&lt;p>从另外一个电脑的 C盘 windows font目录复制出来字体，然后打包 下载到arch 或者下载我在github上的，&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">su - #切换到root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /usr/share/fonts/WindowsFonts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd /usr/share/fonts/WindowsFonts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#这两个还是装一下，常用
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S wget unzip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget -c http://10.0.0.200/windows-fonts.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unzip windows-fonts.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm windows-fonts.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod 644 /usr/share/fonts/WindowsFonts/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#刷新字体缓存
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fc-cache -f
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我在github上的 一份windows字体包 基于win11的&lt;/p>
&lt;pre>&lt;code> git clone -b windows_font https://github.com/joyanhui/file.leiyanhui.com.git
# wget -c https://github.com/joyanhui/file.leiyanhui.com/archive/refs/heads/windows_font.zip
# wget -c https://ghproxy.com/https://github.com/joyanhui/file.leiyanhui.com/archive/refs/heads/windows_font.zip
&lt;/code>&lt;/pre>
&lt;p>4、kde 设置中文，在开始菜单 搜索 lang 添加中文即可（不建议 还是英文舒服。中文界面很丑，而且会出现 部分界面中英混的情况）&lt;/p>
&lt;p>5、安装百度 搜狗 等中文 输入法 &lt;a class="link" href="https://dev.leiyanhui.com/c/archlinux-cninputu-sogou-baidu/" target="_blank" rel="noopener"
>archlinux 安装搜狗 百度 输入法 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p></description></item><item><title>archlinx下开启xrdp没有声音的问题</title><link>https://dev.leiyanhui.com/c/archlinux-xrdp-audio/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/archlinux-xrdp-audio/</guid><description>&lt;h1 id="archlinx下开启xrdp没有声音的问题">archlinx下开启xrdp没有声音的问题
&lt;/h1>&lt;p>我的是unraid下用kvm运行的archlinux&lt;/p>
&lt;p>首选需要安装 pulseaudio 与 pulseaudio-module-xrdp 模块。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yay -S xrdp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S xorgxrdp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#将 allowed_users=anybody 添加到 /etc/X11/Xwrapper.config 以允许任何人启动 X 服务器。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo nano /etc/X11/Xwrapper.config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S pulseaudio
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S pulseaudio-module-xrdp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启xrdp&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo systemctl restart xrdp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果没有声音或者声音设备&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#尝试注释掉 /etc/pam.d/system-auth 中对 systemd-home 的所有引用。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo nano /etc/pam.d/system-auth
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[yanhui@archlinux ~]$ cat /etc/pam.d/system-auth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#%PAM-1.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth required pam_faillock.so preauth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Optionally use requisite above if you do not want to prompt for the password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># on locked accounts.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-auth [success=2 default=ignore] #pam_systemd_home.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth [success=1 default=bad] pam_unix.so try_first_pass nullok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth [default=die] pam_faillock.so authfail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth optional pam_permit.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth required pam_env.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth required pam_faillock.so authsucc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># If you drop the above call to pam_faillock.so the lock will be done also
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># on non-consecutive authentication failures.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-account [success=1 default=ignore] #pam_systemd_home.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">account required pam_unix.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">account optional pam_permit.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">account required pam_time.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-password [success=1 default=ignore] #pam_systemd_home.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">password required pam_unix.so try_first_pass nullok shadow sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">password optional pam_permit.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-session optional #pam_systemd_home.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">session required pam_limits.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">session required pam_unix.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">session optional pam_permit.so
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>sudo systemctl restart xrdp 重启xrdp后 如果不行，如果手动运行 pulseaudio 后有声音 还一个方法&lt;/p>
&lt;p>就是在 ~/.xinitrc 添加&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nano ~/.xinitrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pulseaudio &amp;amp;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>两个方法 二选一 或者都试试&lt;/p>
&lt;p>官方wifi说明&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">没有声音&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">这可能是&lt;/span> &lt;span class="n">loginctl&lt;/span> &lt;span class="err">问题的征兆，因此请尝试以&lt;/span> &lt;span class="err">以上内容修复。系统&lt;/span>&lt;span class="n">journal可能会遇到以下错误&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Failed&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="n">module&lt;/span> &lt;span class="s2">&amp;#34;module-x11-publish&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">argument&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;display=:10.0 xauthority=&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">initialization&lt;/span> &lt;span class="n">failed&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">这是&lt;/span> &lt;span class="n">systemd&lt;/span> &lt;span class="err">不正确地启动&lt;/span> &lt;span class="n">PulseAudio&lt;/span> &lt;span class="err">的结果。一种解决方法是为您自己的用户或所有用户&lt;/span> &lt;span class="err">禁用&lt;/span> &lt;span class="n">user&lt;/span> &lt;span class="n">unit&lt;/span> &lt;span class="err">文件&lt;/span> &lt;span class="n">pulseaudio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="err">和&lt;/span> &lt;span class="n">pulseaudio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">socket&lt;/span>&lt;span class="err">，然后启动&lt;/span> &lt;span class="n">PulseAudio需要时通过在&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pulse&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> &lt;span class="err">中将&lt;/span> &lt;span class="n">autospawn&lt;/span> &lt;span class="err">设置为&lt;/span> &lt;span class="n">yes&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">如果仍然没有声音，请尝试使用&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">xinitrc&lt;/span> &lt;span class="err">中的&lt;/span> &lt;span class="n">pulseaudio&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="err">手动启动&lt;/span> &lt;span class="n">PulseAudio&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我的~/.xinitrc&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>yanhui@archlinux system&lt;span class="o">]&lt;/span>$ cat ~/.xinitrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">userresources&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HOME&lt;/span>/.Xresources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">usermodmap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HOME&lt;/span>/.Xmodmap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">sysresources&lt;/span>&lt;span class="o">=&lt;/span>/etc/X11/xinit/.Xresources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">sysmodmap&lt;/span>&lt;span class="o">=&lt;/span>/etc/X11/xinit/.Xmodmap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># merge in defaults and keymaps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f &lt;span class="nv">$sysresources&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> xrdb -merge &lt;span class="nv">$sysresources&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f &lt;span class="nv">$sysmodmap&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> xmodmap &lt;span class="nv">$sysmodmap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$userresources&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> xrdb -merge &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$userresources&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$usermodmap&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> xmodmap &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$usermodmap&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># start some nice programs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -d /etc/X11/xinit/xinitrc.d &lt;span class="o">]&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> f in /etc/X11/xinit/xinitrc.d/?*.sh &lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> -x &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> . &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">unset&lt;/span> f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#twm &amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#xclock -geometry 50x50-1+1 &amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#xterm -geometry 80x50+494+51 &amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#xterm -geometry 80x20+494-0 &amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#exec xterm -geometry 80x66+0+0 -name login&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pulseaudio &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">DESKTOP_SESSION&lt;/span>&lt;span class="o">=&lt;/span>plasma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/lib/plasma-dbus-run-session-if-needed startplasma-x11
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>arch安装yay最简单的办法</title><link>https://dev.leiyanhui.com/c/archlinux-install-yay/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/archlinux-install-yay/</guid><description>&lt;h1 id="arch安装yay最简单的办法">arch安装yay最简单的办法
&lt;/h1>&lt;p>网上的多不靠谱，目前2022/9/30 最新的安装方法：&lt;/p>
&lt;p>新装的arch&lt;/p>
&lt;p>使用方法：在 &lt;code>/etc/pacman.conf&lt;/code> 文件末尾添加以下两行：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#sudo nano /etc/pacman.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[archlinuxcn]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#其他的 和mirrorlist不同archlinuxcn 只能选一个
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Server = https://mirrors.aliyun.com/archlinuxcn/$arch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>之后安装 &lt;code>archlinuxcn-keyring&lt;/code> 包导入 GPG key。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -Sy #更新一下
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S archlinuxcn-keyring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#可能需要
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman-key --init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -S yay
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>arch的源 经常出现不稳定的情况，导致软件安装失败。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo nano /etc/pacman.d/mirrorlist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>把测试稳定的源 挪到前面&lt;/p>
&lt;p>阿里云 最近抽风，慎用&lt;/p>
&lt;p>另外 临时挂一下代理 也可以 &lt;a class="link" href="https://dev.leiyanhui.com/c/linux-shell-proxy/" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/linux-shell-proxy/&lt;/a>&lt;/p></description></item><item><title>arch自动安装脚本archintsall扫描镜像缓慢的解决方法</title><link>https://dev.leiyanhui.com/c/arch-install-mirrorlist/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/arch-install-mirrorlist/</guid><description>&lt;h1 id="arch自动安装脚本archintsall扫描镜像缓慢的解决方法">arch自动安装脚本archintsall扫描镜像缓慢的解决方法
&lt;/h1>&lt;p>#arch自动安装脚本archintsall扫描镜像缓慢的解决方法&lt;/p>
&lt;p>vim /etc/pacman.d/mirrorlist 这个文件的内容经常变化，甚至同一个镜像同一个时间段 内容都不一样 如果里面存在大量的镜像地址，那么找到中国相关的 用vim的 指令 dG 删除光标后面的 dgg 删除前面的，保留1-2个中国的镜像即可 如果没有中国的镜像就 ggdG 删除所有内容 添加一行 一行就好了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Server = http://mirrors.163.com/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.dgut.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.nju.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = http://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = http://mirrors.zju.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = http://mirrors.nju.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = http://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.sjtug.sjtu.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = http://mirrors.dgut.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = rsync://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch 其他按照向导操作即可
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a class="link" href="https://pages-lyh.oss-accelerate.aliyuncs.com/wp-content/uploads/2022/08/archinstall.png" target="_blank" rel="noopener"
>&lt;img src="https://pages-lyh.oss-accelerate.aliyuncs.com/wp-content/uploads/2022/08/archinstall.png"
loading="lazy"
>&lt;/a> 最终安装完成大概有2G多一些 pacman -S nano nano /etc/ssh/sshd_config 找到 PermitRootLogin 去掉注释修改为 yes PermitRootLogin yes 重启sshd systemctl enable sshd.service systemctl restart sshd.service&lt;/p></description></item><item><title>centos7安装最新版git</title><link>https://dev.leiyanhui.com/c/centos7-install-new-git/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/centos7-install-new-git/</guid><description>&lt;h1 id="centos7安装最新版git">centos7安装最新版git
&lt;/h1>&lt;p>自带的版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@0ef053b03825 ~]# git --version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git version 1.8.3.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>太旧了，有时候会有一些小问题&lt;/p>
&lt;p>目前最新版是 edge-git-2.9.5 或者 git-scm2.38.0 （2022-10-04）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://mirrors.edge.kernel.org/pub/software/scm/git/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">或者
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/git/git/releases/tag/v2.38.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我这里用 mirrors.edge.kernel.org的２.９.５版本 因为2.38有一个依赖还在测试版的ｃ９９的问题处理起来麻烦&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#安装编译和运行新版git的依赖
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel asciidoc gcc perl-ExtUtils-MakeMaker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">yum&lt;/span> &lt;span class="n">remove&lt;/span> &lt;span class="n">git&lt;/span> &lt;span class="c1">#卸载自带的git &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wget&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">mirrors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">edge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kernel&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">software&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">scm&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">git&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.9&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">5.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">zxvf&lt;/span> &lt;span class="n">git&lt;/span>&lt;span class="o">-*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cd&lt;/span> &lt;span class="n">git&lt;/span>&lt;span class="o">-*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">make&lt;/span> &lt;span class="n">prefix&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">git&lt;/span> &lt;span class="n">all&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">make&lt;/span> &lt;span class="n">prefix&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">git&lt;/span> &lt;span class="n">install&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;export PATH=$PATH:/opt/git/bin&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">profile&lt;/span>　&lt;span class="c1">#如果还有其他自定义ｐａｔｈ，最好是自己修改一下　/etc/profile &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">source&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">profile&lt;/span>　
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>更新 git &amp;ndash;version　查看是否生效&lt;/p></description></item><item><title>centos下安装go最新版本</title><link>https://dev.leiyanhui.com/c/centos-go/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/centos-go/</guid><description>&lt;h1 id="centos下安装go最新版本">centos下安装go最新版本
&lt;/h1>&lt;p>yum install golang 的版本 是 1.17版本，最新版是 1.19.1&lt;/p>
&lt;p>下载 &lt;a class="link" href="https://golang.google.cn/dl/" target="_blank" rel="noopener"
>https://golang.google.cn/dl/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget -c https://golang.google.cn/dl/go1.19.1.linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar -zxf go1.19.1.linux-amd64.tar.gz -C /opt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ls /opt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /opt/gopath
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>环境变量&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nano /etc/profile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在最后添加&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">GO111MODULE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">on&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">GOROOT&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">GOPATH&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gopath&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">GOROOT&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">GOPATH&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>更新生效 设置代理&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> source /etc/profile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> go version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go version go1.19.1 linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@0ef053b03825 opt]# go env -w GOPROXY=https://goproxy.cn,direct
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>关于go的代理&lt;/p>
&lt;p>慎选择 阿里的，很多404不说，竞厂的sdk 阿里是不会让你下载的。真感觉好用，用逗号分割就好&lt;/p></description></item><item><title>cname和mx记录冲突的解决方法</title><link>https://dev.leiyanhui.com/c/108/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/108/</guid><description>&lt;h1 id="cname和mx记录冲突的解决方法">cname和mx记录冲突的解决方法
&lt;/h1>&lt;p>看了很多资料 目前最靠谱的解决方法 比如 leiyanhui.com 域名托管在 dnspod leiyanhui.com mx记录到腾讯企业邮箱 leiyanhui.com url转发到 &lt;a class="link" href="https://www.leiyanhui.com" target="_blank" rel="noopener"
>www.leiyanhui.com&lt;/a> 会自动A记到腾讯的url转发服务器 如果dns在cloudflare那就简单，直接做cname 就可以，cloudflare会自动拉平成A记录 另外一个解决方法 就是 域名 使用 &lt;a class="link" href="mailto:user@mail.leiyanhui.com" >user@mail.leiyanhui.com&lt;/a> 这样的方式 也可以避免冲突 网上说是那些ALIAS 记录 目前 多数dns不支持 不太靠谱&lt;/p></description></item><item><title>deepin下用VirtualBox安装macos Monterey 12 /bigsur 11</title><link>https://dev.leiyanhui.com/c/26/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/26/</guid><description>&lt;h1 id="deepin下用virtualbox安装macos-monterey-12-bigsur-11">deepin下用VirtualBox安装macos Monterey 12 /bigsur 11
&lt;/h1>&lt;p>VMware下安装macos应该都会了，就是用解除限制的工具 让VMware支持macos即可。 但是Linux下VMware的挺难用，不支持无缝模式 要么全屏 要么一堆工具在哪里。 VirtualBox下就好很多，vbox在6.1.30版本的时候 说只支持了macos 11 和12 于是尝试一下。 &lt;a class="link" href="https://www.virtualbox.org/wiki/Changelog" target="_blank" rel="noopener"
>https://www.virtualbox.org/wiki/Changelog&lt;/a> (bug #20636) 安装好VirtualBox之后，一定记得要再下载 VirtualBox 6.1.34 Oracle VM VirtualBox Extension Pack 这个下载后 直接双击deepin下的 vbox会识别到 ，其他发行版自己看看怎么导入 &lt;img src="https://dev.leiyanhui.com/usr/uploads/2022/06/2993782565.png"
loading="lazy"
alt="2022-06-23T18:05:11.png"
> 新建虚拟机 MacOS 路径 /media/YanHui/Data/VirtualBox/MacOS 系统选择 macos 64 内存8G 最小4G吧 硬盘 动态vdi 给到50G 这个好像必须用固定大小的，用动态的会在倒计时15分左右的时候 自动重启 CPU给2个，这个地方应该是必须2核，不然无法进去安装界面 显示 显存给 128M USB忘记用什么了 给2.0吧 网络链接先去掉 光盘随便选一个 macos镜像，我这里 选择 macOS.Big.Sur.11.6.5.20G527 我试过 &lt;a class="link" href="https://sysin.org/blog/macOS-Monterey/" target="_blank" rel="noopener"
>https://sysin.org/blog/macOS-Monterey/&lt;/a> 这个Install_macOS_Monterey_12.4_21F79.iso 需要再启动的时候 自行找一下 efi，后续 也非常卡。仍一晚上没管 也没装好，所以放弃 点设置，启动顺序去掉软驱 关闭VirtualBox 终端命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">VBoxManage modifyvm &amp;#34;MacOS&amp;#34; --cpuidset 00000001 000106e5 00100800 0098e3fd bfebfbff VBoxManage setextradata &amp;#34;MacOS&amp;#34; &amp;#34;VBoxInternal/Devices/efi/0/Config/DmiSystemProduct&amp;#34; &amp;#34;iMac19,1&amp;#34; VBoxManage setextradata &amp;#34;MacOS&amp;#34; &amp;#34;VBoxInternal/Devices/efi/0/Config/DmiSystemVersion&amp;#34; &amp;#34;1.0&amp;#34; VBoxManage setextradata &amp;#34;MacOS&amp;#34; &amp;#34;VBoxInternal/Devices/efi/0/Config/DmiBoardProduct&amp;#34; &amp;#34;Mac-AA95B1DDAB278B95&amp;#34; VBoxManage setextradata &amp;#34;MacOS&amp;#34; &amp;#34;VBoxInternal/Devices/smc/0/Config/DeviceKey&amp;#34; &amp;#34;ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc&amp;#34; VBoxManage setextradata &amp;#34;MacOS&amp;#34; &amp;#34;VBoxInternal/Devices/smc/0/Config/GetKeyFromRealSMC&amp;#34; 1 VBoxManage setextradata &amp;#34;MacOS&amp;#34; &amp;#34;VBoxInternal2/EfiGraphicsResolution&amp;#34; &amp;#34;1440x900&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>开VirtualBox，运行虚拟机,启动后 如果没有出现苹果启动画面 那么 会出现efi shell 的命令行，输入 exit退出 然后在 一个类似bios的界面 选择 Boot Maintenance Manager → Boot From File 然后选择 第一个 HFS+这个 这个不要选错了 然后再找 到 这几个目录 依次选&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;System&amp;gt;→&amp;lt;Library&amp;gt;→&amp;lt;CoreServices&amp;gt;→boot.efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后耐心等待字符滚动，后面的操作 和 正常安装macos一样 双核 超慢超慢，耐心等待 过一会就进来了 &lt;img src="https://dev.leiyanhui.com/usr/uploads/2022/06/1856545330.png"
loading="lazy"
alt="2022-06-23T18:22:44.png"
> 先用磁盘工具抹掉 vox这个磁盘 &lt;img src="https://dev.leiyanhui.com/usr/uploads/2022/06/2661572375.png"
loading="lazy"
alt="2022-06-23T18:23:51.png"
> 剩下过程不用再说了 我之前再VMware下遇到的一个大坑 就是 大概倒计时15分钟的时候 卡死 甚至五国，最后发现 是因为我把虚拟机文件放到了ntfs分区。 一定记得Linux下的ntfs还是挺坑的 安装完成后自动重启&lt;/p></description></item><item><title>docker运行宝塔的几个问题：开启不自启动，计划任务无法运行等</title><link>https://dev.leiyanhui.com/c/docker-baota-cn/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/docker-baota-cn/</guid><description>&lt;h1 id="docker运行宝塔的几个问题开启不自启动计划任务无法运行等">docker运行宝塔的几个问题：开启不自启动，计划任务无法运行等
&lt;/h1>&lt;h2 id="前言">前言
&lt;/h2>&lt;p>我宝塔运行在 unraid+kvm &amp;gt; alpine+docker里面 为什么不直接 unraid+docker 是因为 我对性能的损耗不怎么在意，物理机性能嗷嗷的 虚拟机的隔离 还有整机备份更加方便。 为什么非要用docker跑宝塔？因为docker配合阿里云免费私有库 整机备份和迁移也方便。 我可以docker stop baota之后 用export和import备份整个容器到新镜像，然后push到阿里云私有库上。在其他机器上直接运行。而不需要重复环境。 alpine 作为一个安装后之占用几十m硬盘的Linux系统非常适合何种虚拟机运行，而且官网有提供适合虚拟机的iso&lt;/p>
&lt;h2 id="docker运行宝塔的几个问题">docker运行宝塔的几个问题
&lt;/h2>&lt;p>主要是物理机开机启动后，宝塔不能自动运行 。这里以alpine+docker+centos7+宝塔 为例 在/www/wwwroot新建文件 bt.sh 给运行权限 代码如下&lt;code>/etc/init.d/bt start /etc/init.d/redis start /etc/init.d/php-fpm-74 start /etc/init.d/mongodb start /etc/init.d/mysqld start /etc/init.d/nginx start crond /etc/init.d/mysqld start #再启动一次，有时候 一次启动不起来&lt;/code> 其他版本 和宝塔环境可以ls /etc/init.d/ 执行权限 docker exec -it baota chmod +x /www/wwwroot/bt.sh 然后把这个 /www/wwwroot/bt.sh 这个脚本添加到宿主机的开机启动启动里面（Windows 也可以） 以alpine3.6.1为例,在宿主机 新建一个local启动服务脚本 运行刚刚新建的bt.sh 必须以start作为后缀 vi /etc/local.d/bt.start &lt;code>docker exec -it baota sh /www/wwwroot/bt.sh&lt;/code> 执行权限 chmod +x /etc/local.d/bt.start 更新和添加local启动项 rc-update add local 重启机器测试，发现都可以正常启动了 crond 这个 是解决宝塔的计划任务不能自动执行的&lt;/p></description></item><item><title>golang 常用数据类型转化，字符串，字节，int，float，map\[string]interface{}，json，sql查询结果</title><link>https://dev.leiyanhui.com/c/golang-string-byte-int-float-map-json/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/golang-string-byte-int-float-map-json/</guid><description>&lt;h1 id="golang-常用数据类型转化字符串字节intfloatmapstringinterfacejsonsql查询结果">golang 常用数据类型转化，字符串，字节，int，float，map[string]interface{}，json，sql查询结果
&lt;/h1>&lt;h3 id="其他类型转化为字符串">其他类型转化为字符串
&lt;/h3>&lt;p>可以使用strconv包的方法，也可以用fmt，如果数据本身是interface的话就只能用fmt&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">**&lt;/span>&lt;span class="n">interface&lt;/span> &lt;span class="n">string转化string&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="o">**&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">**&lt;/span>&lt;span class="n">int转化string&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="o">**&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">或&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">string&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">strconv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ne">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">string&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">strconv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FormatInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">int64&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">**&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">**&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">km&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">9900.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">strKm&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">strconv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FormatFloat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">km&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;f&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">64&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">或&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">**&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="n">byte&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">**&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="32-byte转字符串">32 byte转字符串
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">passwordSHA := sha256.Sum256([]byte(new_password))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">password_hash := hex.EncodeToString(passwordSHA[:])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fmt.Println(password_hash)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>字符串转byte byte转字符串&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">s1 := &amp;#34;hello&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">b := []byte(s1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">C:=string(b)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>字符串转化为其他类型&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">int64, err := strconv.ParseInt(string, 10, 64)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">int, err := strconv.Atoi(string)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>字符串转化float64 float32&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">float,err := strconv.ParseFloat(string,64)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">float,err := strconv.ParseFloat(string,32)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#ParseFloat 只能返回float64，指定了32 也会返回float64非要用32 需要再次转化
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>float64转化int&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">5.7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="ne">int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="ne">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="n">float32&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">10.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="n">int32&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">int32&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>int转化float&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">v1 := 99
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v2 := float64(v2).
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>int和int64互转&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">int64_ := int64(1234)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">int64转int 先转字符串 再转int
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>time转int&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">timestamp := time.Now().Unix()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fmt.Println(timestamp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fmt.Sprintf(&amp;#34;%d&amp;#34;, v)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>map[string]interface{} 的一个数字转化为int&lt;/strong> 需要三步&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">user_id_string := fmt.Sprintf(&amp;#34;%f&amp;#34;, json_row_map[0][&amp;#34;user_id&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user_id_float64, _ := strconv.ParseFloat(user_id_string , 64)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user_id_int := int(user_id_float64)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果要拼接到sql 还需要再转到string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user_id_sql_string:=strconv.Itoa(user_id_int)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>json 和 map互转&lt;/strong>&lt;/p>
&lt;p>&lt;strong>map转化json字符串&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">MapToJson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">param&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="n">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataType&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Marshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataString&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataType&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">dataString&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>json 字符串 转化为map&lt;/strong>&lt;/p>
&lt;p>使用encoding/json库，性能比github.com/buger/jsonparser 要差一些 jsonparser 不知怎么转换&lt;/p>
&lt;p>&lt;strong>不带数组格式的json转map&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">JsonToMap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{}&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">tempMap&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Unmarshal&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">tempMap&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">tempMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>数组格式的json转map&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">JsonArrToMap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{}&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tempMap&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Unmarshal&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">tempMap&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">tempMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Sql查询结果转json字符串&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span>&lt;span class="n">db_r&lt;/span> &lt;span class="err">是全局变量&lt;/span> &lt;span class="k">var&lt;/span> &lt;span class="n">db_r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">sql&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">sql_to_json&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sqlString&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stmt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">db_r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Prepare&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sqlString&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">defer&lt;/span> &lt;span class="n">stmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rows&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">stmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">defer&lt;/span> &lt;span class="n">rows&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">columns&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">rows&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Columns&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tableData&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">values&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="n">count&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">valuePtrs&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="n">count&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">rows&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Next&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">count&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">valuePtrs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rows&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">valuePtrs&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">entry&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">make&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">columns&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="n">interface&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">values&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ok&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">byte&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">ok&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">v&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">v&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">val&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">entry&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">v&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tableData&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tableData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">entry&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">jsonData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Marshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tableData&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">jsonData&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">jsonData&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>hyper-v 开启虚拟化嵌套，套娃pve 为了虚拟化黑苹果</title><link>https://dev.leiyanhui.com/c/99/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/99/</guid><description>&lt;h1 id="hyper-v-开启虚拟化嵌套套娃pve-为了虚拟化黑苹果">hyper-v 开启虚拟化嵌套，套娃pve 为了虚拟化黑苹果
&lt;/h1>&lt;p>因为最终一些原因，舍弃了黑macos 做主力系统（远程很卡https://dev.leiyanhui.com/c/94） 切换到win下，有因为使用了docker 需要打开wsl和hyper-v，而这时候 vmware的显卡性能会大幅度下滑，所以尝试 套娃虚拟机跑macos 终端运行 查看列表 Get-VM 查看配置 ExposeVirtualizationExtensions 默认是false Get-VMProcessor -VMName PVE | fl 打开虚拟化套娃 Set-VMProcessor -ExposeVirtualizationExtensions $true -VMName PVE 查看配置 ExposeVirtualizationExtensions 默认是应该变成 true Get-VMProcessor -VMName PVE | fl 完毕 正常安装pve 最后，迁移到unraid 上了&lt;/p></description></item><item><title>hyper-v 虚拟机主机添加显卡（分配一部分显卡性能给他）</title><link>https://dev.leiyanhui.com/c/98/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/98/</guid><description>&lt;h1 id="hyper-v-虚拟机主机添加显卡分配一部分显卡性能给他">hyper-v 虚拟机主机添加显卡（分配一部分显卡性能给他）
&lt;/h1>&lt;p>$vm = &amp;ldquo;Win11dev&amp;rdquo; 或者 $vm = &amp;ldquo;PVE&amp;rdquo; 引号里面是虚拟机名称&lt;/p>
&lt;pre>&lt;code>Add-VMGpuPartitionAdapter -VMName
$vm Set-VMGpuPartitionAdapter -VMName
$vm -MinPartitionVRAM 80000000 -MaxPartitionVRAM 100000000 -OptimalPartitionVRAM 100000000 -MinPartitionEncode 80000000 -MaxPartitionEncode 100000000 -OptimalPartitionEncode 100000000 -MinPartitionDecode 80000000 -MaxPartitionDecode 100000000 -OptimalPartitionDecode 100000000 -MinPartitionCompute 80000000 -MaxPartitionCompute 100000000 -OptimalPartitionCompute 100000000 Set-VM -GuestControlledCacheTypes $true -VMName $vm Set-VM -LowMemoryMappedIoSpace 1Gb -VMName $vm Set-VM -HighMemoryMappedIoSpace 32GB -VMName $vm
&lt;/code>&lt;/pre>
&lt;p>虚拟机开机，&lt;/p>
&lt;p>从主机上复制C:\Windows\System32\DriverStore\FileRepository目录到虚拟机C:\Windows\System32\HostDriverStore\ 此时虚拟机上看到是这样的目录结构：C:\Windows\System32\HostDriverStore\FileRepository 备注：HostDriverStore这个目录要自己创建，
FileRepository里面本质上只要有主机显卡驱动就可以了，这里偷懒直接复制整个目录（文件挺大），如果只想复制主机显卡驱动目录，可以通过设备管理器查看主机的显卡驱动 驱动详细信息 查看显卡的驱动目录
比如 我的是
C:\Windows\System32\DriverStore\FileRepository\iigd_dch.inf_amd64_518f2921ba495409 也有900M 复制到虚拟机的&lt;/p>
&lt;p>C:\Windows\System32\HostDriverStore\FileRepository\iigd_dch.inf_amd64_518f2921ba495409 我这里是核显，如果是其他网卡 可能还需要几个dll 具体 搜索引擎 重启虚拟机，查看虚拟机设备管理器显卡，运行dxdiag查看显卡特性 成功&lt;/p></description></item><item><title>iOS开发申请组播广播权限</title><link>https://dev.leiyanhui.com/c/31/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/31/</guid><description>&lt;h1 id="ios开发申请组播广播权限">iOS开发申请组播广播权限
&lt;/h1>&lt;p>　　iOS14以后，使用组播广播功能需要申请权限。 　　&lt;/p>
&lt;p>1、申请地址：
&lt;a class="link" href="https://developer.apple.com/contact/request/networking-multicast" target="_blank" rel="noopener"
>https://developer.apple.com/contact/request/networking-multicast&lt;/a>； 　 　　1&lt;/p>
&lt;p>、申请地址 　　 　　&lt;/p>
&lt;p>2、填写相应的App Information，提交了等待审核； appleid app 这个地方 应该是填写 appstoreconnect里面的app信息的appid app catagory填写 分类的英文:tools,live 　　 　　&lt;/p>
&lt;p>3、等待几天（有时候 几小时），审核通过了会给你发邮件：Your request to use Multicast Networking was approved. You can now add the Multicast Networking entitlement with your Provisioning Profile. 　　 　　 　　&lt;/p>
&lt;p>4、登录开发者账号，身份管理Identifiers界面，点开对应的app的设置 在AppID的配置界面，会增加对应权限：Additional Capabilities中，把Multicast Networking给勾上； 　　 　　 　　&lt;/p>
&lt;p>5、重新生成Profiles里对应的证书；开发和发布的证书都重新生成。 如果是uniapp开发就直接添加对应的插件就好了。如果原生开发 继续下一步 　　 　　 　　&lt;/p>
&lt;p>6、在工程里配置.entitlements文件，增加一项。Key：com.apple.developer.networking.multicast　　type：boolean　　Value：YES 　　 　　 　　&lt;/p>
&lt;p>7、在Info.plist文件中，添加本地网络使用权限：Privacy - Local Network Usage Description 　　权限问题解决完毕，组播广播功能可以正常开发使用了。&lt;/p></description></item><item><title>Linux的shell命令行等临时挂代理</title><link>https://dev.leiyanhui.com/c/linux-shell-proxy/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/linux-shell-proxy/</guid><description>&lt;h1 id="linux的shell命令行等临时挂代理">Linux的shell命令行等临时挂代理
&lt;/h1>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">http_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;代理ip:代理端口&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">https_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;代理ip:代理端口&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以在 一个windows 或docker 上跑一个允许lan的clash 就好了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">http_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;10.0.0.200:7890&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">https_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;10.0.0.200:7890&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>my docker clase&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">http_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;10.0.0.9:7890&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">https_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;10.0.0.9:7890&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>mysql 内存表替代redis的完整方案记录</title><link>https://dev.leiyanhui.com/c/mysql-cp-memory-innodb/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/mysql-cp-memory-innodb/</guid><description>&lt;h1 id="mysql-内存表替代redis的完整方案记录">mysql 内存表替代redis的完整方案记录
&lt;/h1>&lt;p>内存表替代redis的完整方案记&lt;/p>
&lt;p>redis很强很轻量，但是对于结构化数据 mysql具有天然优势。&lt;/p>
&lt;p>这里只记录 使用mysql内存表替代redis的一个方案，只适用于某些特殊情况&lt;/p>
&lt;p>但是 mysql 内存表有几个天然缺陷 Memory不支持行锁只支持表锁，只有InnoDB支持行锁。这就导致了大并发的时候，尤其是并发写入的时候 mysql的Memory引擎效率并不高&lt;/p>
&lt;p>另外Memory不支持持久化储存，在宕机重启的情况下，虽然可以导入新数据。但是如果配置了主从同步会出现更多复杂问题。&lt;/p>
&lt;p>为了规避这些问题，可以在以下场景式 使用。&lt;/p>
&lt;p>最后采取的理想方式：&lt;/p>
&lt;p>1、分库处理，库A 所有表使用InnoDB，配置好主从同步并用户储存所有数据。库B 只有部分表从库A复制的表，且全部是内存表，不进行主从同步。&lt;/p>
&lt;p>2、mysql启动的时，库A部分表数据 完整复制到库B，或者应用端在查询不到数据的时候，自动复制数据过来。&lt;/p>
&lt;p>3、定时同步库B数据到库A 以持久化保存&lt;/p>
&lt;p>其他要注意的：&lt;/p>
&lt;p>1、频繁写入的数据，依旧还是使用redis，这是redis的天然优势&lt;/p>
&lt;p>2、关闭库B的 查询缓存（没有太大必要使用）&lt;/p>
&lt;p>3、大量数据非经常查询的数据，放在&lt;/p>
&lt;p>先看一个创建一个表 和复制一个表的基本语法&lt;/p>
&lt;p>另外一个简单的解决方法 是使用 ramdisk (tmpfs)，然后使用InnoDB 或者 MyISAM即可&lt;/p>
&lt;p>然后定时备份 ramdisk（最好关停mysql后备份）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">fish_api&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">mem&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">mem&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">INT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="no">NULL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kp">ENGINE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MEMORY&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">targetTable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">LIKE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sourceTable&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">targetTable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sourceTable&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">#完整代码
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#DROP TABLE user_mem;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">user_mem&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">LIKE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">user_mem&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kp">ENGINE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MEMORY&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">user_mem&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其实需要的是 优化mysql&lt;/p>
&lt;p>频繁查询 较少写入的表的查询操作 开启查询缓存 这个比较好理解&lt;/p></description></item><item><title>nginx 和 php 跨域配置</title><link>https://dev.leiyanhui.com/c/109/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/109/</guid><description>&lt;h1 id="nginx-和-php-跨域配置">nginx 和 php 跨域配置
&lt;/h1>&lt;p>如果可以在php里面搞定，尽量不弄nginx的，以免影响迁移 nginx配置&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">add_header Access-Control-Allow-Origin *;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">add_header Access-Control-Allow-Methods &amp;#39;GET,POST,PUT,DELETE,PATCH,OPTIONS&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">add_header Access-Control-Allow-Headers &amp;#39;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&amp;#39;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>php&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">// 设置允许其他域名访问
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">header(&amp;#39;Access-Control-Allow-Origin:*&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//header(&amp;#39;Access-Control-Allow-Origin: &amp;#39;.$_SERVER[&amp;#39;HTTP_ORIGIN&amp;#39;].&amp;#39;&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// 设置允许的响应类型
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">header(&amp;#39;Access-Control-Allow-Methods:POST, GET,OPTIONS, PUT, DELETE&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// 设置允许的响应头
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">header(&amp;#39;Access-Control-Allow-Headers:x-requested-with,content-type,Origin, Accept, Authorization&amp;#39;);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>thinkphp 直接放到 应用的index.php 就可以了&lt;/p></description></item><item><title>nginx下单独配置js文件过期时间，解决maccms每次修改播放器后都要用户清理缓存才有效的问题</title><link>https://dev.leiyanhui.com/c/nginx-expires/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/nginx-expires/</guid><description>&lt;h1 id="nginx下单独配置js文件过期时间解决maccms每次修改播放器后都要用户清理缓存才有效的问题">nginx下单独配置js文件过期时间，解决maccms每次修改播放器后都要用户清理缓存才有效的问题
&lt;/h1>&lt;p>利用expires 指令 原来代码&lt;/p>
&lt;pre>&lt;code>location \~ .\*.(js|css)?$ {
expires 12h;
error\_log /dev/null;
access\_log /dev/null;
}
改为
location \~ ._.(css)?$ {
expires 12h;
error\_log /dev/null;
access\_log /dev/null;
}
location \~ ._.(js)?$ {
expires -1;
error\_log /dev/null;
access\_log /dev/null;
}
&lt;/code>&lt;/pre></description></item><item><title>php8的性能竟比php7.4提升了接近一倍</title><link>https://dev.leiyanhui.com/c/php8-jit/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/php8-jit/</guid><description>&lt;h1 id="php8的性能竟比php74提升了接近一倍">php8的性能竟比php7.4提升了接近一倍
&lt;/h1>&lt;p>php终于支持jit了，而1996年java已经支持jit&lt;/p>
&lt;p>php8.0 默认情况下 和php7.4性能基本接近，但是开启jit后 在cpu密集计算的情况下可以提升92%左右的性能，比php5 性能提升5-7倍&lt;/p>
&lt;p>PHP 8 的 JIT（Just In Time）编译器将作为扩展集成到 php 中 Opcache 扩展 用于运行时将某些操作码直接转换为从 cpu 指令，大概来说就是之前版本的Opcache 可以跳过编译解释直接机器码到zend，而jit跳过zend 直接到cpu指令 。PHP 的 JIT 使用了名为** DynASM (Dynamic Assembler) 的库**，该库将一种特定格式的一组 CPU 指令映射为许多不同 CPU 类型的汇编代码。 因此，编译器只需要使用 DynASM 就可以将 Opcodes 转换为特定结构体的机器码。&lt;/p>
&lt;p>JIT编译原理&lt;/p>
&lt;p>1、检查opcodes是否缓存&lt;/p>
&lt;p>2、zend compiler编译器进行编译生成opcodes&lt;/p>
&lt;p>3、optimizer优化器生成优化后的opcodes&lt;/p>
&lt;p>4、把优化后的opcodes放入opcodes cache缓存&lt;/p>
&lt;p>5、jit编译器把optimized opcodes再次编译成汇编机器码machine codes&lt;/p>
&lt;p>6、进入zend vm虚拟前先检查是否开启jit引擎&lt;/p>
&lt;p>7、如果已经开启了jit引擎则直接读取机器码中的jit buffer代码片段&lt;/p>
&lt;p>8、送入x86 cpu架构进行执行&lt;/p>
&lt;p>其他要明白的&lt;/p>
&lt;p>1、Opcache会做opcode层面的优化，比如图中的两条opcode合并为一条&lt;/p>
&lt;p>2、PHP8的JIT目前是在Opcache之中提供的&lt;/p>
&lt;p>3、JIT在Opcache优化之后的基础上，结合Runtime的信息再次优化，直接生成机器码&lt;/p>
&lt;p>4、JIT不是原来Opcache优化的替代，是增强&lt;/p>
&lt;p>5、目前PHP8只支持x86架构的CPU arm还要等着&lt;/p>
&lt;p>当然如果php只是处理一些io操作，那么你用php5 还是php8 都差不多，因为性能瓶颈在io上而不是cpu上。如果是IO 密集型操作的 应用，开启jit反而可能会有10%左右的性能消耗 ，尤其是Laravel。&lt;/p>
&lt;p>在密集计算的情况下，对比php7.4 和 未开机jit的php8 性能提升差不多是92%-120% ，也就是1倍左右。&lt;/p>
&lt;p>当然 即便是开启了 jit，在密集计算上，php的性能依旧被 node.js java C# go C++ 吊打&lt;/p>
&lt;p>&lt;a class="link" href="https://pages-lyh.oss-accelerate.aliyuncs.com/wp-content/uploads/2022/08/yunsuan.png" target="_blank" rel="noopener"
>&lt;img src="https://pages-lyh.oss-accelerate.aliyuncs.com/wp-content/uploads/2022/08/yunsuan.png"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>至于为什么使用php 这个各取所需的话题没啥可说的 所以还是尽快升级到php8&lt;/p>
&lt;p>刚刚在宝塔中查看，已经支持到8.1.9 性能再提升4%左右 新项目不用考虑 直接上了。&lt;/p>
&lt;p>在php.ini 中看到&lt;/p>
&lt;p>opcache.jit_buffer_size=128m&lt;br>
opcache.jit=1205&lt;/p>
&lt;p>宝塔默认帮开启了，opcache.jit这个配置由4个独立的数字组成，分别代表&lt;/p>
&lt;p>是否使用AVX指令 寄存器分配策略 JIT触发策略 JIT优化策略 具体查看php8手册&lt;/p>
&lt;p>值得注意的时php8.1.9下 部分扩展可能尚未支持&lt;/p>
&lt;p>libssh2 【依赖关系如下：PECL/ssh2 –&amp;gt; libssh2 –&amp;gt; openssl】&lt;/p>
&lt;p>sg11&lt;/p>
&lt;p>常用的扩展 swoole redis之类的肯定都是没问题的&lt;/p>
&lt;p>最终使用一段时间后，发现jit虽然提升了性能，但是再io频繁的情况下，没有任何感觉&lt;/p>
&lt;p>php8 虽然已经很不错了，但是依旧是吃性能离谱，考虑到每日的用户暴涨和服务器费用，最终选择用golang重写，彻底抛弃php&lt;/p>
&lt;p>以后 加上本博客最近也从wordpress 迁移到了 vuepress静态生成，以后用php的地方 可能就只是几个小动态页和maccms看看电影了&lt;/p></description></item><item><title>php递归获取目录名和子文件名</title><link>https://dev.leiyanhui.com/c/php-get_dirs/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/php-get_dirs/</guid><description>&lt;h1 id="php递归获取目录名和子文件名">php递归获取目录名和子文件名
&lt;/h1>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">//递归获取所有文件和文件夹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">function get_dirs($dir_path) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $res = array();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $res_lists = array();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> foreach(glob(&amp;#34;$dir_path/*&amp;#34;) as $item) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if(is_dir($item)) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $folder = end(explode(&amp;#39;/&amp;#39;, $item));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $res[$folder] =get_dirs($item);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> continue;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $res[] = basename($item);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return $res ;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo &amp;#34;&amp;lt;pre&amp;gt;&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">print_r ( get_dirs( dirname(__FILE__).&amp;#34;/md-file&amp;#34;) );
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo &amp;#34;&amp;lt;/pre&amp;gt;&amp;#34;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Array ( [0-index] =&amp;gt; Array ( [0] =&amp;gt; Hans.md )&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[1-tds] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[77-list1] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [1-list2] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [1-list3] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[88-robotnote] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [0] =&amp;gt; Hans.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[99-contact] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [0] =&amp;gt; Hans.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [1] =&amp;gt; Hant.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [2] =&amp;gt; en.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">只要文件夹
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>//递归获取 只要文件夹 function get_dirs($dir_path) { $res = array(); $res_lists = array();&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">foreach(glob(&amp;#34;$dir_path/*&amp;#34;) as $item) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if(is_dir($item)) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $folder = end(explode(&amp;#39;/&amp;#39;, $item));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $res[$folder] =get_dirs($item);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> continue;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">return $res ;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>}&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [0-index] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [1-tds] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [77-list1] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [1-list2] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [1-list3] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [88-robotnote] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [99-contact] =&amp;gt; Array
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Syncthing解决 两台电脑完全一直到同步 + iPhone + ipad 完全同步</title><link>https://dev.leiyanhui.com/c/57/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/57/</guid><description>&lt;h1 id="syncthing解决-两台电脑完全一直到同步--iphone--ipad-完全同步">Syncthing解决 两台电脑完全一直到同步 + iPhone + ipad 完全同步
&lt;/h1>&lt;p>使用场景如下： 渔场有一台电脑 台式机，性能比较好，一台廉价笔记本平时多远程到这个台式机工作。但是偶尔会因为网络问题连接不好。加上自己喜欢折腾，考虑搭建一个同步盘。实现两个电脑的文件完全同步。 之前折腾了一圈 没有实现 参考 &lt;a class="link" href="https://dev.leiyanhui.com/c/56" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/56&lt;/a> 现在找到一个 基于p2p 软件 Syncthing 实现的功能：只有一台电脑开机情况下，文件和代码 和 iPhone 双向同步 两台电脑都开机的情况的下，四设备同步 官网地址 &lt;a class="link" href="https://syncthing.net/" target="_blank" rel="noopener"
>https://syncthing.net/&lt;/a> git加速下载 &lt;a class="link" href="https://github.com/syncthing/syncthing/releases/download/v1.20.2/syncthing-windows-amd64-v1.20.2.zip" target="_blank" rel="noopener"
>https://github.com/syncthing/syncthing/releases/download/v1.20.2/syncthing-windows-amd64-v1.20.2.zip&lt;/a> 安装非常简单，绿色软件，双击exe后 一个黑窗，弹出一个网页 http://127.0.0.1:8384/# 网页界面 有中文 添加一个文件夹&lt;br>
D:\Syncthing\ 文件夹id Syncthing 文件夹标签写 主机1 我这里写 B150M 在另外一台电脑上 也安装Syncthing 同样 在D盘新建文件夹 Syncthing 在另外一台电脑上 的网页端添加 远程设备， 在第一台计算机的 当前设备 二维码哪个地方可以看到 名字 类似 75XXXX-XXXXXX-XXXX-XXXX-HFN5IYV-PDIY5TC-XXXX-XXXX 的字符串 添加到 第二台设备上，然后 在第一台设备上 点同意 或者 添加 之类意义的 按钮 具体名称忘记 在第一台设备 上 编辑文件夹 (B150M) 在第二台设备 上 B150M 想要共享 &amp;ldquo;B150M&amp;rdquo; (Syncthing) 文件夹给您。 添加新文件夹？ 点击添加 位置到 D:\Syncthing\ 两台电脑分布往这个文件夹添加文件 测试 都可以 同步（握手走的Syncthing 服务器，文件同步 走的局域网 如果是公网 应该速度会差一些 穿透方法 晚点处理） 测试添加一个 软 链接 mklink /D &amp;ldquo;D:\Syncthing\Code_Space&amp;rdquo; D:\Code_Space 经过测试不可以 暂时没有找到 解决方法。所以只能把文件 移动过来，然后软连接回原来的位置了。 同时 可以弄一个 ios客户端 作为随身设备 直接在appstore搜索 Syncthing 找到 Möbius Sync &lt;a class="link" href="https://apps.apple.com/us/app/mobiussync/id1539203216?ign-itscg=30200" target="_blank" rel="noopener"
>https://apps.apple.com/us/app/mobiussync/id1539203216?ign-itscg=30200&lt;/a>&amp;amp;ign-itsct=apps_box#?platform=iphone 就可以了 iphone分别扫描两个电脑的 识别 二维码 添加上 然后两台电脑 都分享 文件 给 iPhone。因为文件夹id 都一样 iPhone不会多出来一个额外的文件夹 iPhone 的客户端 只能同步20M 超过后 是收费的 30人民币， 值得&lt;/p>
&lt;h2 id="进阶操作-实现">进阶操作 实现
&lt;/h2>&lt;p>1、 开机启动启动 &lt;a class="link" href="https://dev.leiyanhui.com/c/58" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/58&lt;/a> 2、 解决外网速度 可以自建握手服务器，但是太麻烦了。我的解决方法 是付费7天的百度会员，完成首次同步。 百度会员同步空间 支持 软连接的，只是价格。。有点。每个月15块钱 在套餐里面的工作套餐。而且他这个只是备份工具 无法进行删除操作&lt;/p></description></item><item><title>Ubuntu 22.04 LTS：截图 的使用，可以直接拖拽到 wine的微信</title><link>https://dev.leiyanhui.com/c/9/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/9/</guid><description>&lt;h1 id="ubuntu-2204-lts截图-的使用可以直接拖拽到-wine的微信">Ubuntu 22.04 LTS：截图 的使用，可以直接拖拽到 wine的微信
&lt;/h1>&lt;p>经过测试 区域截图快捷键 PrSc 【对应我的键盘是 Fn+y】 全屏截图快捷键 shift PrSc&lt;/p>
&lt;p>【对应我的键盘是 Fn+shift+y】 当前窗口截图快捷键 alt PrSc【对应我的键盘是 Fn+shift+y】 截图后的文件自动保持到 ~/Pictures/截图 截图可以直接拖拽到 优麒麟的wine 微信 &lt;a class="link" href="https://dev.leiyanhui.com/c/8" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/8&lt;/a>&lt;/p></description></item><item><title>Ubuntu22.04LTS常用win软件的wine免维护和使用说明 QQ 微信 photoshop</title><link>https://dev.leiyanhui.com/c/7-2/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/7-2/</guid><description>&lt;h1 id="ubuntu2204lts常用win软件的wine免维护和使用说明-qq-微信-photoshop">Ubuntu22.04LTS常用win软件的wine免维护和使用说明 QQ 微信 photoshop
&lt;/h1>&lt;p>自己折腾wine有多麻烦，懂的人都知道。 我这里选择 优麒麟 作为主要源 deepin作为替代 ## 使用优麒麟 配置好的软件 先去&lt;/p>
&lt;p>&lt;a class="link" href="http://archive.ubuntukylin.com/ubuntukylin/pool/main/k/kylin-software-keyring/" target="_blank" rel="noopener"
>http://archive.ubuntukylin.com/ubuntukylin/pool/main/k/kylin-software-keyring/&lt;/a>&lt;/p>
&lt;p>下载最新的 2022-03-31 17:52 sudo dpkg -i kylin-software-keyring_2022.03.30_all.deb&lt;/p>
&lt;p>然后打开 &lt;a class="link" href="https://archive.ubuntukylin.com/ubuntukylin/pool/partner/" target="_blank" rel="noopener"
>https://archive.ubuntukylin.com/ubuntukylin/pool/partner/&lt;/a> 先搜索 ukylin-wine 找到 ukylin-wine_70.6.3.25_amd64.deb sudo dpkg -i ukylin-wine_70.6.3.25_amd64.deb 搜索查找，weixin 还有一个 wechat 不清楚干嘛的，但是这个 weixin是 一直更新维护的 这个微信的 收发图片没问题 也没有乱码 支持发送文件，启动时候 没有wine那个进度条 存在的问题是 截图 功能不能使用 系统托盘没提示 好友列表的搜索功能不能使用 退出一次，再次打开无法打开 另外还有 wxwork photoshop-cs6 企业微信测试 发送文件的时候，选择框 是原生的wine，找文件费劲点 卸载方法``` dpkg -l | grep ukylin #查找 sudo dpkg -r ukylin-ps6 sudo dpkg &amp;ndash;purge ukylin-ps6&lt;/p>
&lt;p>&lt;code>\## 使用deepinx 用这个源，注意安装后要注销一次才能加载出来图标&lt;/code>&lt;/p>
&lt;p>wget -O- &lt;a class="link" href="https://deepin-wine.i-m.dev/setup.sh" target="_blank" rel="noopener"
>https://deepin-wine.i-m.dev/setup.sh&lt;/a> | sh &lt;code>`sudo apt-get install com.qq.weixin.deepin` 安装其他软件&lt;/code> `````` &lt;a class="link" href="https://deepin-wine.i-m.dev/" target="_blank" rel="noopener"
>https://deepin-wine.i-m.dev/&lt;/a>&lt;/p>
&lt;p>&lt;code>经过我的测试，这个微信可以好友搜索 可以不用扫描，直接在手机确认后登录，但是存在几个问题 文件发送经常会导致整个崩溃 截图不能用 部分文字乱码 好友名称带特殊符号的乱码，启动有时候很慢 图片拖拽到聊天窗口 会作为文件发送 ### 卸载 sudo apt-get remove com.qq.im.deepin sudo apt-get remove com.qq.weixin.deepin sudo apt-get remove com.taobao.aliclient.qianniu.deepin 考虑到 系统托盘 已经m 原文参考&lt;/code> &lt;a class="link" href="https://blog.csdn.net/hinmer/article/details/125246865" target="_blank" rel="noopener"
>https://blog.csdn.net/hinmer/article/details/125246865&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>ubuntu安装Arduino IDE</title><link>https://dev.leiyanhui.com/c/11/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/11/</guid><description>&lt;h1 id="ubuntu安装arduino-ide">ubuntu安装Arduino IDE
&lt;/h1>&lt;p>试试 用原生arduino 打开 &lt;code>https://www.arduino.cn/thread-5838-1-1.html&lt;/code>&lt;/p>
&lt;p>下载回来后解压到 /MyData/Soft cd /MyData/Soft/arduino-1.8.19 sudo ./install.sh 卸载 就是 sudo ./uninstall.sh 然后再删除文件 其他和win下操作和使用完全一样&lt;/p></description></item><item><title>Ubuntu一条命令更换源 以20.04LTS为例</title><link>https://dev.leiyanhui.com/c/7/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/7/</guid><description>&lt;h1 id="ubuntu一条命令更换源-以2004lts为例">Ubuntu一条命令更换源 以20.04LTS为例
&lt;/h1>&lt;p>Ubuntu一条命令更换源 以20.04LTS为例&lt;/p>
&lt;p>​​ 默认源 的速度 就那样 , 又不想使用第三方的sh文件, 其实可以直接替换默认文件 命令在文末 我们先备份(也可以跳过)&lt;/p>
&lt;p>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak&lt;/p>
&lt;p>默认内容 如果没备份 并搞丢了 记得恢复默认内容 ​ 一行命令 正则替换 成阿里云&lt;/p>
&lt;pre>&lt;code>sudo sed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list
&lt;/code>&lt;/pre>
&lt;p>一行命令 正则替换 成 清华源
sudo sed -i &amp;rsquo;s/archive.ubuntu.com/mirrors.tuna.tsinghua.edu.cn/g&amp;rsquo; /etc/apt/sources.list&lt;/p>
&lt;p>其他源 自己改一下 地址的域名 就好了&lt;/p>
&lt;pre>&lt;code>cat /etc/apt/sources.list
&lt;/code>&lt;/pre></description></item><item><title>uniapp使用hex颜色自定义原生标题栏导航栏半透明</title><link>https://dev.leiyanhui.com/c/uniapp-hex-title-bar/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/uniapp-hex-title-bar/</guid><description>&lt;h1 id="uniapp使用hex颜色自定义原生标题栏导航栏半透明">uniapp使用hex颜色自定义原生标题栏导航栏半透明
&lt;/h1>&lt;p>hex颜色支持半透明，文末 对照表 颜色格式 #FFFFFFBA FFFFFF对应颜色白色 BA半透明 73% 在 pages.json &amp;ldquo;globalStyle&amp;rdquo;: { &amp;ldquo;navigationBarTextStyle&amp;rdquo;: &amp;ldquo;black&amp;rdquo;, &amp;ldquo;navigationBarTitleText&amp;rdquo;: &amp;ldquo;uni-app&amp;rdquo;, &amp;ldquo;navigationBarBackgroundColor&amp;rdquo;: &amp;ldquo;#F8F8F8BA&amp;rdquo;, &amp;ldquo;backgroundColor&amp;rdquo;: &amp;ldquo;#F8F8F8&amp;rdquo; } navigationBarBackgroundColor 后面的BA 对照 73% &amp;ldquo;tabBar&amp;rdquo;: { &amp;ldquo;color&amp;rdquo;: &amp;ldquo;#7A7E83&amp;rdquo;, &amp;ldquo;selectedColor&amp;rdquo;: &amp;ldquo;#007AFF&amp;rdquo;, &amp;ldquo;borderStyle&amp;rdquo;: &amp;ldquo;black&amp;rdquo;, &amp;ldquo;backgroundColor&amp;rdquo;: &amp;ldquo;#F8F8F8BA&amp;rdquo;, &amp;ldquo;list&amp;rdquo;: [ **** ] }, backgroundColor 后门的BA 同样 hex颜色对照表&lt;/p>
&lt;p>&amp;lsquo;1.00&amp;rsquo;:&amp;lsquo;FF&amp;rsquo;,
&amp;lsquo;0.99&amp;rsquo;:&amp;lsquo;FC&amp;rsquo;,
&amp;lsquo;0.98&amp;rsquo;:&amp;lsquo;FA&amp;rsquo;,
&amp;lsquo;0.97&amp;rsquo;:&amp;lsquo;F7&amp;rsquo;,
&amp;lsquo;0.96&amp;rsquo;:&amp;lsquo;F5&amp;rsquo;,
&amp;lsquo;0.95&amp;rsquo;:&amp;lsquo;F2&amp;rsquo;,
&amp;lsquo;0.94&amp;rsquo;:&amp;lsquo;F0&amp;rsquo;,
&amp;lsquo;0.93&amp;rsquo;:&amp;lsquo;ED&amp;rsquo;,
&amp;lsquo;0.92&amp;rsquo;:&amp;lsquo;EB&amp;rsquo;,
&amp;lsquo;0.91&amp;rsquo;:&amp;lsquo;E8&amp;rsquo;,
&amp;lsquo;0.90&amp;rsquo;:&amp;lsquo;E6&amp;rsquo;,
&amp;lsquo;0.89&amp;rsquo;:&amp;lsquo;E3&amp;rsquo;,
&amp;lsquo;0.88&amp;rsquo;:&amp;lsquo;E0&amp;rsquo;,
&amp;lsquo;0.87&amp;rsquo;:&amp;lsquo;DE&amp;rsquo;,
&amp;lsquo;0.86&amp;rsquo;:&amp;lsquo;DB&amp;rsquo;,
&amp;lsquo;0.85&amp;rsquo;:&amp;lsquo;D9&amp;rsquo;,
&amp;lsquo;0.84&amp;rsquo;:&amp;lsquo;D6&amp;rsquo;,
&amp;lsquo;0.83&amp;rsquo;:&amp;lsquo;D4&amp;rsquo;,
&amp;lsquo;0.82&amp;rsquo;:&amp;lsquo;D1&amp;rsquo;,
&amp;lsquo;0.81&amp;rsquo;:&amp;lsquo;CF&amp;rsquo;,
&amp;lsquo;0.80&amp;rsquo;:&amp;lsquo;CC&amp;rsquo;,
&amp;lsquo;0.79&amp;rsquo;:&amp;lsquo;C9&amp;rsquo;,
&amp;lsquo;0.78&amp;rsquo;:&amp;lsquo;C7&amp;rsquo;,
&amp;lsquo;0.77&amp;rsquo;:&amp;lsquo;C4&amp;rsquo;,
&amp;lsquo;0.76&amp;rsquo;:&amp;lsquo;C2&amp;rsquo;,
&amp;lsquo;0.75&amp;rsquo;:&amp;lsquo;BF&amp;rsquo;,
&amp;lsquo;0.74&amp;rsquo;:&amp;lsquo;BD&amp;rsquo;,
&amp;lsquo;0.73&amp;rsquo;:&amp;lsquo;BA&amp;rsquo;, &amp;lsquo;0.72&amp;rsquo;:&amp;lsquo;B8&amp;rsquo;, &amp;lsquo;0.71&amp;rsquo;:&amp;lsquo;B5&amp;rsquo;, &amp;lsquo;0.70&amp;rsquo;:&amp;lsquo;B3&amp;rsquo;, &amp;lsquo;0.69&amp;rsquo;:&amp;lsquo;B0&amp;rsquo;, &amp;lsquo;0.68&amp;rsquo;:&amp;lsquo;AD&amp;rsquo;, &amp;lsquo;0.67&amp;rsquo;:&amp;lsquo;AB&amp;rsquo;, &amp;lsquo;0.66&amp;rsquo;:&amp;lsquo;A8&amp;rsquo;, &amp;lsquo;0.65&amp;rsquo;:&amp;lsquo;A6&amp;rsquo;, &amp;lsquo;0.64&amp;rsquo;:&amp;lsquo;A3&amp;rsquo;, &amp;lsquo;0.63&amp;rsquo;:&amp;lsquo;A1&amp;rsquo;, &amp;lsquo;0.62&amp;rsquo;:&amp;lsquo;9E&amp;rsquo;, &amp;lsquo;0.61&amp;rsquo;:&amp;lsquo;9C&amp;rsquo;, &amp;lsquo;0.60&amp;rsquo;:&amp;lsquo;99&amp;rsquo;, &amp;lsquo;0.59&amp;rsquo;:&amp;lsquo;96&amp;rsquo;, &amp;lsquo;0.58&amp;rsquo;:&amp;lsquo;94&amp;rsquo;, &amp;lsquo;0.57&amp;rsquo;:&amp;lsquo;91&amp;rsquo;, &amp;lsquo;0.56&amp;rsquo;:&amp;lsquo;8F&amp;rsquo;, &amp;lsquo;0.55&amp;rsquo;:&amp;lsquo;8C&amp;rsquo;, &amp;lsquo;0.54&amp;rsquo;:&amp;lsquo;8A&amp;rsquo;, &amp;lsquo;0.53&amp;rsquo;:&amp;lsquo;87&amp;rsquo;, &amp;lsquo;0.52&amp;rsquo;:&amp;lsquo;85&amp;rsquo;, &amp;lsquo;0.51&amp;rsquo;:&amp;lsquo;82&amp;rsquo;, &amp;lsquo;0.50&amp;rsquo;:&amp;lsquo;80&amp;rsquo;, &amp;lsquo;0.49&amp;rsquo;:&amp;lsquo;7D&amp;rsquo;, &amp;lsquo;0.48&amp;rsquo;:&amp;lsquo;7A&amp;rsquo;, &amp;lsquo;0.47&amp;rsquo;:&amp;lsquo;78&amp;rsquo;, &amp;lsquo;0.46&amp;rsquo;:&amp;lsquo;75&amp;rsquo;, &amp;lsquo;0.45&amp;rsquo;:&amp;lsquo;73&amp;rsquo;, &amp;lsquo;0.44&amp;rsquo;:&amp;lsquo;70&amp;rsquo;, &amp;lsquo;0.43&amp;rsquo;:&amp;lsquo;6E&amp;rsquo;, &amp;lsquo;0.42&amp;rsquo;:&amp;lsquo;6B&amp;rsquo;, &amp;lsquo;0.41&amp;rsquo;:&amp;lsquo;69&amp;rsquo;, &amp;lsquo;0.40&amp;rsquo;:&amp;lsquo;66&amp;rsquo;, &amp;lsquo;0.39&amp;rsquo;:&amp;lsquo;63&amp;rsquo;, &amp;lsquo;0.38&amp;rsquo;:&amp;lsquo;61&amp;rsquo;, &amp;lsquo;0.37&amp;rsquo;:&amp;lsquo;5E&amp;rsquo;, &amp;lsquo;0.36&amp;rsquo;:&amp;lsquo;5C&amp;rsquo;, &amp;lsquo;0.35&amp;rsquo;:&amp;lsquo;59&amp;rsquo;, &amp;lsquo;0.34&amp;rsquo;:&amp;lsquo;57&amp;rsquo;, &amp;lsquo;0.33&amp;rsquo;:&amp;lsquo;54&amp;rsquo;, &amp;lsquo;0.32&amp;rsquo;:&amp;lsquo;52&amp;rsquo;, &amp;lsquo;0.31&amp;rsquo;:&amp;lsquo;4F&amp;rsquo;, &amp;lsquo;0.30&amp;rsquo;:&amp;lsquo;4D&amp;rsquo;, &amp;lsquo;0.29&amp;rsquo;:&amp;lsquo;4A&amp;rsquo;, &amp;lsquo;0.28&amp;rsquo;:&amp;lsquo;47&amp;rsquo;, &amp;lsquo;0.27&amp;rsquo;:&amp;lsquo;45&amp;rsquo;, &amp;lsquo;0.26&amp;rsquo;:&amp;lsquo;42&amp;rsquo;, &amp;lsquo;0.25&amp;rsquo;:&amp;lsquo;40&amp;rsquo;, &amp;lsquo;0.24&amp;rsquo;:&amp;lsquo;3D&amp;rsquo;, &amp;lsquo;0.23&amp;rsquo;:&amp;lsquo;3B&amp;rsquo;, &amp;lsquo;0.22&amp;rsquo;:&amp;lsquo;38&amp;rsquo;, &amp;lsquo;0.21&amp;rsquo;:&amp;lsquo;36&amp;rsquo;, &amp;lsquo;0.20&amp;rsquo;:&amp;lsquo;33&amp;rsquo;, &amp;lsquo;0.19&amp;rsquo;:&amp;lsquo;30&amp;rsquo;, &amp;lsquo;0.18&amp;rsquo;:&amp;lsquo;2E&amp;rsquo;, &amp;lsquo;0.17&amp;rsquo;:&amp;lsquo;2B&amp;rsquo;, &amp;lsquo;0.16&amp;rsquo;:&amp;lsquo;29&amp;rsquo;, &amp;lsquo;0.15&amp;rsquo;:&amp;lsquo;26&amp;rsquo;, &amp;lsquo;0.14&amp;rsquo;:&amp;lsquo;24&amp;rsquo;, &amp;lsquo;0.13&amp;rsquo;:&amp;lsquo;21&amp;rsquo;, &amp;lsquo;0.12&amp;rsquo;:&amp;lsquo;1F&amp;rsquo;, &amp;lsquo;0.11&amp;rsquo;:&amp;lsquo;1C&amp;rsquo;, &amp;lsquo;0.10&amp;rsquo;:&amp;lsquo;1A&amp;rsquo;, &amp;lsquo;0.09&amp;rsquo;:&amp;lsquo;17&amp;rsquo;, &amp;lsquo;0.08&amp;rsquo;:&amp;lsquo;14&amp;rsquo;, &amp;lsquo;0.07&amp;rsquo;:&amp;lsquo;12&amp;rsquo;, &amp;lsquo;0.06&amp;rsquo;:&amp;lsquo;0F&amp;rsquo;, &amp;lsquo;0.05&amp;rsquo;:&amp;lsquo;0D&amp;rsquo;, &amp;lsquo;0.04&amp;rsquo;:&amp;lsquo;0A&amp;rsquo;, &amp;lsquo;0.03&amp;rsquo;:&amp;lsquo;08&amp;rsquo;, &amp;lsquo;0.02&amp;rsquo;:&amp;lsquo;05&amp;rsquo;, &amp;lsquo;0.01&amp;rsquo;:&amp;lsquo;03&amp;rsquo;, &amp;lsquo;0.00&amp;rsquo;:&amp;lsquo;00&amp;rsquo;,&lt;/p></description></item><item><title>uniapp字符串截取bug</title><link>https://dev.leiyanhui.com/c/uniapp-bug-substr-substring/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/uniapp-bug-substr-substring/</guid><description>&lt;h1 id="uniapp字符串截取bug">uniapp字符串截取bug
&lt;/h1>&lt;p>substr()和substring()无效&lt;/p>
&lt;p>这也不算是bug&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">str_substr(str1,lenInt){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">return str1.substr(0, lenInt)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>附加一个空字符串 就好了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">str_substr1(str1, ii) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">str1=str1+&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">return str1.substr(0, ii)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>unraid 安装 macos 12 Monterey 以及实现核显 win和macos 共享的方法</title><link>https://dev.leiyanhui.com/c/unraid-install-macos-12-monterey/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/unraid-install-macos-12-monterey/</guid><description>&lt;h1 id="unraid-安装-macos-12-monterey-以及实现核显-win和macos-共享的方法">unraid 安装 macos 12 Monterey 以及实现核显 win和macos 共享的方法
&lt;/h1>&lt;blockquote>
&lt;p>目的 一个能用得起的macos 并且可以通过 win虚拟机 本机转发macos的vnc 实现低带宽带宽下的远程访问&lt;/p>&lt;/blockquote>
&lt;h2 id="环境">环境
&lt;/h2>&lt;p>我这里基于 unraid 6.9.2 物理机 是 I7 8850H 的样子，魔改cpu qnct 核显是 UHD630 没有独显 大概就是6h12线 睿频2.8G左右 内存8x2=16G 硬盘一块nvme 512G 一块古董 2.5村1T机械盘 网卡和蓝牙是bcm924xx忘记了具体型号了。 #其他前置需求 ##梯子或者hosts &lt;a class="link" href="https://dev.leiyanhui.com/c/133" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/133&lt;/a> 尽量梯子吧 速度好一点 然后安装好 unraid 的最新应用市场和中文包 ##提前配置docker的国内镜像&lt;/p>
&lt;h2 id="应用市场安装辅助工具">应用市场安装辅助工具
&lt;/h2>&lt;p>直接在应用市场搜索 Macinabox Macinabox 简单说明&lt;/p>
&lt;blockquote>
&lt;p>就是一个工具，帮你自动下载黑苹果用的oc 镜像等，以及自动帮你创建虚拟机。是基于docker挂载物理机目录的方式实现的&lt;/p>&lt;/blockquote>
&lt;p>安装完成后 会提示创建容器 Operating System Version: Monterey VM Images Location:和VM Images Location AGAIN !!!: 修改成ssd的路径 /mnt/disk1/domains/ Isos Share Location: 修改为机械硬盘 /mnt/disk2/isos/ appdata修改为 /mnt/disk1/appdata/macinabox custom ovmf location:修改 /mnt/disk1/system/custom_ovmf/ 点应用 等待 拉取镜像: spaceinvaderone/macinabox:lates 最后自动创建了容器&lt;code>root@localhost:# /usr/local/emhttp/plugins/dynamix.docker.manager/scripts/docker run -d --name='macinabox' --net='bridge' --privileged=true -e TZ=&amp;quot;Asia/Shanghai&amp;quot; -e HOST_OS=&amp;quot;Unraid&amp;quot; -e 'flavour'='Monterey' -e 'vminstall'='Auto install' -e 'vdisksize'='100G' -e 'vdisktype'='raw' -e 'opencore'='stock' -e 'replaceopencore'='no' -e 'overridenic'='no' -e 'VMIMAGES'='/mnt/disk1/domains/' -e 'ISOIMAGES'='/mnt/disk2/isos/' -e 'injectfixxml'='yes' -v '/mnt/disk1/domains/':'/domains':'rw' -v '/mnt/disk2/isos/':'/isos':'rw' -v '/mnt/disk1/appdata/macinabox':'/config':'rw' -v '/mnt/disk1/system/custom_ovmf/':'/customovmf/':'rw' -v '/boot/config/plugins/user.scripts/scripts':'/userscripts':'rw' 'spaceinvaderone/macinabox' 75e8a2253e687b88fd0ca13cfadbe7928916ecd32e957deb74e0f9f665b041f6&lt;/code> 可以看到 上面我们配置的路径 都在这里搞定了 ##查看 Macinabox 结果 到容器里面 点Macinabox 查看日志 如果没有问题的话 会提示你对应的镜像文件配置文件 都给你弄好了。位置也说明了。 #搞脚本 user scripts 这个已经不是必须的了 看看上面日志 A copy of the macinabox helper user script was placed in /mnt/user/appdata/macinabox shell直接执行``` sh /mnt/user/appdata/macinabox/macinabox_helper_userscript.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">检查配置虚拟机Macinabox Monterey
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">=========================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">先检查磁盘位置 是我们想要的，三个磁盘 一个opencore 一个install 一个系统磁盘 没有其他需要修改的项目
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">直接启动 链接vnc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==========
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">opencore 自动加到到引导界面 选第一个硬盘 ，鼠标暂时不能用不能，等苹果进度条 因为我把 Monterey-install.img 放到了hhd的原因吧，启动比正常的VMware虚拟机的苹果安装程序还要慢 后面就是正常苹果安装步骤，先格式硬盘再安装。 我第一次选择错了硬盘，把oc给格式掉了。需要彻底删除重新弄。删除方法 看文末
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">等待安装完成
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">======
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">重启后 选择启动的时候，要注意 选择位置 简单配置一下 ，性能肯定是拉跨的，主要是显卡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">显卡直通 wifi卡 蓝牙卡 直通
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">=================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">这些操作除了unraid的操作，主要还是黑苹果的驱动问题。慢慢折腾中..
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">未完待续
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">====
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">彻底删除方法
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>virsh destroy &amp;ldquo;Macinabox Monterey&amp;rdquo; virsh undefine &amp;ldquo;Macinabox Monterey&amp;rdquo; &amp;ndash;nvram docker stop macinabox docker rm macinabox rm -rf /mnt/disk2/isos/Monterey-install.img rm -rf /mnt/user/appdata/macinabox rm -rf /mnt/user/system/custom_ovmf rm -rf /mnt/user/domains/Macinabox*&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-docker" data-lang="docker">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>unraid安装Intel GVT g 实现一个核显给多个虚拟机使用，目的 让虚拟机可以调用显卡实现远程加速 视频点播 虚拟群晖视频转码等等</title><link>https://dev.leiyanhui.com/c/unraid-intel-gvt-g/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/unraid-intel-gvt-g/</guid><description>&lt;h1 id="unraid安装intel-gvt-g-实现一个核显给多个虚拟机使用目的-让虚拟机可以调用显卡实现远程加速-视频点播-虚拟群晖视频转码等等">unraid安装Intel GVT g 实现一个核显给多个虚拟机使用，目的 让虚拟机可以调用显卡实现远程加速 视频点播 虚拟群晖视频转码等等
&lt;/h1>&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/c/unraid-auto-hosts/" target="_blank" rel="noopener"
>unraid免梯子解决多数插件问题 - 小类随手记 (leiyanhui.com)&lt;/a> 插件市场直接搜索 Intel GVT-G 有可能需要 提示等待的时候 一定要耐心等待 最后提示 plugin: intel-gvt-g.plg installed 才算完成 重启 unraid 打开设置 /Settings/intel-gvt-g-main 可以看到``` Following modes are available: i915-GVTg_V5_4 i915-GVTg_V5_8&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>unraid安装插件或升级之类的，遇到GitHub被墙 最简单的解决方法 免梯子 免机场</title><link>https://dev.leiyanhui.com/c/unraid-github/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/unraid-github/</guid><description>&lt;h1 id="unraid安装插件或升级之类的遇到github被墙-最简单的解决方法-免梯子-免机场">unraid安装插件或升级之类的，遇到GitHub被墙 最简单的解决方法 免梯子 免机场
&lt;/h1>&lt;p>试着用clash 弄半天 虽然可以用，但是没明白怎么自动更新配置文件，其他系统 都可以 就unraid的插件市场 一直提示 首先先去找在线hosts 源 找到源hosts后 先同网络的电脑修改 host试试，也可以用SwitchHosts 在本地试 看看可否打开 &lt;a class="link" href="https://raw.githubusercontent.com/Squidly271/community.applications/master/plugins/community.applications.plg" target="_blank" rel="noopener"
>https://raw.githubusercontent.com/Squidly271/community.applications/master/plugins/community.applications.plg&lt;/a> 如果可以打开基本上就可以了。 然后去修改unraid的hosts ，修改完 不用重启，也不用更新缓存，注意：重启就无效了。 如果要一直有效 就加到开机命令里面，不过没必要，又不是天天折腾插件什么的``` cd /etc mv hosts hosts-bak wget &lt;a class="link" href="https://gitlab.com/ineo6/hosts/-/raw/master/next-hosts" target="_blank" rel="noopener"
>https://gitlab.com/ineo6/hosts/-/raw/master/next-hosts&lt;/a> mv next-hosts hosts cat hosts&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>unraid部署clash和可视化界面</title><link>https://dev.leiyanhui.com/c/unraid-clash/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/unraid-clash/</guid><description>&lt;h1 id="unraid部署clash和可视化界面">unraid部署clash和可视化界面
&lt;/h1>&lt;blockquote>
&lt;p>建议用 v2rayA 更简单 &lt;a class="link" href="https://dev.leiyanhui.com/linux/docker-proxy/" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/linux/docker-proxy/&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>先安装可视化界面&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker pull haishanh/yacd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -p 1234:80 -d haishanh/yacd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#1234端口是你访问clash可视化界面的端口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">改一下
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run --name clashx -p 1234:80 --restart=always -d haishanh/yacd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开 http://unraidip:1234 可以访问了，但是不可以操作 有提示要添加一个9090的服务，先不管，我们继续&lt;/p>
&lt;p>去拿到 config.yaml 这个文件自己想办法。自己想办法解决节点问题。如果是机场有支持windows clash x的，订阅到windows后 本地会有这个文件 。这玩意收费的，不可能白嫖的。如果你没有地方买，可以找我拿邀请链接，会送你我一点流量。&lt;/p>
&lt;p>把文件放到 /mnt/disk1/appdata/clash/config.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">C:\Users\你的用户名\.config\clash\profiles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">注意 是在 profiles 目录
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>继续安装docker&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker pull dreamacro/clash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run --name clash -d -v /mnt/disk1/appdata/clash/config.yaml:/root/.config/clash/config.yaml --privileged -p 7890:7890 -p 9090:9090 dreamacro/clash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后发现 yacd 一直连不上 这边，最后改为host模式 就可以了。&lt;/p>
&lt;h3 id="unriad启用http代理">unriad启用http代理
&lt;/h3>&lt;p>修改&lt;a class="link" href="https://www.smzdm.com/fenlei/youpan/" target="_blank" rel="noopener"
>U盘&lt;/a>config目录下的go文件，增加如下代码，&lt;strong>注意 加粗部分修改为你自己的IP和端口&lt;/strong>&lt;/p>
&lt;p>http_proxy=&lt;strong>http://192.168.1.2:7890&lt;/strong> https_proxy=&lt;strong>http://192.168.1.2:7890&lt;/strong> /usr/local/sbin/emhttp &amp;amp;&lt;/p>
&lt;p>echo &amp;ldquo;export http_proxy=&amp;rdquo;&lt;strong>http://192.168.1.2:7890&lt;/strong>&amp;quot;&amp;quot; &amp;raquo; /root/.bash_profile&lt;/p>
&lt;p>echo &amp;ldquo;export https_proxy=&amp;rdquo;&lt;strong>http://192.168.1.2:7890&lt;/strong>&amp;quot;&amp;quot; &amp;raquo; /root/.bash_profile&lt;/p>
&lt;p>修改U盘/config/plugins/community.applications目录下的proxy.cfg文件（没有的话自己手动创建）&lt;/p>
&lt;p>同样注意加粗部分修改成自己的&lt;/p>
&lt;p>port=&lt;strong>7890&lt;/strong>&lt;/p>
&lt;p>tunnel=2&lt;/p>
&lt;p>proxy=&lt;strong>http://192.168.1.2&lt;/strong>&lt;/p>
&lt;p>proxy=&lt;strong>socks5://192.168.1.2&lt;/strong>&lt;/p>
&lt;p>下面给一个config.yaml 的范本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mixed-port: 7890 #必须
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow-lan: true #必须的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bind-address: &amp;#39;*&amp;#39; #必须
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mode: rule #必须
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">log-level: silent #必须
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">external-controller: &amp;#39;:9090&amp;#39; #必须
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dns:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enable: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ipv6: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default-nameserver: [223.5.5.5, 119.29.29.29]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enhanced-mode: redir-host
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fake-ip-range: 198.18.0.1/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> use-hosts: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nameserver: [&amp;#39;https://doh.pub/dns-query&amp;#39;, &amp;#39;https://dns.alidns.com/dns-query&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fallback: [&amp;#39;https://doh.dns.sb/dns-query&amp;#39;, &amp;#39;https://dns.cloudflare.com/dns-query&amp;#39;, &amp;#39;https://dns.twnic.tw/dns-query&amp;#39;, &amp;#39;tls://8.8.4.4:853&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32] }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">proxies:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 更多内容 参考后
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>unraid离线安装官网中文语言包，免梯子的方法</title><link>https://dev.leiyanhui.com/c/unraid-cn/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/unraid-cn/</guid><description>&lt;h1 id="unraid离线安装官网中文语言包免梯子的方法">unraid离线安装官网中文语言包，免梯子的方法
&lt;/h1>&lt;p>unraid离线安装官网中文语言包，免梯子的方法&lt;/p>
&lt;p>6.9.2为例子 打开 &lt;a class="link" href="https://github.com/unraid/lang-zh" target="_blank" rel="noopener"
>https://github.com/unraid/lang-zh&lt;/a>_CN zip下载 如果 github都打不开 那就找一个git加速网站 例如 &lt;a class="link" href="https://ghproxy.com/https://github.com/unraid/lang-zh" target="_blank" rel="noopener"
>https://ghproxy.com/https://github.com/unraid/lang-zh&lt;/a>_CN/archive/refs/heads/master.zip 下载回来的zip不要解压 在unraid 的页面中点 tools 然后找到 http://xxxxxx/Tools/Language 重点来了，右侧 有一个 user 和 develop 切换按钮，点 user 切换到develop模式 Select language: 选择中文 Select language file: 点 Browse 选择刚刚的zip包 upload上传 刷新一下 页面 然后打开 /Settings/DisplaySettings 选择中文就可以了 也可以在 屏幕右上角 有一个 两个剪头组成的方框位置 切换语言 这个方法 修改的中文语言，重启后会失效。 如果 要一直有效，还是需要解决 GitHub污染问题，后安装最新版本 apps 市场，然后在市场里面直接安装 免梯子直接搞定的方法 &lt;a class="link" href="https://dev.leiyanhui.com/c/unraid-auto-hosts/" target="_blank" rel="noopener"
>unraid免梯子解决多数插件问题 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p></description></item><item><title>unraid免梯子解决多数插件问题</title><link>https://dev.leiyanhui.com/c/unraid-auto-hosts/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/unraid-auto-hosts/</guid><description>&lt;h1 id="unraid免梯子解决多数插件问题">unraid免梯子解决多数插件问题
&lt;/h1>&lt;p>unraid大量依赖github，docker 跑clash的方法也可以，需要改三处地方。&lt;/p>
&lt;p>但是 大部分机场的配置文件 都是基于win的 需要手动转换，或者写脚本自动转换，真的很麻烦。&lt;/p>
&lt;p>那是改hosts了，next hosts 是一个稳定多年的host维护了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">#更新hosts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /etc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp hosts hosts-bak
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget -c https://gitlab.com/ineo6/hosts/-/raw/master/next-hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv next-hosts hosts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个脚本 执行后，建议访问unraid的电脑也弄一下，或者挂梯子&lt;/p>
&lt;p>以后每次要装插件之前 执行一次 或者，干脆装一个 user script插件 添加到脚本里面&lt;/p>
&lt;p>然后custom，设定5分钟执行一次&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">*/5 * * * *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>unraid下kvm虚拟机创建和热拔插一个虚拟硬盘</title><link>https://dev.leiyanhui.com/c/unraid-kvm-add-disk/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/unraid-kvm-add-disk/</guid><description>&lt;h1 id="unraid下kvm虚拟机创建和热拔插一个虚拟硬盘">unraid下kvm虚拟机创建和热拔插一个虚拟硬盘
&lt;/h1>&lt;p>创建&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd /mnt/disk1/domains
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">qemu-img create -f qcow2 win_soft.qcow2 40G
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">virsh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>附加到虚拟机&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">virsh attach-disk Win2022 /mnt/disk1/domains/win_soft.qcow2 vdb --cache writeback --subdriver qcow2 --config --live
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>windows2022 是虚拟机名称 vdb 是挂载序号&lt;/p>
&lt;p>还可以不关机直接改容量&lt;/p>
&lt;p>删除 ，添加容量，附加硬盘&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">virsh detach-disk Win2022 vdb--persistent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">qemu-img resize /mnt/disk1/domains/win_soft.qcow2 +1G
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">virsh attach-disk Win2022 /mnt/disk1/domains/win_soft.qcow2 vdb --cache writeback --subdriver qcow2 --config --live
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>unraid虚拟机运行Windows 2022的配置文件</title><link>https://dev.leiyanhui.com/c/unraidwindows-2022/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/unraidwindows-2022/</guid><description>&lt;h1 id="unraid虚拟机运行windows-2022的配置文件">unraid虚拟机运行Windows 2022的配置文件
&lt;/h1>&lt;p>unraid破解版安装Windows10 ltc 2021的时候遇到花屏问题 没时间研究解决方法 尝试了windows server 2022 没问题 记录一下配置文件 先贴xml 后贴截图&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;?xml version=&amp;#39;1.0&amp;#39; encoding=&amp;#39;UTF-8&amp;#39;?&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;domain type=&amp;#39;kvm&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;name&amp;gt;Win2022&amp;lt;/name&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;uuid&amp;gt;1ac2ae0c-a1df-1110-5b63-14d758344a6b&amp;lt;/uuid&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;metadata&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vmtemplate xmlns=&amp;#34;unraid&amp;#34; name=&amp;#34;Windows 10&amp;#34; icon=&amp;#34;windows.png&amp;#34; os=&amp;#34;windows10&amp;#34;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/metadata&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;memory unit=&amp;#39;KiB&amp;#39;&amp;gt;8388608&amp;lt;/memory&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;currentMemory unit=&amp;#39;KiB&amp;#39;&amp;gt;8388608&amp;lt;/currentMemory&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;memoryBacking&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;nosharepages/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/memoryBacking&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpu placement=&amp;#39;static&amp;#39;&amp;gt;12&amp;lt;/vcpu&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;cputune&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;0&amp;#39; cpuset=&amp;#39;0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;1&amp;#39; cpuset=&amp;#39;6&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;2&amp;#39; cpuset=&amp;#39;1&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;3&amp;#39; cpuset=&amp;#39;7&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;4&amp;#39; cpuset=&amp;#39;2&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;5&amp;#39; cpuset=&amp;#39;8&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;6&amp;#39; cpuset=&amp;#39;3&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;7&amp;#39; cpuset=&amp;#39;9&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;8&amp;#39; cpuset=&amp;#39;4&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;9&amp;#39; cpuset=&amp;#39;10&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;10&amp;#39; cpuset=&amp;#39;5&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vcpupin vcpu=&amp;#39;11&amp;#39; cpuset=&amp;#39;11&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/cputune&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;os&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;type arch=&amp;#39;x86_64&amp;#39; machine=&amp;#39;pc-i440fx-5.1&amp;#39;&amp;gt;hvm&amp;lt;/type&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/os&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;features&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;acpi/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;apic/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;hyperv&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;relaxed state=&amp;#39;on&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vapic state=&amp;#39;on&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;spinlocks state=&amp;#39;on&amp;#39; retries=&amp;#39;8191&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;vendor_id state=&amp;#39;on&amp;#39; value=&amp;#39;none&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/hyperv&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/features&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;cpu mode=&amp;#39;host-passthrough&amp;#39; check=&amp;#39;none&amp;#39; migratable=&amp;#39;on&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;topology sockets=&amp;#39;1&amp;#39; dies=&amp;#39;1&amp;#39; cores=&amp;#39;6&amp;#39; threads=&amp;#39;2&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;cache mode=&amp;#39;passthrough&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/cpu&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;clock offset=&amp;#39;localtime&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;timer name=&amp;#39;hypervclock&amp;#39; present=&amp;#39;yes&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;timer name=&amp;#39;hpet&amp;#39; present=&amp;#39;no&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/clock&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;on_poweroff&amp;gt;destroy&amp;lt;/on_poweroff&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;on_reboot&amp;gt;restart&amp;lt;/on_reboot&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;on_crash&amp;gt;restart&amp;lt;/on_crash&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;devices&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;emulator&amp;gt;/usr/local/sbin/qemu&amp;lt;/emulator&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;disk type=&amp;#39;file&amp;#39; device=&amp;#39;disk&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;driver name=&amp;#39;qemu&amp;#39; type=&amp;#39;raw&amp;#39; cache=&amp;#39;writeback&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;source file=&amp;#39;/mnt/user/domains/Win2022/vdisk1.img&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;target dev=&amp;#39;hdc&amp;#39; bus=&amp;#39;virtio&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;boot order=&amp;#39;1&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;pci&amp;#39; domain=&amp;#39;0x0000&amp;#39; bus=&amp;#39;0x00&amp;#39; slot=&amp;#39;0x05&amp;#39; function=&amp;#39;0x0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/disk&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;controller type=&amp;#39;pci&amp;#39; index=&amp;#39;0&amp;#39; model=&amp;#39;pci-root&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;controller type=&amp;#39;ide&amp;#39; index=&amp;#39;0&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;pci&amp;#39; domain=&amp;#39;0x0000&amp;#39; bus=&amp;#39;0x00&amp;#39; slot=&amp;#39;0x01&amp;#39; function=&amp;#39;0x1&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/controller&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;controller type=&amp;#39;virtio-serial&amp;#39; index=&amp;#39;0&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;pci&amp;#39; domain=&amp;#39;0x0000&amp;#39; bus=&amp;#39;0x00&amp;#39; slot=&amp;#39;0x04&amp;#39; function=&amp;#39;0x0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/controller&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;controller type=&amp;#39;usb&amp;#39; index=&amp;#39;0&amp;#39; model=&amp;#39;ich9-ehci1&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;pci&amp;#39; domain=&amp;#39;0x0000&amp;#39; bus=&amp;#39;0x00&amp;#39; slot=&amp;#39;0x07&amp;#39; function=&amp;#39;0x7&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/controller&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;controller type=&amp;#39;usb&amp;#39; index=&amp;#39;0&amp;#39; model=&amp;#39;ich9-uhci1&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;master startport=&amp;#39;0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;pci&amp;#39; domain=&amp;#39;0x0000&amp;#39; bus=&amp;#39;0x00&amp;#39; slot=&amp;#39;0x07&amp;#39; function=&amp;#39;0x0&amp;#39; multifunction=&amp;#39;on&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/controller&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;controller type=&amp;#39;usb&amp;#39; index=&amp;#39;0&amp;#39; model=&amp;#39;ich9-uhci2&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;master startport=&amp;#39;2&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;pci&amp;#39; domain=&amp;#39;0x0000&amp;#39; bus=&amp;#39;0x00&amp;#39; slot=&amp;#39;0x07&amp;#39; function=&amp;#39;0x1&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/controller&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;controller type=&amp;#39;usb&amp;#39; index=&amp;#39;0&amp;#39; model=&amp;#39;ich9-uhci3&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;master startport=&amp;#39;4&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;pci&amp;#39; domain=&amp;#39;0x0000&amp;#39; bus=&amp;#39;0x00&amp;#39; slot=&amp;#39;0x07&amp;#39; function=&amp;#39;0x2&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/controller&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;interface type=&amp;#39;bridge&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;mac address=&amp;#39;52:54:00:cc:4c:19&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;source bridge=&amp;#39;br0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;model type=&amp;#39;virtio-net&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;pci&amp;#39; domain=&amp;#39;0x0000&amp;#39; bus=&amp;#39;0x00&amp;#39; slot=&amp;#39;0x03&amp;#39; function=&amp;#39;0x0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/interface&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;serial type=&amp;#39;pty&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;target type=&amp;#39;isa-serial&amp;#39; port=&amp;#39;0&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;model name=&amp;#39;isa-serial&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/target&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/serial&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;console type=&amp;#39;pty&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;target type=&amp;#39;serial&amp;#39; port=&amp;#39;0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/console&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;channel type=&amp;#39;unix&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;target type=&amp;#39;virtio&amp;#39; name=&amp;#39;org.qemu.guest_agent.0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;virtio-serial&amp;#39; controller=&amp;#39;0&amp;#39; bus=&amp;#39;0&amp;#39; port=&amp;#39;1&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/channel&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;input type=&amp;#39;tablet&amp;#39; bus=&amp;#39;usb&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;usb&amp;#39; bus=&amp;#39;0&amp;#39; port=&amp;#39;1&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/input&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;input type=&amp;#39;mouse&amp;#39; bus=&amp;#39;ps2&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;input type=&amp;#39;keyboard&amp;#39; bus=&amp;#39;ps2&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;graphics type=&amp;#39;vnc&amp;#39; port=&amp;#39;-1&amp;#39; autoport=&amp;#39;yes&amp;#39; websocket=&amp;#39;-1&amp;#39; listen=&amp;#39;0.0.0.0&amp;#39; keymap=&amp;#39;en-us&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;listen type=&amp;#39;address&amp;#39; address=&amp;#39;0.0.0.0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/graphics&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;video&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;model type=&amp;#39;qxl&amp;#39; ram=&amp;#39;65536&amp;#39; vram=&amp;#39;65536&amp;#39; vgamem=&amp;#39;16384&amp;#39; heads=&amp;#39;1&amp;#39; primary=&amp;#39;yes&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;pci&amp;#39; domain=&amp;#39;0x0000&amp;#39; bus=&amp;#39;0x00&amp;#39; slot=&amp;#39;0x02&amp;#39; function=&amp;#39;0x0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/video&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;memballoon model=&amp;#39;virtio&amp;#39;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;address type=&amp;#39;pci&amp;#39; domain=&amp;#39;0x0000&amp;#39; bus=&amp;#39;0x00&amp;#39; slot=&amp;#39;0x06&amp;#39; function=&amp;#39;0x0&amp;#39;/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/memballoon&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/devices&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/domain&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>virtualbox 迁移到kvm</title><link>https://dev.leiyanhui.com/c/virtualbox-kvm/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/virtualbox-kvm/</guid><description>&lt;h1 id="virtualbox-迁移到kvm">virtualbox 迁移到kvm
&lt;/h1>&lt;p>考虑到硬件直通的问题&lt;/p>
&lt;p>物理机 换到 unraid，原来在virtualbox运行的docker直接挂到了unraid&lt;/p>
&lt;p>剩下win虚拟机的软件磁盘（vhd vhdx） 还是需要迁移qcow2&lt;/p>
&lt;p>第一种方案 最简单，创建一个 qcow2 把vhdx文件直接通过nas 复制qcow2分区即可，也可以直接挂载vhd后复制文件&lt;/p>
&lt;p>第二种方案&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#blkdebug blklogwrites blkverify bochs cloop compress copy-before-write copy-on-read dmg file ftp ftps host_cdrom host_device http https luks nbd null-aio null-co nvme parallels preallocate qcow qcow2 qed quorum raw replication ssh throttle vdi vhdx vmdk vpc vvfat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">、qed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># vpc 就是 vhd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd /mnt/disk1/domains
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /mnt/disks/HHD/system-vhd-bak/Win-Soft-Data/SOFT.vhd ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /mnt/disks/HHD/system-vhd-bak/Win-Soft-Data/IDEs.vhdx ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">qemu-img convert -p -f vpc -O qcow2 SOFT.vhd soft.qcow2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">qemu-img convert -p -f vhdx -O qcow2 IDEs.vhdx ide.qcow2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">有错误，先
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">qemu-img check -r all &amp;#39;IDEs.vhdx&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">再转换 就ok了
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后挂载到虚拟机 &lt;a class="link" href="https://dev.leiyanhui.com/c/unraid-kvm-add-disk/" target="_blank" rel="noopener"
>unraid下kvm虚拟机创建和热拔插一个虚拟硬盘 - 小类随手记 (leiyanhui.com)&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">virsh detach-disk Win2022 vdb --persistent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">virsh attach-disk Win2022 /mnt/disk1/domains/soft.qcow2 vdb --cache writeback --subdriver qcow2 --config --live
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">virsh attach-disk Win2022 /mnt/disk1/domains/ide.qcow2 vdc --cache writeback --subdriver qcow2 --config --live
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">error: Failed to attach disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">error: internal error: unable to execute QEMU command &amp;#39;device_add&amp;#39;: Duplicate device ID &amp;#39;virtio-disk2&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">检查发现 是 vdc 被占用了，不知道 改成 vdd 就可以了
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>VirtualBox的优势和为什么选择VirtualBox</title><link>https://dev.leiyanhui.com/c/virtualbox-superiority/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/virtualbox-superiority/</guid><description>&lt;h1 id="virtualbox的优势和为什么选择virtualbox">VirtualBox的优势和为什么选择VirtualBox
&lt;/h1>&lt;p>1、VirtualBox 免费开源 2、cpu 内存 和 硬盘 性能并不比vmware差 3、支持vdi vhd vmdk分区格式，自带命令行版本万能转化工具 4、轻巧 5、支持macos 可以支持到13版本[2022-08-29] 6、支持usb 7、VirtualBox 做的vhd或者vdi 可以在物理机直接启动 8、VirtualBox 在多数情况下 运行linux 或者win 在不需要3d的情况下，不管直接运行还是docker 并不比vmware性能差，VirtualBox +linux+docker 的性能，也只是略逊于 wsl+docker Windows vhd的话用BOOTICE.exe之类的的工具直接附加到bcd即可 也可以用ventoy 启动 linux的话 可以用ventoy 启动 详情参考ventoy官网&lt;/p>
&lt;p>比vmware 或者 hyper-v差的地方 1、教程较少 如果是玩特殊系统新手上手难度较大，比如 最新版黑群晖的教程 就几乎没有，虽然不难，但是新手可能懵逼 2、3d性能比vmware拉胯，当然比hyper-v更拉跨 3、不支持硬件直通，vmware也不支持，exsi pve unraid之类的支持 hyper-v也可以支持&lt;/p>
&lt;p>什么情况下选择 hyper-v？ hyper-v不支持usb这是很多人 感觉最蛋疼的，可以用 USB Over Network 解决这个问题，其他情况下 hyper-v 性能最优，而且支持vgpu 但是 hyper-v 安装黑苹果 非常麻烦：大致流程是 开启vgpu 或者硬件直通后，以及嵌套虚拟化后 在hv 安装pve 或者unraid 再行安装黑苹果。unraid app市场带一个自动安装工具不过只支持双核cpu&lt;/p>
&lt;p>什么情况下选择hyper-v 有正版Windows、对性能要求高，完全不玩虚拟macos、不喜欢在虚拟机跑docker 什么情况下选择vmware 完全不玩vhd 可以接受vmware player 或 盗版sn 对VirtualBox不感冒，对3d要求略高一些 什么情况下选择VirtualBox 不会在虚拟机里面打游戏，对3D性能要求不太高，有能力搞定一些特殊的需求 我选择 VirtualBox + vmware 是因为我需要使用vmware跑黑苹果，另外一些商用服务器性质的内容丢到VirtualBox 运行，和hyper-v 以及物理机 之间来回迁移方便。&lt;/p>
&lt;p>2022年10-07 已经全部迁移到 换kvm了&lt;/p></description></item><item><title>windows server 2022 开机自动登录</title><link>https://dev.leiyanhui.com/c/win2022-autologin/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/win2022-autologin/</guid><description>&lt;h1 id="windows-server-2022-开机自动登录">windows server 2022 开机自动登录
&lt;/h1>&lt;p>因我的windows server 2022 运行在kvm上，不存在安全问题，所以配置一下，开机自动登录 第一是 开机 ctrl+alt+del 的问题 注册表 win+r regedit&lt;/p>
&lt;p>&lt;code>[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PasswordLess\Device]&lt;/code>&lt;/p>
&lt;p>DevicePasswordLessBuildVersion 改为1 或者保存为reg 双击导入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> Windows Registry Editor Version 5.00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [HKEY\_LOCAL\_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PasswordLess\Device]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;DevicePasswordLessBuildVersion&amp;#34;=dword:00000000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Windows访问btrfs文件系统</title><link>https://dev.leiyanhui.com/c/btrfs-win/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/btrfs-win/</guid><description>&lt;h1 id="windows访问btrfs文件系统">Windows访问btrfs文件系统
&lt;/h1>&lt;p>群晖磁盘使用btrfs文件格式 Windows下不容易访问 简单方法 就是安装一个驱动
&lt;a class="link" href="https://github.com/maharmstone/btrfs" target="_blank" rel="noopener"
>https://github.com/maharmstone/btrfs&lt;/a>&lt;/p>
&lt;p>解压后 右键 btrfs.inf 安装 如果系统开了 安全启动 驱动会无法加载 需要改一下注册表&lt;/p>
&lt;p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\CI\Policy&lt;/p>
&lt;p>新建一个 DWORD value called UpgradedSystem and set to 1&lt;/p>
&lt;p>然后重启 另外一个软件 UFS Explorer，但是网上破解版 基本都是假的 有文件大小限制。&lt;/p></description></item><item><title>windows通过sftp挂载linux分区的方法</title><link>https://dev.leiyanhui.com/c/windows-sftp-linux/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/windows-sftp-linux/</guid><description>&lt;h1 id="windows通过sftp挂载linux分区的方法">windows通过sftp挂载linux分区的方法
&lt;/h1>&lt;p>方法很多 rclone sshfs-win 都可以，但是图形界面并且配置简单的 还是 sFTPDrive&lt;/p>
&lt;p>免费版本 不支持命令行，只支持手动绑定，重启也需要手动启动一次，但是其实也足够了。&lt;/p>
&lt;p>&lt;a class="link" href="https://www.nsoftware.com/sftp/drive/download.aspx" target="_blank" rel="noopener"
>https://www.nsoftware.com/sftp/drive/download.aspx&lt;/a>&lt;/p>
&lt;p>也可以使用rclone&lt;/p></description></item><item><title>宝塔面板自身y以及phpmyadmin开启ssl，并自动续签的方法。</title><link>https://dev.leiyanhui.com/c/106/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/106/</guid><description>&lt;h1 id="宝塔面板自身y以及phpmyadmin开启ssl并自动续签的方法">宝塔面板自身y以及phpmyadmin开启ssl，并自动续签的方法。
&lt;/h1>&lt;p>实现方法：把宝塔面板自身的ssl证书文件软连接到网站的ssl证书文件 而网站自己的ssl是可以通过宝塔自带的计划任务续签的。 首先知道两边文件的路径 面板和phpmyadmin默认使用的文件从 /www/server/panel/vhost/nginx/phpmyadmin.conf 可以看到 路径分别是 /www/server/panel/ssl/certificate.pem; /www/server/panel/ssl/privateKey.pem; 网站的ssl证书文件是 /www/server/panel/vhost/cert/forssl.jia.leiyanhui.com/fullchain.pem; /www/server/panel/vhost/cert/forssl.jia.leiyanhui.com/privkey.pem; 准备软连接 ln -s 源文件 目标文件 然后在面板和phpmyadmin位置分别打开ssl 就可以了。 因为我这里了二级域名 jia.leiyanhui.com 和三级域名 *.jia.leiyanhui.com 三级域名的证书不可以使用 *.leiyanhui.com的证书，所以单独申请&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rm -rf /www/server/panel/ssl/certificate.pem
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf /www/server/panel/ssl/privateKey.pem
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s /www/server/panel/vhost/cert/forssl.jia.leiyanhui.com/fullchain.pem /www/server/panel/ssl/certificate.pem
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s /www/server/panel/vhost/cert/forssl.jia.leiyanhui.com/privkey.pem /www/server/panel/ssl/privateKey.pem
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>需要更新一下本地浏览器缓存&lt;/p></description></item><item><title>宝塔中运行多个mysql的方法</title><link>https://dev.leiyanhui.com/c/baota-2mysql/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/baota-2mysql/</guid><description>&lt;h1 id="宝塔中运行多个mysql的方法">宝塔中运行多个mysql的方法
&lt;/h1>&lt;p>docker 再跑一个mysql 是最简单的了哈&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker pull mysql:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -itd --name mysql -p 3307:3306 -e MYSQL\_ROOT\_PASSWORD=123456 mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果还要自定义配置文件的话 用-v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /www/wwwroot/leiyanhui.com/docker-mysql-cnf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -itd --name mysql -v /www/wwwroot/leiyanhui.com/docker-mysql-cnf:/etc/mysql/conf.d -p 3307:3306 -e MYSQL\_ROOT\_PASSWORD=123456 mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">然后在宝塔面板 添加远程服务器
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>宝塔自动备份ssl域名证书文件到oss</title><link>https://dev.leiyanhui.com/c/baota-ssl-to-oss/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/baota-ssl-to-oss/</guid><description>&lt;h1 id="宝塔自动备份ssl域名证书文件到oss">宝塔自动备份ssl域名证书文件到oss
&lt;/h1>&lt;p>路径 /www/server/panel/vhost/ssl 可以添加到目录里面 也可以直接 cp到wwwroot 然后 ln -s 回去&lt;/p></description></item><item><title>搭建私有网盘的一些需求和想法</title><link>https://dev.leiyanhui.com/c/privatecloud/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/privatecloud/</guid><description>&lt;blockquote>
&lt;p>本文实际写于 2017年，到现在2023年初需求已经发生很多变化。&lt;/p>&lt;/blockquote>
&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/all-in-one/my-netdisk" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/all-in-one/my-netdisk&lt;/a>&lt;/p>
&lt;h1 id="搭建私有网盘的一些需求和想法">搭建私有网盘的一些需求和想法
&lt;/h1>&lt;p>日常使用环境&lt;/p>
&lt;ul>
&lt;li>win8 win11 + ubuntu linux desktop+ ios设备&lt;/li>
&lt;li>vbox 虚拟机已经在跑ubuntu+宝塔&lt;/li>
&lt;li>多远程环境使用，笔记本性能拉胯&lt;/li>
&lt;/ul>
&lt;p>需求：&lt;/p>
&lt;ul>
&lt;li>自动备份 桌面环境下 某些文件 [只要能挂载 sysnc之类的软件可以简单搞定]&lt;/li>
&lt;li>标准目录储存&lt;/li>
&lt;li>ios 只要求能访问 ES文件浏览器 支持 smb ftp sftp webdav 等多环境 不是问题&lt;/li>
&lt;li>文件实际保存在 windows NTFS分区 ，方便管理维护&lt;/li>
&lt;li>可以自动同步到 公用云 阿里云盘 百度云&lt;/li>
&lt;li>可以加密储存&lt;/li>
&lt;li>视频文件可绕过公用云的 ai 原因你懂的哈&lt;/li>
&lt;li>支持在线视频音乐播放&lt;/li>
&lt;li>文本文件编辑，md文件编辑&lt;/li>
&lt;li>尽可能的替代群晖&lt;/li>
&lt;/ul>
&lt;p>抛弃的方案：&lt;/p>
&lt;ul>
&lt;li>群晖：确实好用，但是 无法使用物理机的文件系统作为数据目录，另外黑群晖也存在不稳定的情况&lt;/li>
&lt;li>seafile nextcloud 等私有盘系统，过于繁琐，且免费版限制较多&lt;/li>
&lt;li>unraid ： 也不错，但是多数功能还是需要自行解决，在不嵌套虚拟机docker的情况下，同样没太大意义&lt;/li>
&lt;/ul>
&lt;p>最终方案&lt;/p>
&lt;ul>
&lt;li>用来运行宝塔的虚拟机，通过ftp或者smb挂载物理机目录到虚拟机内&lt;/li>
&lt;li>基于php+文件系统的 私有云方案 可道云 nextcloud phpEasyVCS 等&lt;/li>
&lt;li>虚拟机 linux中挂载本地硬盘 并映射到 虚拟机的指定目录&lt;/li>
&lt;li>阿里云 webdav容器+百度云 两种方式&lt;/li>
&lt;/ul>
&lt;p>可道云相关功能&lt;/p>
&lt;ul>
&lt;li>kodbox支持 sqlite 支持 mysql 也有一个版本[KodExplorer]可以无数据库运行，但是不支持webdav[可以用phpEasyVCS 解决]&lt;/li>
&lt;li>kodbox的redis 不支持密码连接 [小事情] 自己用访问量不大，也可以用文件缓存 或者Memcached&lt;/li>
&lt;li>免费版本 除了用户数限制之外，定时备份不支持文件备份[可以用linux shell 解决]&lt;/li>
&lt;li>支持在线编辑md 文本&lt;/li>
&lt;li>没找到 文件加密储存方法，&lt;/li>
&lt;li>视频文件可以用自定义后缀名绕过公用云&lt;/li>
&lt;li>机密文件 自行用zip加密算了&lt;/li>
&lt;li>经过简单测试 KodExplorer 可以保持原目录结构保持文件 KodBox拆分日期保存。&lt;/li>
&lt;li>也就是 KodBox 反而集合了seafile的缺点，还自带了owncloud 和nexcloud的php低效缺点 。不符合我需求，KodExplorer 不错，但是不支持 oss和百度云云挂载，也不支持webdev 不过这些都可以解决。KodExplorer 更像是一个加强版的在线文件管理器。KodExplorer完全开源，版权可以修改，但是会有一个修改提示。&lt;/li>
&lt;/ul>
&lt;p>中间的&lt;/p>
&lt;ul>
&lt;li>在线文件关联 简单编辑 音影视频播放 KodExplorer&lt;/li>
&lt;li>webdav 使用php 或者apache/nginx功能搞定&lt;/li>
&lt;li>手机ios访问，es文件管理器 用sftp 或webdav&lt;/li>
&lt;li>Windows系统访问，sftp挂载 或者 webdav挂载&lt;/li>
&lt;li>公用云备份功能：阿里云盘目前可以用webdav暂时先用，百度云盘也尽量搞定防止阿里云盘失效，坚果云虽支持webdav但是免费版限制太多，收费版速度一般般，阿里oss 储存其他一些文件&lt;/li>
&lt;li>远程下载功能：远程桌面直接迅雷，后期单独搭建一个Aria&lt;/li>
&lt;li>公有云备份功能1：宝塔自带的备份到oss功能&lt;/li>
&lt;li>公有云备份功能2：rclone挂载&lt;/li>
&lt;li>&lt;/li>
&lt;/ul>
&lt;h2 id="最终的选择">最终的选择
&lt;/h2>&lt;p>自己用golang写了一个 webdav，部分环境用nginx做webdav&lt;/p></description></item><item><title>大量小文件在smb中传输的一个不具有广泛适用性的解决方法</title><link>https://dev.leiyanhui.com/c/smb-sharp-vhd/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/smb-sharp-vhd/</guid><description>&lt;h1 id="大量小文件在smb中传输的一个不具有广泛适用性的解决方法">大量小文件在smb中传输的一个不具有广泛适用性的解决方法
&lt;/h1>&lt;p>大量小文件在smb中传输的一个不具有广泛适用性的解决方法&lt;/p>
&lt;p>环境：unraid自带的smb共享 + Windows server 2022 常用软件 我放到了 \10.0.0.8\SharpYanhui 映射到Z盘，但是发现诸多问题。 首先 软件打开的 时候 会频繁提示 安全问题，再次 就是部分软件安装不到 过来，有权限问题。比如 腾讯 tim 另外就是 一些小文件的写入 会非常慢。 为了解决这个问题想到一个简单的方法。 在 \10.0.0.8\SharpYanhui 创建一个vhd 文件，然后挂载到 win物理机 搞定。 文件复制到 挂载路径 就可以了 缺点：不适合其他操作系统，同一时间 只能有一个机器挂载这个vhd文件。 所以 只适合 少数场景&lt;/p></description></item><item><title>导出几个自己常用的虚拟机镜像</title><link>https://dev.leiyanhui.com/c/6/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/6/</guid><description>&lt;h1 id="导出几个自己常用的虚拟机镜像">导出几个自己常用的虚拟机镜像
&lt;/h1>&lt;p>1、win7 64 俄罗斯精简版 没有优化，直接上传&lt;/p>
&lt;p>2、win10 64 20h2 企业 官网版&lt;/p>
&lt;p>正常安装，然后&lt;/p>
&lt;p>关闭休眠powercfg -h off.和虚拟内存 系统还原（如果需要自行打开），&lt;/p>
&lt;p>并安装 vbox的驱动 用wepe工具箱的iso文件启动，打开dism 空间回收全选 关闭自动安装推荐应用 进去win10 下载一个dism++ 用dism 删除已经安装的appx 和预安装的dism++ 保留应用商店相关，随手可恢复 删除一些无用的 可选功能 正常可以压缩的4G左右 Windows hello face 中文补充字体《还是保留吧》 Chinese prc hand xx 手写输入 wmp 播放器 再次启动的winpe 删除休眠文件和交换文件 实际占用空间 5.39G 关机，移除winpe碟片 导出 上传百度云 和 阿里云 3、xp 本来打算用deepinxp sp3的 结果找不到了 于是先用官网母盘&lt;/p>
&lt;pre>&lt;code>ed2k://|file|zh-hans\_windows\_xp\_professional\_with\_service\_pack\_3\_x86\_cd\_vl\_x14-74070.iso|630237184|EC51916C9D9B8B931195EE0D6EE9B40E|/
&lt;/code>&lt;/pre>
&lt;p>弄了一个 只装驱动 没优化 然后又找到 deepinxp sp3 重新做了一个 &amp;gt; DeepinXPsp3 是deepxp的最后一个版本，后来他就转型洗白了，现在的deepin linux 也是他们做的。这个版本日常使用没有任何问题，偶尔提示找不到dll什么的 ，需要挂一下winxpsp3的原盘 (多数可以挂他自己)解决，iis被精简掉了，网上有恢复包。因为我不用iis6 所以也不打算找了。要用自己找一下吧&lt;/p>
&lt;p>下载地址：链接: &lt;a class="link" href="https://pan.baidu.com/s/1-S-gBDFfiZSc4pLyDygfKw" target="_blank" rel="noopener"
>https://pan.baidu.com/s/1-S-gBDFfiZSc4pLyDygfKw&lt;/a> 提取码: havg&lt;/p></description></item><item><title>很开心maccms作者采取了我的建议，在采集页面增加了进度提示</title><link>https://dev.leiyanhui.com/c/maccms-my-issues/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/maccms-my-issues/</guid><description>&lt;h1 id="很开心maccms作者采取了我的建议在采集页面增加了进度提示">很开心maccms作者采取了我的建议，在采集页面增加了进度提示
&lt;/h1>&lt;h2 id="maccms是一个优秀的电影网站管理程序">maccms是一个优秀的电影网站管理程序
&lt;/h2>&lt;p>一直以来很受灰产欢迎哈，但是它也确实很优秀。 我是通过maccms开始深入了解到thinkphp。更是基于maccms二开过几个小项目。 至今也自行维护了一个盗版电影网站 供自己和好友观看&lt;/p>
&lt;h2 id="这个小建议">这个小建议
&lt;/h2>&lt;p>没想到会获得作者的认可 issues： &lt;a class="link" href="https://github.com/magicblack/maccms10/issues/934" target="_blank" rel="noopener"
>https://github.com/magicblack/maccms10/issues/934&lt;/a> update： &lt;a class="link" href="https://github.com/magicblack/maccms10/releases/tag/v2022.1000.3032" target="_blank" rel="noopener"
>https://github.com/magicblack/maccms10/releases/tag/v2022.1000.3032&lt;/a>&lt;/p></description></item><item><title>解决 vscode 链接ssh后 每次都输入密码的问题</title><link>https://dev.leiyanhui.com/c/51/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/51/</guid><description>&lt;h1 id="解决-vscode-链接ssh后-每次都输入密码的问题">解决 vscode 链接ssh后 每次都输入密码的问题
&lt;/h1>&lt;p>简单的说 就是 用ssh-keygen 创建 私钥和公钥，公钥内容 添加到 /root/.ssh/authorized_keys&lt;/p>
&lt;p>然后配置ssh 使用这个私钥 打开cmd 输入&lt;/p>
&lt;p>ssh-keygen -t rsa -C &amp;ldquo;你的@qq.com(你的邮箱)&amp;rdquo; -C 后面是备注&lt;/p>
&lt;p>一直回车 生产了一个&lt;/p>
&lt;p>C:\Users\你的/.ssh/id_rsa.pub 到要登录的用户的 根目录 创建一个文件夹 .ssh 目录如果是root用户 一般是 /root其他用户 应该是/home/你的 的 .ssh目录 并重命名为 authorized_keys 如果已经有这个文件 在下面添加一行 内容就是 id_rsa.pub 的内容 类似 ssh-rsa XXXX 在修改权限 重启一下 sshd chmod 600 authorized_keys sshd restart 然后在vscode中键入ctrl+shift+p 搜索sshconfig 也就是 在user下面增加一行 IdentityFile &amp;ldquo;&amp;ldquo;C:\Users\你的.ssh\id_rsa&amp;rdquo;&amp;rdquo;&lt;/p></description></item><item><title>两台电脑完全同步的可能性和方法，Codeup 和 oneDrive 天翼网盘 icloud教育 自建nextcloud 几个尝试</title><link>https://dev.leiyanhui.com/c/56/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/56/</guid><description>&lt;h2 id="两台电脑完全同步的可能性和方法codeup-和-onedrive-天翼网盘-icloud教育-自建nextcloud-几个尝试">两台电脑完全同步的可能性和方法，Codeup 和 oneDrive 天翼网盘 icloud教育 自建nextcloud 几个尝试
&lt;/h2>&lt;p>使用场景如下： 渔场有一台电脑 台式机，性能比较好，一台廉价笔记本平时多远程到这个台式机工作。但是偶尔会因为网络问题连接不好。加上自己喜欢折腾，考虑搭建一个同步盘。实现两个电脑的文件完全同步。&lt;/p>
&lt;hr>
&lt;h3 id="先考虑了一下-codeup-">先考虑了一下 Codeup ，
&lt;/h3>&lt;p>目前是单库容量5G LFS容量不限，我其实要同步的文件 只有几个G左右，但是软件差不多10G+ 。 不是说不可以，但是实现起来有一些麻烦。 优点是速度很快，而且Linux下完美访问，缺点1 单个库的容量只有5G 另外每次用完电脑需要手动提交 克隆 推送什么的。 ##再次 考虑 oneDrive 同济 有1T空间，足够用了。缺点是 分享功能 仅限同济大学组织内分享，不可外部分享。优点容量足够，速度尚可。还有一个小缺点是 同济大学的管理员 也可看到文件。所以敏感信息 最好还是加密一下。 我的主账号 因为没有使用onedrive 导致 开机一直提示 无法登录 打开 &lt;a class="link" href="https://onedrive.live.com/" target="_blank" rel="noopener"
>https://onedrive.live.com/&lt;/a> 又被墙了。。。挂上梯子 继续 个人主账号 被冻结了 需要 24小时解除，解除冻结后，可以用了。 但是添加账号的时候 一直没有反应，不知道原因。猜测是需要更新Windows 更新win11 到最新版，重启电脑 尝试添加账号，成功，修改路径 到 【D:\OneDrive - 同济大学】 去掉 桌面 文档 图片 的自动同步，不然 多电脑的时候 会偶尔混乱 我没有喜欢在桌面和文档里面 访东西，所以不用同步他们。 PS：个人账号，可以通过邀请的方式 拿到15G空间，如果文件不是特别多的话 也沟通了。不过个人的od服务器在新加坡，速度略慢。&lt;/p>
&lt;h4 id="在原始主机上-开始创建-软链接到-onedrive">在原始主机上 开始创建 软链接到 OneDrive
&lt;/h4>&lt;p>在 OneDrive 创建文件夹 D:\OneDrive - 同济大学\D_disk 统一管理 管理员权限 运行cmd （因为文件名中有空格，所以目标路径用双引号） mklink /D &amp;ldquo;D:\OneDrive - 同济大学\D_disk\Code_Space&amp;rdquo; D:\Code_Space mklink /D &amp;ldquo;D:\OneDrive - 同济大学\D_disk\Soft&amp;rdquo; D:\Soft Code_Space 这个目录 因为只有1100多个文件，很快就同步上去了。 Soft 里面 97,903 个文件，15,346 个文件夹 10G 左右，结果一直提示 查找更改，耐心等了一晚上没有同步成功。于是尝试少量多次手动复制到 OneDrive目录，然后再软连接回原目录 经过测试 上传速度可以跑满 1.5M 下载速度只有200K，好像是索引在境外服务器上导致的 暂时无解 放弃&lt;/p>
&lt;h3 id="尝试-天翼网盘">尝试 天翼网盘
&lt;/h3>&lt;p>免费版本 有30G D:\TianYi mklink /D &amp;ldquo;D:\TianYi\D_disk\Code_Space&amp;rdquo; D:\Code_Space 经过测试 同步上传速度 小文件很慢，客户端 需要1-2秒时间 读取 然后再用几秒的时间 上传，另外下载速度也一般情况，要花费2-3秒的时间 显示 正在获取下载信息。最为致命的是，她的不可以选择性同步，是需要整个目录 完全同步下来 才可以开始使用。 国产垃圾 哈哈&lt;/p>
&lt;h3 id="更换-icloud教育-云贵版-试试">更换 icloud教育 云贵版 试试
&lt;/h3>&lt;p>&lt;a class="link" href="https://support.apple.com/zh-cn/HT204283" target="_blank" rel="noopener"
>https://support.apple.com/zh-cn/HT204283&lt;/a> 好吧 教育版 不可以登录 icloud 免费版只有 5G 不靠谱&lt;/p>
&lt;h3 id="自建-nextcloud-测试">自建 nextcloud 测试
&lt;/h3>&lt;p>性能很一般 而且不可以选择性同步&lt;/p>
&lt;h3 id="360云盘-测试">360云盘 测试
&lt;/h3>&lt;p>实际上是备份功能，只能添加和修改的时候自动上传到360 并非同步功能&lt;/p>
&lt;h2 id="最后-还是-选择-onedrive-世纪互联同济">最后 还是 选择 oneDrive 世纪互联（同济）
&lt;/h2>&lt;p>折腾到现在 目前暂时 只有 oneDrive 可用。考虑到速度确实不理想 而且一次性同步多个文件的时候 卡一晚上不动 只能慢慢同步。&lt;/p>
&lt;h3 id="其他几个小问题">其他几个小问题
&lt;/h3>&lt;h4 id="偶尔会出现-正在查找更改">偶尔会出现 正在查找更改
&lt;/h4>&lt;p>这个如果是文件太多导致的，基本无解。如果不是 可以重置一下 关闭 onedrive 然后cmd 运行 %localappdata%\Microsoft\OneDrive\onedrive.exe /reset %localappdata%\Microsoft\OneDrive\onedrive.exe&lt;/p>
&lt;h4 id="上传速度问题">上传速度问题
&lt;/h4>&lt;p>有一个修改线程的方法 可以解决，我这边是慢速10M =&amp;gt; 1.1M 不需要处理&lt;/p>
&lt;h4 id="下载速度问题">下载速度问题
&lt;/h4>&lt;p>实际测试 发现是 寨本wifi速率 太低导致的，世纪互联 实际有1M 以上。 更换usb网卡后 临时解决 最后 尝试 Syncthing 完美实现 &lt;a class="link" href="https://dev.leiyanhui.com/c/57" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/57&lt;/a>&lt;/p></description></item><item><title>批处理 处理wifi掉线问题 win10-win11 下无线网卡 偶尔掉线问题</title><link>https://dev.leiyanhui.com/c/49/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/49/</guid><description>&lt;h1 id="批处理-处理wifi掉线问题-win10-win11-下无线网卡-偶尔掉线问题">批处理 处理wifi掉线问题 win10-win11 下无线网卡 偶尔掉线问题
&lt;/h1>&lt;p>批处理文件&lt;/p>
&lt;p>@echo off %1&lt;/p>
&lt;p>mshta vbscript:CreateObject(&amp;ldquo;Shell.Application&amp;rdquo;).ShellExecute(&amp;ldquo;cmd.exe&amp;rdquo;,&amp;quot;/c %~s0 ::&amp;quot;,&amp;quot;&amp;quot;,&amp;ldquo;runas&amp;rdquo;,1)(window.close)&amp;amp;&amp;amp;exit :Begin ping &lt;a class="link" href="https://www.baidu.com" target="_blank" rel="noopener"
>www.baidu.com&lt;/a> if errorlevel 1 goto Reboot if errorlevel 0 goto Continue :Continue goto Begin: :Reboot netsh interface set interface WLAN disabled netsh interface set interface WLAN enable echo %date:~0,4%%date:~5,2%%date:~8,2%%time:~0,2%%time:~3,2%%time:~6,2% 断网已重启,等待延时8秒&amp;hellip;&amp;raquo;log.txt&lt;/p>
&lt;p>:设置延时等待&lt;/p>
&lt;p>ping -n 8 127.0.0.1 &amp;gt;nul&lt;/p>
&lt;p>goto Begin&lt;/p>
&lt;p>打开任务计划程序（taskschd.msc） 创建基本计划任务 触发器 选 计算机启动时 最后选择 不管用户是否登录 使用最高权限 在条件里面 关闭 只有使用交流电 这个 设置里面 关掉三天什么的&lt;/p></description></item><item><title>批处理修改系统环境变量，以使用golang绿色版本</title><link>https://dev.leiyanhui.com/c/syetem-path-golang/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/syetem-path-golang/</guid><description>&lt;h1 id="批处理修改系统环境变量以使用golang绿色版本">批处理修改系统环境变量，以使用golang绿色版本
&lt;/h1>&lt;p>:: 用户变量 :: GOPATH C:\Users\Yanhui\go G:\Go_lang\C_go_path\go :: Path 添加 C:\Users\Yanhui\go\bin G:\Go_lang\C_go_path\go\bin :: 系统变量 :: Path 添加 :: C:\Program Files\Go\bin G:\Go_lang\go_bin\bin :: C:\Program Files\Git\cmd G:\Go_lang\Git\cmd @ echo off %1 %2 ver|find &amp;ldquo;5.&amp;quot;&amp;gt;nul&amp;amp;&amp;amp;goto :Admin mshta vbscript:createobject(&amp;ldquo;shell.application&amp;rdquo;).shellexecute(&amp;rdquo;%~s0&amp;quot;,&amp;ldquo;goto :Admin&amp;rdquo;,&amp;quot;&amp;quot;,&amp;ldquo;runas&amp;rdquo;,1)(window.close)&amp;amp;goto :eof :Admin set mypath=%~dp0 echo %mypath% :: 在你的bat开头加上上面的命令即可 :: 下面是你需要执行的命令 setx GOPATH &amp;ldquo;%mypath%C_go_path\go&amp;rdquo; :: C:\Windows;C:\Windows\System32 setx PATH %PATH%;&amp;quot;%mypath%Git\cmd&amp;quot;;&amp;quot;%mypath%go_bin\bin&amp;quot; /m ECHO 按任意键继续&amp;hellip; PAUSE &amp;gt;nul&lt;/p></description></item><item><title>容器自动备份自己整个容器</title><link>https://dev.leiyanhui.com/c/docker-backup-from-docker/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/docker-backup-from-docker/</guid><description>&lt;h1 id="容器-自动备份自己整个容器">容器 自动备份自己整个容器
&lt;/h1>&lt;p>使用sshpass 或者 key登录宿主机，然后执行docker备份命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sshpass&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="err">密码&lt;/span> &lt;span class="n">ssh&lt;/span> &lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">10.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.8&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">tt&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;&amp;amp;&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">remotessh&lt;/span> &lt;span class="c1">#远程登录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="err">准备导出&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">backupdir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/mnt/disks/HHD/docker-bak/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="err">导出到&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">backupdir&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">datename&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">date&lt;/span> &lt;span class="o">+%&lt;/span>&lt;span class="n">Y&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">-%&lt;/span>&lt;span class="n">H&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">command&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="n">pigz&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;&amp;amp;&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;pigz 命令存在 用tgz输出 &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">docker&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">baota&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">pigz&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">backupdir&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="n">baota&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">datename&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tgz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;pigz 命令不存在，用tar gz&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">docker&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">baota&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">gzip&lt;/span>&lt;span class="o">&amp;gt;$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">backupdir&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="n">baota&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">datename&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="err">结束&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">remotessh&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>少量数据大并发的mysql优化</title><link>https://dev.leiyanhui.com/c/mysql-config/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/mysql-config/</guid><description>&lt;h1 id="少量数据大并发的mysql优化">少量数据大并发的mysql优化
&lt;/h1>&lt;p>除去用ramdisk redis 内存表等方法，比较靠谱的方案 还是 仔细优化mysql&lt;/p>
&lt;ul>
&lt;li>手动缓存mysql 查询 query_cache_type有3个值 0代表关闭查询缓存OFF，1代表开启ON，2（DEMAND）代表当sql语句中有SQL_CACHE关键词时才缓存 建议用 2&lt;br>
select SQL_CACHE user_name from users where user_id = &amp;lsquo;100&amp;rsquo;;&lt;br>
query_cache_size = 64M ，不宜设置过大，否则在数据更新的时候，会有较大的性能开支用于标注失效。&lt;/li>
&lt;li>每个表 创建一个 InnoDB FILE： innodb_file_per_table=1 ，为了防止 ibdata1 过大失控&lt;/li>
&lt;li>ibdata1 想要瘦身，最好的办法，还是重建表，即为，复制表&amp;gt;删除原表&amp;gt;新表改名&lt;/li>
&lt;li>innodb_buffer_pool_size 最好和目标数据库内容差不多大，这样 就可以完全从内存中读取数据&lt;br>
另外innodb_buffer_pool_size 在mysql启动的时候，里面没有数据的，需要查询一下常用记录以便预热，在整库备份之前，最好也预热一下，以免占用太多时间。如果数据较少，这步骤也可以忽略。&lt;/li>
&lt;li>修改硬盘写入频率：innodb_flush_log_at_trx_commit，默认1代表实时写入，0 是1秒一次 2也是1秒一次。&lt;br>
修改0 就好。当然非正常关闭的情况下有概率会丢失1秒的数据&lt;/li>
&lt;li>打开慢查询日志，记录查询超过1秒的数据【生产服务器，注意硬盘】&lt;br>
long_query_time=1&lt;br>
log-slow-queries=/var/log/mysql/log-slow-queries.log&lt;/li>
&lt;li>关闭服务器端 SWAP&lt;/li>
&lt;li>所有查询 最后还是要 LIMIT&lt;/li>
&lt;/ul></description></item><item><title>使用golang快速开发一个webdav网盘和web目录文件浏览</title><link>https://dev.leiyanhui.com/c/webdavgo/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/webdavgo/</guid><description>&lt;h1 id="使用golang快速开发一个webdav网盘和web目录文件浏览">使用golang快速开发一个webdav网盘和web目录文件浏览
&lt;/h1>&lt;p>昨天突然想把docker的某几个目录映射出来，然后又不想使用-v 或者sftp的方式。&lt;/p>
&lt;p>于是想到使用webdav，php下webdav工具一大把，但docker里面明显可能没有php环境。所以想到用golang自己写一个。因为golang没有那么多依赖要处理哈。&lt;/p>
&lt;p>顺带一起做了 静态文件浏览，方便共享一些文件。以及密码认证 配置文件 等等&lt;/p>
&lt;p>成品发布到了&lt;/p>
&lt;p>gitee：https://gitee.com/joyanhui/webdavgo/&lt;/p>
&lt;p>github：https://github.com/joyanhui/webdavgo/&lt;/p>
&lt;p>初始版本代码如下 最新版请去gitee 查看&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">package&lt;/span> &lt;span class="n">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;encoding/json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;strconv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;golang.org/x/net/webdav&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">webDavConfig&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">interface&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">fs_webdav&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">webdav&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Handler&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">webdav_port_string&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ConfigData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ReadFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;config.json&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">读取文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">settingCfg&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">settingCfg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ConfigData&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="err">无配置文件的情况&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">settingCfg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;{&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">wevdav_user_name&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">:&lt;/span>&lt;span class="se">\&amp;#34;\&amp;#34;&lt;/span>&lt;span class="s2">,&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">wevdav_user_psw&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">:&lt;/span>&lt;span class="se">\&amp;#34;\&amp;#34;&lt;/span>&lt;span class="s2">,&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">webdav_server_port&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">:18123,&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">wevdav_file_path&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">:&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">.&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">,&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">list_server_path&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">:&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">/list/&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">,&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">list_file_path&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">:&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">.&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;无配置文件使用默认&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;settingCfg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">settingCfg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Unmarshal&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="n">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">settingCfg&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">转化到&lt;/span>&lt;span class="n">map&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">strconv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ParseFloat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;webdav_server_port&amp;#34;&lt;/span>&lt;span class="p">]),&lt;/span> &lt;span class="mi">64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">从&lt;/span>&lt;span class="n">interface转化到float64&lt;/span> &lt;span class="err">再到&lt;/span>&lt;span class="ne">int&lt;/span> &lt;span class="err">再到&lt;/span>&lt;span class="n">port_str&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">webdav_port_string&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ne">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">port_float64&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">web_dav&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">启动&lt;/span>&lt;span class="n">webdav&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;webdav url: http://localhost:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">webdav_port_string&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;/ file pach:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;wevdav_file_path&amp;#34;&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;wevdav_user_name&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;wevdav_user_name=&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;wevdav_user_name&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;, wevdav_user_psw=&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;wevdav_user_psw&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/list2/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">http_list1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">list_server_path&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;list_server_path&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">list_file_path&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;list_file_path&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">list_server_path&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">list_server_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">StripPrefix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">list_server_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FileServer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Dir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">list_file_path&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;weblist url: http://localhost:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">webdav_port_string&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">list_server_path&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; file pach:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">list_file_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ListenAndServe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">webdav_port_string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/*&lt;/span> &lt;span class="n">webdav&lt;/span> &lt;span class="o">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">web_dav&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ResponseWriter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">req&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Request&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;wevdav_user_name&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="err">获取用户名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wevdav_user_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">wevdav_user_psw&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ok&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">BasicAuth&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="n">ok&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">w&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Header&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;WWW-Authenticate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="n">Basic&lt;/span> &lt;span class="n">realm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Restricted&amp;#34;&lt;/span>&lt;span class="err">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">w&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">WriteHeader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">StatusUnauthorized&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="err">验证用户名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">wevdav_user_name&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;wevdav_user_name&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">wevdav_user_psw&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;wevdav_user_psw&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;WebDAV: need authorized!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">StatusUnauthorized&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fs_webdav&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">webdav&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Handler&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">FileSystem&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">webdav&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Dir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">webDavConfig&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;wevdav_file_path&amp;#34;&lt;/span>&lt;span class="p">])),&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">路径&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LockSystem&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">webdav&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">NewMemLS&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fs_webdav&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ServeHTTP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>私有css和js包括少量图片应该如何托管到cdn，免费替代jsdelivr的方案</title><link>https://dev.leiyanhui.com/c/12/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/12/</guid><description>&lt;h1 id="私有css和js包括少量图片应该如何托管到cdn免费替代jsdelivr的方案">私有css和js包括少量图片应该如何托管到cdn，免费替代jsdelivr的方案
&lt;/h1>&lt;p>2021年之前，这个不用想，肯定是无脑 jsdelivr+github 现在，很多人选择了 阿里云或者腾讯的对象储存+cdn 不是说不行吧。只是还是有一点小费用产生。 境外的话，肯定直接 GitHub+cf 就好了。 境内 unicloud 选择阿里云的 纯免费的，基本上对中小项目没啥限制 打开静态网页托管，可以绑定自己的域名。默认就使用阿里的cdn 前端网页部署限制为最大存储空间用量2GB 单文件最大限制为50MB 禁止做图床的，偶尔有几个小图片没事 最终实现方案 &lt;strong>为避免滥用，内容删除&lt;/strong>&lt;/p></description></item><item><title>修改宝塔浏览器标签默认图标</title><link>https://dev.leiyanhui.com/c/112/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/112/</guid><description>&lt;h1 id="修改宝塔浏览器标签默认图标">修改宝塔浏览器标签默认图标
&lt;/h1>&lt;p>因为经常操作两个宝塔面板，为了方便区分 修改一下 浏览的 &lt;code>/www/server/panel/BTPanel/static/favicon.ico&lt;/code> ps 调调色 随便弄弄&lt;/p></description></item><item><title>一个免费的php空间 ，速度不错，但是需要每个月续费一次</title><link>https://dev.leiyanhui.com/c/1123/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/1123/</guid><description>&lt;h1 id="一个免费的php空间-速度不错但是需要每个月续费一次">一个免费的php空间 ，速度不错，但是需要每个月续费一次
&lt;/h1>&lt;p>#一个免费的php空间 ，速度不错，但是需要每个月续费一次&lt;/p>
&lt;p>&lt;code>https://www.yun316.net/&lt;/code>&lt;/p></description></item><item><title>一键备份几个重要文件到sshdfs的Ubuntu</title><link>https://dev.leiyanhui.com/c/89/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/89/</guid><description>&lt;h1 id="一键备份几个重要文件到sshdfs的ubuntu">一键备份几个重要文件到sshdfs的Ubuntu
&lt;/h1>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">@echo on&amp;amp;cls&amp;amp;mode con cols=50 lines=30 &amp;amp;color 0a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">title=复制
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xcopy I:\other_need_back_to_oss U:\BTdata\wwwroot\other_need_back_to_oss /y /e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xcopy I:\ssh_rsa U:\BTdata\wwwroot\ssh_rsa /y /e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xcopy &amp;#34;I:\备份重要文件到ubuntu再到oss.bat&amp;#34; &amp;#34;U:\BTdata\wwwroot\备份重要文件到ubuntu再到oss.bat&amp;#34; /y /e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo &amp;#34;修改权限&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pause
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh bt &amp;#34;chmod -R 777 /BTdata/wwwroot/;chown -R www:www chmod -R 777 /BTdata/wwwroot/ &amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pause
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>隐私政策</title><link>https://dev.leiyanhui.com/c/privacy-policy/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/privacy-policy/</guid><description>&lt;h1 id="隐私政策">隐私政策
&lt;/h1>&lt;h2 id="我们是谁">我们是谁
&lt;/h2>&lt;p>&lt;strong>推荐的文本：&lt;/strong> 我们的站点地址是：https://wp.leiyanhui.com。&lt;/p>
&lt;h2 id="评论">评论
&lt;/h2>&lt;p>&lt;strong>推荐的文本：&lt;/strong> 当访客留下评论时，我们会收集评论表单所显示的数据，和访客的IP地址及浏览器的user agent字符串来帮助检查垃圾评论。&lt;/p>
&lt;p>由您的电子邮箱地址所生成的匿名化字符串（又称为哈希）可能会被提供给Gravatar服务确认您是否有使用该服务。Gravatar服务的隐私政策在此：https://automattic.com/privacy/。在您的评论获批准后，您的资料图片将在您的评论旁公开展示。&lt;/p>
&lt;h2 id="媒体">媒体
&lt;/h2>&lt;p>&lt;strong>推荐的文本：&lt;/strong> 如果您向此网站上传图片，您应当避免上传那些有嵌入地理位置信息（EXIF GPS）的图片。此网站的访客将可以下载并提取此网站的图片中的位置信息。&lt;/p>
&lt;h2 id="cookies">Cookies
&lt;/h2>&lt;p>&lt;strong>推荐的文本：&lt;/strong> 如果您在我们的站点上留下评论，您可以选择用cookies保存您的名字、电子邮箱地址和网站地址。这是通过让您可以不用在评论时再次填写相关内容而向您提供方便。这些cookies会保留一年。&lt;/p>
&lt;p>如果您访问我们的登录页，我们会设置一个临时的cookie来确认您的浏览器是否接受cookies。此cookie不包含个人数据，且会在您关闭浏览器时被丢弃。&lt;/p>
&lt;p>当您登录时，我们也会设置多个cookies来保存您的登录信息及屏幕显示选项。登录cookies会保留两天，而屏幕显示选项cookies会保留一年。如果您选择了“记住我”，您的登录状态则会保留两周。如果您注销登陆了您的账户，用于登录的cookies将会被移除。&lt;/p>
&lt;p>如果您编辑或发布文章，我们会在您的浏览器中保存一个额外的cookie。这个cookie不包含个人数据而只记录了您刚才编辑的文章的ID。这个cookie会保留一天。&lt;/p>
&lt;h2 id="来自其他网站的嵌入内容">来自其他网站的嵌入内容
&lt;/h2>&lt;p>&lt;strong>推荐的文本：&lt;/strong> 此站点上的文章可能会包含嵌入的内容（如视频、图片、文章等）。来自其他站点的嵌入内容的行为和您直接访问这些其他站点没有区别。&lt;/p>
&lt;p>这些站点可能会收集关于您的数据、使用cookies、嵌入额外的第三方跟踪程序及监视您与这些嵌入内容的交互，包括在您有这些站点的账户并登录了这些站点时，跟踪您与嵌入内容的交互。&lt;/p>
&lt;h2 id="我们与谁共享您的信息">我们与谁共享您的信息
&lt;/h2>&lt;p>&lt;strong>推荐的文本：&lt;/strong> 若您请求重置密码，您的IP地址将包含于密码重置邮件中。&lt;/p>
&lt;h2 id="我们保留多久您的信息">我们保留多久您的信息
&lt;/h2>&lt;p>&lt;strong>推荐的文本：&lt;/strong> 如果您留下评论，评论和其元数据将被无限期保存。我们这样做以便能识别并自动批准任何后续评论，而不用将这些后续评论加入待审队列。&lt;/p>
&lt;p>对于本网站的注册用户，我们也会保存用户在个人资料中提供的个人信息。所有用户可以在任何时候查看、编辑或删除他们的个人信息（除了不能变更用户名外）、站点管理员也可以查看及编辑那些信息。&lt;/p>
&lt;h2 id="您对您的信息有什么权利">您对您的信息有什么权利
&lt;/h2>&lt;p>&lt;strong>推荐的文本：&lt;/strong> 如果您有此站点的账户，或曾经留下评论，您可以请求我们提供我们所拥有的您的个人数据的导出文件，这也包括了所有您提供给我们的数据。您也可以要求我们抹除所有关于您的个人数据。这不包括我们因管理、法规或安全需要而必须保留的数据。&lt;/p>
&lt;h2 id="where-your-data-is-sent">Where your data is sent
&lt;/h2>&lt;p>&lt;strong>推荐的文本：&lt;/strong> 访客评论可能会被自动垃圾评论监测服务检查。&lt;/p></description></item><item><title>用户和api操作的限制</title><link>https://dev.leiyanhui.com/c/114/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/114/</guid><description>&lt;h1 id="用户和api操作的限制">用户和api操作的限制
&lt;/h1>&lt;h2 id="用户身份">用户身份
&lt;/h2>&lt;blockquote>
&lt;p>IP 设备序号 用户id 用户手机设备cid 可伪造 不用于识别用户&lt;/p>&lt;/blockquote>
&lt;h3 id="硬件设备">硬件设备
&lt;/h3>&lt;h4 id="根据ip限制">根据ip限制
&lt;/h4>&lt;blockquote>
&lt;p>单ip 单位分钟只可以查询 N次数据库 单i 单位时间内 只可以查询N次 redis &amp;lt;&amp;gt; 包括上传数据&lt;/p>&lt;/blockquote>
&lt;h3 id="根据mac限制">根据mac限制
&lt;/h3>&lt;blockquote>
&lt;p>即便是有效的mac 单位时间内只可以操作N次redis&lt;/p>&lt;/blockquote>
&lt;h3 id="用户app">用户app
&lt;/h3>&lt;h4 id="根据ip">根据IP
&lt;/h4>&lt;blockquote>
&lt;p>单ip 单位时间内 只可以查询N次数据库检查用户密码 单ip 单位时间内 只可以查询N次redis检查用户密码&lt;/p>&lt;/blockquote>
&lt;h4 id="根据用户id">根据用户id
&lt;/h4>&lt;blockquote>
&lt;p>单用户 单位时间内只可以查N次redis 单用户 单位时间内只可以查N次redis&lt;/p>&lt;/blockquote>
&lt;h2 id="根据设备和app区分">根据设备和app区分
&lt;/h2>&lt;h3 id="设备上报日志-获取返回值">设备上报日志 获取返回值
&lt;/h3>&lt;blockquote>
&lt;p>查询redis 根据ip 限制 1分钟内400次 limit.dev.redis.ip.xxx.m. 根据mac 限制 1分钟内40次 limit.dev.redis.mac.xxx.m. 查询数据库 根据ip限制 1分钟内60次 limit.dev.mysql.ip.xxx.m. 根据mac 限制 1分钟内1次 limit.dev.mysql.mac.xxx.m.&lt;/p>&lt;/blockquote>
&lt;h3 id="app---登录-和-用id-token检查登录">APP = &amp;gt; 登录 和 用id token检查登录
&lt;/h3>&lt;blockquote>
&lt;p>查询redis 根据ip 限制 1分钟内120次 limit.app.login.redis.ip.xxx.m. 查询数据库 根据ip限制 1分钟内100次 limit.app.login.mysql.ip.xxx.m.&lt;/p>&lt;/blockquote>
&lt;h3 id="app--获取手机验证码">APP =&amp;gt; 获取手机验证码
&lt;/h3>&lt;blockquote>
&lt;p>手机号要先存在&lt;br>
查询数据库 根据ip 限制 1分钟内120次 limit.app.sms.mysql.ip.xxx.m. 发送SMS&lt;br>
1分钟内1次 limit.app.sms.phone.xxx.m. 1天3次 limit.app.sms.phone.xxx.day.&lt;/p>&lt;/blockquote>
&lt;h3 id="app--获取设备日志">App =&amp;gt; 获取设备日志
&lt;/h3>&lt;blockquote>
&lt;p>根据IP 查询用户日志 1分钟限制600次 limit.app.getlog.redis.ip.xxx.m. 1小时限制3600次 limit.app.getlog.redis.ip.xxx.hour. 根据用户id 1分钟限制600次 limit.app.getlog.redis.userid.xxx.m.&lt;/p>&lt;/blockquote>
&lt;h3 id="app--常规操作">App =&amp;gt; 常规操作
&lt;/h3>&lt;blockquote>
&lt;p>根据IP 查询操作redis&lt;br>
1分钟600次 limit.other.redis.ip.xxx.m. 1小时3600次 limit.other.redis.ip.xxx.hour. 查询操作数据库 1分钟600次 limit.other.mysql.ip.xxx.m. 1小时3600次 limit.other.mysql.ip.xxx.m.&lt;/p>&lt;/blockquote></description></item><item><title>远程操作com口，然后进行单片机开发方法</title><link>https://dev.leiyanhui.com/c/create-tcp-ip-serial-port/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/create-tcp-ip-serial-port/</guid><description>&lt;h1 id="远程操作com口然后进行单片机开发方法">远程操作com口，然后进行单片机开发方法
&lt;/h1>&lt;p>网络情况： &lt;/p>
&lt;p>A电脑 笔记本电脑，没有开发环境 usb转接com口 到单片机 win11系统 &lt;/p>
&lt;p>B电脑 24小时开机低功耗台式机 win8.1&lt;/p>
&lt;p> 路由器： OpenWrt k2p 有公网ip &lt;/p>
&lt;p>经过测试是不需要第三方软件，只需要 在远程桌面 本地资源 勾选上 端口 即可。&lt;/p>
&lt;p>但是在B电脑的设备管理器 里面看不到 用第三方串口工具可以看到 在 vmware 也可以看到[即com口可以直接在vmware的ard里面操作] 还一个方法 是用 usb over network 可以把usb转com的设备 共享出去&lt;/p>
&lt;p>次方法应该也适用与 xrdp&lt;/p></description></item><item><title>再议 VirtualBox 与 VMware 对比，VirtualBox 没有你想的那么不堪</title><link>https://dev.leiyanhui.com/c/vm-platform-selection/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/vm-platform-selection/</guid><description>&lt;h1 id="再议-virtualbox-与-vmware-对比virtualbox-没有你想的那么不堪">再议 VirtualBox 与 VMware 对比，VirtualBox 没有你想的那么不堪
&lt;/h1>&lt;p>以截止到2022.9.22最新的VirtualBox 6.1.38 和 VMware VMware Workstation Pro16.2.4 对比&lt;/p>
&lt;blockquote>
&lt;p>首先 如果是linux主机 ，首选 kvm 没有之一 kvm下一切都是渣&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>价格：VirtualBox 首选， VirtualBox 免费开源，VMware player免费但是仅限非商业用途，VMware WorkStation 不便宜（接近2k）。这点是很大的影响决策的因素。当然你用盗版VMware或者VMware player，或者非商业 也没啥。&lt;/li>
&lt;li>轻量：VirtualBox是首选，VirtualBox安装后也就战役红260M硬盘 VMware 1G起步&lt;/li>
&lt;li>多系统支持：Linux macos Windows都支持 另外VirtualBox支持无图形界面的Linux使用，也有一个基于php的web管理工具phpvirtualbox，VMware不清楚是否有。macos下vmware fusion player也是免费的，但也仅限非商业。&lt;/li>
&lt;li>虚拟机文件管理：VirtualBox 就三个文件 vdi(虚拟磁盘) vbox(配置文件) prev（vbox的备份），VMware一堆&lt;/li>
&lt;li>虚拟机磁盘管理：VirtualBox 的注册机制麻烦，自行复制虚拟磁盘后，会uuid冲突需要去修改一次。VMware不存在这问题。好像只有VirtualBox 存在虚拟机介质注册这个机制，而且还会检测uuid冲突&lt;/li>
&lt;li>虚拟机磁盘格式支持：VirtualBox 支持 vdi vhd vmdk，并自带这三个之外的数种常见磁盘格式的转换。VirtualBox 只支持 vdi磁盘的整理压缩，vhd还是用Windows来。VMware只支持 vmdk但是也其他磁盘格式到vmdk的转换。VirtualBox 对vhd的完美支持，在Windows下管理更方便&lt;/li>
&lt;li>共享目录：都支持&lt;/li>
&lt;li>2D性能：Windows下VirtualBox 比kvm和VMware的2D性能更强。有物理机的50%&lt;/li>
&lt;li>3D性能，VMware性能不错，VirtualBox 凑合。但是VirtualBox 的显卡内存不是网上其他博文说的只可以128M 命令行模式 可以随意改 ，也没有那么不堪。但是VMware的3D性能可以接近物理机60%左右&lt;/li>
&lt;li>cpu、内存和硬盘性能： 都一样，所有的虚拟机系统基本上都差不多的性能。&lt;/li>
&lt;li>黑苹果：VMware需要unlock后安装，VirtualBox 需要命令行修改后才可以装最新的 maos11-13。VirtualBox 的macos不支持两个核心以上的macos 会出现一些文件。VMware的不存在这个问题。安装后的macos 都是 半斤八两，应急用没啥问题，做吃力的工作都不现实。尤其3D性能都垃圾。&lt;/li>
&lt;li>usb3 的支持，都支持。VirtualBox 有一个扩展包，大概几十m，是一个独立在VirtualBox 的扩展包和主版本一起更新。并不存在什么 麻烦的。安装挂载也简单&lt;/li>
&lt;li>tpm支持：都支持，VirtualBox 支持tpm直通，VMware支持模拟的，是否可以直通不知。只是安装win11的话，这个没差，都可以绕过&lt;/li>
&lt;li>硬盘直通：都支持，VirtualBox 需要做一个vmdk文件映射物理盘&lt;/li>
&lt;li>虚拟化嵌套：VirtualBox 支持，VMware应该是不支持的，未测试过。这就导致了虚拟的Windows下 基于hyper-v的wsl docker会有问题吧。&lt;/li>
&lt;li>半虚拟化：VirtualBox 支持，VMware应该是不支持的，未测试过。另外 kvm hyper-v xen都支持半虚拟化，性能损耗更少&lt;/li>
&lt;li>软虚拟：VirtualBox 支持，VMware应该是不支持的，未测试过。VirtualBox 可以运行arm的安卓。VMware好像是不可以的。网上大量的安卓模拟器都是内置VirtualBox&lt;/li>
&lt;li>最新版黑群晖支持：都支持，都一样弄。不存在新版在VirtualBox 装不上的问题，自己弄引导就好了。&lt;/li>
&lt;li>动态磁盘：都支持&lt;/li>
&lt;li>网络支持：都支持 桥接 nat ，没差别。&lt;/li>
&lt;li>命令行启动，注册为Server：都支持&lt;/li>
&lt;li>动态内存管理：就是可以释放没占用的内存，hyper-v的很秀，VMware支持 ,VirtualBox 也&lt;/li>
&lt;li>技术文章和第三方支持广泛性：国内VMware的文章更多，某一些特殊系统的安装VMware的教程更多。国内企业选择VMware的也更多。培训和教程也多以VMware为主。VirtualBox 通常被说成一种问题多性能差功能少的&lt;/li>
&lt;/ul>
&lt;p>其他虚拟机系统缺点&lt;/p>
&lt;ul>
&lt;li>kvm，仅适用于Linux，模拟的Windows 3D 2D都拉跨，但是可以用显卡直通和vgpu来提升。非常适合Linux老手使用。Linux的不二选择。也是unraid pve等系统的默认虚拟机系统，群晖也是&lt;/li>
&lt;li>hyper-v，接近免费，支持 vgpu 支持显卡直通，vgpu。可惜usb支持不佳。如果不是大吞吐量usb设备可以用第三方软件，或者 rdp等解决。&lt;/li>
&lt;li>ecxi 和基于kvm的unraid pve 群晖等 不在对比之列&lt;/li>
&lt;/ul>
&lt;p>可以看到VirtualBox 对VMware相比缺点有：&lt;/p>
&lt;ul>
&lt;li>3D性能VirtualBox 仅支持到DirectX9以及OpenGL3.0，DirectX 11 和 OpenGL 4.1 3D 加速图形支持&lt;/li>
&lt;li>虚拟最新黑苹果，不支持2个以上核心，不过VMware的macos性能也很拉跨，半斤八两。&lt;/li>
&lt;/ul>
&lt;p>VirtualBox 对比kvm和hyper-v的缺点：&lt;/p>
&lt;ul>
&lt;li>不支持显卡直通和vgpu&lt;/li>
&lt;/ul>
&lt;p>怎么选&lt;/p>
&lt;ul>
&lt;li>macos下运行win和macos，不用想 肯定首选是pd虚拟机。如果不玩游戏 自然也可以 VirtualBox 或者vmware fusion&lt;/li>
&lt;li>Linux下 性能考虑首选kvm，如果不习惯，就选VirtualBox 或者vmware 。无 图形界面的Linux不需要太多3d性能的话，首选VirtualBox&lt;/li>
&lt;li>win/Linux 需要虚拟化macos，首选VMware，VMware player其实就够了。&lt;/li>
&lt;li>需要3D性能，显卡直通，那就 kvm hyper-v，exci unraid pve等&lt;/li>
&lt;li>不需要直通，需要vgpu那就 hyper-v kvm&lt;/li>
&lt;li>只是需要基本的3D性能，那就VMware 次选VirtualBox&lt;/li>
&lt;li>macos下运行win，首选Parallels Desktop&lt;/li>
&lt;li>Linux server下 首选kvm 和VirtualBox&lt;/li>
&lt;li>win下和Linux 混合商业用途，想省钱，那就首选VirtualBox 了。尤其是运行 不需要3D性能的服务的时候，图形化界面，多格式虚拟磁盘支持。不用usb 还许需要&lt;/li>
&lt;li>正版window 不需要usb，或者只是简单u盘 rs232之类的，且不需要VMware的情况下（VMware和hyper共存的情况下，VMware性能超级拉跨），首选hyper-v&lt;/li>
&lt;/ul>
&lt;p>我的选择：宿主系统也用来工作，因主要使用的软件不支持Linux winpe后性能拉跨，所以宿主机是Windows。偶尔用macos处理ios签名等问题。有一个Linux server 开发环境但是一直开机的，方便和主linux server 同步以及开发版调试。偶尔替代主力server使用，这个server上有一些敏感内容，且商用。&lt;/p>
&lt;p>也就是 最终就1-3个虚拟机而已，而且除了macos均没有3d需求，所以VirtualBox 成了首选&lt;/p></description></item><item><title>终于完成了php->go的转移工作</title><link>https://dev.leiyanhui.com/c/php-to-go-1st/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/php-to-go-1st/</guid><description>&lt;h1 id="终于完成了php-go的转移工作">终于完成了php-&amp;gt;go的转移工作
&lt;/h1>&lt;p>原型产品使用的 thinkphp+mysql+redis开发的 纯api，由于并发太大，php吃资源离谱。基于节约成本考虑，直接用go重写 。数据库 依旧是原来数据库。&lt;/p>
&lt;p>总共30几个接口，历时一个月从零开始学习go并完成迁移工作。先重写大并发接口，而后逐个线上替换。&lt;/p>
&lt;p>go主要用的库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> import (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;context&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;crypto/md5&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;encoding/json&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;fmt&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;io&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;log&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;net/http&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;os&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;strconv&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;strings&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;time&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;github.com/buger/jsonparser&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> _ &amp;#34;github.com/go-sql-driver/mysql&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;github.com/valyala/fasthttp&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>jsonparser 是一个json处理库，比自带的encoding/json速度要快，但encoding/json更灵活一些，所以都使用了&lt;/p>
&lt;p>fasthttp 是一个更加高性能的web服务，在多并发的时候 线程复用更强大&lt;/p>
&lt;p>但是 依旧使用了 net/http 来处理一些 第三方sdk&lt;/p>
&lt;p>感受和优势&lt;/p>
&lt;p>1、vscode自带代码校验，大错误小错误都会提示，代码低级失误较少。代码自动格式化&lt;/p>
&lt;p>2、不需要搭建环境，golang官方直接下载 安装即可，zip的话添加一个系统变量即可使用&lt;/p>
&lt;p>3、可以不依赖nginx，当然基于ssl gzip 日志 等需求，前端还是套一个nginx 简单一些&lt;/p>
&lt;p>4、编译速度很快，在vscode可以简单重新编译调试，4秒左右&lt;/p>
&lt;p>5、直接导出二进制文件，不用担心源码泄露 尤其是源码里面的一些密码部分。比如md5的二次加密密钥等&lt;/p>
&lt;p>6、计划任务 定时任务，可以直接单开一个线程处理，不依赖前台php文件唤起（当然 shell php也可以）go处理起来 很简单只需要一行 go cron_tab() //并发任务 即可&lt;/p>
&lt;p>7、宝塔自带守护进程，不需要自己另外守护&lt;/p>
&lt;p>8、fmt.Println fmt.Fprint(ctx, &amp;ldquo;{}&amp;rdquo;) 的日志输出，开发过程中监控运行状态更简单&lt;/p>
&lt;p>9、跨平台 依旧有高性能，win linux mac arm均可以搞定&lt;/p>
&lt;p>10、可以开发简单的 客户端软件。同语言 搞起来省心&lt;/p>
&lt;p>11、包管理和源码文件 管理，没有php方便 ，需要用go mod 或者第三方框架&lt;/p>
&lt;p>12、go和php相比，强类型需要时间适应，另外很多函数需要自己复写。go的异常处理 较为啰嗦，原生开发go的话，需要自己写大量简单的函数来封装 以便主流程代码简洁比如 md5 函数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">MD5&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="n">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;xxxxxxxx&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">附加密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">has&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">md5&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">md5str&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%x&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">has&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">md5str&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>还有 json和map互转 等等&lt;/p>
&lt;p>13、字符类型转化 很啰嗦，甚至 int int8 int16 之间转化 代码啰嗦，不过按需使用 可以做到更快的运行速度和极限的更低的资源占用&lt;/p></description></item><item><title>主系统的选择，winxp win7 win8 win11 和黑mac和Linux，unraid、pve、ESXi等</title><link>https://dev.leiyanhui.com/c/main-os/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/main-os/</guid><description>&lt;h1 id="主系统的选择winxp-win7-win8-win11-和黑mac和linuxunraidpveesxi等">主系统的选择，winxp win7 win8 win11 和黑mac和Linux，unraid、pve、ESXi等
&lt;/h1>&lt;p>先说黑苹果，软件多，主流软件均可使用。但是如果不是一直需要ios调试开发，不太适合我。因为长期使用远程工作，客户端有win ipad 安卓pad等情况，苹果的adr协议客户端很有限，而且多数不怎么好用，有一些不能全屏 有一些右键有问题。xrdp协议 算是阉割版的rdp协议，和真正的xrdp相比不实用&lt;/p>
&lt;p>其次说桌面 Linux，输入法的词库问题可以忍。但是hbuilderx wine后功能不全不说（真机调试困难），存在nodejs.exe大量吃cpu的问题&lt;/p>
&lt;p>unraid 功能 和性能 以及硬件直通 等 都没问题，以及U盘启动可以方便备份 等优点。而且只需要一个512M的u盘就可以了。（最好是好点的，杂牌U盘自己做好备份）&lt;/p>
&lt;p>unraid 还有以一个优势就是有一个成熟的apps市场，常见的插件甚至黑果自动安装脚本都有。缺点就是非常依赖github，需要自行解决墙或者hosts的问题,unraid 本身有很多xx版，用的好的话 就去买一个正版硬盘少的话并不贵。&lt;/p>
&lt;p>作为主系统而不是nas使用的缺陷有一个硬盘分区格式，以及文件管理的混乱（主要是值得*映射文件，当然做nas的这都不是问题）。以及虚拟磁盘格式 只有img个qcow2 两种，而且qcow2转换后 很多启动问题。&lt;/p>
&lt;p>pve 基本上就是unraid 的缺点他都有，而且只自带LXC，优点是 免费&lt;/p>
&lt;p>ESXi 个人版免费，因时间有限而且unraid 足够优秀，所以没用使用过。&lt;/p>
&lt;p>还一个方案 是linux+虚拟机的方案。&lt;/p>
&lt;p>关于虚拟机的选择，我更倾向于virtualbox作为主虚拟机管理，简单方便。cpu和内存 硬盘 对VMware hyper-v等对比更不差，只是显卡直通 和 3d性能孱弱。kvm也是一个好选择，但是既然主系统因为部分常用软件的问题无法做日常使用，又何必。。。&lt;/p>
&lt;p>剩下的系统 就只能是Windows了&lt;/p>
&lt;p>windowxp 优点：磁盘体积小，几乎不占用多少硬盘。适当精简一下就可以控制到几百M，缺点:&lt;/p>
&lt;ul>
&lt;li>主流软件已经不支持，如果日常系统用虚拟机系统的话，这个不是啥问题&lt;/li>
&lt;li>远程桌面不支持3D，ps：virtualbox支持Windows NT 2000 xp win7-11&lt;/li>
&lt;li>部分驱动可能有问题&lt;/li>
&lt;li>不支持vhd启动，可以用Grub4dos+winvblock解决&lt;/li>
&lt;/ul>
&lt;p>Windows 2000 同 WindowsXP ，当年在 xp大行其道的时候，Windows 2000 server做桌面端 别提有多爽，坏念青葱岁月了。&lt;/p>
&lt;p>win7 win8 因为支持compact均可控制到8G左右硬盘占用 部分软件已经不支持win7&lt;/p>
&lt;p>win10 win11 没啥太大差异，win8 以后系统 可以做主系统使用 也可以做虚拟机server使用&lt;/p>
&lt;p>最后的选择&lt;/p>
&lt;p>unraid win2000/xp win11 三选一&lt;/p>
&lt;p>unraid 也不能说过于折腾吧。只是先有几个虚拟机 还在vbox下 懒得迁移&lt;/p>
&lt;p>win2000/xp 驱动问题也懒得弄&lt;/p>
&lt;p>还是 win11 来搞，精简压缩一下就好了。不过不精简 也可以轻松控制到12G以内&lt;/p>
&lt;p>但是windows作为宿主机 性能损耗还是有一些。2022年选择了unraid&lt;/p>
&lt;p>2022-10-07&lt;/p>
&lt;p>unraid 最版本6.11.1 试用版 经历几次莫名其妙的死机，弃用 加上github的依赖麻烦，还需要维护clash梯子，麻烦 最终弃用，数据备份后迁移到pve&lt;/p>
&lt;p>以后有时间 会尝试一下 ventoy + pve vhd的方式&lt;/p></description></item><item><title>做了一次瑞文iq。。。135+</title><link>https://dev.leiyanhui.com/c/iq-ruiwen/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/iq-ruiwen/</guid><description>&lt;h1 id="做了一次瑞文iq135">做了一次瑞文iq。。。135+
&lt;/h1>&lt;p>以为自己老了，不行了。 还好。。&lt;/p>
&lt;p>Wed, 17 Aug 2022 12:01:09 +0000&lt;/p></description></item><item><title>windows下VMware开机自动启动并自动处理解锁问题</title><link>https://dev.leiyanhui.com/c/windows-autostart-vmware/</link><pubDate>Mon, 08 Aug 2022 10:07:44 +0000</pubDate><guid>https://dev.leiyanhui.com/c/windows-autostart-vmware/</guid><description>&lt;h1 id="windows下vmware开机自动启动并自动处理解锁问题">windows下VMware开机自动启动并自动处理解锁问题
&lt;/h1>&lt;p>批处理启动vm虚拟机的方法 很简单 新建一个bat文件：启动虚拟机.bat```
&amp;ldquo;C:\Program Files (x86)\VMware\VMware Workstation\vmrun.exe&amp;rdquo; start &amp;ldquo;E:\VM\Alpine-BT\Alpine-BT.vmx&amp;rdquo; nogui&lt;/p>
&lt;p>&amp;ldquo;C:\Program Files (x86)\VMware\VMware Workstation\vmrun.exe&amp;rdquo; start &amp;ldquo;E:\VM\Alpine-DP\Alpine-DP.vmx&amp;rdquo; nogui
&lt;code>添加到 任务计划 并，不管用户是否登录都要运行 实际操作用发现，偶尔会出现虚拟机被锁死。也就是 目录下出现.lck目录的问题 批处理删除文件夹的命令 是 rd /s /q = linux的rm -rf 但是 rd命令不支持通配符，所以加到循环里面，最终&lt;/code>
for /d %%G in (&amp;ldquo;E:\VM\Alpine-BT*.lck&amp;rdquo;) do rd /s /q &amp;ldquo;%%~G&amp;rdquo;
&amp;ldquo;C:\Program Files (x86)\VMware\VMware Workstation\vmrun.exe&amp;rdquo; start &amp;ldquo;E:\VM\Alpine-BT\Alpine-BT.vmx&amp;rdquo; nogui&lt;/p>
&lt;p>for /d %%G in (&amp;ldquo;E:\VM\Alpine-DP*.lck&amp;rdquo;) do rd /s /q &amp;ldquo;%%~G&amp;rdquo;&lt;/p>
&lt;p>&amp;ldquo;C:\Program Files (x86)\VMware\VMware Workstation\vmrun.exe&amp;rdquo; start &amp;ldquo;E:\VM\Alpine-DP\Alpine-DP.vmx&amp;rdquo; nogui&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>关于GIMP的记录，用于替代Photoshop</title><link>https://dev.leiyanhui.com/c/10/</link><pubDate>Sat, 06 Aug 2022 00:00:00 +0000</pubDate><guid>https://dev.leiyanhui.com/c/10/</guid><description>&lt;p>偶尔还是要用ps 做几个文件，但是Photoshop的的wine 太难搞了，虚拟机下的又难受 今天尝试 用GIMP sudo apt install gimp 也可以在软件中心搜索 gimp 然后安装 GNU Image Manipulation Program （推荐） 同时卸载掉 之前装ps cs6 dpkg -l | grep ukylin sudo dpkg -r ukylin-ps6 sudo dpkg &amp;ndash;purge ukylin-ps6&lt;/p></description></item><item><title>Windows ssh客户端工具的选择 依旧是经典的putty.exe</title><link>https://dev.leiyanhui.com/c/windows-ssh-putty-exe/</link><pubDate>Wed, 03 Aug 2022 22:46:28 +0000</pubDate><guid>https://dev.leiyanhui.com/c/windows-ssh-putty-exe/</guid><description>&lt;p>find shell比较好用的一个，还是国产的。 但是缓慢的启动速度 以及 作者的一些态度，真的无语 最早大概是2017年2018年左右 之前因为他强制升级 而且升级缓慢的问题，邮件反馈一次，高高在上 侮辱性回复。 还有新版本升级 不兼容旧版数据。。。 win自带ssh ，也可以通过bat的方式管理多个 但指纹 和证书 是绑定到 C盘 C:\Users\ 下的 懒得折腾，还是选择用putty 在只有10来个服务器端的时候 还是很好用。而且也支持命令行 但是putty有一个两个缺陷，1是配置文件是保存到注册表的 2是不可以保存密码 2 不是大问题，证书登录 可以解决 配置文件的备份 那就只能是导出注册表了 在 putty.exe 的同目录下 新建一个 “备份putty到注册表文件.bat” 内容&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">reg&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="s2">&amp;#34;HKEY_CURRENT_USER\Software\SimonTatham\PuTTY&amp;#34;&lt;/span> &lt;span class="n">putty&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">session&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pause&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>要管理的主机不是太多的话，也可以选择 MobaXterm&lt;/p>
&lt;p>免费版支持12个回话，自带x11转发和 x11server 支持多种协议&lt;/p>
&lt;p>国内代理商卖的终身版价格&amp;lt;100 元&lt;/p></description></item><item><title>去掉 Windows server 2022以及部分软件提示internet安全配置以及 打开共享文件的exe的安全提醒，</title><link>https://dev.leiyanhui.com/c/windows-server-2022-internetsafe/</link><pubDate>Wed, 03 Aug 2022 22:23:01 +0000</pubDate><guid>https://dev.leiyanhui.com/c/windows-server-2022-internetsafe/</guid><description>&lt;h1 id="去掉-windows-server-2022以及部分软件提示internet安全配置以及-打开共享文件的exe的安全提醒">去掉 Windows server 2022以及部分软件提示internet安全配置以及 打开共享文件的exe的安全提醒
&lt;/h1>&lt;p>是因为作为服务器系统 他的默认internet安全配置太高 点开始菜单 windows附件 打开 ie浏览器 ，忽略那些错误 然后 设置 internet选项 或者直接 运行 inetcpl.cpl 安全 区域： internet 去掉 启用保护模式 自定义级别 修改 修改项目 比较多，主要的有两个看文末截图即可 这个主要是解决 部分软件 提示 internet错误，要你添加一个网址到信任里面。 部分软件添加后 其实也不能用。还是需要降低这个设置。 另外那个 提示 我们无法缺点是谁创建了文件的提示 此文件位于你网络之外的位置 也是在 这配置。安全 区域 本地 站点，添加上 共享服务器 的地址就行了 可以直接输入ip &lt;a class="link" href="https://pages-lyh.oss-accelerate.aliyuncs.com/wp-content/uploads/2022/08/winserver-ie-setting.gif" target="_blank" rel="noopener"
>&lt;img src="https://pages-lyh.oss-accelerate.aliyuncs.com/wp-content/uploads/2022/08/winserver-ie-setting.gif"
loading="lazy"
>&lt;/a>&lt;/p></description></item><item><title>选择Windows server2022 作为主开发系统 并运行在unraid上 all in one 的理由，优势和原因</title><link>https://dev.leiyanhui.com/c/windows-server2022-to-main-os/</link><pubDate>Wed, 03 Aug 2022 21:38:29 +0000</pubDate><guid>https://dev.leiyanhui.com/c/windows-server2022-to-main-os/</guid><description>&lt;h1 id="选择windows-server2022-作为主开发系统--并运行在unraid上-all-in-one-的理由优势和原因">选择Windows server2022 作为主开发系统 并运行在unraid上 all in one 的理由，优势和原因
&lt;/h1>&lt;h2 id="前言">前言
&lt;/h2>&lt;p>个人癖好喜欢折腾操作系统，并未为之付出很多时间和精力&lt;/p>
&lt;h2 id="选择unraid的原因">选择unraid的原因
&lt;/h2>&lt;h4 id="为什么选择all-in-one">为什么选择all in one
&lt;/h4>&lt;blockquote>
&lt;p>· 我喜欢折腾系统，经常尝试重装各种系统，所以虚拟机是少不了的 · 为什么不桌面系统跑vmware或者hyper-v 因为宿主桌面系统也容易被我折腾 · 最后一个主要原因&lt;/p>
&lt;blockquote>
&lt;p>· 我经常外出，主力机是diy机， · 家境贫寒，便携机配置很烂或者只是ipad · 即便是主力机接显示器键鼠等，硬件直通也可以搞定&lt;/p>&lt;/blockquote>&lt;/blockquote>
&lt;h4 id="为什么选择unraid">为什么选择unraid
&lt;/h4>&lt;blockquote>
&lt;p>· 首先硬件不特殊，所以pve对我来说没优势 · 黑果更简单 · 硬件直通和vgpu也简单 · 不牵扯硬盘，不用操心硬盘分区什么的什么的。 · 备份简单，只备份U盘文件就好了 几百M · 破解也不难 安装更简单 · 其他几个all in one 对我来说的缺点有：&lt;/p>
&lt;blockquote>
&lt;p>· pve 硬盘安装webui复杂 唯独集成的虚拟机模板功能还不错，不原生支持docker 不自带文件共享 · 群晖 白的玩不起，黑的遭遇一次莫名其妙无法启动的 因为人在外地无法处理，回来后就直接格式掉了。以后应该只会玩虚拟群晖了，毕竟群晖的移动app还是挺不错的 · ESXI 威联通Nas系统 没玩过&lt;/p>&lt;/blockquote>&lt;/blockquote>
&lt;p>以后可能会选择全盘exfat分区，然后ventoy+alpine.vhd 的方式，不过眼下没还没精力玩耍。因为unraid的黑果实在太方便了。懒得折腾了。正版也就59美元400块钱&lt;/p>
&lt;h4 id="unraid劝退理由">unraid劝退理由
&lt;/h4>&lt;blockquote>
&lt;p>· 有两台电脑，或至少一个pad · 有一个容量256M以上容量的闲置U盘【带uuid的】最好是1G以上的，目前还没有硬盘安装方法，要一直插在上面 · 能接受盗版软件或者舍得买正版&lt;/p>&lt;/blockquote>
&lt;h4 id="小补充关于u盘的问题">小补充：关于U盘的问题
&lt;/h4>&lt;blockquote>
&lt;p>· 主机上一直插着一个U盘 没你想的那么难受。如果是笔记本可以买小巧一点的。 · U盘真心不用太好的，因为就开机和修改配置的时候会读写U盘，而且你可以在开机状态下拔下备份。或者直接tar 或者 在虚拟机里面访问到U盘 自己备份到云或者什么都可以。 · 只要是用过一段时间段的U盘 都是可以的，别是用都没用过的杂牌，两天就坏了那就得不偿失了。我现在用的是 路边卖车载U的地方买的杂牌。 · 更换U盘重新破解并不难，正版换授权也不难 · 但是真的不要长期用读卡器+sd方式 这个方式真的很玄，临时玩玩是绝对没问题的。等玩舒服了，再换一个靠谱的U盘就是了&lt;/p>&lt;/blockquote>
&lt;h2 id="选择windows-server2022原因">选择Windows server2022原因
&lt;/h2>&lt;h4 id="和非win的系统对比">和非win的系统对比
&lt;/h4>&lt;blockquote>
&lt;p>· 远程控制功能 win的rdp独步天下，硬件加速 视频压缩 音频传输，这是Linux mac均没有的。 · 上手难度低&lt;/p>&lt;/blockquote>
&lt;h4 id="和win11">和win11
&lt;/h4>&lt;blockquote>
&lt;p>· 用过几个月win11 实在不知眼下选择他 不选win10的理由是什么 · 右键菜单一项 就可以去掉他了。 · slc的问题，虽然可以绕过，但是麻烦&lt;/p>&lt;/blockquote>
&lt;h4 id="和-win10-以及win10-ltc">和 win10 以及win10 ltc
&lt;/h4>&lt;blockquote>
&lt;p>· 只一个原因 kvm 安装win10的时候 花屏 没法继续&lt;/p>&lt;/blockquote>
&lt;h4 id="和win7">和win7
&lt;/h4>&lt;blockquote>
&lt;p>· 虽然日常软件使用没问题，但是偶尔遇到假死 还是兼容性有一些问题 · 另外一些软件一直不支持了。&lt;/p>&lt;/blockquote>
&lt;h2 id="windows-server-2022-作为桌面系统使用需要处理的几个问题">Windows server 2022 作为桌面系统使用需要处理的几个问题
&lt;/h2>&lt;h4 id="去掉开机ctrlaltdel物理按键和自动登录">去掉开机ctrl+alt+del物理按键和自动登录
&lt;/h4>&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/c/win2022-autologin/" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/win2022-autologin/&lt;/a>&lt;/p>
&lt;h4 id="windows-server-2022-datacenter-无法访问unraid的smb共享的问题">Windows Server 2022 Datacenter 无法访问unraid的smb共享的问题
&lt;/h4>&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/c/windows-server-2022-datacenter-smb/" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/windows-server-2022-datacenter-smb/&lt;/a>&lt;/p>
&lt;h4 id="去掉-windows-server-2022打开共享文件的exe的安全提醒以及部分软件提示internet安全配置">去掉 Windows server 2022打开共享文件的exe的安全提醒，以及部分软件提示internet安全配置
&lt;/h4>&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/c/windows-server-2022-internetsafe/" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/windows-server-2022-internetsafe/&lt;/a>&lt;/p>
&lt;h4 id="输入法">输入法
&lt;/h4>&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/c/inputexe/" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/inputexe/&lt;/a>&lt;/p></description></item><item><title>Windows Server 2022 Datacenter 无法访问unraid的smb共享的问题</title><link>https://dev.leiyanhui.com/c/windows-server-2022-datacenter-smb/</link><pubDate>Wed, 03 Aug 2022 18:55:48 +0000</pubDate><guid>https://dev.leiyanhui.com/c/windows-server-2022-datacenter-smb/</guid><description>&lt;h1 id="windows-server-2022-datacenter-无法访问unraid的smb共享的问题">Windows Server 2022 Datacenter 无法访问unraid的smb共享的问题
&lt;/h1>&lt;p>直接 资源管理右键 映射网络驱动器 \10.0.0.8\SharpYanhui 勾选上 使用其他凭据&lt;/p></description></item><item><title>ubuntu22.04.1LTS/debian11安装golang最新版本 其他linux系统通用</title><link>https://dev.leiyanhui.com/c/ubuntu-install-golang/</link><pubDate>Tue, 02 Aug 2022 23:25:41 +0000</pubDate><guid>https://dev.leiyanhui.com/c/ubuntu-install-golang/</guid><description>&lt;h1 id="ubuntu22041lts安装golang最新版本-其他linux系统通用">ubuntu22.04.1LTS安装golang最新版本 其他linux系统通用
&lt;/h1>&lt;p>不建议 直接用自带的包管理器安装，后续维护会麻烦一点点&lt;/p>
&lt;h2 id="获取最新版本golang">获取最新版本golang
&lt;/h2>&lt;p>&lt;code>https://golang.google.cn/dl/&lt;/code>&lt;/p>
&lt;p>截止2022.10.11 最新稳定版本是 1.9.2
截止2022.12.01 最新稳定版本是 1.9.3&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget -c https://golang.google.cn/dl/go1.19.3.linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar -zxf go1.*.tar.gz -C /opt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm go1.*linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd /opt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /opt/gopath
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 修改环境变量
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano /etc/profile #或者 ~/.profile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在文末添加&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">GO111MODULE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">on&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">GOROOT&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">GOPATH&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gopath&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#export GOPROXY=https://goproxy.io,direct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#export GOPROXY=https://proxy.golang.com.cn,direct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">GOPROXY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">goproxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">GOROOT&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">GOPATH&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>更新生效 查看go情况&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">source /etc/profile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go env
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="其他问题">其他问题
&lt;/h5>&lt;p>source会提示 &lt;code>/etc/profile (line 5): Unsupported use of '='. In fish, please use 'set PATH &amp;quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;quot;'.&lt;/code>
这个是 fish的问题，用bash 就好了&lt;/p>
&lt;h4 id="相关内容">相关内容
&lt;/h4>&lt;p>1、&lt;a class="link" href="https://dev.leiyanhui.com/codeserver/install-codeserver" >安装 vscode online codeserver &lt;/a>&lt;/p>
&lt;p>2、&lt;a class="link" href="https://dev.leiyanhui.com/codeserver/vscode-golang-err-gocache" >codeserver配置go开发环境的错误&lt;/a>&lt;/p>
&lt;p>3、&lt;a class="link" href="https://dev.leiyanhui.com/codeserver/codeserver-url" >code Server url参数 打开指定的工作区或者文件夹&lt;/a>&lt;/p>
&lt;p>4、 &lt;a class="link" href="https://dev.leiyanhui.com/c/ubuntu-install-golang" >ubuntu22.04.1LTS安装golang最新版本&lt;/a>&lt;/p></description></item><item><title>一个通用的网站添加密码的.php</title><link>https://dev.leiyanhui.com/c/128/</link><pubDate>Tue, 02 Aug 2022 23:25:41 +0000</pubDate><guid>https://dev.leiyanhui.com/c/128/</guid><description>&lt;h1 id="一个通用的网站添加密码的php">一个通用的网站添加密码的.php
&lt;/h1>&lt;p>除了nginx apache自带的方法，这里加一个php的。那个php需要控制用户使用，那个php 里面包含一下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">require &amp;#34;inc_index_psw.php&amp;#34;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>代码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="n">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/*&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">在首页中&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">include&lt;/span> &lt;span class="s2">&amp;#34;inc_index_psw.php&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">可以强制输入密码&lt;/span>&lt;span class="n">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span>&lt;span class="n">My_agent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">_SERVER&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;HTTP_USER_AGENT&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="err">先判断&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">strpos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_SERVER&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;HTTP_CF_WORKER&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="s1">&amp;#39;yanhui.com&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span>&lt;span class="bp">false&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">strpos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">My_agent&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;mirror&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span>&lt;span class="bp">false&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="err">判断是&lt;/span>&lt;span class="n">qq或者微信打开的嘛&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">strpos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">My_agent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;QQ/&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">||&lt;/span>&lt;span class="n">strpos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">My_agent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;MicroMessenger&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">!==&lt;/span>&lt;span class="bp">false&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">html_browser&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">die&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="err">获取登录状态&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="n">my_is_logined&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">isset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_COOKIE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;my_is_logined&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="n">my_is_logined&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ne">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_COOKIE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;my_is_logined&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="err">未登录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">my_is_logined&lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="err">开始判断和验证登录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="n">my_chk_login&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">isset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;my_chk_login&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="n">my_chk_login&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ne">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;my_chk_login&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">my_chk_login&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="err">验证登录信息和密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;my_psw&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="s2">&amp;#34;admin&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;my_psw&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="s2">&amp;#34;123456&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;my_psw&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="s2">&amp;#34;123&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;my_psw&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="s2">&amp;#34;abc&amp;#34;&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="err">登录成功&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">setcookie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;my_is_logined&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">365&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">一年有效&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">die&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;script language=JavaScript&amp;gt; location.replace(location.href);&amp;lt;/script&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">die&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;script&amp;gt;alert(&amp;#39;密码错误&amp;#39;);history.go(-1)&amp;lt;/script&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="err">输出登录界面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">html_login&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">die&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">function&lt;/span> &lt;span class="n">html_browser&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">?&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;!&lt;/span>&lt;span class="n">DOCTYPE&lt;/span> &lt;span class="n">html&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="n">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;en&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">head&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">meta&lt;/span> &lt;span class="n">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="err">使用浏览器打开&lt;/span>&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">meta&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&amp;#34;&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;viewport&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">meta&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;yes&amp;#34;&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;apple-mobile-web-app-capable&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">meta&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;black&amp;#34;&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;apple-mobile-web-app-status-bar-style&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">meta&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;format-detection&amp;#34;&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;telephone=no&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">meta&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;false&amp;#34;&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;twcClient&amp;#34;&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;twcClient&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">meta&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;aplus-touch&amp;#34;&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">body&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">margin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">padding&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">body&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">background&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">#fff}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#browser img{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">50&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#browser{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">margin&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="n">px&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">align&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">center&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#contens{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">font&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">weight&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">bold&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">margin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">285&lt;/span>&lt;span class="n">px&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="n">px&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">align&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">center&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">font&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">margin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bottom&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">125&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">guidance&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">font&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">#fff;height:60%;line-height:1.8;padding-left:20px;padding-top:20px;background:url(//gw.alicdn.com/tfs/TB1eSZaNFXXXXb.XXXXXXXXXXXX-750-234.png) center top/contain no-repeat}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">guidance&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">icon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">safari&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">vertical&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">align&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">middle&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">margin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">em&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tip&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">margin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">auto&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">290&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">align&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">center&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">font&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">#2466f4;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAcAQMAAACak0ePAAAABlBMVEUAAAAdYfh+GakkAAAAAXRSTlMAQObYZgAAAA5JREFUCNdjwA8acEkAAAy4AIE4hQq/AAAAAElFTkSuQmCC) left center/auto 15px repeat-x}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tip&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">guidance&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">desc&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">background&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">#fff;padding:0 5px}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">btn&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">display&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">block&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">214&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">height&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">margin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="n">px&lt;/span> &lt;span class="n">auto&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">auto&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">align&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">center&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">font&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">#2466f4;border-radius:20px;border:.5px #2466f4 solid;text-decoration:none}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">head&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">div&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;top-bar-guidance&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="err">点击右上角&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">img&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;//gw.alicdn.com/tfs/TB1xwiUNpXXXXaIXXXXXXXXXXXX-55-55.png&amp;#34;&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;icon-safari&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">span&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;openm&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="n">Safari打开&lt;/span>&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">span&lt;/span>&lt;span class="o">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="err">可以继续浏览本站哦&lt;/span>&lt;span class="o">~&amp;lt;/&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;display: none;&amp;#34;&lt;/span> &lt;span class="n">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;vurl&amp;#34;&lt;/span> &lt;span class="n">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;noreferrer&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">div&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;browser&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="err">避免微信和&lt;/span>&lt;span class="n">QQ屏蔽本站网址&lt;/span>&lt;span class="err">，请理解支持！&lt;/span>&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">div&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;app-download-tip&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">span&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;guidance-desc&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="err">点击右上角或复制网址自行打开&lt;/span>&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">span&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">link&lt;/span> &lt;span class="n">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/static/layui/css/modules/layer/default/layer.css&amp;#34;&lt;/span> &lt;span class="n">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;stylesheet&amp;#34;&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text/css&amp;#34;&lt;/span> &lt;span class="o">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">script&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;https://cdn.bootcdn.net/ajax/libs/jquery/1.9.1/jquery.min.js&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="n">script&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">script&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/static/js/jquery.clipboard.js&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="n">script&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">script&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/static/layui/lay/modules/layer.js&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="n">script&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clipboard&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;?php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="n">curPageURL&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">?&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="s2">&amp;#34; class=&amp;#34;&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">btn&lt;/span>&lt;span class="s2">&amp;#34;&amp;gt;点此复制本站网址&amp;lt;/a&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">script&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text/javascript&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">new&lt;/span> &lt;span class="n">ClipboardJS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;.app-download-btn&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;.app-download-btn&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">click&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">layer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tips&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;复制成功，么么哒&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;.app-download-btn&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tips&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;rgb(38,111,250)&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">500&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">script&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">script&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">function&lt;/span> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">document&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;vurl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">href&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">document&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;vurl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">click&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">window&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">location&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">href&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">userAgent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;QQ/&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ucbrowser://&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;mttbrowser://url=&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;baiduboxapp://browse?url=&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;googlechrome://browse?url=&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;mibrowser:&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;taobao://&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;://&amp;#34;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;alipays://platformapi/startapp?appId=20000067&amp;amp;url=&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ucbrowser://&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;mttbrowser://url=&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;baiduboxapp://browse?url=&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;googlechrome://browse?url=&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;mibrowser:&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;taobao://&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;://&amp;#34;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openu&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;alipays://platformapi/startapp?appId=20000067&amp;amp;url=&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">userAgent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;MicroMessenger&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">userAgent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Android&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">iframe&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">document&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;iframe&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">iframe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">display&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;none&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">document&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iframe&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">script&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="n">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="err">说明：获取完整&lt;/span>&lt;span class="n">URL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">curPageURL&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="n">pageURL&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;http&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_SERVER&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;HTTPS&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;on&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="n">pageURL&lt;/span> &lt;span class="o">.=&lt;/span> &lt;span class="s2">&amp;#34;s&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="n">pageURL&lt;/span> &lt;span class="o">.=&lt;/span> &lt;span class="s2">&amp;#34;://&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">_SERVER&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;SERVER_PORT&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;80&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="n">pageURL&lt;/span> &lt;span class="o">.=&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">_SERVER&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;SERVER_NAME&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">_SERVER&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;SERVER_PORT&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">_SERVER&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;REQUEST_URI&amp;#34;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="n">pageURL&lt;/span> &lt;span class="o">.=&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">_SERVER&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;SERVER_NAME&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">_SERVER&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;REQUEST_URI&amp;#34;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">pageURL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">html_login&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">?&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;!&lt;/span>&lt;span class="n">DOCTYPE&lt;/span> &lt;span class="n">html&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="n">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;zh-cn&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">head&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">meta&lt;/span> &lt;span class="n">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">meta&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;viewport&amp;#34;&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="n">Wellcome&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">亲爱的&lt;/span> &lt;span class="err">请进行访问权限确认&lt;/span> &lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">link&lt;/span> &lt;span class="n">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&amp;#34;&lt;/span> &lt;span class="n">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;stylesheet&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">box&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sizing&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">border&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">box&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">body&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">margin&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">background&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1">#494A5F;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">font&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">weight&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">font&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">family&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Microsoft YaHei&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;宋体&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;Segoe UI&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Lucida Grande&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Helvetica&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Arial&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sans&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">serif&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FreeSans&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Arimo&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#container {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">margin&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">auto&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">div&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">search&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="n">px&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">form&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">position&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">relative&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">300&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">margin&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">auto&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">button&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">border&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">outline&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">height&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">padding&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">left&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">button&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">height&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cursor&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">pointer&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">position&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">absolute&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/*&lt;/span>&lt;span class="err">搜索框&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">bar6&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">bar6&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">border&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">px&lt;/span> &lt;span class="n">solid&lt;/span> &lt;span class="c1">#c5464a;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">border&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">radius&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">background&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1">#CCC;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">top&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">right&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">bar6&lt;/span> &lt;span class="n">button&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">background&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1">#c5464a;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">border&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">radius&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">px&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">px&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">60&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">top&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">right&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">bar6&lt;/span> &lt;span class="n">button&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">before&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">content&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;登录&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">font&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">color&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1">#F9F0DA;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">head&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">div&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;container&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">div&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;search bar6&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">br&lt;/span>&lt;span class="o">&amp;gt;&amp;lt;&lt;/span>&lt;span class="n">br&lt;/span>&lt;span class="o">&amp;gt;&amp;lt;&lt;/span>&lt;span class="n">br&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">form&lt;/span> &lt;span class="n">action&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;POST&amp;#34;&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;myform&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">input&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;hidden&amp;#34;&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;my_chk_login&amp;#34;&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">input&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;my_psw&amp;#34;&lt;/span> &lt;span class="n">placeholder&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;请输入密码...&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">button&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;submit&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="n">button&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">form&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">div&lt;/span> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;font-size: 10px; text-align: center; color: #AAA; &amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">密码&lt;/span> &lt;span class="err">均为&lt;/span> &lt;span class="err">数字&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="err">开头&lt;/span> &lt;span class="err">或者&lt;/span> &lt;span class="err">字母&lt;/span>&lt;span class="n">a开头&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="n">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">?&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>php免费反代google 搭建自己的搜索引擎</title><link>https://dev.leiyanhui.com/c/127/</link><pubDate>Tue, 02 Aug 2022 23:24:44 +0000</pubDate><guid>https://dev.leiyanhui.com/c/127/</guid><description>&lt;h1 id="php免费反代google--搭建自己的搜索引擎">php免费反代google 搭建自己的搜索引擎
&lt;/h1>&lt;p>#引言 因为cf work反代发现一点问题，所以还是换成 #申请免费php空间 暂时用 &lt;code>https://www.yun316.net/&lt;/code> 免费一个月，每个月要去免费续费一次，也可以支付5元 1年免续费 偶尔会出现503错误的哈，但是免费的没啥说的。 #配置环境 php版本 5.5 #伪静态规则[在ftp文件规则下面]&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;IfModule mod_rewrite.c&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RewriteEngine on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RewriteBase /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RewriteRule ^index\.php$ - [L]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RewriteCond %{REQUEST_FILENAME} !-f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RewriteCond %{REQUEST_FILENAME} !-d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RewriteRule . /index.php [L]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/IfModule&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>#下载一个7ghost，配置一下 上传到ftp #为了避免被墙，首页 index.php 添加代码 require &amp;ldquo;inc_index_psw.php&amp;rdquo;; inc_index_psw.php 文件内容&lt;/p>
&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/c/128" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/128&lt;/a> 也可 使用yun316后台的http认证功能&lt;/p>
&lt;h1 id="ssl访问">ssl访问
&lt;/h1>&lt;p>免费空间不支持ssl 总不能明文搜索一些 吧。 所以 套上cf 或者 cdn&lt;/p></description></item><item><title>typecho 后台新文章默认关闭自定义字段 展示（不展开）</title><link>https://dev.leiyanhui.com/c/121/</link><pubDate>Tue, 02 Aug 2022 23:23:52 +0000</pubDate><guid>https://dev.leiyanhui.com/c/121/</guid><description>&lt;h1 id="typecho-后台新文章默认关闭自定义字段-展示不展开">typecho 后台新文章默认关闭自定义字段 展示（不展开）
&lt;/h1>&lt;p>因为某些模板有自定义字段，导致自定义字段 一直展开状态 ，发布按钮 就到了第二页 导致使用起来不方便 admin目录下 custom-fields.php 第7行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;section id=&amp;#34;custom-field&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> class=&amp;#34;typecho-post-option&amp;lt;?php if (empty($defaultFields) &amp;amp;&amp;amp; empty($fields)): ?&amp;gt; fold&amp;lt;?php endif; ?&amp;gt;&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改为&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;section id=&amp;#34;custom-field&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> class=&amp;#34;typecho-post-option fold&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或者 (条件里面 加一个 11 )&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;section id=&amp;#34;custom-field&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> class=&amp;#34;typecho-post-option&amp;lt;?php if (empty($defaultFields) &amp;amp;&amp;amp; empty($fields) || 1==1) : ?&amp;gt; fold&amp;lt;?php endif; ?&amp;gt;&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Win10 LTSC 有一个wsappx appxsvc 进程吃cpu和性能问题</title><link>https://dev.leiyanhui.com/c/120/</link><pubDate>Tue, 02 Aug 2022 23:22:02 +0000</pubDate><guid>https://dev.leiyanhui.com/c/120/</guid><description>&lt;p>这个 应该是 LTSC的系统bug ，微软也好像没有打算修复的意思 这个看名称 是应用商店相关的进程，但是 LTSC哪里来的商店。 网上搜搜很多资料后 发现 这个确实是 微软自己的bug 而解决方法 很奇葩，竟然是和输入法有关系 这是因为在 LTSC 2021 中，微软删除了 Windows 功能体验包的依赖组件，AppXSVC 和 ClipSVC 这俩兄弟是 Microsoft Store 负责安装、部署和更新 UWP 应用的两个服务，经常性后台扫描升级占用 CPU，正常系统只要关闭 Microsoft Store 自动更新卡那么一阵就好了。导致系统服务在尝试部署 Windows 功能体验包更新时卡住或陷入死循环。与此同时新版的中文输入法也依赖于 Windows 功能体验包。 解决方法 &lt;a class="link" href="https://download.csdn.net/download/joyanhui/86263686" target="_blank" rel="noopener"
>https://download.csdn.net/download/joyanhui/86263686&lt;/a> 关闭杀毒软件，然后执行，再从任务栏结束掉 wsappx 就好了。&lt;/p></description></item><item><title>windows下上传软件到appstore</title><link>https://dev.leiyanhui.com/c/windows-to-ppstore/</link><pubDate>Tue, 02 Aug 2022 23:12:32 +0000</pubDate><guid>https://dev.leiyanhui.com/c/windows-to-ppstore/</guid><description>&lt;h1 id="windows下上传软件到appstore">windows下上传软件到appstore
&lt;/h1>&lt;p>&lt;a class="link" href="https://www.yunedit.com/update/appstore/list" target="_blank" rel="noopener"
>https://www.yunedit.com/update/appstore/list&lt;/a>、 上传专用密码 &lt;a class="link" href="https://www.yunedit.com/xueyuan/jx/zuanyongpwd" target="_blank" rel="noopener"
>https://www.yunedit.com/xueyuan/jx/zuanyongpwd&lt;/a> 密码记录保存好&lt;/p></description></item><item><title>Ubuntu切换到deepin折腾记录：微信 qq Photoshop登录</title><link>https://dev.leiyanhui.com/c/19/</link><pubDate>Tue, 02 Aug 2022 22:51:31 +0000</pubDate><guid>https://dev.leiyanhui.com/c/19/</guid><description>&lt;h1 id="ubuntu切换到deepin折腾记录微信-qq-photoshop登录">Ubuntu切换到deepin折腾记录：微信 qq Photoshop登录
&lt;/h1>&lt;p>前面说的更换的原因 上一篇记录：https://dev.leiyanhui.com/c/18 不过粗略看了一下 官方维护的应用商店，好像不少坑。比如edge 无法登录，smartconfig失效。。。 这些使用强度高，并且不需要wine的软件 还是自己去官网动手下载&lt;/p>
&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/linux/wecha-new-debian" target="_blank" rel="noopener"
>2024-03-7 已经有原生版微信，虽然目前之支持uos和麒麟等系统，实际上其他系统也可以用。&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://dev.leiyanhui.com/arch/new-qq2022/" target="_blank" rel="noopener"
>2022年12月07日 腾讯已经发布新版linux qq &lt;/a>&lt;/p>
&lt;h3 id="wine-微信-基本舒服">wine 微信 基本舒服
&lt;/h3>&lt;p>截图可以用，文件发送可以用，系统托盘正常，个别表情和好有名称乱码 不影响，启动略微慢 可以接受&lt;/p>
&lt;h3 id="wine-企业微信-基本舒服">wine 企业微信 基本舒服
&lt;/h3>&lt;p>企业微信 我主要是聊天交流用，其他功能没需求 但是测试了一下 企业切换功能正常 截图和文件功能也都正常&lt;/p>
&lt;h3 id="wine-qq-可以用">wine qq 可以用
&lt;/h3>&lt;p>现在不怎么用qq了，所以没有仔细研究，就修改一下qq的设置，关闭按钮到系统托盘&lt;/p>
&lt;h2 id="wine-photoshop-可用">wine Photoshop 可用
&lt;/h2>&lt;p>提示过期，点继续试用 可以用 第二次打开 就 提示要注册了 打开 home/你的用户名/.deepinwine/Deepin-CS6/drive_c/Program Files/Adobe/Adobe Photoshop 找到一个激活文件替换到 amtlib.dll 要 32位的 下载链接：https://pan.baidu.com/s/1EbLxsN84ElXoB2rXTVhh-A 提取码: tc69 如果分享时效，就自己另外找一个 经过测试 微信截图 的图片 也可以直接贴到这里来，可以说相当完美了 把第三方字体拷贝到 ~/.deepinwine/Deepin-CS6/drive_c/windows/Fonts ps里面也可使用字体了&lt;/p>
&lt;h3 id="wine-淘宝旺旺">wine 淘宝旺旺
&lt;/h3>&lt;p>这个。。没找到。。。暂时用网页版：https://market.m.taobao.com/app/im/chat/index.html?#/&lt;/p>
&lt;h3 id="wine-hbuilderx">wine HBuilderX
&lt;/h3>&lt;p>也没找到&lt;br>
自己折腾 &lt;a class="link" href="https://dev.leiyanhui.com/c/20" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/20&lt;/a>&lt;/p>
&lt;h2 id="搜狗输入法">搜狗输入法
&lt;/h2>&lt;p>依旧也是不支持用户词库同步，皮肤 什么的都可以使用，当然很有限的选择。 中间发生过 自己崩溃了，没有输入，不知怎么情况。重新打开设置里面的键盘 输入法 又重新出现。基本没别的问题&lt;/p>
&lt;h3 id="字体">字体
&lt;/h3>&lt;p>启动器里面 有一个字体管理器 点+ 就可以安装第三方字体了，同时 wine 的字体要 去 ~/.deepinwine/XXXXXXX/drive_c/windows/Fonts&lt;/p>
&lt;h3 id="onedrive">onedrive
&lt;/h3>&lt;p>因为的有一个5T的 校友账号，所以，晚点用 rclone弄一下&lt;/p>
&lt;h3 id="用官网版的软件">用官网版的软件
&lt;/h3>&lt;p>都尽量用官网版本 vscode edge smartgit 百度网盘 wps QQ音乐 等&lt;/p>
&lt;h3 id="使用apk-安卓的软件">使用apk 安卓的软件
&lt;/h3>&lt;h4 id="微信">微信
&lt;/h4>&lt;p>只聊天用&lt;/p>
&lt;h4 id="苹果音乐">苹果音乐
&lt;/h4>&lt;p>本来是想装apk的，发现deepin的安卓应用只能装自家商店，还需要用其他方案才可以，还是用edge 打开，然后点三个点 应用将此网站作为应用。再点应用管理 再创建快捷方式到桌面 和 应用程序 菜单，完美解决 &lt;a class="link" href="https://music.apple.com/cn/listen-now" target="_blank" rel="noopener"
>https://music.apple.com/cn/listen-now&lt;/a> ##卸载多余软件&lt;/p>
&lt;h3 id="libreoffice">libreoffice
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo apt-get remove --purge libreoffice*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="自带的浏览器">自带的浏览器
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo apt remove org.deepin.browser
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="相机等">相机等
&lt;/h3>&lt;p>在左侧启动器 类似开始菜单的地方，右键点击 卸载&lt;/p>
&lt;h2 id="其他未解决问题">其他未解决问题
&lt;/h2>&lt;p>蓝牙键盘鼠标 不显示电量&lt;/p></description></item><item><title>Ubuntu22.04 desktop从体验到格式化 已经更换掉</title><link>https://dev.leiyanhui.com/c/18/</link><pubDate>Tue, 02 Aug 2022 22:50:23 +0000</pubDate><guid>https://dev.leiyanhui.com/c/18/</guid><description>&lt;h1 id="ubuntu2204-desktop从体验到格式化-已经更换掉">Ubuntu22.04 desktop从体验到格式化 已经更换掉
&lt;/h1>&lt;p>一直以来想用Linux替代win做主力系统，一直未能行动，前几天选择了Ubuntu22.04 首先是选的版本 太新了哈。很多软件都各种依赖不符合。加上wine微信 各种难受，最后虚拟机装了一个 deepin 20.5 对应的内核 cat /etc/debian_version 10.10 大概体验了一下 不错 记录一下https://dev.leiyanhui.com/c/19 其实放弃的原因还有很多，因为我在linux下用的软件 主要还是 宝塔、vscode、edge、smartgit，这几个软件用什么系统都一样 需要wine 的软件 微信、企业微信、qq、photoshop、旺旺 当然是要看那边wine方便了，不用想肯定是deepin了 还有就是 很多莫名其妙的卡顿 也烦躁了。 图形界面 按照deb包的时候，等待时间 也漫长 其实主要是 wine 太折腾 没有deepin方便 最后因为linux的远程vnc吃带宽，也启用 说白了 没有黑果方便 也没有win的远程桌面好用&lt;/p></description></item><item><title>ubuntu下虚拟机选择VMware还是virtuabox？</title><link>https://dev.leiyanhui.com/c/14/</link><pubDate>Tue, 02 Aug 2022 22:47:28 +0000</pubDate><guid>https://dev.leiyanhui.com/c/14/</guid><description>&lt;h1 id="ubuntu下虚拟机选择vmware还是virtuabox">ubuntu下虚拟机选择VMware还是virtuabox？
&lt;/h1>&lt;p>先说 virtuabox 安装最新的macos11-13 我没搞定，虽然官网说 支持，但是我一直没明白 连iso都不能启动 怎么继续下去。&lt;/p>
&lt;p>然后我不得不去用了VMware 解锁后安装macos12，过程很艰辛但是总算搞定了。 virtuabox 的linux版本 对win的无缝模式支持。。。好像只有win7 可以，其他版本 win10 win11 没法稳定使用 VMware的无缝模式 直接没有打开 ctrl+shift+u 也没用 其实，。。。如果不跑macos的话 还是 qemu 上文初写于2021年后2022年8月02日 最近发现其实 qemu 完全可以跑macos 已经全部迁移到unraid&lt;/p></description></item><item><title>ubuntu下虚拟机选择VMware还是virtuabox？</title><link>https://dev.leiyanhui.com/c/unraid-ssl/</link><pubDate>Tue, 02 Aug 2022 22:47:28 +0000</pubDate><guid>https://dev.leiyanhui.com/c/unraid-ssl/</guid><description>&lt;h1 id="unraid打开ssl访问-和-宝塔配合自动续签等">UNRAID打开ssl访问 和 宝塔配合自动续签等
&lt;/h1>&lt;p>在设置里面 http：//xxxxx /Settings/ManagementAccess 输入域名 启用 打开u盘的flash文件 修改 \MY-UNRAID\flash\config\ssl\certs 把宝塔证书的内容 合并到 config/ssl/certs/&amp;lt;主机名称&amp;gt;_unraid_bundle.pem 删除 config/ssl/certs/certificate_bundle.pem 重载unraid的web服务 nginx -s reload 后面 配合宝塔自动续签 方法 宝塔内添加一个脚本自动cp 文件内容到 共享 就好了 具体操作 都是基本操作了 不再记录&lt;/p></description></item><item><title>macos+win10切换到ubuntu的全记录</title><link>https://dev.leiyanhui.com/c/5/</link><pubDate>Tue, 07 Sep 2021 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/5/</guid><description>&lt;h1 id="macoswin10切换到ubuntu的全记录">macos+win10切换到ubuntu的全记录
&lt;/h1>&lt;h2 id="前言">前言
&lt;/h2>&lt;p>这些年一直想把系统切换到的ubuntu 但因为某些事情制约一直未能实现。最近在作一个物联网设备的全套（设备 硬件 api app ）开发，实在是眼红linux，趁着第一版app 在苹果审核，这几天没有特殊的事情要做，尽快切换以下系统 # 分区规划和系统规划 主力系统切换到ubuntu，但是以及无法离开macos和win10,鉴于macos只是临时用xcode和appstore上传工具，所以 删掉了硬盘上的黑苹果。保留 vhd 的win10 单独放到 一个分区，同时这个分区也作为 两个系统文件交换的 分区。&lt;/p>
&lt;h1 id="安装ubuntu">安装ubuntu
&lt;/h1>&lt;p>版本当然是选择ubuntu22.04LTS，这是毋庸置疑的，在实践中发现安装的时候 如果选择最小安装，在设置的共享里面 就没有 remote desktop选项，所以这里选择经典推荐。&lt;/p>
&lt;h1 id="简单配置">简单配置
&lt;/h1>&lt;h2 id="添加蓝牙键盘鼠标">添加蓝牙键盘鼠标
&lt;/h2>&lt;h2 id="设置-外观-dock">设置 外观 dock
&lt;/h2>&lt;p>修改到底部，并关闭panel mode&lt;/p>
&lt;h2 id="安装xunlei">安装xunlei
&lt;/h2>&lt;p>链接: &lt;a class="link" href="https://pan.baidu.com/s/1y5ulhPD5YY-TwsBlJ0CMgA" target="_blank" rel="noopener"
>https://pan.baidu.com/s/1y5ulhPD5YY-TwsBlJ0CMgA&lt;/a> 密码: 1b4l 下載後直接&lt;/p>
&lt;pre>&lt;code>dpkg -i com.xunlei.download\_1.0.0.1\_amd64.deb
&lt;/code>&lt;/pre>
&lt;h2 id="安装motrix">安装motrix
&lt;/h2>&lt;p>这个是直接在商店安装&lt;/p>
&lt;h2 id="安装edge">安装edge
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.microsoft.com/zh-cn/edge" target="_blank" rel="noopener"
>https://www.microsoft.com/zh-cn/edge&lt;/a>&lt;/p>
&lt;h2 id="安装百度网盘">安装百度网盘
&lt;/h2>&lt;p>&lt;a class="link" href="https://pan.baidu.com/download" target="_blank" rel="noopener"
>https://pan.baidu.com/download&lt;/a>&lt;/p>
&lt;h2 id="卸载没必要的软件">卸载没必要的软件
&lt;/h2>&lt;pre>&lt;code>sudo apt remove LibreOffice AisleRiot Transmission
sudo apt autoremove
&lt;/code>&lt;/pre>
&lt;h2 id="安装-visual-studio-code">安装 Visual Studio Code
&lt;/h2>&lt;p>&lt;a class="link" href="https://code.visualstudio.com/docs/?dv=linux64" target="_blank" rel="noopener"
>https://code.visualstudio.com/docs/?dv=linux64&lt;/a>_deb&lt;/p>
&lt;h2 id="设置语言">设置语言
&lt;/h2>&lt;p>点设置 区域和语言 管理已经安装的语言，提示 语言支持没有安装完整，点安装 等待&lt;/p>
&lt;h2 id="安装搜狗输入法-现在好像不能同步词库了晚些时候再研究">安装搜狗输入法 现在好像不能同步词库了，晚些时候再研究，
&lt;/h2>&lt;p>&lt;a class="link" href="https://shurufa.sogou.com/linux?r=pinyin" target="_blank" rel="noopener"
>https://shurufa.sogou.com/linux?r=pinyin&lt;/a> &lt;a class="link" href="https://shurufa.sogou.com/linux/guide" target="_blank" rel="noopener"
>https://shurufa.sogou.com/linux/guide&lt;/a>&lt;/p>
&lt;pre>&lt;code>sudo apt-get install fcitx
sudo cp /usr/share/applications/fcitx.desktop /etc/xdg/autostart/
cd 下载/ sudo dpkg -i sogoupinyin\_4.0.1.2123\_amd64.deb
sudo apt install libqt5qml5 libqt5quick5 libqt5quickwidgets5 qml-module-qtquick2 sudo apt install libgsettings-qt1
&lt;/code>&lt;/pre>
&lt;p>重启电脑 ``` ## ubuntu 用户目录改为英文 ``` export LANG=en_US xdg-user-dirs-gtk-update ``` ## 安装VMware 以及win10 macos等 下载 ：https://sysin.org/blog/vmware-workstation-16-linux-slic/ 镜像也使用sysion的 经过我的测试 因为目前还买有macos13 VMwaretools 所以最好还是 macOS Monterey 12.4 (21F79) 或者 11.6 这个记得破解 然后尽可能分配cpu和内存给macos 不要安装到ntfs 或者fat分区 就可以里。ntfs的坑我一整天 ``` yanhui@B150M:/media/yanhui/HDD-NTFS/迅雷下载$ sudo ./VMware-Workstation-Full-16.2.3-19376536.x86_64.bundle ``` VMware对​macos的支持解锁可以用sysin的也推荐这个 &lt;a class="link" href="https://github.com/DrDonk/unlocker/releases" target="_blank" rel="noopener"
>https://github.com/DrDonk/unlocker/releases&lt;/a> 破解后打开VMware，提示 unable to install all modules ```bash cd /MyData/vmware sudo apt-get install git git clone &lt;a class="link" href="https://github.com/mkubecek/vmware-host-modules.git" target="_blank" rel="noopener"
>https://github.com/mkubecek/vmware-host-modules.git&lt;/a> cd vmware-host-modules git checkout workstation-16.2.3 #（查看自己下载的安装包或者在终端下敲vmware -v） sudo make #（如果终端提示没有这个命令，只要安装以下就好，其他类似提示没有啥命令就直接安装，sudo apt-get install make） sudo make install ``` 重启电脑，再次打开VMware 首次使用引导，一定记得 关掉自动更新。 顺带找一个key激活 我用的最后一个 可用 下载macos镜像，经过我的测试 macos13 卡顿比较严重，即便是安装了vmtools依旧卡顿的离谱。 因为本着凑合能用就行的态度，我这里选择了 11.6 并尝试12.4（安装的时候VMware重启,后来再次尝试） 安装的时候，注意 自定配置 单cpu 6核（至少2个核心 最大和你实际核心数量一样）内存给到蓝色推荐的上限，不使用网络（有概率导致无法启动）其他默认推荐 安装完成后，安装VMware tools，然后关机添加网卡，我这里选择桥接，方便路由器映射（即 和 主机以及路由器上其他设备都在在一个网段） macos的具体使用xcode 之类的这里不在记录 ## Ubuntu22 打开ssh远程 ## Ubuntu22 远程桌面配置，使用微软远程桌面协议 打开设置 共享 打开就可以了，如果连不上可以重启一下 systemctl &amp;ndash;user restart gnome-remote-desktop.service 值得注意的是，这里的密码和Ubuntu的系统的密码不同.并且需要Ubuntu本身是登录状态才可以用.如果Ubuntu不能自动登录 或者锁定后，就连不上了。 我选择关闭这个，另外安装 &lt;code>sudo apt install xrdp sudo systemctl start xrdp sudo systemctl enable xrdp #systemctl status xrdp&lt;/code> 这种方式链接 有时候是黑屏，后来经过测试 是需要注销当前用户，或者用其他用户登录。 但是没有Dock 需要安装 sudo apt install gnome-tweaks 打开 tweaks 或者 优化 【优化】-【外观】-【应用程序】选择 Ambiance 【优化】-【外观】-【图标】选择 Humanity 或者 Humanity-Dark ## 安装钉钉 &lt;a class="link" href="https://alidocs.dingtalk.com/i/p/nb9XJlJ7QbxN8GyA/docs/ROGpvEna5YQWmaPgQ156W4ykmK3zoB27" target="_blank" rel="noopener"
>https://alidocs.dingtalk.com/i/p/nb9XJlJ7QbxN8GyA/docs/ROGpvEna5YQWmaPgQ156W4ykmK3zoB27&lt;/a> ## 安装微信 参考 &lt;a class="link" href="https://dev.leiyanhui.com/c/8" target="_blank" rel="noopener"
>https://dev.leiyanhui.com/c/8&lt;/a> ## 安装todesk &lt;a class="link" href="http://www.hellodesk.cn/" target="_blank" rel="noopener"
>http://www.hellodesk.cn/&lt;/a> ## 尝试virtualbox 无缝模式 使用 微信和QQ等 分别安装 win10 和 win7 都选择企业版 测试win7 无缝模式凑合可以用 win10 无缝模式 无法使用。 ## 安装xDroid 直接运行安卓软件 &lt;a class="link" href="https://www.linzhuotech.com/Product/download" target="_blank" rel="noopener"
>https://www.linzhuotech.com/Product/download&lt;/a> 解压后，直接运行 然后重启电脑 参考文章 &lt;a class="link" href="http://www.manongjc.com/detail/18-omuajacfhhkmlia.html" target="_blank" rel="noopener"
>http://www.manongjc.com/detail/18-omuajacfhhkmlia.html&lt;/a> ubuntu下解决Vmware&amp;ndash;unable to install all modules问题_nice_muyu的博客-CSDN博客https://blog.csdn.net/nice_muyu/article/details/124399888 如何在 Mac 和虚拟机上安装 macOS Big Sur、Monterey 和 Ventura - sysin | SYStem INside | 数据中心系统内幕 Running a Mac OS 12 Monterey VM in Virtualbox VMware 15 上Mac虚拟机卡顿情况的优化_铁锤妹妹头发多的博客-CSDN博客_虚拟机mac如何超级流畅 ​&lt;/p></description></item><item><title> edge打开多线程下载</title><link>https://dev.leiyanhui.com/c/edge/</link><pubDate>Mon, 07 Sep 2020 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/edge/</guid><description>&lt;h1 id="edge打开多线程下载">edge打开多线程下载
&lt;/h1>&lt;p>新版Edge，输入edge://flags， 在右上角搜索框搜索Parallel downloading，选择Enable，然后重启edge&lt;/p></description></item><item><title>宝塔内安装code-server并配置ssl</title><link>https://dev.leiyanhui.com/c/bt-code-server-ssl/</link><pubDate>Mon, 07 Sep 2020 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/bt-code-server-ssl/</guid><description>&lt;h1 id="宝塔内安装code-server并配置ssl">宝塔内安装code-server并配置ssl
&lt;/h1>&lt;p>1、下载 和解压&lt;/p>
&lt;p>我挂了 代理&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wget&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">ghproxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">coder&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">7.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">4.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>mkdir /opt/ tar -zxvf code-server* -C /opt/ cd /opt mv code-server* code-server&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">2、基本配置
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>cd /opt/code-server mkdir data extensions nano config.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">内容
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>bind-addr: 0.0.0.0:8485 # 最好改为 127.0.0.1 仅限nginx反代访问 auth: password password: 123456 cert: false user-data-dir: /opt/code-server/data/ extensions-dir: /opt/code-server/extensions/&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">3、启动测试
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>./bin/code-server &amp;ndash;config /opt/code-server/config.yaml 最新版本在 bin目录下 提示下面信息 就ok，如果有条件可以打开 http://你的ip:8485/ 试试，因为我这里是没有权限访问8485这个端口的。所以 直接跳过，ctrl+c 取消运行 ，去宝塔 继续操作 2022-10-04T04:02:39.307Z] info code-server 4.7.1 77bbed48315a7cc275dc05a53d197197928f4b88 [2022-10-04T04:02:39.308Z] info Using user-data-dir /opt/code-server/data [2022-10-04T04:02:39.333Z] info Using config file /opt/code-server/config.yaml [2022-10-04T04:02:39.333Z] info HTTP server listening on http://0.0.0.0:8485/ [2022-10-04T04:02:39.333Z] info - Authentication is enabled [2022-10-04T04:02:39.333Z] info - Using password from /opt/code-server/config.yaml [2022-10-04T04:02:39.333Z] info - Not serving HTTPS&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">4、宝塔中的配置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">为什么要用宝塔，首先是因为这个服务器带着宝塔环境，其次是因为，宝塔有ssl证书自动续签。走ssl的的code-server 就是闹着玩的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">登录宝塔》网站》go项目，添加一个
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可执行文件：/opt/code-server/bin/code-server 端口：8485 和前面一样 命令：/opt/code-server/bin/code-server &amp;ndash;config /opt/code-server/config.yaml 运行用户：建议选择root 域名选一个输入，可以带端口&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">创建完成后，从宝塔正常部署ssl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5、配置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">插件搜索 zh-cn 安装简体中文
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">其他和本地vscode 一样操作
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果还需要更新git 查看 文章：[https://dev.leiyanhui.com/c/centos7-install-new-git/](https://dev.leiyanhui.com/c/centos7-install-new-git/)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>ubuntu 的virtuabox下安装win8.1 enterprise 体验测试</title><link>https://dev.leiyanhui.com/c/15/</link><pubDate>Mon, 09 Sep 2019 13:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/15/</guid><description>&lt;h1 id="ubuntu-的virtuabox下安装win81-enterprise-体验测试">ubuntu 的virtuabox下安装win8.1 enterprise 体验测试
&lt;/h1>&lt;p>先去下载&lt;/p>
&lt;p>&lt;code>ed2k://|file|cn_windows_8.1_enterprise_with_update_x64_dvd_6050374.iso|4317065216|AC8215A13817CC0EC4EA42E5C92E88B7|/&lt;/code>&lt;/p>
&lt;p>安装测试 ，主要是测试无缝模式 测试无缝模式 还好，但是 edge 出现 无法登录的情况 随后 删除&lt;/p>
&lt;p>后来发现 edge无法登录是因为系统更新的问题，更新后可以登录&lt;/p>
&lt;p>win8.1 目前支持基本上所有的 win10 win11的软件，如果设备比较老，并且有win8的驱动的话，不需要应用商店的那些东西 还是建议用win8&lt;/p></description></item><item><title>ubuntu下可视化git工具安装和使用 试过一堆以后 最终选择smartgit</title><link>https://dev.leiyanhui.com/c/13/</link><pubDate>Mon, 09 Sep 2019 13:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/13/</guid><description>&lt;h1 id="ubuntu下可视化git工具安装和使用-试过一堆以后-最终选择smartgit">ubuntu下可视化git工具安装和使用 试过一堆以后 最终选择smartgit
&lt;/h1>&lt;p>试试gitkraken 三平台可用免费，好像也挺漂亮 &lt;code>https://www.gitkraken.com/download/linux-deb&lt;/code> 界面挺漂亮，启动带一个启动画面 有点慢， 汉化 至于汉化，使用 Github 上的 k-skye/gitkraken-chinese 这个仓库即可完成。 方法很简单，安装好之后，使用汉化语言包替换原有的语言包即可。`首先备份官方语言包&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo mv /usr/share/gitkraken/resources/app.asar.unpacked/src/strings.json /usr/share/gitkraken/resources/app.asar.unpacked/src/strings.json.bk
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>从github拉取资源并替换&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo wget https://github.com/k-skye/gitkraken-chinese/raw/master/strings.json -O /usr/share/gitkraken/resources/app.asar.unpacked/src/strings.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果在国内访问 github 有困难&lt;/p>
&lt;p>可使用 ghproxy 提供的 github 国内镜像拉取&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo wget https://ghproxy.com/https://raw.githubusercontent.com/k-skye/gitkraken-chinese/master/strings_8.1.1.json -O /usr/share/gitkraken/resources/app.asar.unpacked/src/strings.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启 gitkraken 然后 发现 使用私有仓库功能 是收费的 。。。。 卸载 &lt;code>sudo dpkg -r gitkraken sudo dpkg --purge gitkraken&lt;/code>
另外还有一个 giteye 同样是三平台&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">collab&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">giteye&lt;/span>&lt;span class="c1">#Linux &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>官网网速很感人 依靠java 抛弃 再尝试一下 &lt;a class="link" href="https://aurees.com/" target="_blank" rel="noopener"
>https://aurees.com/&lt;/a> &lt;code>https://aurees.com/download/AureesSetup-linux.deb&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo dpkg -i 软件包(deb)本地地址
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>提示要安装 gtk-sharp2 libgconf2-4 明显不支持 最后尝试smartgit个人免费，但是每次打开 有1分钟左右不让用，让你确认是不是个人非盈利&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">syntevo&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">smartgit&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>卸载 &lt;code>dpkg -l | grep smartgit sudo dpkg -r smartgit sudo dpkg --purge smartgit&lt;/code> 使用方法 先注册，选择在家，升级那个去掉勾选，就可以免费申请 邮箱收到 一个 smartgit.lic 点帮助 注册需要 选择这个lic文件&lt;/p></description></item><item><title>把阿里云盘挂载到webdav</title><link>https://dev.leiyanhui.com/c/aliyun-webdav/</link><pubDate>Mon, 20 Aug 2018 10:57:59 +0000</pubDate><guid>https://dev.leiyanhui.com/c/aliyun-webdav/</guid><description>&lt;h1 id="aliyun-webdav">aliyun-webdav
&lt;/h1>&lt;p>阿里云盘 依旧没有封掉webdav的访问（2022-08-20），而且不限速（其实也只有区区几M），比起百度云真的好的不是一点半点。 2020年内测的时候，我在百度云充了一个周卡 花了几天时间 把数据全部拉回本地，同时上传到阿里云。但是一直没有搭建阿里云的webdav，是因为担心内测结束后阿里云随时会封掉接口，白忙活一场。目前阿里云盘已经推出了收费服务。不过他家的同步盘真心是难用的很，所以不打算付费。还是自己搭一个webdav白嫖吧。 首先浏览器访问 &lt;a class="link" href="https://www.aliyundrive.com/" target="_blank" rel="noopener"
>https://www.aliyundrive.com/&lt;/a> 登录 F12 &lt;a class="link" href="https://pages-lyh.oss-accelerate.aliyuncs.com/wp-content/uploads/2022/08/aliyunpan.png" target="_blank" rel="noopener"
>&lt;img src="https://pages-lyh.oss-accelerate.aliyuncs.com/wp-content/uploads/2022/08/aliyunpan.png"
loading="lazy"
>&lt;/a> 拿到 refresh_token 这个令牌 在登录管理里面 如果不删除这个浏览器的话，可以一直有效（需要定时刷新） &lt;a class="link" href="https://github.com/messense/aliyundrive-webdav#docker-%E8%BF%90%E8%A1%8C" target="_blank" rel="noopener"
>https://github.com/messense/aliyundrive-webdav#docker-%E8%BF%90%E8%A1%8C&lt;/a> 还是用这个吧，直接docker 就好了 windows运行也可以 &lt;a class="link" href="https://github.com/messense/aliyundrive-webdav/releases/download/v1.10.1/aliyundrive-webdav-v1.10.1.aarch64-pc-windows-msvc.zip" target="_blank" rel="noopener"
>https://github.com/messense/aliyundrive-webdav/releases/download/v1.10.1/aliyundrive-webdav-v1.10.1.aarch64-pc-windows-msvc.zip&lt;/a> 解压得到exe 命令行用法 作者主页有 我把exe放到 F:\GreenSoft\Server\aliyunpan\aliyundrive-webdav.exe 在同目录下 新建文件 aliyunpan.bat 代码如下 aliyundrive-webdav.exe &amp;ndash;port 8098 &amp;ndash;refresh-token XXXXXXX &amp;ndash;no-redirect &amp;ndash;prefer-http-download &amp;ndash;auto-index &amp;ndash;auth-user admin &amp;ndash;auth-password admin bat 添加到开机自动启动 就可以了。 本机打开 http://localhost:8098 可以访问就ok 其他信息很简单 自己看着修改就ok了 在宝塔或者其他地方 弄一个反代，然后就可以开启https 比较简单不再重复&lt;/p></description></item><item><title>VirtualBox 下linux访问物理机windows文件的方法</title><link>https://dev.leiyanhui.com/c/virtualbox-linux-windows/</link><pubDate>Thu, 07 Sep 2017 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/virtualbox-linux-windows/</guid><description>&lt;h1 id="virtualbox-下linux访问物理机windows文件的方法">VirtualBox 下linux访问物理机windows文件的方法
&lt;/h1>&lt;p>先在linux下安装增强工具，虚拟机&amp;gt;设备&amp;gt;安装增强功能&lt;/p>
&lt;ul>
&lt;li>没有自动挂载cdrom，手动挂载一下 &lt;em>mount /dev/cdrom /home/centos/rom&lt;/em>&lt;/li>
&lt;li>然后cd &lt;em>/home/centos/rom&lt;/em> 再运行 sh VBoxLinuxAdditions.run&lt;/li>
&lt;li>可能要提前安装一些依赖 apt install kernel sources kernel-devel gcc 或者 yum安装&lt;/li>
&lt;/ul>
&lt;p>然后添加共享 选择挂载位置，重启虚拟机主机 就可以了&lt;/p>
&lt;p>文件权限 是 770 root所有 ，貌似无法修改&lt;/p></description></item><item><title>typecho修改文字类型默认为私密 关闭默认评论等</title><link>https://dev.leiyanhui.com/c/4/</link><pubDate>Tue, 09 Sep 2014 13:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/4/</guid><description>&lt;h1 id="typecho修改文字类型默认为私密-关闭默认评论等">typecho修改文字类型默认为私密 关闭默认评论等
&lt;/h1>&lt;p>私密 文章只有登录后才可以看到、&lt;br>
打开 admincp/write-post.php&lt;br>
把&lt;br>
&lt;code>|| !$post-&amp;gt;status&lt;/code> 挪到私密 这行&lt;/p>
&lt;p>同时把&lt;code>&amp;lt;?php if ($post-&amp;gt;allow('feed')): ?&amp;gt;checked=&amp;quot;true&amp;quot;&amp;lt;?php endif; ?&amp;gt;&lt;/code> 删掉，也不会出现在聚合里面&lt;/p></description></item><item><title>联系小类</title><link>https://dev.leiyanhui.com/c/1/</link><pubDate>Thu, 09 Sep 2004 13:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/c/1/</guid><description>&lt;p>邮箱：joyanhui@qq.com &lt;a class="link" href="mailto:leiyanhui@gmail.com" >leiyanhui@gmail.com&lt;/a>&lt;/p></description></item></channel></rss>