<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content=" 本文实际写于 2017年，到现在2023年初需求已经发生很多变化。\nhttps://dev.leiyanhui.com/all-in-one/my-netdisk\n搭建私有网盘的一些需求和想法 日常使用环境\nwin8 win11 + ubuntu linux desktop+ ios设备 vbox 虚拟机已经在跑ubuntu+宝塔 多远程环境使用，笔记本性能拉胯 需求：\n自动备份 桌面环境下 某些文件 [只要能挂载 sysnc之类的软件可以简单搞定] 标准目录储存 ios 只要求能访问 ES文件浏览器 支持 smb ftp sftp webdav 等多环境 不是问题 文件实际保存在 windows NTFS分区 ，方便管理维护 可以自动同步到 公用云 阿里云盘 百度云 可以加密储存 视频文件可绕过公用云的 ai 原因你懂的哈 支持在线视频音乐播放 文本文件编辑，md文件编辑 尽可能的替代群晖 抛弃的方案：\n群晖：确实好用，但是 无法使用物理机的文件系统作为数据目录，另外黑群晖也存在不稳定的情况 seafile nextcloud 等私有盘系统，过于繁琐，且免费版限制较多 unraid ： 也不错，但是多数功能还是需要自行解决，在不嵌套虚拟机docker的情况下，同样没太大意义 最终方案\n用来运行宝塔的虚拟机，通过ftp或者smb挂载物理机目录到虚拟机内 基于php+文件系统的 私有云方案 可道云 nextcloud phpEasyVCS 等 虚拟机 linux中挂载本地硬盘 并映射到 虚拟机的指定目录 阿里云 webdav容器+百度云 两种方式 可道云相关功能\n"><title>搭建私有网盘的一些需求和想法</title><link rel=canonical href=https://dev.leiyanhui.com/c/privatecloud/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="搭建私有网盘的一些需求和想法"><meta property='og:description' content=" 本文实际写于 2017年，到现在2023年初需求已经发生很多变化。\nhttps://dev.leiyanhui.com/all-in-one/my-netdisk\n搭建私有网盘的一些需求和想法 日常使用环境\nwin8 win11 + ubuntu linux desktop+ ios设备 vbox 虚拟机已经在跑ubuntu+宝塔 多远程环境使用，笔记本性能拉胯 需求：\n自动备份 桌面环境下 某些文件 [只要能挂载 sysnc之类的软件可以简单搞定] 标准目录储存 ios 只要求能访问 ES文件浏览器 支持 smb ftp sftp webdav 等多环境 不是问题 文件实际保存在 windows NTFS分区 ，方便管理维护 可以自动同步到 公用云 阿里云盘 百度云 可以加密储存 视频文件可绕过公用云的 ai 原因你懂的哈 支持在线视频音乐播放 文本文件编辑，md文件编辑 尽可能的替代群晖 抛弃的方案：\n群晖：确实好用，但是 无法使用物理机的文件系统作为数据目录，另外黑群晖也存在不稳定的情况 seafile nextcloud 等私有盘系统，过于繁琐，且免费版限制较多 unraid ： 也不错，但是多数功能还是需要自行解决，在不嵌套虚拟机docker的情况下，同样没太大意义 最终方案\n用来运行宝塔的虚拟机，通过ftp或者smb挂载物理机目录到虚拟机内 基于php+文件系统的 私有云方案 可道云 nextcloud phpEasyVCS 等 虚拟机 linux中挂载本地硬盘 并映射到 虚拟机的指定目录 阿里云 webdav容器+百度云 两种方式 可道云相关功能\n"><meta property='og:url' content='https://dev.leiyanhui.com/c/privatecloud/'><meta property='og:site_name' content='小类随手记'><meta property='og:type' content='article'><meta property='article:section' content='C'><meta property='article:tag' content='cloud'><meta property='article:tag' content='webdav'><meta property='article:published_time' content='2022-09-07T19:56:11+00:00'><meta property='article:modified_time' content='2022-09-07T19:56:11+00:00'><meta name=twitter:title content="搭建私有网盘的一些需求和想法"><meta name=twitter:description content=" 本文实际写于 2017年，到现在2023年初需求已经发生很多变化。\nhttps://dev.leiyanhui.com/all-in-one/my-netdisk\n搭建私有网盘的一些需求和想法 日常使用环境\nwin8 win11 + ubuntu linux desktop+ ios设备 vbox 虚拟机已经在跑ubuntu+宝塔 多远程环境使用，笔记本性能拉胯 需求：\n自动备份 桌面环境下 某些文件 [只要能挂载 sysnc之类的软件可以简单搞定] 标准目录储存 ios 只要求能访问 ES文件浏览器 支持 smb ftp sftp webdav 等多环境 不是问题 文件实际保存在 windows NTFS分区 ，方便管理维护 可以自动同步到 公用云 阿里云盘 百度云 可以加密储存 视频文件可绕过公用云的 ai 原因你懂的哈 支持在线视频音乐播放 文本文件编辑，md文件编辑 尽可能的替代群晖 抛弃的方案：\n群晖：确实好用，但是 无法使用物理机的文件系统作为数据目录，另外黑群晖也存在不稳定的情况 seafile nextcloud 等私有盘系统，过于繁琐，且免费版限制较多 unraid ： 也不错，但是多数功能还是需要自行解决，在不嵌套虚拟机docker的情况下，同样没太大意义 最终方案\n用来运行宝塔的虚拟机，通过ftp或者smb挂载物理机目录到虚拟机内 基于php+文件系统的 私有云方案 可道云 nextcloud phpEasyVCS 等 虚拟机 linux中挂载本地硬盘 并映射到 虚拟机的指定目录 阿里云 webdav容器+百度云 两种方式 可道云相关功能\n"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_6049d840d4e2d14.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🐟</span></figure><div class=site-meta><h1 class=site-name><a href=/>小类随手记</a></h1><h2 class=site-description>just so so.</h2></div></header><ol class=menu-social><li><a href=https://github.com/joyanhui/dev.leiyanhui.com-src target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>列表</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>站内搜索</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>links</span></a></li><li><a href=/contact/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>contact</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#最终的选择>最终的选择</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/c/privatecloud/>搭建私有网盘的一些需求和想法</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2022-09-07</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 1 分钟</time></div></footer></div></header><section class=article-content><blockquote><p>本文实际写于 2017年，到现在2023年初需求已经发生很多变化。</p></blockquote><p><a class=link href=https://dev.leiyanhui.com/all-in-one/my-netdisk target=_blank rel=noopener>https://dev.leiyanhui.com/all-in-one/my-netdisk</a></p><h1 id=搭建私有网盘的一些需求和想法>搭建私有网盘的一些需求和想法</h1><p>日常使用环境</p><ul><li>win8 win11 + ubuntu linux desktop+ ios设备</li><li>vbox 虚拟机已经在跑ubuntu+宝塔</li><li>多远程环境使用，笔记本性能拉胯</li></ul><p>需求：</p><ul><li>自动备份 桌面环境下 某些文件 [只要能挂载 sysnc之类的软件可以简单搞定]</li><li>标准目录储存</li><li>ios 只要求能访问 ES文件浏览器 支持 smb ftp sftp webdav 等多环境 不是问题</li><li>文件实际保存在 windows NTFS分区 ，方便管理维护</li><li>可以自动同步到 公用云 阿里云盘 百度云</li><li>可以加密储存</li><li>视频文件可绕过公用云的 ai 原因你懂的哈</li><li>支持在线视频音乐播放</li><li>文本文件编辑，md文件编辑</li><li>尽可能的替代群晖</li></ul><p>抛弃的方案：</p><ul><li>群晖：确实好用，但是 无法使用物理机的文件系统作为数据目录，另外黑群晖也存在不稳定的情况</li><li>seafile nextcloud 等私有盘系统，过于繁琐，且免费版限制较多</li><li>unraid ： 也不错，但是多数功能还是需要自行解决，在不嵌套虚拟机docker的情况下，同样没太大意义</li></ul><p>最终方案</p><ul><li>用来运行宝塔的虚拟机，通过ftp或者smb挂载物理机目录到虚拟机内</li><li>基于php+文件系统的 私有云方案 可道云 nextcloud phpEasyVCS 等</li><li>虚拟机 linux中挂载本地硬盘 并映射到 虚拟机的指定目录</li><li>阿里云 webdav容器+百度云 两种方式</li></ul><p>可道云相关功能</p><ul><li>kodbox支持 sqlite 支持 mysql 也有一个版本[KodExplorer]可以无数据库运行，但是不支持webdav[可以用phpEasyVCS 解决]</li><li>kodbox的redis 不支持密码连接 [小事情] 自己用访问量不大，也可以用文件缓存 或者Memcached</li><li>免费版本 除了用户数限制之外，定时备份不支持文件备份[可以用linux shell 解决]</li><li>支持在线编辑md 文本</li><li>没找到 文件加密储存方法，</li><li>视频文件可以用自定义后缀名绕过公用云</li><li>机密文件 自行用zip加密算了</li><li>经过简单测试 KodExplorer 可以保持原目录结构保持文件 KodBox拆分日期保存。</li><li>也就是 KodBox 反而集合了seafile的缺点，还自带了owncloud 和nexcloud的php低效缺点 。不符合我需求，KodExplorer 不错，但是不支持 oss和百度云云挂载，也不支持webdev 不过这些都可以解决。KodExplorer 更像是一个加强版的在线文件管理器。KodExplorer完全开源，版权可以修改，但是会有一个修改提示。</li></ul><p>中间的</p><ul><li>在线文件关联 简单编辑 音影视频播放 KodExplorer</li><li>webdav 使用php 或者apache/nginx功能搞定</li><li>手机ios访问，es文件管理器 用sftp 或webdav</li><li>Windows系统访问，sftp挂载 或者 webdav挂载</li><li>公用云备份功能：阿里云盘目前可以用webdav暂时先用，百度云盘也尽量搞定防止阿里云盘失效，坚果云虽支持webdav但是免费版限制太多，收费版速度一般般，阿里oss 储存其他一些文件</li><li>远程下载功能：远程桌面直接迅雷，后期单独搭建一个Aria</li><li>公有云备份功能1：宝塔自带的备份到oss功能</li><li>公有云备份功能2：rclone挂载</li><li></li></ul><h2 id=最终的选择>最终的选择</h2><p>自己用golang写了一个 webdav，部分环境用nginx做webdav</p></section><footer class=article-footer><section class=article-tags><a href=/tags/cloud/>Cloud</a>
<a href=/tags/webdav/>Webdav</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>最后更新于 2022-09-07 19:56 UTC</span></section></footer></article><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//xiao-lei-sui-shou-ji.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2025 小类随手记</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>